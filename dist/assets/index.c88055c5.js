(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Ul(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?i=>!!n[i.toLowerCase()]:i=>!!n[i]}function Bl(e){if(_e(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=qe(r)?Rm(r):Bl(r);if(i)for(const o in i)t[o]=i[o]}return t}else{if(qe(e))return e;if(Le(e))return e}}const vm=/;(?![^(]*\))/g,Tm=/:([^]+)/,Im=/\/\*.*?\*\//gs;function Rm(e){const t={};return e.replace(Im,"").split(vm).forEach(n=>{if(n){const r=n.split(Tm);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Vl(e){let t="";if(qe(e))t=e;else if(_e(e))for(let n=0;n<e.length;n++){const r=Vl(e[n]);r&&(t+=r+" ")}else if(Le(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const wm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Am=Ul(wm);function ih(e){return!!e||e===""}const kn=e=>qe(e)?e:e==null?"":_e(e)||Le(e)&&(e.toString===lh||!ve(e.toString))?JSON.stringify(e,oh,2):String(e),oh=(e,t)=>t&&t.__v_isRef?oh(e,t.value):kr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:ah(t)?{[`Set(${t.size})`]:[...t.values()]}:Le(t)&&!_e(t)&&!ch(t)?String(t):t,xe={},Fr=[],zt=()=>{},Om=()=>!1,Sm=/^on[^a-z]/,Oa=e=>Sm.test(e),Fl=e=>e.startsWith("onUpdate:"),ut=Object.assign,kl=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},bm=Object.prototype.hasOwnProperty,we=(e,t)=>bm.call(e,t),_e=Array.isArray,kr=e=>Sa(e)==="[object Map]",ah=e=>Sa(e)==="[object Set]",ve=e=>typeof e=="function",qe=e=>typeof e=="string",$l=e=>typeof e=="symbol",Le=e=>e!==null&&typeof e=="object",sh=e=>Le(e)&&ve(e.then)&&ve(e.catch),lh=Object.prototype.toString,Sa=e=>lh.call(e),Cm=e=>Sa(e).slice(8,-1),ch=e=>Sa(e)==="[object Object]",Hl=e=>qe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,jo=Ul(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ba=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},xm=/-(\w)/g,cn=ba(e=>e.replace(xm,(t,n)=>n?n.toUpperCase():"")),Mm=/\B([A-Z])/g,ci=ba(e=>e.replace(Mm,"-$1").toLowerCase()),Ca=ba(e=>e.charAt(0).toUpperCase()+e.slice(1)),as=ba(e=>e?`on${Ca(e)}`:""),eo=(e,t)=>!Object.is(e,t),Xo=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},oa=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},el=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Vc;const Lm=()=>Vc||(Vc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Ut;class Pm{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ut,!t&&Ut&&(this.index=(Ut.scopes||(Ut.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Ut;try{return Ut=this,t()}finally{Ut=n}}}on(){Ut=this}off(){Ut=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Dm(e,t=Ut){t&&t.active&&t.effects.push(e)}function Nm(){return Ut}const zl=e=>{const t=new Set(e);return t.w=0,t.n=0,t},uh=e=>(e.w&jn)>0,fh=e=>(e.n&jn)>0,Gm=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=jn},Um=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];uh(i)&&!fh(i)?i.delete(e):t[n++]=i,i.w&=~jn,i.n&=~jn}t.length=n}},tl=new WeakMap;let Vi=0,jn=1;const nl=30;let Vt;const mr=Symbol(""),rl=Symbol("");class ql{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Dm(this,r)}run(){if(!this.active)return this.fn();let t=Vt,n=qn;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Vt,Vt=this,qn=!0,jn=1<<++Vi,Vi<=nl?Gm(this):Fc(this),this.fn()}finally{Vi<=nl&&Um(this),jn=1<<--Vi,Vt=this.parent,qn=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Vt===this?this.deferStop=!0:this.active&&(Fc(this),this.onStop&&this.onStop(),this.active=!1)}}function Fc(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let qn=!0;const dh=[];function ui(){dh.push(qn),qn=!1}function fi(){const e=dh.pop();qn=e===void 0?!0:e}function Et(e,t,n){if(qn&&Vt){let r=tl.get(e);r||tl.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=zl()),hh(i)}}function hh(e,t){let n=!1;Vi<=nl?fh(e)||(e.n|=jn,n=!uh(e)):n=!e.has(Vt),n&&(e.add(Vt),Vt.deps.push(e))}function Tn(e,t,n,r,i,o){const a=tl.get(e);if(!a)return;let s=[];if(t==="clear")s=[...a.values()];else if(n==="length"&&_e(e)){const l=Number(r);a.forEach((c,u)=>{(u==="length"||u>=l)&&s.push(c)})}else switch(n!==void 0&&s.push(a.get(n)),t){case"add":_e(e)?Hl(n)&&s.push(a.get("length")):(s.push(a.get(mr)),kr(e)&&s.push(a.get(rl)));break;case"delete":_e(e)||(s.push(a.get(mr)),kr(e)&&s.push(a.get(rl)));break;case"set":kr(e)&&s.push(a.get(mr));break}if(s.length===1)s[0]&&il(s[0]);else{const l=[];for(const c of s)c&&l.push(...c);il(zl(l))}}function il(e,t){const n=_e(e)?e:[...e];for(const r of n)r.computed&&kc(r);for(const r of n)r.computed||kc(r)}function kc(e,t){(e!==Vt||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Bm=Ul("__proto__,__v_isRef,__isVue"),ph=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter($l)),Vm=Wl(),Fm=Wl(!1,!0),km=Wl(!0),$c=$m();function $m(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=Ae(this);for(let o=0,a=this.length;o<a;o++)Et(r,"get",o+"");const i=r[t](...n);return i===-1||i===!1?r[t](...n.map(Ae)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){ui();const r=Ae(this)[t].apply(this,n);return fi(),r}}),e}function Hm(e){const t=Ae(this);return Et(t,"has",e),t.hasOwnProperty(e)}function Wl(e=!1,t=!1){return function(r,i,o){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(e?t?oE:yh:t?_h:Eh).get(r))return r;const a=_e(r);if(!e){if(a&&we($c,i))return Reflect.get($c,i,o);if(i==="hasOwnProperty")return Hm}const s=Reflect.get(r,i,o);return($l(i)?ph.has(i):Bm(i))||(e||Et(r,"get",i),t)?s:nt(s)?a&&Hl(i)?s:s.value:Le(s)?e?vh(s):yo(s):s}}const zm=gh(),qm=gh(!0);function gh(e=!1){return function(n,r,i,o){let a=n[r];if(Kr(a)&&nt(a)&&!nt(i))return!1;if(!e&&(!aa(i)&&!Kr(i)&&(a=Ae(a),i=Ae(i)),!_e(n)&&nt(a)&&!nt(i)))return a.value=i,!0;const s=_e(n)&&Hl(r)?Number(r)<n.length:we(n,r),l=Reflect.set(n,r,i,o);return n===Ae(o)&&(s?eo(i,a)&&Tn(n,"set",r,i):Tn(n,"add",r,i)),l}}function Wm(e,t){const n=we(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&Tn(e,"delete",t,void 0),r}function Ym(e,t){const n=Reflect.has(e,t);return(!$l(t)||!ph.has(t))&&Et(e,"has",t),n}function jm(e){return Et(e,"iterate",_e(e)?"length":mr),Reflect.ownKeys(e)}const mh={get:Vm,set:zm,deleteProperty:Wm,has:Ym,ownKeys:jm},Xm={get:km,set(e,t){return!0},deleteProperty(e,t){return!0}},Zm=ut({},mh,{get:Fm,set:qm}),Yl=e=>e,xa=e=>Reflect.getPrototypeOf(e);function Ro(e,t,n=!1,r=!1){e=e.__v_raw;const i=Ae(e),o=Ae(t);n||(t!==o&&Et(i,"get",t),Et(i,"get",o));const{has:a}=xa(i),s=r?Yl:n?Zl:to;if(a.call(i,t))return s(e.get(t));if(a.call(i,o))return s(e.get(o));e!==i&&e.get(t)}function wo(e,t=!1){const n=this.__v_raw,r=Ae(n),i=Ae(e);return t||(e!==i&&Et(r,"has",e),Et(r,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function Ao(e,t=!1){return e=e.__v_raw,!t&&Et(Ae(e),"iterate",mr),Reflect.get(e,"size",e)}function Hc(e){e=Ae(e);const t=Ae(this);return xa(t).has.call(t,e)||(t.add(e),Tn(t,"add",e,e)),this}function zc(e,t){t=Ae(t);const n=Ae(this),{has:r,get:i}=xa(n);let o=r.call(n,e);o||(e=Ae(e),o=r.call(n,e));const a=i.call(n,e);return n.set(e,t),o?eo(t,a)&&Tn(n,"set",e,t):Tn(n,"add",e,t),this}function qc(e){const t=Ae(this),{has:n,get:r}=xa(t);let i=n.call(t,e);i||(e=Ae(e),i=n.call(t,e)),r&&r.call(t,e);const o=t.delete(e);return i&&Tn(t,"delete",e,void 0),o}function Wc(){const e=Ae(this),t=e.size!==0,n=e.clear();return t&&Tn(e,"clear",void 0,void 0),n}function Oo(e,t){return function(r,i){const o=this,a=o.__v_raw,s=Ae(a),l=t?Yl:e?Zl:to;return!e&&Et(s,"iterate",mr),a.forEach((c,u)=>r.call(i,l(c),l(u),o))}}function So(e,t,n){return function(...r){const i=this.__v_raw,o=Ae(i),a=kr(o),s=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,c=i[e](...r),u=n?Yl:t?Zl:to;return!t&&Et(o,"iterate",l?rl:mr),{next(){const{value:f,done:d}=c.next();return d?{value:f,done:d}:{value:s?[u(f[0]),u(f[1])]:u(f),done:d}},[Symbol.iterator](){return this}}}}function xn(e){return function(...t){return e==="delete"?!1:this}}function Km(){const e={get(o){return Ro(this,o)},get size(){return Ao(this)},has:wo,add:Hc,set:zc,delete:qc,clear:Wc,forEach:Oo(!1,!1)},t={get(o){return Ro(this,o,!1,!0)},get size(){return Ao(this)},has:wo,add:Hc,set:zc,delete:qc,clear:Wc,forEach:Oo(!1,!0)},n={get(o){return Ro(this,o,!0)},get size(){return Ao(this,!0)},has(o){return wo.call(this,o,!0)},add:xn("add"),set:xn("set"),delete:xn("delete"),clear:xn("clear"),forEach:Oo(!0,!1)},r={get(o){return Ro(this,o,!0,!0)},get size(){return Ao(this,!0)},has(o){return wo.call(this,o,!0)},add:xn("add"),set:xn("set"),delete:xn("delete"),clear:xn("clear"),forEach:Oo(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=So(o,!1,!1),n[o]=So(o,!0,!1),t[o]=So(o,!1,!0),r[o]=So(o,!0,!0)}),[e,n,t,r]}const[Qm,Jm,eE,tE]=Km();function jl(e,t){const n=t?e?tE:eE:e?Jm:Qm;return(r,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(we(n,i)&&i in r?n:r,i,o)}const nE={get:jl(!1,!1)},rE={get:jl(!1,!0)},iE={get:jl(!0,!1)},Eh=new WeakMap,_h=new WeakMap,yh=new WeakMap,oE=new WeakMap;function aE(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function sE(e){return e.__v_skip||!Object.isExtensible(e)?0:aE(Cm(e))}function yo(e){return Kr(e)?e:Xl(e,!1,mh,nE,Eh)}function lE(e){return Xl(e,!1,Zm,rE,_h)}function vh(e){return Xl(e,!0,Xm,iE,yh)}function Xl(e,t,n,r,i){if(!Le(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const a=sE(e);if(a===0)return e;const s=new Proxy(e,a===2?r:n);return i.set(e,s),s}function $r(e){return Kr(e)?$r(e.__v_raw):!!(e&&e.__v_isReactive)}function Kr(e){return!!(e&&e.__v_isReadonly)}function aa(e){return!!(e&&e.__v_isShallow)}function Th(e){return $r(e)||Kr(e)}function Ae(e){const t=e&&e.__v_raw;return t?Ae(t):e}function Ih(e){return oa(e,"__v_skip",!0),e}const to=e=>Le(e)?yo(e):e,Zl=e=>Le(e)?vh(e):e;function Rh(e){qn&&Vt&&(e=Ae(e),hh(e.dep||(e.dep=zl())))}function wh(e,t){e=Ae(e);const n=e.dep;n&&il(n)}function nt(e){return!!(e&&e.__v_isRef===!0)}function cE(e){return Ah(e,!1)}function uE(e){return Ah(e,!0)}function Ah(e,t){return nt(e)?e:new fE(e,t)}class fE{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Ae(t),this._value=n?t:to(t)}get value(){return Rh(this),this._value}set value(t){const n=this.__v_isShallow||aa(t)||Kr(t);t=n?t:Ae(t),eo(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:to(t),wh(this))}}function Hr(e){return nt(e)?e.value:e}const dE={get:(e,t,n)=>Hr(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return nt(i)&&!nt(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function Oh(e){return $r(e)?e:new Proxy(e,dE)}var Sh;class hE{constructor(t,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[Sh]=!1,this._dirty=!0,this.effect=new ql(t,()=>{this._dirty||(this._dirty=!0,wh(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const t=Ae(this);return Rh(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}Sh="__v_isReadonly";function pE(e,t,n=!1){let r,i;const o=ve(e);return o?(r=e,i=zt):(r=e.get,i=e.set),new hE(r,i,o||!i,n)}function Wn(e,t,n,r){let i;try{i=r?e(...r):e()}catch(o){Ma(o,t,n)}return i}function qt(e,t,n,r){if(ve(e)){const o=Wn(e,t,n,r);return o&&sh(o)&&o.catch(a=>{Ma(a,t,n)}),o}const i=[];for(let o=0;o<e.length;o++)i.push(qt(e[o],t,n,r));return i}function Ma(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const a=t.proxy,s=n;for(;o;){const c=o.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,a,s)===!1)return}o=o.parent}const l=t.appContext.config.errorHandler;if(l){Wn(l,null,10,[e,a,s]);return}}gE(e,n,i,r)}function gE(e,t,n,r=!0){console.error(e)}let no=!1,ol=!1;const tt=[];let Jt=0;const zr=[];let En=null,sr=0;const bh=Promise.resolve();let Kl=null;function Ch(e){const t=Kl||bh;return e?t.then(this?e.bind(this):e):t}function mE(e){let t=Jt+1,n=tt.length;for(;t<n;){const r=t+n>>>1;ro(tt[r])<e?t=r+1:n=r}return t}function Ql(e){(!tt.length||!tt.includes(e,no&&e.allowRecurse?Jt+1:Jt))&&(e.id==null?tt.push(e):tt.splice(mE(e.id),0,e),xh())}function xh(){!no&&!ol&&(ol=!0,Kl=bh.then(Lh))}function EE(e){const t=tt.indexOf(e);t>Jt&&tt.splice(t,1)}function _E(e){_e(e)?zr.push(...e):(!En||!En.includes(e,e.allowRecurse?sr+1:sr))&&zr.push(e),xh()}function Yc(e,t=no?Jt+1:0){for(;t<tt.length;t++){const n=tt[t];n&&n.pre&&(tt.splice(t,1),t--,n())}}function Mh(e){if(zr.length){const t=[...new Set(zr)];if(zr.length=0,En){En.push(...t);return}for(En=t,En.sort((n,r)=>ro(n)-ro(r)),sr=0;sr<En.length;sr++)En[sr]();En=null,sr=0}}const ro=e=>e.id==null?1/0:e.id,yE=(e,t)=>{const n=ro(e)-ro(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Lh(e){ol=!1,no=!0,tt.sort(yE);const t=zt;try{for(Jt=0;Jt<tt.length;Jt++){const n=tt[Jt];n&&n.active!==!1&&Wn(n,null,14)}}finally{Jt=0,tt.length=0,Mh(),no=!1,Kl=null,(tt.length||zr.length)&&Lh()}}function vE(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||xe;let i=n;const o=t.startsWith("update:"),a=o&&t.slice(7);if(a&&a in r){const u=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:d}=r[u]||xe;d&&(i=n.map(h=>qe(h)?h.trim():h)),f&&(i=n.map(el))}let s,l=r[s=as(t)]||r[s=as(cn(t))];!l&&o&&(l=r[s=as(ci(t))]),l&&qt(l,e,6,i);const c=r[s+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,qt(c,e,6,i)}}function Ph(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const o=e.emits;let a={},s=!1;if(!ve(e)){const l=c=>{const u=Ph(c,t,!0);u&&(s=!0,ut(a,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!s?(Le(e)&&r.set(e,null),null):(_e(o)?o.forEach(l=>a[l]=null):ut(a,o),Le(e)&&r.set(e,a),a)}function La(e,t){return!e||!Oa(t)?!1:(t=t.slice(2).replace(/Once$/,""),we(e,t[0].toLowerCase()+t.slice(1))||we(e,ci(t))||we(e,t))}let rt=null,Pa=null;function sa(e){const t=rt;return rt=e,Pa=e&&e.type.__scopeId||null,t}function Da(e){Pa=e}function Na(){Pa=null}function et(e,t=rt,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&nu(-1);const o=sa(t);let a;try{a=e(...i)}finally{sa(o),r._d&&nu(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function ss(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[a],slots:s,attrs:l,emit:c,render:u,renderCache:f,data:d,setupState:h,ctx:p,inheritAttrs:g}=e;let m,y;const _=sa(e);try{if(n.shapeFlag&4){const v=i||r;m=Kt(u.call(v,v,f,o,h,d,p)),y=l}else{const v=t;m=Kt(v.length>1?v(o,{attrs:l,slots:s,emit:c}):v(o,null)),y=t.props?l:TE(l)}}catch(v){Wi.length=0,Ma(v,e,1),m=pe(Xn)}let E=m;if(y&&g!==!1){const v=Object.keys(y),{shapeFlag:T}=E;v.length&&T&7&&(a&&v.some(Fl)&&(y=IE(y,a)),E=Jr(E,y))}return n.dirs&&(E=Jr(E),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&(E.transition=n.transition),m=E,sa(_),m}const TE=e=>{let t;for(const n in e)(n==="class"||n==="style"||Oa(n))&&((t||(t={}))[n]=e[n]);return t},IE=(e,t)=>{const n={};for(const r in e)(!Fl(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function RE(e,t,n){const{props:r,children:i,component:o}=e,{props:a,children:s,patchFlag:l}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?jc(r,a,c):!!a;if(l&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const d=u[f];if(a[d]!==r[d]&&!La(c,d))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:r===a?!1:r?a?jc(r,a,c):!0:!!a;return!1}function jc(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!La(n,o))return!0}return!1}function wE({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const AE=e=>e.__isSuspense;function OE(e,t){t&&t.pendingBranch?_e(e)?t.effects.push(...e):t.effects.push(e):_E(e)}function Zo(e,t){if(Fe){let n=Fe.provides;const r=Fe.parent&&Fe.parent.provides;r===n&&(n=Fe.provides=Object.create(r)),n[e]=t}}function vn(e,t,n=!1){const r=Fe||rt;if(r){const i=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&ve(t)?t.call(r.proxy):t}}const bo={};function Ko(e,t,n){return Dh(e,t,n)}function Dh(e,t,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:a}=xe){const s=Nm()===(Fe==null?void 0:Fe.scope)?Fe:null;let l,c=!1,u=!1;if(nt(e)?(l=()=>e.value,c=aa(e)):$r(e)?(l=()=>e,r=!0):_e(e)?(u=!0,c=e.some(E=>$r(E)||aa(E)),l=()=>e.map(E=>{if(nt(E))return E.value;if($r(E))return ur(E);if(ve(E))return Wn(E,s,2)})):ve(e)?t?l=()=>Wn(e,s,2):l=()=>{if(!(s&&s.isUnmounted))return f&&f(),qt(e,s,3,[d])}:l=zt,t&&r){const E=l;l=()=>ur(E())}let f,d=E=>{f=y.onStop=()=>{Wn(E,s,4)}},h;if(ao)if(d=zt,t?n&&qt(t,s,3,[l(),u?[]:void 0,d]):l(),i==="sync"){const E=v_();h=E.__watcherHandles||(E.__watcherHandles=[])}else return zt;let p=u?new Array(e.length).fill(bo):bo;const g=()=>{if(!!y.active)if(t){const E=y.run();(r||c||(u?E.some((v,T)=>eo(v,p[T])):eo(E,p)))&&(f&&f(),qt(t,s,3,[E,p===bo?void 0:u&&p[0]===bo?[]:p,d]),p=E)}else y.run()};g.allowRecurse=!!t;let m;i==="sync"?m=g:i==="post"?m=()=>pt(g,s&&s.suspense):(g.pre=!0,s&&(g.id=s.uid),m=()=>Ql(g));const y=new ql(l,m);t?n?g():p=y.run():i==="post"?pt(y.run.bind(y),s&&s.suspense):y.run();const _=()=>{y.stop(),s&&s.scope&&kl(s.scope.effects,y)};return h&&h.push(_),_}function SE(e,t,n){const r=this.proxy,i=qe(e)?e.includes(".")?Nh(r,e):()=>r[e]:e.bind(r,r);let o;ve(t)?o=t:(o=t.handler,n=t);const a=Fe;ei(this);const s=Dh(i,o.bind(r),n);return a?ei(a):Er(),s}function Nh(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function ur(e,t){if(!Le(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),nt(e))ur(e.value,t);else if(_e(e))for(let n=0;n<e.length;n++)ur(e[n],t);else if(ah(e)||kr(e))e.forEach(n=>{ur(n,t)});else if(ch(e))for(const n in e)ur(e[n],t);return e}function Gh(e){return ve(e)?{setup:e,name:e.name}:e}const zi=e=>!!e.type.__asyncLoader,Uh=e=>e.type.__isKeepAlive;function bE(e,t){Bh(e,"a",t)}function CE(e,t){Bh(e,"da",t)}function Bh(e,t,n=Fe){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Ga(t,r,n),n){let i=n.parent;for(;i&&i.parent;)Uh(i.parent.vnode)&&xE(r,t,n,i),i=i.parent}}function xE(e,t,n,r){const i=Ga(t,e,r,!0);Vh(()=>{kl(r[t],i)},n)}function Ga(e,t,n=Fe,r=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...a)=>{if(n.isUnmounted)return;ui(),ei(n);const s=qt(t,n,e,a);return Er(),fi(),s});return r?i.unshift(o):i.push(o),o}}const An=e=>(t,n=Fe)=>(!ao||e==="sp")&&Ga(e,(...r)=>t(...r),n),ME=An("bm"),LE=An("m"),PE=An("bu"),DE=An("u"),NE=An("bum"),Vh=An("um"),GE=An("sp"),UE=An("rtg"),BE=An("rtc");function VE(e,t=Fe){Ga("ec",e,t)}function Qr(e,t){const n=rt;if(n===null)return e;const r=Va(n)||n.proxy,i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,s,l,c=xe]=t[o];a&&(ve(a)&&(a={mounted:a,updated:a}),a.deep&&ur(s),i.push({dir:a,instance:r,value:s,oldValue:void 0,arg:l,modifiers:c}))}return e}function rr(e,t,n,r){const i=e.dirs,o=t&&t.dirs;for(let a=0;a<i.length;a++){const s=i[a];o&&(s.oldValue=o[a].value);let l=s.dir[r];l&&(ui(),qt(l,n,8,[e.el,s,e,t]),fi())}}const Fh="components";function Pe(e,t){return kE(Fh,e,!0,t)||e}const FE=Symbol();function kE(e,t,n=!0,r=!1){const i=rt||Fe;if(i){const o=i.type;if(e===Fh){const s=E_(o,!1);if(s&&(s===t||s===cn(t)||s===Ca(cn(t))))return o}const a=Xc(i[e]||o[e],t)||Xc(i.appContext[e],t);return!a&&r?o:a}}function Xc(e,t){return e&&(e[t]||e[cn(t)]||e[Ca(cn(t))])}function io(e,t,n,r){let i;const o=n&&n[r];if(_e(e)||qe(e)){i=new Array(e.length);for(let a=0,s=e.length;a<s;a++)i[a]=t(e[a],a,void 0,o&&o[a])}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,o&&o[a])}else if(Le(e))if(e[Symbol.iterator])i=Array.from(e,(a,s)=>t(a,s,void 0,o&&o[s]));else{const a=Object.keys(e);i=new Array(a.length);for(let s=0,l=a.length;s<l;s++){const c=a[s];i[s]=t(e[c],c,s,o&&o[s])}}else i=[];return n&&(n[r]=i),i}function $E(e,t,n={},r,i){if(rt.isCE||rt.parent&&zi(rt.parent)&&rt.parent.isCE)return t!=="default"&&(n.name=t),pe("slot",n,r&&r());let o=e[t];o&&o._c&&(o._d=!1),Oe();const a=o&&kh(o(n)),s=tc(Me,{key:n.key||a&&a.key||`_${t}`},a||(r?r():[]),a&&e._===1?64:-2);return!i&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),o&&o._c&&(o._d=!0),s}function kh(e){return e.some(t=>ca(t)?!(t.type===Xn||t.type===Me&&!kh(t.children)):!0)?e:null}const al=e=>e?Jh(e)?Va(e)||e.proxy:al(e.parent):null,qi=ut(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>al(e.parent),$root:e=>al(e.root),$emit:e=>e.emit,$options:e=>Jl(e),$forceUpdate:e=>e.f||(e.f=()=>Ql(e.update)),$nextTick:e=>e.n||(e.n=Ch.bind(e.proxy)),$watch:e=>SE.bind(e)}),ls=(e,t)=>e!==xe&&!e.__isScriptSetup&&we(e,t),HE={get({_:e},t){const{ctx:n,setupState:r,data:i,props:o,accessCache:a,type:s,appContext:l}=e;let c;if(t[0]!=="$"){const h=a[t];if(h!==void 0)switch(h){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return o[t]}else{if(ls(r,t))return a[t]=1,r[t];if(i!==xe&&we(i,t))return a[t]=2,i[t];if((c=e.propsOptions[0])&&we(c,t))return a[t]=3,o[t];if(n!==xe&&we(n,t))return a[t]=4,n[t];sl&&(a[t]=0)}}const u=qi[t];let f,d;if(u)return t==="$attrs"&&Et(e,"get",t),u(e);if((f=s.__cssModules)&&(f=f[t]))return f;if(n!==xe&&we(n,t))return a[t]=4,n[t];if(d=l.config.globalProperties,we(d,t))return d[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:o}=e;return ls(i,t)?(i[t]=n,!0):r!==xe&&we(r,t)?(r[t]=n,!0):we(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:o}},a){let s;return!!n[a]||e!==xe&&we(e,a)||ls(t,a)||(s=o[0])&&we(s,a)||we(r,a)||we(qi,a)||we(i.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:we(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let sl=!0;function zE(e){const t=Jl(e),n=e.proxy,r=e.ctx;sl=!1,t.beforeCreate&&Zc(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:a,watch:s,provide:l,inject:c,created:u,beforeMount:f,mounted:d,beforeUpdate:h,updated:p,activated:g,deactivated:m,beforeDestroy:y,beforeUnmount:_,destroyed:E,unmounted:v,render:T,renderTracked:R,renderTriggered:O,errorCaptured:w,serverPrefetch:S,expose:M,inheritAttrs:P,components:C,directives:z,filters:L}=t;if(c&&qE(c,r,null,e.appContext.config.unwrapInjectedRef),a)for(const b in a){const N=a[b];ve(N)&&(r[b]=N.bind(n))}if(i){const b=i.call(n,n);Le(b)&&(e.data=yo(b))}if(sl=!0,o)for(const b in o){const N=o[b],H=ve(N)?N.bind(n,n):ve(N.get)?N.get.bind(n,n):zt,Q=!ve(N)&&ve(N.set)?N.set.bind(n):zt,Y=Mt({get:H,set:Q});Object.defineProperty(r,b,{enumerable:!0,configurable:!0,get:()=>Y.value,set:oe=>Y.value=oe})}if(s)for(const b in s)$h(s[b],r,n,b);if(l){const b=ve(l)?l.call(n):l;Reflect.ownKeys(b).forEach(N=>{Zo(N,b[N])})}u&&Zc(u,e,"c");function x(b,N){_e(N)?N.forEach(H=>b(H.bind(n))):N&&b(N.bind(n))}if(x(ME,f),x(LE,d),x(PE,h),x(DE,p),x(bE,g),x(CE,m),x(VE,w),x(BE,R),x(UE,O),x(NE,_),x(Vh,v),x(GE,S),_e(M))if(M.length){const b=e.exposed||(e.exposed={});M.forEach(N=>{Object.defineProperty(b,N,{get:()=>n[N],set:H=>n[N]=H})})}else e.exposed||(e.exposed={});T&&e.render===zt&&(e.render=T),P!=null&&(e.inheritAttrs=P),C&&(e.components=C),z&&(e.directives=z)}function qE(e,t,n=zt,r=!1){_e(e)&&(e=ll(e));for(const i in e){const o=e[i];let a;Le(o)?"default"in o?a=vn(o.from||i,o.default,!0):a=vn(o.from||i):a=vn(o),nt(a)&&r?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:s=>a.value=s}):t[i]=a}}function Zc(e,t,n){qt(_e(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function $h(e,t,n,r){const i=r.includes(".")?Nh(n,r):()=>n[r];if(qe(e)){const o=t[e];ve(o)&&Ko(i,o)}else if(ve(e))Ko(i,e.bind(n));else if(Le(e))if(_e(e))e.forEach(o=>$h(o,t,n,r));else{const o=ve(e.handler)?e.handler.bind(n):t[e.handler];ve(o)&&Ko(i,o,e)}}function Jl(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,s=o.get(t);let l;return s?l=s:!i.length&&!n&&!r?l=t:(l={},i.length&&i.forEach(c=>la(l,c,a,!0)),la(l,t,a)),Le(t)&&o.set(t,l),l}function la(e,t,n,r=!1){const{mixins:i,extends:o}=t;o&&la(e,o,n,!0),i&&i.forEach(a=>la(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const s=WE[a]||n&&n[a];e[a]=s?s(e[a],t[a]):t[a]}return e}const WE={data:Kc,props:ar,emits:ar,methods:ar,computed:ar,beforeCreate:at,created:at,beforeMount:at,mounted:at,beforeUpdate:at,updated:at,beforeDestroy:at,beforeUnmount:at,destroyed:at,unmounted:at,activated:at,deactivated:at,errorCaptured:at,serverPrefetch:at,components:ar,directives:ar,watch:jE,provide:Kc,inject:YE};function Kc(e,t){return t?e?function(){return ut(ve(e)?e.call(this,this):e,ve(t)?t.call(this,this):t)}:t:e}function YE(e,t){return ar(ll(e),ll(t))}function ll(e){if(_e(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function at(e,t){return e?[...new Set([].concat(e,t))]:t}function ar(e,t){return e?ut(ut(Object.create(null),e),t):t}function jE(e,t){if(!e)return t;if(!t)return e;const n=ut(Object.create(null),e);for(const r in t)n[r]=at(e[r],t[r]);return n}function XE(e,t,n,r=!1){const i={},o={};oa(o,Ba,1),e.propsDefaults=Object.create(null),Hh(e,t,i,o);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);n?e.props=r?i:lE(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function ZE(e,t,n,r){const{props:i,attrs:o,vnode:{patchFlag:a}}=e,s=Ae(i),[l]=e.propsOptions;let c=!1;if((r||a>0)&&!(a&16)){if(a&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let d=u[f];if(La(e.emitsOptions,d))continue;const h=t[d];if(l)if(we(o,d))h!==o[d]&&(o[d]=h,c=!0);else{const p=cn(d);i[p]=cl(l,s,p,h,e,!1)}else h!==o[d]&&(o[d]=h,c=!0)}}}else{Hh(e,t,i,o)&&(c=!0);let u;for(const f in s)(!t||!we(t,f)&&((u=ci(f))===f||!we(t,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(i[f]=cl(l,s,f,void 0,e,!0)):delete i[f]);if(o!==s)for(const f in o)(!t||!we(t,f)&&!0)&&(delete o[f],c=!0)}c&&Tn(e,"set","$attrs")}function Hh(e,t,n,r){const[i,o]=e.propsOptions;let a=!1,s;if(t)for(let l in t){if(jo(l))continue;const c=t[l];let u;i&&we(i,u=cn(l))?!o||!o.includes(u)?n[u]=c:(s||(s={}))[u]=c:La(e.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,a=!0)}if(o){const l=Ae(n),c=s||xe;for(let u=0;u<o.length;u++){const f=o[u];n[f]=cl(i,l,f,c[f],e,!we(c,f))}}return a}function cl(e,t,n,r,i,o){const a=e[n];if(a!=null){const s=we(a,"default");if(s&&r===void 0){const l=a.default;if(a.type!==Function&&ve(l)){const{propsDefaults:c}=i;n in c?r=c[n]:(ei(i),r=c[n]=l.call(null,t),Er())}else r=l}a[0]&&(o&&!s?r=!1:a[1]&&(r===""||r===ci(n))&&(r=!0))}return r}function zh(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const o=e.props,a={},s=[];let l=!1;if(!ve(e)){const u=f=>{l=!0;const[d,h]=zh(f,t,!0);ut(a,d),h&&s.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!o&&!l)return Le(e)&&r.set(e,Fr),Fr;if(_e(o))for(let u=0;u<o.length;u++){const f=cn(o[u]);Qc(f)&&(a[f]=xe)}else if(o)for(const u in o){const f=cn(u);if(Qc(f)){const d=o[u],h=a[f]=_e(d)||ve(d)?{type:d}:Object.assign({},d);if(h){const p=tu(Boolean,h.type),g=tu(String,h.type);h[0]=p>-1,h[1]=g<0||p<g,(p>-1||we(h,"default"))&&s.push(f)}}}const c=[a,s];return Le(e)&&r.set(e,c),c}function Qc(e){return e[0]!=="$"}function Jc(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function eu(e,t){return Jc(e)===Jc(t)}function tu(e,t){return _e(t)?t.findIndex(n=>eu(n,e)):ve(t)&&eu(t,e)?0:-1}const qh=e=>e[0]==="_"||e==="$stable",ec=e=>_e(e)?e.map(Kt):[Kt(e)],KE=(e,t,n)=>{if(t._n)return t;const r=et((...i)=>ec(t(...i)),n);return r._c=!1,r},Wh=(e,t,n)=>{const r=e._ctx;for(const i in e){if(qh(i))continue;const o=e[i];if(ve(o))t[i]=KE(i,o,r);else if(o!=null){const a=ec(o);t[i]=()=>a}}},Yh=(e,t)=>{const n=ec(t);e.slots.default=()=>n},QE=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Ae(t),oa(t,"_",n)):Wh(t,e.slots={})}else e.slots={},t&&Yh(e,t);oa(e.slots,Ba,1)},JE=(e,t,n)=>{const{vnode:r,slots:i}=e;let o=!0,a=xe;if(r.shapeFlag&32){const s=t._;s?n&&s===1?o=!1:(ut(i,t),!n&&s===1&&delete i._):(o=!t.$stable,Wh(t,i)),a=t}else t&&(Yh(e,t),a={default:1});if(o)for(const s in i)!qh(s)&&!(s in a)&&delete i[s]};function jh(){return{app:null,config:{isNativeTag:Om,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let e_=0;function t_(e,t){return function(r,i=null){ve(r)||(r=Object.assign({},r)),i!=null&&!Le(i)&&(i=null);const o=jh(),a=new Set;let s=!1;const l=o.app={_uid:e_++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:T_,get config(){return o.config},set config(c){},use(c,...u){return a.has(c)||(c&&ve(c.install)?(a.add(c),c.install(l,...u)):ve(c)&&(a.add(c),c(l,...u))),l},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),l},component(c,u){return u?(o.components[c]=u,l):o.components[c]},directive(c,u){return u?(o.directives[c]=u,l):o.directives[c]},mount(c,u,f){if(!s){const d=pe(r,i);return d.appContext=o,u&&t?t(d,c):e(d,c,f),s=!0,l._container=c,c.__vue_app__=l,Va(d.component)||d.component.proxy}},unmount(){s&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return o.provides[c]=u,l}};return l}}function ul(e,t,n,r,i=!1){if(_e(e)){e.forEach((d,h)=>ul(d,t&&(_e(t)?t[h]:t),n,r,i));return}if(zi(r)&&!i)return;const o=r.shapeFlag&4?Va(r.component)||r.component.proxy:r.el,a=i?null:o,{i:s,r:l}=e,c=t&&t.r,u=s.refs===xe?s.refs={}:s.refs,f=s.setupState;if(c!=null&&c!==l&&(qe(c)?(u[c]=null,we(f,c)&&(f[c]=null)):nt(c)&&(c.value=null)),ve(l))Wn(l,s,12,[a,u]);else{const d=qe(l),h=nt(l);if(d||h){const p=()=>{if(e.f){const g=d?we(f,l)?f[l]:u[l]:l.value;i?_e(g)&&kl(g,o):_e(g)?g.includes(o)||g.push(o):d?(u[l]=[o],we(f,l)&&(f[l]=u[l])):(l.value=[o],e.k&&(u[e.k]=l.value))}else d?(u[l]=a,we(f,l)&&(f[l]=a)):h&&(l.value=a,e.k&&(u[e.k]=a))};a?(p.id=-1,pt(p,n)):p()}}}const pt=OE;function n_(e){return r_(e)}function r_(e,t){const n=Lm();n.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:a,createText:s,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:d,setScopeId:h=zt,insertStaticContent:p}=e,g=(I,A,V,U=null,W=null,k=null,ee=!1,Z=null,K=!!A.dynamicChildren)=>{if(I===A)return;I&&!Ai(I,A)&&(U=$(I),oe(I,W,k,!0),I=null),A.patchFlag===-2&&(K=!1,A.dynamicChildren=null);const{type:J,ref:se,shapeFlag:re}=A;switch(J){case Ua:m(I,A,V,U);break;case Xn:y(I,A,V,U);break;case cs:I==null&&_(A,V,U,ee);break;case Me:C(I,A,V,U,W,k,ee,Z,K);break;default:re&1?T(I,A,V,U,W,k,ee,Z,K):re&6?z(I,A,V,U,W,k,ee,Z,K):(re&64||re&128)&&J.process(I,A,V,U,W,k,ee,Z,K,ne)}se!=null&&W&&ul(se,I&&I.ref,k,A||I,!A)},m=(I,A,V,U)=>{if(I==null)r(A.el=s(A.children),V,U);else{const W=A.el=I.el;A.children!==I.children&&c(W,A.children)}},y=(I,A,V,U)=>{I==null?r(A.el=l(A.children||""),V,U):A.el=I.el},_=(I,A,V,U)=>{[I.el,I.anchor]=p(I.children,A,V,U,I.el,I.anchor)},E=({el:I,anchor:A},V,U)=>{let W;for(;I&&I!==A;)W=d(I),r(I,V,U),I=W;r(A,V,U)},v=({el:I,anchor:A})=>{let V;for(;I&&I!==A;)V=d(I),i(I),I=V;i(A)},T=(I,A,V,U,W,k,ee,Z,K)=>{ee=ee||A.type==="svg",I==null?R(A,V,U,W,k,ee,Z,K):S(I,A,W,k,ee,Z,K)},R=(I,A,V,U,W,k,ee,Z)=>{let K,J;const{type:se,props:re,shapeFlag:le,transition:ue,dirs:ye}=I;if(K=I.el=a(I.type,k,re&&re.is,re),le&8?u(K,I.children):le&16&&w(I.children,K,null,U,W,k&&se!=="foreignObject",ee,Z),ye&&rr(I,null,U,"created"),O(K,I,I.scopeId,ee,U),re){for(const Re in re)Re!=="value"&&!jo(Re)&&o(K,Re,null,re[Re],k,I.children,U,W,D);"value"in re&&o(K,"value",null,re.value),(J=re.onVnodeBeforeMount)&&Xt(J,U,I)}ye&&rr(I,null,U,"beforeMount");const Ie=(!W||W&&!W.pendingBranch)&&ue&&!ue.persisted;Ie&&ue.beforeEnter(K),r(K,A,V),((J=re&&re.onVnodeMounted)||Ie||ye)&&pt(()=>{J&&Xt(J,U,I),Ie&&ue.enter(K),ye&&rr(I,null,U,"mounted")},W)},O=(I,A,V,U,W)=>{if(V&&h(I,V),U)for(let k=0;k<U.length;k++)h(I,U[k]);if(W){let k=W.subTree;if(A===k){const ee=W.vnode;O(I,ee,ee.scopeId,ee.slotScopeIds,W.parent)}}},w=(I,A,V,U,W,k,ee,Z,K=0)=>{for(let J=K;J<I.length;J++){const se=I[J]=Z?Bn(I[J]):Kt(I[J]);g(null,se,A,V,U,W,k,ee,Z)}},S=(I,A,V,U,W,k,ee)=>{const Z=A.el=I.el;let{patchFlag:K,dynamicChildren:J,dirs:se}=A;K|=I.patchFlag&16;const re=I.props||xe,le=A.props||xe;let ue;V&&ir(V,!1),(ue=le.onVnodeBeforeUpdate)&&Xt(ue,V,A,I),se&&rr(A,I,V,"beforeUpdate"),V&&ir(V,!0);const ye=W&&A.type!=="foreignObject";if(J?M(I.dynamicChildren,J,Z,V,U,ye,k):ee||N(I,A,Z,null,V,U,ye,k,!1),K>0){if(K&16)P(Z,A,re,le,V,U,W);else if(K&2&&re.class!==le.class&&o(Z,"class",null,le.class,W),K&4&&o(Z,"style",re.style,le.style,W),K&8){const Ie=A.dynamicProps;for(let Re=0;Re<Ie.length;Re++){const fe=Ie[Re],ze=re[fe],wt=le[fe];(wt!==ze||fe==="value")&&o(Z,fe,ze,wt,W,I.children,V,U,D)}}K&1&&I.children!==A.children&&u(Z,A.children)}else!ee&&J==null&&P(Z,A,re,le,V,U,W);((ue=le.onVnodeUpdated)||se)&&pt(()=>{ue&&Xt(ue,V,A,I),se&&rr(A,I,V,"updated")},U)},M=(I,A,V,U,W,k,ee)=>{for(let Z=0;Z<A.length;Z++){const K=I[Z],J=A[Z],se=K.el&&(K.type===Me||!Ai(K,J)||K.shapeFlag&70)?f(K.el):V;g(K,J,se,null,U,W,k,ee,!0)}},P=(I,A,V,U,W,k,ee)=>{if(V!==U){if(V!==xe)for(const Z in V)!jo(Z)&&!(Z in U)&&o(I,Z,V[Z],null,ee,A.children,W,k,D);for(const Z in U){if(jo(Z))continue;const K=U[Z],J=V[Z];K!==J&&Z!=="value"&&o(I,Z,J,K,ee,A.children,W,k,D)}"value"in U&&o(I,"value",V.value,U.value)}},C=(I,A,V,U,W,k,ee,Z,K)=>{const J=A.el=I?I.el:s(""),se=A.anchor=I?I.anchor:s("");let{patchFlag:re,dynamicChildren:le,slotScopeIds:ue}=A;ue&&(Z=Z?Z.concat(ue):ue),I==null?(r(J,V,U),r(se,V,U),w(A.children,V,se,W,k,ee,Z,K)):re>0&&re&64&&le&&I.dynamicChildren?(M(I.dynamicChildren,le,V,W,k,ee,Z),(A.key!=null||W&&A===W.subTree)&&Xh(I,A,!0)):N(I,A,V,se,W,k,ee,Z,K)},z=(I,A,V,U,W,k,ee,Z,K)=>{A.slotScopeIds=Z,I==null?A.shapeFlag&512?W.ctx.activate(A,V,U,ee,K):L(A,V,U,W,k,ee,K):q(I,A,K)},L=(I,A,V,U,W,k,ee)=>{const Z=I.component=d_(I,U,W);if(Uh(I)&&(Z.ctx.renderer=ne),h_(Z),Z.asyncDep){if(W&&W.registerDep(Z,x),!I.el){const K=Z.subTree=pe(Xn);y(null,K,A,V)}return}x(Z,I,A,V,W,k,ee)},q=(I,A,V)=>{const U=A.component=I.component;if(RE(I,A,V))if(U.asyncDep&&!U.asyncResolved){b(U,A,V);return}else U.next=A,EE(U.update),U.update();else A.el=I.el,U.vnode=A},x=(I,A,V,U,W,k,ee)=>{const Z=()=>{if(I.isMounted){let{next:se,bu:re,u:le,parent:ue,vnode:ye}=I,Ie=se,Re;ir(I,!1),se?(se.el=ye.el,b(I,se,ee)):se=ye,re&&Xo(re),(Re=se.props&&se.props.onVnodeBeforeUpdate)&&Xt(Re,ue,se,ye),ir(I,!0);const fe=ss(I),ze=I.subTree;I.subTree=fe,g(ze,fe,f(ze.el),$(ze),I,W,k),se.el=fe.el,Ie===null&&wE(I,fe.el),le&&pt(le,W),(Re=se.props&&se.props.onVnodeUpdated)&&pt(()=>Xt(Re,ue,se,ye),W)}else{let se;const{el:re,props:le}=A,{bm:ue,m:ye,parent:Ie}=I,Re=zi(A);if(ir(I,!1),ue&&Xo(ue),!Re&&(se=le&&le.onVnodeBeforeMount)&&Xt(se,Ie,A),ir(I,!0),re&&ae){const fe=()=>{I.subTree=ss(I),ae(re,I.subTree,I,W,null)};Re?A.type.__asyncLoader().then(()=>!I.isUnmounted&&fe()):fe()}else{const fe=I.subTree=ss(I);g(null,fe,V,U,I,W,k),A.el=fe.el}if(ye&&pt(ye,W),!Re&&(se=le&&le.onVnodeMounted)){const fe=A;pt(()=>Xt(se,Ie,fe),W)}(A.shapeFlag&256||Ie&&zi(Ie.vnode)&&Ie.vnode.shapeFlag&256)&&I.a&&pt(I.a,W),I.isMounted=!0,A=V=U=null}},K=I.effect=new ql(Z,()=>Ql(J),I.scope),J=I.update=()=>K.run();J.id=I.uid,ir(I,!0),J()},b=(I,A,V)=>{A.component=I;const U=I.vnode.props;I.vnode=A,I.next=null,ZE(I,A.props,U,V),JE(I,A.children,V),ui(),Yc(),fi()},N=(I,A,V,U,W,k,ee,Z,K=!1)=>{const J=I&&I.children,se=I?I.shapeFlag:0,re=A.children,{patchFlag:le,shapeFlag:ue}=A;if(le>0){if(le&128){Q(J,re,V,U,W,k,ee,Z,K);return}else if(le&256){H(J,re,V,U,W,k,ee,Z,K);return}}ue&8?(se&16&&D(J,W,k),re!==J&&u(V,re)):se&16?ue&16?Q(J,re,V,U,W,k,ee,Z,K):D(J,W,k,!0):(se&8&&u(V,""),ue&16&&w(re,V,U,W,k,ee,Z,K))},H=(I,A,V,U,W,k,ee,Z,K)=>{I=I||Fr,A=A||Fr;const J=I.length,se=A.length,re=Math.min(J,se);let le;for(le=0;le<re;le++){const ue=A[le]=K?Bn(A[le]):Kt(A[le]);g(I[le],ue,V,null,W,k,ee,Z,K)}J>se?D(I,W,k,!0,!1,re):w(A,V,U,W,k,ee,Z,K,re)},Q=(I,A,V,U,W,k,ee,Z,K)=>{let J=0;const se=A.length;let re=I.length-1,le=se-1;for(;J<=re&&J<=le;){const ue=I[J],ye=A[J]=K?Bn(A[J]):Kt(A[J]);if(Ai(ue,ye))g(ue,ye,V,null,W,k,ee,Z,K);else break;J++}for(;J<=re&&J<=le;){const ue=I[re],ye=A[le]=K?Bn(A[le]):Kt(A[le]);if(Ai(ue,ye))g(ue,ye,V,null,W,k,ee,Z,K);else break;re--,le--}if(J>re){if(J<=le){const ue=le+1,ye=ue<se?A[ue].el:U;for(;J<=le;)g(null,A[J]=K?Bn(A[J]):Kt(A[J]),V,ye,W,k,ee,Z,K),J++}}else if(J>le)for(;J<=re;)oe(I[J],W,k,!0),J++;else{const ue=J,ye=J,Ie=new Map;for(J=ye;J<=le;J++){const me=A[J]=K?Bn(A[J]):Kt(A[J]);me.key!=null&&Ie.set(me.key,J)}let Re,fe=0;const ze=le-ye+1;let wt=!1,jt=0;const Je=new Array(ze);for(J=0;J<ze;J++)Je[J]=0;for(J=ue;J<=re;J++){const me=I[J];if(fe>=ze){oe(me,W,k,!0);continue}let it;if(me.key!=null)it=Ie.get(me.key);else for(Re=ye;Re<=le;Re++)if(Je[Re-ye]===0&&Ai(me,A[Re])){it=Re;break}it===void 0?oe(me,W,k,!0):(Je[it-ye]=J+1,it>=jt?jt=it:wt=!0,g(me,A[it],V,null,W,k,ee,Z,K),fe++)}const yt=wt?i_(Je):Fr;for(Re=yt.length-1,J=ze-1;J>=0;J--){const me=ye+J,it=A[me],Qn=me+1<se?A[me+1].el:U;Je[J]===0?g(null,it,V,Qn,W,k,ee,Z,K):wt&&(Re<0||J!==yt[Re]?Y(it,V,Qn,2):Re--)}}},Y=(I,A,V,U,W=null)=>{const{el:k,type:ee,transition:Z,children:K,shapeFlag:J}=I;if(J&6){Y(I.component.subTree,A,V,U);return}if(J&128){I.suspense.move(A,V,U);return}if(J&64){ee.move(I,A,V,ne);return}if(ee===Me){r(k,A,V);for(let re=0;re<K.length;re++)Y(K[re],A,V,U);r(I.anchor,A,V);return}if(ee===cs){E(I,A,V);return}if(U!==2&&J&1&&Z)if(U===0)Z.beforeEnter(k),r(k,A,V),pt(()=>Z.enter(k),W);else{const{leave:re,delayLeave:le,afterLeave:ue}=Z,ye=()=>r(k,A,V),Ie=()=>{re(k,()=>{ye(),ue&&ue()})};le?le(k,ye,Ie):Ie()}else r(k,A,V)},oe=(I,A,V,U=!1,W=!1)=>{const{type:k,props:ee,ref:Z,children:K,dynamicChildren:J,shapeFlag:se,patchFlag:re,dirs:le}=I;if(Z!=null&&ul(Z,null,V,I,!0),se&256){A.ctx.deactivate(I);return}const ue=se&1&&le,ye=!zi(I);let Ie;if(ye&&(Ie=ee&&ee.onVnodeBeforeUnmount)&&Xt(Ie,A,I),se&6)B(I.component,V,U);else{if(se&128){I.suspense.unmount(V,U);return}ue&&rr(I,null,A,"beforeUnmount"),se&64?I.type.remove(I,A,V,W,ne,U):J&&(k!==Me||re>0&&re&64)?D(J,A,V,!1,!0):(k===Me&&re&384||!W&&se&16)&&D(K,A,V),U&&ce(I)}(ye&&(Ie=ee&&ee.onVnodeUnmounted)||ue)&&pt(()=>{Ie&&Xt(Ie,A,I),ue&&rr(I,null,A,"unmounted")},V)},ce=I=>{const{type:A,el:V,anchor:U,transition:W}=I;if(A===Me){de(V,U);return}if(A===cs){v(I);return}const k=()=>{i(V),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(I.shapeFlag&1&&W&&!W.persisted){const{leave:ee,delayLeave:Z}=W,K=()=>ee(V,k);Z?Z(I.el,k,K):K()}else k()},de=(I,A)=>{let V;for(;I!==A;)V=d(I),i(I),I=V;i(A)},B=(I,A,V)=>{const{bum:U,scope:W,update:k,subTree:ee,um:Z}=I;U&&Xo(U),W.stop(),k&&(k.active=!1,oe(ee,I,A,V)),Z&&pt(Z,A),pt(()=>{I.isUnmounted=!0},A),A&&A.pendingBranch&&!A.isUnmounted&&I.asyncDep&&!I.asyncResolved&&I.suspenseId===A.pendingId&&(A.deps--,A.deps===0&&A.resolve())},D=(I,A,V,U=!1,W=!1,k=0)=>{for(let ee=k;ee<I.length;ee++)oe(I[ee],A,V,U,W)},$=I=>I.shapeFlag&6?$(I.component.subTree):I.shapeFlag&128?I.suspense.next():d(I.anchor||I.el),X=(I,A,V)=>{I==null?A._vnode&&oe(A._vnode,null,null,!0):g(A._vnode||null,I,A,null,null,null,V),Yc(),Mh(),A._vnode=I},ne={p:g,um:oe,m:Y,r:ce,mt:L,mc:w,pc:N,pbc:M,n:$,o:e};let ie,ae;return t&&([ie,ae]=t(ne)),{render:X,hydrate:ie,createApp:t_(X,ie)}}function ir({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Xh(e,t,n=!1){const r=e.children,i=t.children;if(_e(r)&&_e(i))for(let o=0;o<r.length;o++){const a=r[o];let s=i[o];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[o]=Bn(i[o]),s.el=a.el),n||Xh(a,s)),s.type===Ua&&(s.el=a.el)}}function i_(e){const t=e.slice(),n=[0];let r,i,o,a,s;const l=e.length;for(r=0;r<l;r++){const c=e[r];if(c!==0){if(i=n[n.length-1],e[i]<c){t[r]=i,n.push(r);continue}for(o=0,a=n.length-1;o<a;)s=o+a>>1,e[n[s]]<c?o=s+1:a=s;c<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}for(o=n.length,a=n[o-1];o-- >0;)n[o]=a,a=t[a];return n}const o_=e=>e.__isTeleport,Me=Symbol(void 0),Ua=Symbol(void 0),Xn=Symbol(void 0),cs=Symbol(void 0),Wi=[];let kt=null;function Oe(e=!1){Wi.push(kt=e?null:[])}function a_(){Wi.pop(),kt=Wi[Wi.length-1]||null}let oo=1;function nu(e){oo+=e}function Zh(e){return e.dynamicChildren=oo>0?kt||Fr:null,a_(),oo>0&&kt&&kt.push(e),e}function Ce(e,t,n,r,i,o){return Zh(F(e,t,n,r,i,o,!0))}function tc(e,t,n,r,i){return Zh(pe(e,t,n,r,i,!0))}function ca(e){return e?e.__v_isVNode===!0:!1}function Ai(e,t){return e.type===t.type&&e.key===t.key}const Ba="__vInternal",Kh=({key:e})=>e!=null?e:null,Qo=({ref:e,ref_key:t,ref_for:n})=>e!=null?qe(e)||nt(e)||ve(e)?{i:rt,r:e,k:t,f:!!n}:e:null;function F(e,t=null,n=null,r=0,i=null,o=e===Me?0:1,a=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Kh(t),ref:t&&Qo(t),scopeId:Pa,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:rt};return s?(nc(l,n),o&128&&e.normalize(l)):n&&(l.shapeFlag|=qe(n)?8:16),oo>0&&!a&&kt&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&kt.push(l),l}const pe=s_;function s_(e,t=null,n=null,r=0,i=null,o=!1){if((!e||e===FE)&&(e=Xn),ca(e)){const s=Jr(e,t,!0);return n&&nc(s,n),oo>0&&!o&&kt&&(s.shapeFlag&6?kt[kt.indexOf(e)]=s:kt.push(s)),s.patchFlag|=-2,s}if(__(e)&&(e=e.__vccOpts),t){t=l_(t);let{class:s,style:l}=t;s&&!qe(s)&&(t.class=Vl(s)),Le(l)&&(Th(l)&&!_e(l)&&(l=ut({},l)),t.style=Bl(l))}const a=qe(e)?1:AE(e)?128:o_(e)?64:Le(e)?4:ve(e)?2:0;return F(e,t,n,r,i,a,o,!0)}function l_(e){return e?Th(e)||Ba in e?ut({},e):e:null}function Jr(e,t,n=!1){const{props:r,ref:i,patchFlag:o,children:a}=e,s=t?c_(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:s,key:s&&Kh(s),ref:t&&t.ref?n&&i?_e(i)?i.concat(Qo(t)):[i,Qo(t)]:Qo(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Me?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Jr(e.ssContent),ssFallback:e.ssFallback&&Jr(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Wt(e=" ",t=0){return pe(Ua,null,e,t)}function Qh(e="",t=!1){return t?(Oe(),tc(Xn,null,e)):pe(Xn,null,e)}function Kt(e){return e==null||typeof e=="boolean"?pe(Xn):_e(e)?pe(Me,null,e.slice()):typeof e=="object"?Bn(e):pe(Ua,null,String(e))}function Bn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Jr(e)}function nc(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(_e(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),nc(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!(Ba in t)?t._ctx=rt:i===3&&rt&&(rt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ve(t)?(t={default:t,_ctx:rt},n=32):(t=String(t),r&64?(n=16,t=[Wt(t)]):n=8);e.children=t,e.shapeFlag|=n}function c_(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=Vl([t.class,r.class]));else if(i==="style")t.style=Bl([t.style,r.style]);else if(Oa(i)){const o=t[i],a=r[i];a&&o!==a&&!(_e(o)&&o.includes(a))&&(t[i]=o?[].concat(o,a):a)}else i!==""&&(t[i]=r[i])}return t}function Xt(e,t,n,r=null){qt(e,t,7,[n,r])}const u_=jh();let f_=0;function d_(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||u_,o={uid:f_++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Pm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zh(r,i),emitsOptions:Ph(r,i),emit:null,emitted:null,propsDefaults:xe,inheritAttrs:r.inheritAttrs,ctx:xe,data:xe,props:xe,attrs:xe,slots:xe,refs:xe,setupState:xe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=vE.bind(null,o),e.ce&&e.ce(o),o}let Fe=null;const ei=e=>{Fe=e,e.scope.on()},Er=()=>{Fe&&Fe.scope.off(),Fe=null};function Jh(e){return e.vnode.shapeFlag&4}let ao=!1;function h_(e,t=!1){ao=t;const{props:n,children:r}=e.vnode,i=Jh(e);XE(e,n,i,t),QE(e,r);const o=i?p_(e,t):void 0;return ao=!1,o}function p_(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Ih(new Proxy(e.ctx,HE));const{setup:r}=n;if(r){const i=e.setupContext=r.length>1?m_(e):null;ei(e),ui();const o=Wn(r,e,0,[e.props,i]);if(fi(),Er(),sh(o)){if(o.then(Er,Er),t)return o.then(a=>{ru(e,a,t)}).catch(a=>{Ma(a,e,0)});e.asyncDep=o}else ru(e,o,t)}else ep(e,t)}function ru(e,t,n){ve(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Le(t)&&(e.setupState=Oh(t)),ep(e,n)}let iu;function ep(e,t,n){const r=e.type;if(!e.render){if(!t&&iu&&!r.render){const i=r.template||Jl(e).template;if(i){const{isCustomElement:o,compilerOptions:a}=e.appContext.config,{delimiters:s,compilerOptions:l}=r,c=ut(ut({isCustomElement:o,delimiters:s},a),l);r.render=iu(i,c)}}e.render=r.render||zt}ei(e),ui(),zE(e),fi(),Er()}function g_(e){return new Proxy(e.attrs,{get(t,n){return Et(e,"get","$attrs"),t[n]}})}function m_(e){const t=r=>{e.exposed=r||{}};let n;return{get attrs(){return n||(n=g_(e))},slots:e.slots,emit:e.emit,expose:t}}function Va(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Oh(Ih(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in qi)return qi[n](e)},has(t,n){return n in t||n in qi}}))}function E_(e,t=!0){return ve(e)?e.displayName||e.name:e.name||t&&e.__name}function __(e){return ve(e)&&"__vccOpts"in e}const Mt=(e,t)=>pE(e,t,ao);function ua(e,t,n){const r=arguments.length;return r===2?Le(t)&&!_e(t)?ca(t)?pe(e,null,[t]):pe(e,t):pe(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&ca(n)&&(n=[n]),pe(e,t,n))}const y_=Symbol(""),v_=()=>vn(y_),T_="3.2.47",I_="http://www.w3.org/2000/svg",lr=typeof document<"u"?document:null,ou=lr&&lr.createElement("template"),R_={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?lr.createElementNS(I_,e):lr.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>lr.createTextNode(e),createComment:e=>lr.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>lr.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,o){const a=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{ou.innerHTML=r?`<svg>${e}</svg>`:e;const s=ou.content;if(r){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}t.insertBefore(s,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function w_(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function A_(e,t,n){const r=e.style,i=qe(n);if(n&&!i){if(t&&!qe(t))for(const o in t)n[o]==null&&fl(r,o,"");for(const o in n)fl(r,o,n[o])}else{const o=r.display;i?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=o)}}const au=/\s*!important$/;function fl(e,t,n){if(_e(n))n.forEach(r=>fl(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=O_(e,t);au.test(n)?e.setProperty(ci(r),n.replace(au,""),"important"):e[r]=n}}const su=["Webkit","Moz","ms"],us={};function O_(e,t){const n=us[t];if(n)return n;let r=cn(t);if(r!=="filter"&&r in e)return us[t]=r;r=Ca(r);for(let i=0;i<su.length;i++){const o=su[i]+r;if(o in e)return us[t]=o}return t}const lu="http://www.w3.org/1999/xlink";function S_(e,t,n,r,i){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(lu,t.slice(6,t.length)):e.setAttributeNS(lu,t,n);else{const o=Am(t);n==null||o&&!ih(n)?e.removeAttribute(t):e.setAttribute(t,o?"":n)}}function b_(e,t,n,r,i,o,a){if(t==="innerHTML"||t==="textContent"){r&&a(r,i,o),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const l=n==null?"":n;(e.value!==l||e.tagName==="OPTION")&&(e.value=l),n==null&&e.removeAttribute(t);return}let s=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=ih(n):n==null&&l==="string"?(n="",s=!0):l==="number"&&(n=0,s=!0)}try{e[t]=n}catch{}s&&e.removeAttribute(t)}function Pr(e,t,n,r){e.addEventListener(t,n,r)}function C_(e,t,n,r){e.removeEventListener(t,n,r)}function x_(e,t,n,r,i=null){const o=e._vei||(e._vei={}),a=o[t];if(r&&a)a.value=r;else{const[s,l]=M_(t);if(r){const c=o[t]=D_(r,i);Pr(e,s,c,l)}else a&&(C_(e,s,a,l),o[t]=void 0)}}const cu=/(?:Once|Passive|Capture)$/;function M_(e){let t;if(cu.test(e)){t={};let r;for(;r=e.match(cu);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ci(e.slice(2)),t]}let fs=0;const L_=Promise.resolve(),P_=()=>fs||(L_.then(()=>fs=0),fs=Date.now());function D_(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;qt(N_(r,n.value),t,5,[r])};return n.value=e,n.attached=P_(),n}function N_(e,t){if(_e(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const uu=/^on[a-z]/,G_=(e,t,n,r,i=!1,o,a,s,l)=>{t==="class"?w_(e,r,i):t==="style"?A_(e,n,r):Oa(t)?Fl(t)||x_(e,t,n,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):U_(e,t,r,i))?b_(e,t,r,o,a,s,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),S_(e,t,r,i))};function U_(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&uu.test(t)&&ve(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||uu.test(t)&&qe(n)?!1:t in e}const fu=e=>{const t=e.props["onUpdate:modelValue"]||!1;return _e(t)?n=>Xo(t,n):t};function B_(e){e.target.composing=!0}function du(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ti={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e._assign=fu(i);const o=r||i.props&&i.props.type==="number";Pr(e,t?"change":"input",a=>{if(a.target.composing)return;let s=e.value;n&&(s=s.trim()),o&&(s=el(s)),e._assign(s)}),n&&Pr(e,"change",()=>{e.value=e.value.trim()}),t||(Pr(e,"compositionstart",B_),Pr(e,"compositionend",du),Pr(e,"change",du))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:i}},o){if(e._assign=fu(o),e.composing||document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===t||(i||e.type==="number")&&el(e.value)===t))return;const a=t==null?"":t;e.value!==a&&(e.value=a)}},V_=ut({patchProp:G_},R_);let hu;function F_(){return hu||(hu=n_(V_))}const k_=(...e)=>{const t=F_().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=$_(r);if(!i)return;const o=t._component;!ve(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const a=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function $_(e){return qe(e)?document.querySelector(e):e}/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Dr=typeof window<"u";function H_(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const be=Object.assign;function ds(e,t){const n={};for(const r in t){const i=t[r];n[r]=Yt(i)?i.map(e):e(i)}return n}const Yi=()=>{},Yt=Array.isArray,z_=/\/$/,q_=e=>e.replace(z_,"");function hs(e,t,n="/"){let r,i={},o="",a="";const s=t.indexOf("#");let l=t.indexOf("?");return s<l&&s>=0&&(l=-1),l>-1&&(r=t.slice(0,l),o=t.slice(l+1,s>-1?s:t.length),i=e(o)),s>-1&&(r=r||t.slice(0,s),a=t.slice(s,t.length)),r=X_(r!=null?r:t,n),{fullPath:r+(o&&"?")+o+a,path:r,query:i,hash:a}}function W_(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function pu(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Y_(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&ni(t.matched[r],n.matched[i])&&tp(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function ni(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function tp(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!j_(e[n],t[n]))return!1;return!0}function j_(e,t){return Yt(e)?gu(e,t):Yt(t)?gu(t,e):e===t}function gu(e,t){return Yt(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function X_(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var so;(function(e){e.pop="pop",e.push="push"})(so||(so={}));var ji;(function(e){e.back="back",e.forward="forward",e.unknown=""})(ji||(ji={}));function Z_(e){if(!e)if(Dr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),q_(e)}const K_=/^[^#]+#/;function Q_(e,t){return e.replace(K_,"#")+t}function J_(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Fa=()=>({left:window.pageXOffset,top:window.pageYOffset});function e0(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=J_(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function mu(e,t){return(history.state?history.state.position-t:-1)+e}const dl=new Map;function t0(e,t){dl.set(e,t)}function n0(e){const t=dl.get(e);return dl.delete(e),t}let r0=()=>location.protocol+"//"+location.host;function np(e,t){const{pathname:n,search:r,hash:i}=t,o=e.indexOf("#");if(o>-1){let s=i.includes(e.slice(o))?e.slice(o).length:1,l=i.slice(s);return l[0]!=="/"&&(l="/"+l),pu(l,"")}return pu(n,e)+r+i}function i0(e,t,n,r){let i=[],o=[],a=null;const s=({state:d})=>{const h=np(e,location),p=n.value,g=t.value;let m=0;if(d){if(n.value=h,t.value=d,a&&a===p){a=null;return}m=g?d.position-g.position:0}else r(h);i.forEach(y=>{y(n.value,p,{delta:m,type:so.pop,direction:m?m>0?ji.forward:ji.back:ji.unknown})})};function l(){a=n.value}function c(d){i.push(d);const h=()=>{const p=i.indexOf(d);p>-1&&i.splice(p,1)};return o.push(h),h}function u(){const{history:d}=window;!d.state||d.replaceState(be({},d.state,{scroll:Fa()}),"")}function f(){for(const d of o)d();o=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",u),{pauseListeners:l,listen:c,destroy:f}}function Eu(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?Fa():null}}function o0(e){const{history:t,location:n}=window,r={value:np(e,n)},i={value:t.state};i.value||o(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(l,c,u){const f=e.indexOf("#"),d=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+l:r0()+e+l;try{t[u?"replaceState":"pushState"](c,"",d),i.value=c}catch(h){console.error(h),n[u?"replace":"assign"](d)}}function a(l,c){const u=be({},t.state,Eu(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});o(l,u,!0),r.value=l}function s(l,c){const u=be({},i.value,t.state,{forward:l,scroll:Fa()});o(u.current,u,!0);const f=be({},Eu(r.value,l,null),{position:u.position+1},c);o(l,f,!1),r.value=l}return{location:r,state:i,push:s,replace:a}}function a0(e){e=Z_(e);const t=o0(e),n=i0(e,t.state,t.location,t.replace);function r(o,a=!0){a||n.pauseListeners(),history.go(o)}const i=be({location:"",base:e,go:r,createHref:Q_.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function s0(e){return typeof e=="string"||e&&typeof e=="object"}function rp(e){return typeof e=="string"||typeof e=="symbol"}const Mn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},ip=Symbol("");var _u;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(_u||(_u={}));function ri(e,t){return be(new Error,{type:e,[ip]:!0},t)}function pn(e,t){return e instanceof Error&&ip in e&&(t==null||!!(e.type&t))}const yu="[^/]+?",l0={sensitive:!1,strict:!1,start:!0,end:!0},c0=/[.+*?^${}()[\]/\\]/g;function u0(e,t){const n=be({},l0,t),r=[];let i=n.start?"^":"";const o=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let f=0;f<c.length;f++){const d=c[f];let h=40+(n.sensitive?.25:0);if(d.type===0)f||(i+="/"),i+=d.value.replace(c0,"\\$&"),h+=40;else if(d.type===1){const{value:p,repeatable:g,optional:m,regexp:y}=d;o.push({name:p,repeatable:g,optional:m});const _=y||yu;if(_!==yu){h+=10;try{new RegExp(`(${_})`)}catch(v){throw new Error(`Invalid custom RegExp for param "${p}" (${_}): `+v.message)}}let E=g?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;f||(E=m&&c.length<2?`(?:/${E})`:"/"+E),m&&(E+="?"),i+=E,h+=20,m&&(h+=-8),g&&(h+=-20),_===".*"&&(h+=-50)}u.push(h)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const a=new RegExp(i,n.sensitive?"":"i");function s(c){const u=c.match(a),f={};if(!u)return null;for(let d=1;d<u.length;d++){const h=u[d]||"",p=o[d-1];f[p.name]=h&&p.repeatable?h.split("/"):h}return f}function l(c){let u="",f=!1;for(const d of e){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const h of d)if(h.type===0)u+=h.value;else if(h.type===1){const{value:p,repeatable:g,optional:m}=h,y=p in c?c[p]:"";if(Yt(y)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const _=Yt(y)?y.join("/"):y;if(!_)if(m)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${p}"`);u+=_}}return u||"/"}return{re:a,score:r,keys:o,parse:s,stringify:l}}function f0(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function d0(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const o=f0(r[n],i[n]);if(o)return o;n++}if(Math.abs(i.length-r.length)===1){if(vu(r))return 1;if(vu(i))return-1}return i.length-r.length}function vu(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const h0={type:0,value:""},p0=/[a-zA-Z0-9_]/;function g0(e){if(!e)return[[]];if(e==="/")return[[h0]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${n})/"${c}": ${h}`)}let n=0,r=n;const i=[];let o;function a(){o&&i.push(o),o=[]}let s=0,l,c="",u="";function f(){!c||(n===0?o.push({type:0,value:c}):n===1||n===2||n===3?(o.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;s<e.length;){if(l=e[s++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&f(),a()):l===":"?(f(),n=1):d();break;case 4:d(),n=r;break;case 1:l==="("?n=2:p0.test(l)?d():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&s--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&s--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),f(),a(),i}function m0(e,t,n){const r=u0(g0(e.path),n),i=be(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function E0(e,t){const n=[],r=new Map;t=Ru({strict:!1,end:!0,sensitive:!1},t);function i(u){return r.get(u)}function o(u,f,d){const h=!d,p=_0(u);p.aliasOf=d&&d.record;const g=Ru(t,u),m=[p];if("alias"in u){const E=typeof u.alias=="string"?[u.alias]:u.alias;for(const v of E)m.push(be({},p,{components:d?d.record.components:p.components,path:v,aliasOf:d?d.record:p}))}let y,_;for(const E of m){const{path:v}=E;if(f&&v[0]!=="/"){const T=f.record.path,R=T[T.length-1]==="/"?"":"/";E.path=f.record.path+(v&&R+v)}if(y=m0(E,f,g),d?d.alias.push(y):(_=_||y,_!==y&&_.alias.push(y),h&&u.name&&!Iu(y)&&a(u.name)),p.children){const T=p.children;for(let R=0;R<T.length;R++)o(T[R],y,d&&d.children[R])}d=d||y,(y.record.components&&Object.keys(y.record.components).length||y.record.name||y.record.redirect)&&l(y)}return _?()=>{a(_)}:Yi}function a(u){if(rp(u)){const f=r.get(u);f&&(r.delete(u),n.splice(n.indexOf(f),1),f.children.forEach(a),f.alias.forEach(a))}else{const f=n.indexOf(u);f>-1&&(n.splice(f,1),u.record.name&&r.delete(u.record.name),u.children.forEach(a),u.alias.forEach(a))}}function s(){return n}function l(u){let f=0;for(;f<n.length&&d0(u,n[f])>=0&&(u.record.path!==n[f].record.path||!op(u,n[f]));)f++;n.splice(f,0,u),u.record.name&&!Iu(u)&&r.set(u.record.name,u)}function c(u,f){let d,h={},p,g;if("name"in u&&u.name){if(d=r.get(u.name),!d)throw ri(1,{location:u});g=d.record.name,h=be(Tu(f.params,d.keys.filter(_=>!_.optional).map(_=>_.name)),u.params&&Tu(u.params,d.keys.map(_=>_.name))),p=d.stringify(h)}else if("path"in u)p=u.path,d=n.find(_=>_.re.test(p)),d&&(h=d.parse(p),g=d.record.name);else{if(d=f.name?r.get(f.name):n.find(_=>_.re.test(f.path)),!d)throw ri(1,{location:u,currentLocation:f});g=d.record.name,h=be({},f.params,u.params),p=d.stringify(h)}const m=[];let y=d;for(;y;)m.unshift(y.record),y=y.parent;return{name:g,path:p,params:h,matched:m,meta:v0(m)}}return e.forEach(u=>o(u)),{addRoute:o,resolve:c,removeRoute:a,getRoutes:s,getRecordMatcher:i}}function Tu(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function _0(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:y0(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function y0(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="boolean"?n:n[r];return t}function Iu(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function v0(e){return e.reduce((t,n)=>be(t,n.meta),{})}function Ru(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function op(e,t){return t.children.some(n=>n===e||op(e,n))}const ap=/#/g,T0=/&/g,I0=/\//g,R0=/=/g,w0=/\?/g,sp=/\+/g,A0=/%5B/g,O0=/%5D/g,lp=/%5E/g,S0=/%60/g,cp=/%7B/g,b0=/%7C/g,up=/%7D/g,C0=/%20/g;function rc(e){return encodeURI(""+e).replace(b0,"|").replace(A0,"[").replace(O0,"]")}function x0(e){return rc(e).replace(cp,"{").replace(up,"}").replace(lp,"^")}function hl(e){return rc(e).replace(sp,"%2B").replace(C0,"+").replace(ap,"%23").replace(T0,"%26").replace(S0,"`").replace(cp,"{").replace(up,"}").replace(lp,"^")}function M0(e){return hl(e).replace(R0,"%3D")}function L0(e){return rc(e).replace(ap,"%23").replace(w0,"%3F")}function P0(e){return e==null?"":L0(e).replace(I0,"%2F")}function fa(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function D0(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const o=r[i].replace(sp," "),a=o.indexOf("="),s=fa(a<0?o:o.slice(0,a)),l=a<0?null:fa(o.slice(a+1));if(s in t){let c=t[s];Yt(c)||(c=t[s]=[c]),c.push(l)}else t[s]=l}return t}function wu(e){let t="";for(let n in e){const r=e[n];if(n=M0(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Yt(r)?r.map(o=>o&&hl(o)):[r&&hl(r)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+n,o!=null&&(t+="="+o))})}return t}function N0(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Yt(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}const G0=Symbol(""),Au=Symbol(""),ic=Symbol(""),fp=Symbol(""),pl=Symbol("");function Oi(){let e=[];function t(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function Vn(e,t,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,s)=>{const l=f=>{f===!1?s(ri(4,{from:n,to:t})):f instanceof Error?s(f):s0(f)?s(ri(2,{from:t,to:f})):(o&&r.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),a())},c=e.call(r&&r.instances[i],t,n,l);let u=Promise.resolve(c);e.length<3&&(u=u.then(l)),u.catch(f=>s(f))})}function ps(e,t,n,r){const i=[];for(const o of e)for(const a in o.components){let s=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(U0(s)){const c=(s.__vccOpts||s)[t];c&&i.push(Vn(c,n,r,o,a))}else{let l=s();i.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const u=H_(c)?c.default:c;o.components[a]=u;const d=(u.__vccOpts||u)[t];return d&&Vn(d,n,r,o,a)()}))}}return i}function U0(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Ou(e){const t=vn(ic),n=vn(fp),r=Mt(()=>t.resolve(Hr(e.to))),i=Mt(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],f=n.matched;if(!u||!f.length)return-1;const d=f.findIndex(ni.bind(null,u));if(d>-1)return d;const h=Su(l[c-2]);return c>1&&Su(u)===h&&f[f.length-1].path!==h?f.findIndex(ni.bind(null,l[c-2])):d}),o=Mt(()=>i.value>-1&&F0(n.params,r.value.params)),a=Mt(()=>i.value>-1&&i.value===n.matched.length-1&&tp(n.params,r.value.params));function s(l={}){return V0(l)?t[Hr(e.replace)?"replace":"push"](Hr(e.to)).catch(Yi):Promise.resolve()}return{route:r,href:Mt(()=>r.value.href),isActive:o,isExactActive:a,navigate:s}}const B0=Gh({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ou,setup(e,{slots:t}){const n=yo(Ou(e)),{options:r}=vn(ic),i=Mt(()=>({[bu(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[bu(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=t.default&&t.default(n);return e.custom?o:ua("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},o)}}}),dp=B0;function V0(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function F0(e,t){for(const n in t){const r=t[n],i=e[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Yt(i)||i.length!==r.length||r.some((o,a)=>o!==i[a]))return!1}return!0}function Su(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const bu=(e,t,n)=>e!=null?e:t!=null?t:n,k0=Gh({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=vn(pl),i=Mt(()=>e.route||r.value),o=vn(Au,0),a=Mt(()=>{let c=Hr(o);const{matched:u}=i.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),s=Mt(()=>i.value.matched[a.value]);Zo(Au,Mt(()=>a.value+1)),Zo(G0,s),Zo(pl,i);const l=cE();return Ko(()=>[l.value,s.value,e.name],([c,u,f],[d,h,p])=>{u&&(u.instances[f]=c,h&&h!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),c&&u&&(!h||!ni(u,h)||!d)&&(u.enterCallbacks[f]||[]).forEach(g=>g(c))},{flush:"post"}),()=>{const c=i.value,u=e.name,f=s.value,d=f&&f.components[u];if(!d)return Cu(n.default,{Component:d,route:c});const h=f.props[u],p=h?h===!0?c.params:typeof h=="function"?h(c):h:null,m=ua(d,be({},p,t,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return Cu(n.default,{Component:m,route:c})||m}}});function Cu(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const hp=k0;function $0(e){const t=E0(e.routes,e),n=e.parseQuery||D0,r=e.stringifyQuery||wu,i=e.history,o=Oi(),a=Oi(),s=Oi(),l=uE(Mn);let c=Mn;Dr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=ds.bind(null,B=>""+B),f=ds.bind(null,P0),d=ds.bind(null,fa);function h(B,D){let $,X;return rp(B)?($=t.getRecordMatcher(B),X=D):X=B,t.addRoute(X,$)}function p(B){const D=t.getRecordMatcher(B);D&&t.removeRoute(D)}function g(){return t.getRoutes().map(B=>B.record)}function m(B){return!!t.getRecordMatcher(B)}function y(B,D){if(D=be({},D||l.value),typeof B=="string"){const I=hs(n,B,D.path),A=t.resolve({path:I.path},D),V=i.createHref(I.fullPath);return be(I,A,{params:d(A.params),hash:fa(I.hash),redirectedFrom:void 0,href:V})}let $;if("path"in B)$=be({},B,{path:hs(n,B.path,D.path).path});else{const I=be({},B.params);for(const A in I)I[A]==null&&delete I[A];$=be({},B,{params:f(B.params)}),D.params=f(D.params)}const X=t.resolve($,D),ne=B.hash||"";X.params=u(d(X.params));const ie=W_(r,be({},B,{hash:x0(ne),path:X.path})),ae=i.createHref(ie);return be({fullPath:ie,hash:ne,query:r===wu?N0(B.query):B.query||{}},X,{redirectedFrom:void 0,href:ae})}function _(B){return typeof B=="string"?hs(n,B,l.value.path):be({},B)}function E(B,D){if(c!==B)return ri(8,{from:D,to:B})}function v(B){return O(B)}function T(B){return v(be(_(B),{replace:!0}))}function R(B){const D=B.matched[B.matched.length-1];if(D&&D.redirect){const{redirect:$}=D;let X=typeof $=="function"?$(B):$;return typeof X=="string"&&(X=X.includes("?")||X.includes("#")?X=_(X):{path:X},X.params={}),be({query:B.query,hash:B.hash,params:"path"in X?{}:B.params},X)}}function O(B,D){const $=c=y(B),X=l.value,ne=B.state,ie=B.force,ae=B.replace===!0,I=R($);if(I)return O(be(_(I),{state:typeof I=="object"?be({},ne,I.state):ne,force:ie,replace:ae}),D||$);const A=$;A.redirectedFrom=D;let V;return!ie&&Y_(r,X,$)&&(V=ri(16,{to:A,from:X}),Q(X,X,!0,!1)),(V?Promise.resolve(V):S(A,X)).catch(U=>pn(U)?pn(U,2)?U:H(U):b(U,A,X)).then(U=>{if(U){if(pn(U,2))return O(be({replace:ae},_(U.to),{state:typeof U.to=="object"?be({},ne,U.to.state):ne,force:ie}),D||A)}else U=P(A,X,!0,ae,ne);return M(A,X,U),U})}function w(B,D){const $=E(B,D);return $?Promise.reject($):Promise.resolve()}function S(B,D){let $;const[X,ne,ie]=H0(B,D);$=ps(X.reverse(),"beforeRouteLeave",B,D);for(const I of X)I.leaveGuards.forEach(A=>{$.push(Vn(A,B,D))});const ae=w.bind(null,B,D);return $.push(ae),xr($).then(()=>{$=[];for(const I of o.list())$.push(Vn(I,B,D));return $.push(ae),xr($)}).then(()=>{$=ps(ne,"beforeRouteUpdate",B,D);for(const I of ne)I.updateGuards.forEach(A=>{$.push(Vn(A,B,D))});return $.push(ae),xr($)}).then(()=>{$=[];for(const I of B.matched)if(I.beforeEnter&&!D.matched.includes(I))if(Yt(I.beforeEnter))for(const A of I.beforeEnter)$.push(Vn(A,B,D));else $.push(Vn(I.beforeEnter,B,D));return $.push(ae),xr($)}).then(()=>(B.matched.forEach(I=>I.enterCallbacks={}),$=ps(ie,"beforeRouteEnter",B,D),$.push(ae),xr($))).then(()=>{$=[];for(const I of a.list())$.push(Vn(I,B,D));return $.push(ae),xr($)}).catch(I=>pn(I,8)?I:Promise.reject(I))}function M(B,D,$){for(const X of s.list())X(B,D,$)}function P(B,D,$,X,ne){const ie=E(B,D);if(ie)return ie;const ae=D===Mn,I=Dr?history.state:{};$&&(X||ae?i.replace(B.fullPath,be({scroll:ae&&I&&I.scroll},ne)):i.push(B.fullPath,ne)),l.value=B,Q(B,D,$,ae),H()}let C;function z(){C||(C=i.listen((B,D,$)=>{if(!de.listening)return;const X=y(B),ne=R(X);if(ne){O(be(ne,{replace:!0}),X).catch(Yi);return}c=X;const ie=l.value;Dr&&t0(mu(ie.fullPath,$.delta),Fa()),S(X,ie).catch(ae=>pn(ae,12)?ae:pn(ae,2)?(O(ae.to,X).then(I=>{pn(I,20)&&!$.delta&&$.type===so.pop&&i.go(-1,!1)}).catch(Yi),Promise.reject()):($.delta&&i.go(-$.delta,!1),b(ae,X,ie))).then(ae=>{ae=ae||P(X,ie,!1),ae&&($.delta&&!pn(ae,8)?i.go(-$.delta,!1):$.type===so.pop&&pn(ae,20)&&i.go(-1,!1)),M(X,ie,ae)}).catch(Yi)}))}let L=Oi(),q=Oi(),x;function b(B,D,$){H(B);const X=q.list();return X.length?X.forEach(ne=>ne(B,D,$)):console.error(B),Promise.reject(B)}function N(){return x&&l.value!==Mn?Promise.resolve():new Promise((B,D)=>{L.add([B,D])})}function H(B){return x||(x=!B,z(),L.list().forEach(([D,$])=>B?$(B):D()),L.reset()),B}function Q(B,D,$,X){const{scrollBehavior:ne}=e;if(!Dr||!ne)return Promise.resolve();const ie=!$&&n0(mu(B.fullPath,0))||(X||!$)&&history.state&&history.state.scroll||null;return Ch().then(()=>ne(B,D,ie)).then(ae=>ae&&e0(ae)).catch(ae=>b(ae,B,D))}const Y=B=>i.go(B);let oe;const ce=new Set,de={currentRoute:l,listening:!0,addRoute:h,removeRoute:p,hasRoute:m,getRoutes:g,resolve:y,options:e,push:v,replace:T,go:Y,back:()=>Y(-1),forward:()=>Y(1),beforeEach:o.add,beforeResolve:a.add,afterEach:s.add,onError:q.add,isReady:N,install(B){const D=this;B.component("RouterLink",dp),B.component("RouterView",hp),B.config.globalProperties.$router=D,Object.defineProperty(B.config.globalProperties,"$route",{enumerable:!0,get:()=>Hr(l)}),Dr&&!oe&&l.value===Mn&&(oe=!0,v(i.location).catch(ne=>{}));const $={};for(const ne in Mn)$[ne]=Mt(()=>l.value[ne]);B.provide(ic,D),B.provide(fp,yo($)),B.provide(pl,l);const X=B.unmount;ce.add(B),B.unmount=function(){ce.delete(B),ce.size<1&&(c=Mn,C&&C(),C=null,l.value=Mn,oe=!1,x=!1),X()}}};return de}function xr(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function H0(e,t){const n=[],r=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let a=0;a<o;a++){const s=t.matched[a];s&&(e.matched.find(c=>ni(c,s))?r.push(s):n.push(s));const l=e.matched[a];l&&(t.matched.find(c=>ni(c,l))||i.push(l))}return[n,r,i]}const Ke=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},z0={props:{icon:{type:String,default:"box"},width:{type:[Number,String],default:24},height:{type:[Number,String],default:24},color:{type:String,default:"currentColor"}}},q0=["width","height","aria-labelledby"],W0=["id"],Y0=["fill"];function j0(e,t,n,r,i,o){return Oe(),Ce("svg",{xmlns:"http://www.w3.org/2000/svg",width:n.width,height:n.height,viewBox:"0 0 256 256","aria-labelledby":n.icon,role:"presentation"},[F("title",{id:n.icon,lang:"en"},kn(n.icon)+" icon",9,W0),F("g",{fill:n.color},[$E(e.$slots,"default",{},void 0,!0)],8,Y0)],8,q0)}const vo=Ke(z0,[["render",j0],["__scopeId","data-v-b4dbeaa9"]]),X0={},Z0=F("polygon",{class:"st0",points:`137.6,56 118.4,56 118.4,73.6 100.8,73.6 100.8,91.2 118.4,91.2 118.4,108.8 137.6,108.8 137.6,91.2 
		155.2,91.2 155.2,73.6 137.6,73.6 	`},null,-1),K0=F("path",{class:"st0",d:`M128,0C57.6,0,0,57.6,0,128s57.6,128,128,128s128-57.6,128-128S198.4,0,128,0z M123.2,225.6H80v-16
		c0,0-33.6-25.6-40-32s-6.4-16-6.4-16s0-70.4,0-78.4s1.6-11.2,8-11.2c8,0,8,8,8,8v51.2v1.6c0,0,0,0-1.6,1.6
		c-1.6,3.2-3.2,6.4-3.2,9.6c0,6.4,6.4,11.2,6.4,11.2l28.8,24c3.2,3.2,4.8,0,4.8,0c1.6-1.6-1.6-3.2-1.6-3.2L56,150.4
		c0,0-8-6.4-3.2-12.8c0,0,1.6-3.2,4.8-3.2s8,3.2,8,3.2l51.2,38.4c6.4,4.8,6.4,11.2,6.4,11.2S123.2,225.6,123.2,225.6z M76.8,116.8
		c-9.6-1.6-12.8-6.4-12.8-17.6c0-6.4,3.2-8,3.2-8v-8c0,0,1.6-16,11.2-30.4c11.2-17.6,32-22.4,32-22.4c0-4.8,6.4-4.8,6.4-4.8h20.8
		c0,0,6.4,0,6.4,4.8c0,0,20.8,4.8,32,22.4c9.6,14.4,11.2,30.4,11.2,30.4v8c0,0,3.2,1.6,3.2,8c0,11.2-3.2,16-12.8,17.6
		c-8,3.2-35.2,4.8-49.6,4.8S86.4,120,76.8,116.8z M216,177.6c-6.4,6.4-40,32-40,32v16h-43.2v-38.4c0,0,0-6.4,6.4-11.2l52.8-36.8
		c0,0,3.2-3.2,8-3.2c3.2,0,4.8,3.2,4.8,3.2c3.2,4.8-4.8,11.2-4.8,11.2l-28.8,24c0,0-1.6,1.6-1.6,3.2c0,0,1.6,3.2,4.8,0l28.8-24
		c1.6,0,6.4-4.8,6.4-11.2c0-3.2,0-6.4-3.2-9.6c0,0,0,0-1.6-1.6v0V80c0,0,0-8,9.6-8c6.4,0,8,4.8,8,11.2s0,78.4,0,78.4
		S224,171.2,216,177.6z`},null,-1);function Q0(e,t){return Oe(),Ce(Me,null,[Z0,K0],64)}const J0=Ke(X0,[["render",Q0]]),ey={},ty=F("path",{d:"M221.66,90.34,192,120,136,64l29.66-29.66a8,8,0,0,1,11.31,0L221.66,79A8,8,0,0,1,221.66,90.34Z",opacity:"0.2"},null,-1),ny=F("path",{d:"M227.31,73.37,182.63,28.68a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM92.69,208H48V163.31l88-88L180.69,120ZM192,108.68,147.31,64l24-24L216,84.68Z"},null,-1);function ry(e,t){return Oe(),Ce(Me,null,[ty,ny],64)}const iy=Ke(ey,[["render",ry]]),oy={},ay=F("path",{d:"M208,48V216a8,8,0,0,1-8,8H56a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H96a39.83,39.83,0,0,0-8,24v8h80V64a39.83,39.83,0,0,0-8-24h40A8,8,0,0,1,208,48Z",opacity:"0.2"},null,-1),sy=F("path",{d:"M168,152a8,8,0,0,1-8,8H96a8,8,0,0,1,0-16h64A8,8,0,0,1,168,152Zm-8-40H96a8,8,0,0,0,0,16h64a8,8,0,0,0,0-16Zm56-64V216a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V48A16,16,0,0,1,56,32H92.26a47.92,47.92,0,0,1,71.48,0H200A16,16,0,0,1,216,48ZM96,64h64a32,32,0,0,0-64,0ZM200,48H173.25A47.93,47.93,0,0,1,176,64v8a8,8,0,0,1-8,8H88a8,8,0,0,1-8-8V64a47.93,47.93,0,0,1,2.75-16H56V216H200Z"},null,-1);function ly(e,t){return Oe(),Ce(Me,null,[ay,sy],64)}const cy=Ke(oy,[["render",ly]]);const uy={components:{RouterLink:dp,icon:vo,Logo:J0,Write:iy,List:cy}},fy=e=>(Da("data-v-63fc071f"),e=e(),Na(),e),dy={class:"app-bar"},hy={class:"appbar__wrap"},py={class:"appbar__left-content"},gy={class:"logo"},my={class:"logo_icon"},Ey=fy(()=>F("div",{class:"logo_txt"},"\uC138\uC885\uC548\uC804\uAE30\uC220",-1)),_y={class:"appbar__right-content"};function yy(e,t,n,r,i,o){const a=Pe("Logo"),s=Pe("icon"),l=Pe("RouterLink"),c=Pe("List"),u=Pe("Write");return Oe(),Ce("div",dy,[F("div",hy,[F("div",py,[pe(l,{to:"/"},{default:et(()=>[F("div",gy,[F("div",my,[pe(s,{icon:"Logo"},{default:et(()=>[pe(a)]),_:1})]),Ey])]),_:1})]),F("div",_y,[pe(l,{to:"/"},{default:et(()=>[pe(s,{icon:"List"},{default:et(()=>[pe(c)]),_:1}),Wt("\uBAA9\uB85D")]),_:1}),pe(l,{to:"/post/create"},{default:et(()=>[pe(s,{icon:"Write"},{default:et(()=>[pe(u)]),_:1}),Wt("\uC791\uC131")]),_:1})])])])}const vy=Ke(uy,[["render",yy],["__scopeId","data-v-63fc071f"]]),Ty={components:{RouterView:hp,Appbar:vy}};function Iy(e,t,n,r,i,o){const a=Pe("Appbar"),s=Pe("RouterView"),l=Pe("v-main");return Oe(),Ce("div",null,[pe(a),pe(l,null,{default:et(()=>[pe(s)]),_:1})])}const Ry=Ke(Ty,[["render",Iy]]);function wy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var pp={exports:{}},oc={exports:{}},gp=function(t,n){return function(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return t.apply(n,i)}},Ay=gp,ac=Object.prototype.toString,sc=function(e){return function(t){var n=ac.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function wr(e){return e=e.toLowerCase(),function(n){return sc(n)===e}}function lc(e){return Array.isArray(e)}function da(e){return typeof e>"u"}function Oy(e){return e!==null&&!da(e)&&e.constructor!==null&&!da(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var mp=wr("ArrayBuffer");function Sy(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&mp(e.buffer),t}function by(e){return typeof e=="string"}function Cy(e){return typeof e=="number"}function Ep(e){return e!==null&&typeof e=="object"}function Jo(e){if(sc(e)!=="object")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}var xy=wr("Date"),My=wr("File"),Ly=wr("Blob"),Py=wr("FileList");function cc(e){return ac.call(e)==="[object Function]"}function Dy(e){return Ep(e)&&cc(e.pipe)}function Ny(e){var t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||ac.call(e)===t||cc(e.toString)&&e.toString()===t)}var Gy=wr("URLSearchParams");function Uy(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function By(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function uc(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),lc(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function gl(){var e={};function t(i,o){Jo(e[o])&&Jo(i)?e[o]=gl(e[o],i):Jo(i)?e[o]=gl({},i):lc(i)?e[o]=i.slice():e[o]=i}for(var n=0,r=arguments.length;n<r;n++)uc(arguments[n],t);return e}function Vy(e,t,n){return uc(t,function(i,o){n&&typeof i=="function"?e[o]=Ay(i,n):e[o]=i}),e}function Fy(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function ky(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)}function $y(e,t,n){var r,i,o,a={};t=t||{};do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)o=r[i],a[o]||(t[o]=e[o],a[o]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t}function Hy(e,t,n){e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return r!==-1&&r===n}function zy(e){if(!e)return null;var t=e.length;if(da(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n}var qy=function(e){return function(t){return e&&t instanceof e}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),Qe={isArray:lc,isArrayBuffer:mp,isBuffer:Oy,isFormData:Ny,isArrayBufferView:Sy,isString:by,isNumber:Cy,isObject:Ep,isPlainObject:Jo,isUndefined:da,isDate:xy,isFile:My,isBlob:Ly,isFunction:cc,isStream:Dy,isURLSearchParams:Gy,isStandardBrowserEnv:By,forEach:uc,merge:gl,extend:Vy,trim:Uy,stripBOM:Fy,inherits:ky,toFlatObject:$y,kindOf:sc,kindOfTest:wr,endsWith:Hy,toArray:zy,isTypedArray:qy,isFileList:Py},Mr=Qe;function xu(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var _p=function(t,n,r){if(!n)return t;var i;if(r)i=r(n);else if(Mr.isURLSearchParams(n))i=n.toString();else{var o=[];Mr.forEach(n,function(l,c){l===null||typeof l>"u"||(Mr.isArray(l)?c=c+"[]":l=[l],Mr.forEach(l,function(f){Mr.isDate(f)?f=f.toISOString():Mr.isObject(f)&&(f=JSON.stringify(f)),o.push(xu(c)+"="+xu(f))}))}),i=o.join("&")}if(i){var a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t},Wy=Qe;function ka(){this.handlers=[]}ka.prototype.use=function(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};ka.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};ka.prototype.forEach=function(t){Wy.forEach(this.handlers,function(r){r!==null&&t(r)})};var Yy=ka,jy=Qe,Xy=function(t,n){jy.forEach(t,function(i,o){o!==n&&o.toUpperCase()===n.toUpperCase()&&(t[n]=i,delete t[o])})},yp=Qe;function ii(e,t,n,r,i){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}yp.inherits(ii,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var vp=ii.prototype,Tp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){Tp[e]={value:e}});Object.defineProperties(ii,Tp);Object.defineProperty(vp,"isAxiosError",{value:!0});ii.from=function(e,t,n,r,i,o){var a=Object.create(vp);return yp.toFlatObject(e,a,function(l){return l!==Error.prototype}),ii.call(a,e.message,t,n,r,i),a.name=e.name,o&&Object.assign(a,o),a};var di=ii,Ip={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Gt=Qe;function Zy(e,t){t=t||new FormData;var n=[];function r(o){return o===null?"":Gt.isDate(o)?o.toISOString():Gt.isArrayBuffer(o)||Gt.isTypedArray(o)?typeof Blob=="function"?new Blob([o]):Buffer.from(o):o}function i(o,a){if(Gt.isPlainObject(o)||Gt.isArray(o)){if(n.indexOf(o)!==-1)throw Error("Circular reference detected in "+a);n.push(o),Gt.forEach(o,function(l,c){if(!Gt.isUndefined(l)){var u=a?a+"."+c:c,f;if(l&&!a&&typeof l=="object"){if(Gt.endsWith(c,"{}"))l=JSON.stringify(l);else if(Gt.endsWith(c,"[]")&&(f=Gt.toArray(l))){f.forEach(function(d){!Gt.isUndefined(d)&&t.append(u,r(d))});return}}i(l,u)}}),n.pop()}else t.append(a,r(o))}return i(e),t}var Rp=Zy,gs,Mu;function Ky(){if(Mu)return gs;Mu=1;var e=di;return gs=function(n,r,i){var o=i.config.validateStatus;!i.status||!o||o(i.status)?n(i):r(new e("Request failed with status code "+i.status,[e.ERR_BAD_REQUEST,e.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))},gs}var ms,Lu;function Qy(){if(Lu)return ms;Lu=1;var e=Qe;return ms=e.isStandardBrowserEnv()?function(){return{write:function(r,i,o,a,s,l){var c=[];c.push(r+"="+encodeURIComponent(i)),e.isNumber(o)&&c.push("expires="+new Date(o).toGMTString()),e.isString(a)&&c.push("path="+a),e.isString(s)&&c.push("domain="+s),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(r){var i=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),ms}var Jy=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},ev=function(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t},tv=Jy,nv=ev,wp=function(t,n){return t&&!tv(n)?nv(t,n):n},Es,Pu;function rv(){if(Pu)return Es;Pu=1;var e=Qe,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Es=function(r){var i={},o,a,s;return r&&e.forEach(r.split(`
`),function(c){if(s=c.indexOf(":"),o=e.trim(c.substr(0,s)).toLowerCase(),a=e.trim(c.substr(s+1)),o){if(i[o]&&t.indexOf(o)>=0)return;o==="set-cookie"?i[o]=(i[o]?i[o]:[]).concat([a]):i[o]=i[o]?i[o]+", "+a:a}}),i},Es}var _s,Du;function iv(){if(Du)return _s;Du=1;var e=Qe;return _s=e.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),i;function o(a){var s=a;return n&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=o(window.location.href),function(s){var l=e.isString(s)?o(s):s;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}(),_s}var ys,Nu;function $a(){if(Nu)return ys;Nu=1;var e=di,t=Qe;function n(r){e.call(this,r==null?"canceled":r,e.ERR_CANCELED),this.name="CanceledError"}return t.inherits(n,e,{__CANCEL__:!0}),ys=n,ys}var vs,Gu;function ov(){return Gu||(Gu=1,vs=function(t){var n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}),vs}var Ts,Uu;function Bu(){if(Uu)return Ts;Uu=1;var e=Qe,t=Ky(),n=Qy(),r=_p,i=wp,o=rv(),a=iv(),s=Ip,l=di,c=$a(),u=ov();return Ts=function(d){return new Promise(function(p,g){var m=d.data,y=d.headers,_=d.responseType,E;function v(){d.cancelToken&&d.cancelToken.unsubscribe(E),d.signal&&d.signal.removeEventListener("abort",E)}e.isFormData(m)&&e.isStandardBrowserEnv()&&delete y["Content-Type"];var T=new XMLHttpRequest;if(d.auth){var R=d.auth.username||"",O=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";y.Authorization="Basic "+btoa(R+":"+O)}var w=i(d.baseURL,d.url);T.open(d.method.toUpperCase(),r(w,d.params,d.paramsSerializer),!0),T.timeout=d.timeout;function S(){if(!!T){var C="getAllResponseHeaders"in T?o(T.getAllResponseHeaders()):null,z=!_||_==="text"||_==="json"?T.responseText:T.response,L={data:z,status:T.status,statusText:T.statusText,headers:C,config:d,request:T};t(function(x){p(x),v()},function(x){g(x),v()},L),T=null}}if("onloadend"in T?T.onloadend=S:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(S)},T.onabort=function(){!T||(g(new l("Request aborted",l.ECONNABORTED,d,T)),T=null)},T.onerror=function(){g(new l("Network Error",l.ERR_NETWORK,d,T,T)),T=null},T.ontimeout=function(){var z=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",L=d.transitional||s;d.timeoutErrorMessage&&(z=d.timeoutErrorMessage),g(new l(z,L.clarifyTimeoutError?l.ETIMEDOUT:l.ECONNABORTED,d,T)),T=null},e.isStandardBrowserEnv()){var M=(d.withCredentials||a(w))&&d.xsrfCookieName?n.read(d.xsrfCookieName):void 0;M&&(y[d.xsrfHeaderName]=M)}"setRequestHeader"in T&&e.forEach(y,function(z,L){typeof m>"u"&&L.toLowerCase()==="content-type"?delete y[L]:T.setRequestHeader(L,z)}),e.isUndefined(d.withCredentials)||(T.withCredentials=!!d.withCredentials),_&&_!=="json"&&(T.responseType=d.responseType),typeof d.onDownloadProgress=="function"&&T.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&T.upload&&T.upload.addEventListener("progress",d.onUploadProgress),(d.cancelToken||d.signal)&&(E=function(C){!T||(g(!C||C&&C.type?new c:C),T.abort(),T=null)},d.cancelToken&&d.cancelToken.subscribe(E),d.signal&&(d.signal.aborted?E():d.signal.addEventListener("abort",E))),m||(m=null);var P=u(w);if(P&&["http","https","file"].indexOf(P)===-1){g(new l("Unsupported protocol "+P+":",l.ERR_BAD_REQUEST,d));return}T.send(m)})},Ts}var Is,Vu;function av(){return Vu||(Vu=1,Is=null),Is}var Ye=Qe,Fu=Xy,ku=di,sv=Ip,lv=Rp,cv={"Content-Type":"application/x-www-form-urlencoded"};function $u(e,t){!Ye.isUndefined(e)&&Ye.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function uv(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=Bu()),e}function fv(e,t,n){if(Ye.isString(e))try{return(t||JSON.parse)(e),Ye.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}var Ha={transitional:sv,adapter:uv(),transformRequest:[function(t,n){if(Fu(n,"Accept"),Fu(n,"Content-Type"),Ye.isFormData(t)||Ye.isArrayBuffer(t)||Ye.isBuffer(t)||Ye.isStream(t)||Ye.isFile(t)||Ye.isBlob(t))return t;if(Ye.isArrayBufferView(t))return t.buffer;if(Ye.isURLSearchParams(t))return $u(n,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var r=Ye.isObject(t),i=n&&n["Content-Type"],o;if((o=Ye.isFileList(t))||r&&i==="multipart/form-data"){var a=this.env&&this.env.FormData;return lv(o?{"files[]":t}:t,a&&new a)}else if(r||i==="application/json")return $u(n,"application/json"),fv(t);return t}],transformResponse:[function(t){var n=this.transitional||Ha.transitional,r=n&&n.silentJSONParsing,i=n&&n.forcedJSONParsing,o=!r&&this.responseType==="json";if(o||i&&Ye.isString(t)&&t.length)try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?ku.from(a,ku.ERR_BAD_RESPONSE,this,null,this.response):a}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:av()},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ye.forEach(["delete","get","head"],function(t){Ha.headers[t]={}});Ye.forEach(["post","put","patch"],function(t){Ha.headers[t]=Ye.merge(cv)});var fc=Ha,dv=Qe,hv=fc,pv=function(t,n,r){var i=this||hv;return dv.forEach(r,function(a){t=a.call(i,t,n)}),t},Rs,Hu;function Ap(){return Hu||(Hu=1,Rs=function(t){return!!(t&&t.__CANCEL__)}),Rs}var zu=Qe,ws=pv,gv=Ap(),mv=fc,Ev=$a();function As(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ev}var _v=function(t){As(t),t.headers=t.headers||{},t.data=ws.call(t,t.data,t.headers,t.transformRequest),t.headers=zu.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),zu.forEach(["delete","get","head","post","put","patch","common"],function(i){delete t.headers[i]});var n=t.adapter||mv.adapter;return n(t).then(function(i){return As(t),i.data=ws.call(t,i.data,i.headers,t.transformResponse),i},function(i){return gv(i)||(As(t),i&&i.response&&(i.response.data=ws.call(t,i.response.data,i.response.headers,t.transformResponse))),Promise.reject(i)})},Tt=Qe,Op=function(t,n){n=n||{};var r={};function i(u,f){return Tt.isPlainObject(u)&&Tt.isPlainObject(f)?Tt.merge(u,f):Tt.isPlainObject(f)?Tt.merge({},f):Tt.isArray(f)?f.slice():f}function o(u){if(Tt.isUndefined(n[u])){if(!Tt.isUndefined(t[u]))return i(void 0,t[u])}else return i(t[u],n[u])}function a(u){if(!Tt.isUndefined(n[u]))return i(void 0,n[u])}function s(u){if(Tt.isUndefined(n[u])){if(!Tt.isUndefined(t[u]))return i(void 0,t[u])}else return i(void 0,n[u])}function l(u){if(u in n)return i(t[u],n[u]);if(u in t)return i(void 0,t[u])}var c={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l};return Tt.forEach(Object.keys(t).concat(Object.keys(n)),function(f){var d=c[f]||o,h=d(f);Tt.isUndefined(h)&&d!==l||(r[f]=h)}),r},Os,qu;function Sp(){return qu||(qu=1,Os={version:"0.27.2"}),Os}var yv=Sp().version,Fn=di,dc={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){dc[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});var Wu={};dc.transitional=function(t,n,r){function i(o,a){return"[Axios v"+yv+"] Transitional option '"+o+"'"+a+(r?". "+r:"")}return function(o,a,s){if(t===!1)throw new Fn(i(a," has been removed"+(n?" in "+n:"")),Fn.ERR_DEPRECATED);return n&&!Wu[a]&&(Wu[a]=!0,console.warn(i(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,a,s):!0}};function vv(e,t,n){if(typeof e!="object")throw new Fn("options must be an object",Fn.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],a=t[o];if(a){var s=e[o],l=s===void 0||a(s,o,e);if(l!==!0)throw new Fn("option "+o+" must be "+l,Fn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Fn("Unknown option "+o,Fn.ERR_BAD_OPTION)}}var Tv={assertOptions:vv,validators:dc},bp=Qe,Iv=_p,Yu=Yy,ju=_v,za=Op,Rv=wp,Cp=Tv,Lr=Cp.validators;function oi(e){this.defaults=e,this.interceptors={request:new Yu,response:new Yu}}oi.prototype.request=function(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=za(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var r=n.transitional;r!==void 0&&Cp.assertOptions(r,{silentJSONParsing:Lr.transitional(Lr.boolean),forcedJSONParsing:Lr.transitional(Lr.boolean),clarifyTimeoutError:Lr.transitional(Lr.boolean)},!1);var i=[],o=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(n)===!1||(o=o&&h.synchronous,i.unshift(h.fulfilled,h.rejected))});var a=[];this.interceptors.response.forEach(function(h){a.push(h.fulfilled,h.rejected)});var s;if(!o){var l=[ju,void 0];for(Array.prototype.unshift.apply(l,i),l=l.concat(a),s=Promise.resolve(n);l.length;)s=s.then(l.shift(),l.shift());return s}for(var c=n;i.length;){var u=i.shift(),f=i.shift();try{c=u(c)}catch(d){f(d);break}}try{s=ju(c)}catch(d){return Promise.reject(d)}for(;a.length;)s=s.then(a.shift(),a.shift());return s};oi.prototype.getUri=function(t){t=za(this.defaults,t);var n=Rv(t.baseURL,t.url);return Iv(n,t.params,t.paramsSerializer)};bp.forEach(["delete","get","head","options"],function(t){oi.prototype[t]=function(n,r){return this.request(za(r||{},{method:t,url:n,data:(r||{}).data}))}});bp.forEach(["post","put","patch"],function(t){function n(r){return function(o,a,s){return this.request(za(s||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}oi.prototype[t]=n(),oi.prototype[t+"Form"]=n(!0)});var wv=oi,Ss,Xu;function Av(){if(Xu)return Ss;Xu=1;var e=$a();function t(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(a){r=a});var i=this;this.promise.then(function(o){if(!!i._listeners){var a,s=i._listeners.length;for(a=0;a<s;a++)i._listeners[a](o);i._listeners=null}}),this.promise.then=function(o){var a,s=new Promise(function(l){i.subscribe(l),a=l}).then(o);return s.cancel=function(){i.unsubscribe(a)},s},n(function(a){i.reason||(i.reason=new e(a),r(i.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]},t.prototype.unsubscribe=function(r){if(!!this._listeners){var i=this._listeners.indexOf(r);i!==-1&&this._listeners.splice(i,1)}},t.source=function(){var r,i=new t(function(a){r=a});return{token:i,cancel:r}},Ss=t,Ss}var bs,Zu;function Ov(){return Zu||(Zu=1,bs=function(t){return function(r){return t.apply(null,r)}}),bs}var Cs,Ku;function Sv(){if(Ku)return Cs;Ku=1;var e=Qe;return Cs=function(n){return e.isObject(n)&&n.isAxiosError===!0},Cs}var Qu=Qe,bv=gp,ea=wv,Cv=Op,xv=fc;function xp(e){var t=new ea(e),n=bv(ea.prototype.request,t);return Qu.extend(n,ea.prototype,t),Qu.extend(n,t),n.create=function(i){return xp(Cv(e,i))},n}var _t=xp(xv);_t.Axios=ea;_t.CanceledError=$a();_t.CancelToken=Av();_t.isCancel=Ap();_t.VERSION=Sp().version;_t.toFormData=Rp;_t.AxiosError=di;_t.Cancel=_t.CanceledError;_t.all=function(t){return Promise.all(t)};_t.spread=Ov();_t.isAxiosError=Sv();oc.exports=_t;oc.exports.default=_t;(function(e){e.exports=oc.exports})(pp);const Ar=wy(pp.exports);const Mv={props:{post:{type:Object,required:!0}},data(){return{}}},Mp=e=>(Da("data-v-7030e5c8"),e=e(),Na(),e),Lv={style:{padding:"0"},colspan:"2"},Pv={class:"card_image__wrap"},Dv=["src"],Nv=Mp(()=>F("td",null,[F("p",{class:"bold"},"\uC9C0\uB3C4\uC77C\uC790")],-1)),Gv=Mp(()=>F("td",null,[F("p",{class:"bold"},"\uD604\uC7A5\uBA85")],-1));function Uv(e,t,n,r,i,o){return Oe(),Ce("table",null,[F("tbody",null,[F("tr",null,[F("td",Lv,[F("div",Pv,[F("button",{class:"card_button",onClick:t[0]||(t[0]=a=>e.$emit("delete-post",n.post))},"\uC0AD\uC81C"),F("img",{src:n.post.photo,onClick:t[1]||(t[1]=a=>e.$router.push({name:"DetailView",params:{id:n.post.id}}))},null,8,Dv)])])]),F("tr",null,[Nv,F("td",null,[F("p",null,kn(n.post.date),1)])]),F("tr",null,[Gv,F("td",null,[F("p",null,kn(n.post.subject),1)])])])])}const Bv=Ke(Mv,[["render",Uv],["__scopeId","data-v-7030e5c8"]]),To="/api/posts/",Vv=async e=>{const t=await Ar.get(To),{data:n}=t;return n},Lp=async e=>(await Ar.get(To+e)).data,Fv=async e=>{const t=await Ar.post(To,e),{data:n}=t;return n},kv=async(e,t)=>(await Ar.put(To+e,t)).data,$v=async e=>(await Ar.delete(To+e)).data;const Hv={components:{Card:Bv},data(){return{allPosts:[]}},created(){Vv().then(e=>{this.allPosts=e.reverse()})},methods:{deletePost(e){$v(e.id).then(t=>{const n=this.allPosts.findIndex(r=>r.id===e.id);n!==-1&&this.allPosts.splice(n,1)}).catch(t=>{})}}},zv={class:"v-sheet"},qv={class:"main__wrap"};function Wv(e,t,n,r,i,o){const a=Pe("Card");return Oe(),Ce("div",zv,[F("div",qv,[(Oe(!0),Ce(Me,null,io(i.allPosts,s=>(Oe(),tc(a,{key:s.id,post:s,onDeletePost:o.deletePost},null,8,["post","onDeletePost"]))),128))])])}const Yv=Ke(Hv,[["render",Wv],["__scopeId","data-v-c0f9bf62"]]),jv={},Xv=F("path",{d:"M160,168l-48,48H66.75L36.69,185.94a16,16,0,0,1,0-22.63L96,104Z",opacity:"0.2"},null,-1),Zv=F("path",{d:"M225,80.4,183.6,39a24,24,0,0,0-33.94,0L31,157.66a24,24,0,0,0,0,33.94l30.06,30.06A8,8,0,0,0,66.74,224H216a8,8,0,0,0,0-16h-84.7L225,114.34A24,24,0,0,0,225,80.4ZM108.68,208H70.05L42.33,180.28a8,8,0,0,1,0-11.31L96,115.31,148.69,168Zm105-105L160,156.69,107.31,104,161,50.34a8,8,0,0,1,11.32,0l41.38,41.38a8,8,0,0,1,0,11.31Z"},null,-1);function Kv(e,t){return Oe(),Ce(Me,null,[Xv,Zv],64)}const Qv=Ke(jv,[["render",Kv]]),Jv={},e1=F("path",{d:"M232,96v80H192V152H64v24H24V96c0-8.84,7.76-16,17.33-16H214.67C224.24,80,232,87.16,232,96Z",opacity:"0.2"},null,-1),t1=F("path",{d:"M214.67,72H200V40a8,8,0,0,0-8-8H64a8,8,0,0,0-8,8V72H41.33C27.36,72,16,82.77,16,96v80a8,8,0,0,0,8,8H56v32a8,8,0,0,0,8,8H192a8,8,0,0,0,8-8V184h32a8,8,0,0,0,8-8V96C240,82.77,228.64,72,214.67,72ZM72,48H184V72H72ZM184,208H72V160H184Zm40-40H200V152a8,8,0,0,0-8-8H64a8,8,0,0,0-8,8v16H32V96c0-4.41,4.19-8,9.33-8H214.67c5.14,0,9.33,3.59,9.33,8Zm-24-52a12,12,0,1,1-12-12A12,12,0,0,1,200,116Z"},null,-1);function n1(e,t){return Oe(),Ce(Me,null,[e1,t1],64)}const r1=Ke(Jv,[["render",n1]]),i1={components:{icon:vo,Fix:Qv,Printer:r1},data(){return{postData:null}},computed:{formattedDate(){const e=new Date(this.postData.date),t=e.getFullYear(),n=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0");return`${t}\uB144 ${n}\uC6D4 ${r}\uC77C`}},methods:{printPage(){const e=this.$refs.page,t=window.open("","","width=794,height=1123");t.document.write(`
        <html>
          <head>
            <title>Print</title>
            <style>
              @media print {
                @page {
                  size: A4;
                  margin: 0;
                }


               



                * {
  white-space: normal;
  word-break: keep-all;
  box-sizing: border-box;
  text-decoration-line: none;
  font-family: 'spoqa';
}
.bold { 
  font-weight: 700;
}
p { 
  font-size: 18px; 
}
body {
  margin: 0;
  padding: 0;
}
table {
  width: 100%;
  border: 1px solid #000;
  border-collapse: collapse;
}
th, td {
  border: 1px solid #000;
  padding: 10px;
}
input {
  outline: none;
  width: 100%;
  border: none;
  font-size: 18px;
}
textarea {
  border: none;
  font-size: 18px;
}
textarea:focus {
  outline: none;
}
a {
  color: #000;
}
button{
  background: inherit ; 
  border:none; 
  box-shadow:none; 
  border-radius:0; 
  padding:0; 
  overflow:visible; 
  cursor:pointer
}
button {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 14px 24px 16px;
  font-size: 18px;
  font-weight: 700;
  border-radius: 10px;
  color: #fff;
  transition: all .25s ease;
  background-color: #5551ff;
}
button:hover {
  transform: translateY(-2px);
}
.fixed_button__wrap {
  position: fixed;
  display: flex;
  flex-direction: column;
  gap: 18px;
  top: 120px;
  right: 50px;
}
.save_button {
  color: #fff;
  background-color: #5551ff;
}
.add_button {
  color: #000;
  background-color: #ff6498;
}
.create_button {
  color: #fff;
  background-color: #000;
}
.close_button {
  position: absolute;
  top: 20px;
  right: 20px;
  color: #fff;
  background-color: #000;
}






.v-main {
  display: flex;
  justify-content: center;
}
.v-toolbar__content, .v-toolbar__extension {
  display: flex;
  align-items: center;
  justify-content: center;
  border-bottom: 1px solid black;
}
.appbar__wrap {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  max-width: 1192px;
  margin: 0 64px;
}
.appbar__left-content a {
  display: flex;
  align-items: center;
font-weight: 700;
}
.appbar__left-content svg {
  width: 100%;
  height: 100%;
}
.v-sheet {
  width: 100%;
  margin-top: 64px;
  background-color: #fff;
  display: flex;
  justify-content: center;
}


.write__content table:hover { 
  border: 1 solid rgb(var(--v-theme-primary));
   box-shadow: 0 10px 20px -10px rgba(0,0,0,.8);
}


.create__header {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 25px;
  margin-bottom: 20px;
}
.create__footer {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 25px;
}
.footer__left {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 25px;
}
.footer__right {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 25px;
}
.write__wrap {
  position: relative;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 25px;
  padding: 20px 0;
  align-content: stretch;
}
.write__content {
  position: relative;
  width: 100%;
}

.addContent__wrap {
  position: relative;
  border: 1px solid #000;
  min-height: 200px;
}
.addContent__content {
  width: 100%;
  height: 100%;
  transition: all .25s ease;
  cursor: pointer;
}

.addContent__content:hover {
  color: #fff;
  background-color: #5551ff;
}

.filepond__wrap {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 160px;
  width: 100%;
}

textarea {
  width: 100%;
  resize: none!important;
}




.filepond--credits {
  display: none;
}



.app-bar {
  position: fixed;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 64px;
  top: 0;
  left: 0;
  background-color: #fff;
  z-index: 1000;
  border-bottom: 1px solid #000;
}




@page {
  size: A4;
  margin: 0;
}
.page {
  position: relative;
  width: 21cm;
  min-height: 29.7cm;
  padding: 1.5cm 1.5cm 2cm 1.5cm;
  background-color: white;
}

.a4_size {
  position: absolute;
  height: 1px;
  width: 100%;
  bottom: 2cm;
  left: 0px;
  background-color: red;
  z-index: 100;
}

.detail__wrap {
  margin: 0;
  padding: 40px 0;
  background-color: rgba(0,0,0,.4);
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
}










.detail__wrap p {
  font-size: 14px; 
}
.table {
  width: 100%;
  border: 1px solid #000;
  border-collapse: collapse;
}
th, 
td {
  border: 1px solid #000;
  padding: 5px;
}
.detail_title {
  position: relative;
  display: flex;
  align-items: center;
  flex-direction: column;
  font-size: 12px;
  width: 100%;
  margin-bottom: 60px;
}
.title_1 {
  position: relative;
  display: flex;
  justify-content: space-between;
  width: 30%;
}
.title_2 {
  display: block;
  height: 2px;
  width: 30%;
  background-color: black;
}
.detail_flex {
  font-size: 16px;
  position: relative;
  display: flex;
  gap: 12px;
  height: 32px;
}
.flex_1 {
  display: flex;
  justify-content: space-between;
  width: 10%;
}







.page_grid {
  position: relative;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  margin-top: 32px;
  align-content: stretch;
  width: 100%;
  overflow: hidden;
}

.page_table {
  position: relative;
  display: block;
  width: 100%;
}
.paper_img__wrap {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  height: 120px;
}


.paper_img_content {
  position: relative;
  display: flex;
  justify-content: center;
  height: 140px;
  overflow: hidden;
}
.paper_img_content img {
  position: relative;
  display: block;
  height: 140px;
  width: auto;
}
.footer {
  display: block;
  position: absolute;
  bottom: 2.5cm;
  right: 1.5cm;
}






              }
              body {
                margin: 0;
                padding: 0;
              }
            </style>
          </head>
          <body>
            ${e.outerHTML}
          </body>
        </html>
      `),t.focus(),t.print(),t.close()}},created(){const e=this.$route.params.id;Lp(e).then(t=>{this.postData=t})}},o1={class:"v-sheet"},a1={class:"detail__wrap"},s1={class:"fixed_button__wrap"},l1={key:0,class:"page",ref:"page"},c1=F("div",{class:"a4_size"},null,-1),u1=F("div",{class:"detail_title"},[F("div",{class:"title_1"},[F("h1",null,"\uC0AC"),F("h1",null,"\uC9C4"),F("h1",null,"\uB300"),F("h1",null,"\uC9C0")]),F("div",{class:"title_2"})],-1),f1={class:"detail_flex"},d1=F("div",{class:"flex_1"},[F("p",null,"\uC9C0"),F("p",null,"\uB3C4"),F("p",null,"\uC77C"),F("p",null,"\uC790")],-1),h1=F("p",null,":",-1),p1={class:"detail_flex"},g1=F("div",{class:"flex_1"},[F("p",null,"\uD604"),F("p",null,"\uC7A5"),F("p",null,"\uBA85")],-1),m1=F("p",null,":",-1),E1={class:"page_grid"},_1=["post"],y1={colspan:"2",style:{padding:"1px"}},v1=["src"],T1=F("div",{class:"footer"},[F("p",null,"\uC138\uC885\uC548\uC804\uAE30\uC220(\uC8FC)")],-1);function I1(e,t,n,r,i,o){const a=Pe("Fix"),s=Pe("icon"),l=Pe("Printer");return Oe(),Ce("div",o1,[F("div",a1,[F("div",s1,[F("button",{class:"add_button",onClick:t[0]||(t[0]=()=>this.$router.push({name:"EditView",params:{id:i.postData.id}}))},[pe(s,{icon:"Fix"},{default:et(()=>[pe(a)]),_:1}),Wt("\uC218\uC815")]),F("button",{class:"save_button",onClick:t[1]||(t[1]=(...c)=>o.printPage&&o.printPage(...c))},[pe(s,{icon:"Printer"},{default:et(()=>[pe(l)]),_:1}),Wt("Print")])]),i.postData?(Oe(),Ce("div",l1,[c1,u1,F("div",f1,[d1,h1,F("p",null,kn(o.formattedDate),1)]),F("div",p1,[g1,m1,F("p",null,kn(i.postData.subject),1)]),F("div",E1,[(Oe(!0),Ce(Me,null,io(i.postData.contents,c=>(Oe(),Ce("div",{class:"page_table",key:c.id,post:c},[F("table",null,[F("tbody",null,[F("tr",null,[F("td",y1,[(Oe(!0),Ce(Me,null,io(c.image,u=>(Oe(),Ce("div",{key:u,class:"paper_img_content"},[F("img",{src:u},null,8,v1)]))),128))])]),F("tr",null,[F("td",null,[F("p",null,kn(c.title),1)]),F("td",null,[F("p",null,kn(c.detail),1)])])])])],8,_1))),128))]),T1],512)):Qh("",!0)])])}const R1=Ke(i1,[["render",I1]]),w1={},A1=F("path",{d:"M216,91.31V208a8,8,0,0,1-8,8H176V152a8,8,0,0,0-8-8H88a8,8,0,0,0-8,8v64H48a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H164.69a8,8,0,0,1,5.65,2.34l43.32,43.31A8,8,0,0,1,216,91.31Z",opacity:"0.2"},null,-1),O1=F("path",{d:"M219.31,80,176,36.69A15.86,15.86,0,0,0,164.69,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V91.31A15.86,15.86,0,0,0,219.31,80ZM168,208H88V152h80Zm40,0H184V152a16,16,0,0,0-16-16H88a16,16,0,0,0-16,16v56H48V48H164.69L208,91.31ZM160,72a8,8,0,0,1-8,8H96a8,8,0,0,1,0-16h56A8,8,0,0,1,160,72Z"},null,-1);function S1(e,t){return Oe(),Ce(Me,null,[A1,O1],64)}const Pp=Ke(w1,[["render",S1]]),b1={},C1=F("path",{d:"M208,88H152V32Z",opacity:"0.2"},null,-1),x1=F("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Zm-40-64a8,8,0,0,1-8,8H136v16a8,8,0,0,1-16,0V160H104a8,8,0,0,1,0-16h16V128a8,8,0,0,1,16,0v16h16A8,8,0,0,1,160,152Z"},null,-1);function M1(e,t){return Oe(),Ce(Me,null,[C1,x1],64)}const Dp=Ke(b1,[["render",M1]]),L1={},P1=F("path",{d:"M200,56V208a8,8,0,0,1-8,8H64a8,8,0,0,1-8-8V56Z",opacity:"0.2"},null,-1),D1=F("path",{d:"M216,48H176V40a24,24,0,0,0-24-24H104A24,24,0,0,0,80,40v8H40a8,8,0,0,0,0,16h8V208a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V64h8a8,8,0,0,0,0-16ZM96,40a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8v8H96Zm96,168H64V64H192ZM112,104v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm48,0v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Z"},null,-1);function N1(e,t){return Oe(),Ce(Me,null,[P1,D1],64)}const Np=Ke(L1,[["render",N1]]);const G1="/api/images/",U1=async e=>{const t=await Ar.post(G1+"/",e),{data:n}=t;return n};/*!
 * Doka Image Editor 6.16.1
 * (c) 2018-2020 PQINA Inc. - All Rights Reserved
 * License: https://pqina.nl/doka/license/
 */function In(e){return(In=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function B1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){B1(e,i,n[i])})}return e}function qr(e,t){return F1(e)||$1(e,t)||z1()}function tn(e){return V1(e)||k1(e)||H1()}function V1(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function F1(e){if(Array.isArray(e))return e}function k1(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function $1(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||s.return==null||s.return()}finally{if(i)throw o}}return n}function H1(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function z1(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var q1=function(e){return e instanceof HTMLElement},Ju=function(e,t){return t.parentNode.insertBefore(e,t)},ef=function(e,t){return t.parentNode.insertBefore(e,t.nextSibling)},lo=function(e){return In(e)==="object"&&e!==null},W1=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=te({},e),i=[],o=[],a=function(f,d,h){h?o.push({type:f,data:d}):(u[f]&&u[f](d),i.push({type:f,data:d}))},s=function(f){for(var d,h=arguments.length,p=new Array(h>1?h-1:0),g=1;g<h;g++)p[g-1]=arguments[g];return c[f]?(d=c)[f].apply(d,p):null},l={getState:function(){return te({},r)},processActionQueue:function(){var f=[].concat(i);return i.length=0,f},processDispatchQueue:function(){var f=[].concat(o);o.length=0,f.forEach(function(d){var h=d.type,p=d.data;a(h,p)})},dispatch:a,query:s},c={};t.forEach(function(f){c=te({},f(r),c)});var u={};return n.forEach(function(f){u=te({},f(a,s,r),u)}),l},Y1=function(e,t,n){typeof n!="function"?Object.defineProperty(e,t,n):e[t]=n},$e=function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])},_r=function(e){var t={};return $e(e,function(n){Y1(t,n,e[n])}),t},co=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(n===null)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,n)},j1="http://www.w3.org/2000/svg",X1=["svg","path"],tf=function(e){return X1.includes(e)},Te=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};In(t)==="object"&&(n=t,t=null);var r=tf(e)?document.createElementNS(j1,e):document.createElement(e);return t&&(tf(e)?co(r,"class",t):r.className=t),$e(n,function(i,o){co(r,i,o)}),r},Nn=function(e){return function(t,n){n!==void 0&&e.children[n]?e.insertBefore(t,e.children[n]):e.appendChild(t)}},Z1=function(e,t){return function(n,r){return r!==void 0?t.splice(r,0,n):t.push(n),n}},K1=function(e,t){return function(n){var r=t.splice(t.indexOf(n),1);return r.length&&r[0]._destroy(),n.element.parentNode&&e.removeChild(n.element),n}},Gp=function(e,t,n,r){var i=n[0]||e.left,o=n[1]||e.top,a=i+e.width,s=o+e.height*(r[1]||1),l={element:te({},e),inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:i,top:o,right:a,bottom:s}};return t.filter(function(c){return!c.isRectIgnored()}).map(function(c){return c.rect}).forEach(function(c){nf(l.inner,te({},c.inner)),nf(l.outer,te({},c.outer))}),rf(l.inner),l.outer.bottom+=l.element.marginBottom,l.outer.right+=l.element.marginRight,rf(l.outer),l},nf=function(e,t){t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},rf=function(e){e.width=e.right-e.left,e.height=e.bottom-e.top},$t=function(e){return typeof e=="number"},Q1=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.001;return Math.abs(e-t)<r&&Math.abs(n)<r},nn=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.stiffness,n=t===void 0?.5:t,r=e.damping,i=r===void 0?.75:r,o=e.mass,a=o===void 0?10:o,s=e.delay,l=s===void 0?0:s,c=null,u=null,f=0,d=!1,h=null,p=_r({interpolate:function(g){if(h===null&&(h=g),!(g-l<h||d)){if(!$t(c)||!$t(u))return d=!0,void(f=0);Q1(u+=f+=-(u-c)*n/a,c,f*=i)?(u=c,f=0,d=!0,p.onupdate(u),p.oncomplete(u)):p.onupdate(u)}},target:{set:function(g){if($t(g)&&!$t(u)&&(u=g,h=null),c===null&&(c=g,u=g,h=null),d&&(h=null),u===(c=g)||c===void 0)return d=!0,f=0,h=null,p.onupdate(u),void p.oncomplete(u);d=!1},get:function(){return c}},resting:{get:function(){return d}},onupdate:function(){},oncomplete:function(){},position:{get:function(){return u}}});return p},J1=function(e){return e<.5?2*e*e:(4-2*e)*e-1},eT=function(){var e,t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.duration,i=r===void 0?500:r,o=n.easing,a=o===void 0?J1:o,s=n.delay,l=s===void 0?0:s,c=null,u=!0,f=!1,d=null,h=_r({interpolate:function(p){u||d===null||(c===null&&(c=p),p-c<l||((e=p-c-l)<i?(t=e/i,h.onupdate((e>=0?a(f?1-t:t):0)*d)):(e=1,t=f?0:1,h.onupdate(t*d),h.oncomplete(t*d),u=!0)))},target:{get:function(){return f?0:d},set:function(p){if(d===null)return d=p,h.onupdate(p),void h.oncomplete(p);p<d?(d=1,f=!0):(f=!1,d=p),u=!1,c=null}},resting:{get:function(){return u}},onupdate:function(){},oncomplete:function(){}});return h},of={spring:nn,tween:eT},tT=function(e,t,n){var r=e[t]&&In(e[t][n])==="object"?e[t][n]:e[t]||e,i=typeof r=="string"?r:r.type,o=In(r)==="object"?te({},r):{};return of[i]?of[i](o):null},hc=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0&&arguments[3];(t=Array.isArray(t)?t:[t]).forEach(function(i){e.forEach(function(o){var a=o,s=function(){return n[o]},l=function(c){return n[o]=c};In(o)==="object"&&(a=o.key,s=o.getter||s,l=o.setter||l),i[a]&&!r||(i[a]={get:s,set:l})})})},nT=function(e){var t=e.mixinConfig,n=e.viewProps,r=e.viewInternalAPI,i=e.viewExternalAPI,o=te({},n),a=[];return $e(t,function(s,l){var c=tT(l);c&&(c.onupdate=function(u){n[s]=u},c.target=o[s],hc([{key:s,setter:function(u){c.target!==u&&(c.target=u)},getter:function(){return n[s]}}],[r,i],n,!0),a.push(c))}),{write:function(s){var l=!0;return a.forEach(function(c){c.resting||(l=!1),c.interpolate(s)}),l},destroy:function(){}}},ml=function(e){return function(t,n){e.addEventListener(t,n)}},El=function(e){return function(t,n){e.removeEventListener(t,n)}},rT=function(e){var t=e.viewExternalAPI,n=e.view,r=[],i=ml(n.element),o=El(n.element);return t.on=function(a,s){r.push({type:a,fn:s}),i(a,s)},t.off=function(a,s){r.splice(r.findIndex(function(l){return l.type===a&&l.fn===s}),1),o(a,s)},{write:function(){return!0},destroy:function(){r.forEach(function(a){o(a.type,a.fn)})}}},iT=function(e){var t=e.mixinConfig,n=e.viewProps,r=e.viewExternalAPI;hc(t,r,n)},oT={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},aT=function(e){var t=e.mixinConfig,n=e.viewProps,r=e.viewInternalAPI,i=e.viewExternalAPI,o=e.view,a=te({},n),s={};hc(t,[r,i],n);var l=function(){return o.rect?Gp(o.rect,o.childViews,[n.translateX||0,n.translateY||0],[n.scaleX||0,n.scaleY||0]):null};return r.rect={get:l},i.rect={get:l},t.forEach(function(c){n[c]=a[c]===void 0?oT[c]:a[c]}),{write:function(){if(sT(s,n))return lT(o.element,n),Object.assign(s,te({},n)),!0},destroy:function(){}}},sT=function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!0;for(var n in t)if(t[n]!==e[n])return!0;return!1},lT=function(e,t){var n=t.opacity,r=t.perspective,i=t.translateX,o=t.translateY,a=t.scaleX,s=t.scaleY,l=t.rotateX,c=t.rotateY,u=t.rotateZ,f=t.originX,d=t.originY,h=t.width,p=t.height,g="",m="";f==null&&d==null||(m+="transform-origin: ".concat(f||0,"px ").concat(d||0,"px;")),r!=null&&(g+="perspective(".concat(r,"px) ")),i==null&&o==null||(g+="translate3d(".concat(i||0,"px, ").concat(o||0,"px, 0) ")),a==null&&s==null||(g+="scale3d(".concat(a!=null?a:1,", ").concat(s!=null?s:1,", 1) ")),u!=null&&(g+="rotateZ(".concat(u,"rad) ")),l!=null&&(g+="rotateX(".concat(l,"rad) ")),c!=null&&(g+="rotateY(".concat(c,"rad) ")),g!=""&&(m+="transform:".concat(g,";")),n!=null&&(m+="opacity:".concat(n,";"),n<1&&(m+="pointer-events:none;"),n===0&&e.nodeName==="BUTTON"&&(m+="visibility:hidden;")),h!=null&&(m+="width:".concat(h,"px;")),p!=null&&(m+="height:".concat(p,"px;"));var y=e.elementCurrentStyle||"";m.length===y.length&&m===y||(e.style.cssText=m,e.elementCurrentStyle=m)},cT={styles:aT,listeners:rT,animations:nT,apis:iT},af=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t.layoutCalculated||(e.paddingTop=parseInt(n.paddingTop,10)||0,e.marginTop=parseInt(n.marginTop,10)||0,e.marginRight=parseInt(n.marginRight,10)||0,e.marginBottom=parseInt(n.marginBottom,10)||0,e.marginLeft=parseInt(n.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=t.offsetParent===null&&n.position!=="fixed",e},uT=typeof window<"u"&&window.document!==void 0,Rr=function(){return uT},fT=Rr()?Te("svg"):{},dT="children"in fT?function(e){return e.children.length}:function(e){return e.childNodes.length},he=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.tag,n=t===void 0?"div":t,r=e.name,i=r===void 0?null:r,o=e.attributes,a=o===void 0?{}:o,s=e.read,l=s===void 0?function(){}:s,c=e.write,u=c===void 0?function(){}:c,f=e.create,d=f===void 0?function(){}:f,h=e.destroy,p=h===void 0?function(){}:h,g=e.filterFrameActionsForChild,m=g===void 0?function(z,L){return L}:g,y=e.didCreateView,_=y===void 0?function(){}:y,E=e.didWriteView,v=E===void 0?function(){}:E,T=e.shouldUpdateChildViews,R=T===void 0?function(){return!0}:T,O=e.ignoreRect,w=O!==void 0&&O,S=e.ignoreRectUpdate,M=S!==void 0&&S,P=e.mixins,C=P===void 0?[]:P;return function(z){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},q=Te(n,i?"doka--".concat(i):null,a),x=window.getComputedStyle(q,null),b=af(),N=null,H=!1,Q=[],Y=[],oe={},ce={},de=[u],B=[l],D=[p],$=function(){return q},X=function(){return[].concat(Q)},ne=function(){return N||(N=Gp(b,Q,[0,0],[1,1]))},ie=function(){return q.layoutCalculated=!1},ae={element:{get:$},style:{get:function(){return x}},childViews:{get:X}},I=te({},ae,{rect:{get:ne},ref:{get:function(){return oe}},is:function(k){return i===k},appendChild:Nn(q),createChildView:function(k){return function(ee,Z){return ee(k,Z)}}(z),linkView:function(k){return Q.push(k),k},unlinkView:function(k){Q.splice(Q.indexOf(k),1)},appendChildView:Z1(q,Q),removeChildView:K1(q,Q),registerWriter:function(k){return de.push(k)},registerReader:function(k){return B.push(k)},registerDestroyer:function(k){return D.push(k)},invalidateLayout:ie,dispatch:z.dispatch,query:z.query}),A={element:{get:$},childViews:{get:X},rect:{get:ne},resting:{get:function(){return H}},isRectIgnored:function(){return w},invalidateLayout:ie,_read:function(){N=null,R({root:U,props:L})&&Q.forEach(function(ee){return ee._read()}),!(M&&b.width&&b.height)&&af(b,q,x);var k={root:U,props:L,rect:b};B.forEach(function(ee){return ee(k)})},_write:function(k){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Z=ee.length===0;return de.forEach(function(K){K({props:L,root:U,actions:ee,timestamp:k})===!1&&(Z=!1)}),Y.forEach(function(K){K.write(k)===!1&&(Z=!1)}),R({props:L,root:U,actions:ee,timestamp:k})&&(Q.filter(function(K){return!!K.element.parentNode}).forEach(function(K){K._write(k,m(K,ee))||(Z=!1)}),Q.forEach(function(K,J){K.element.parentNode||(U.appendChild(K.element,J),K._read(),K._write(k,m(K,ee)),Z=!1)})),H=Z,v({props:L,root:U,actions:ee,timestamp:k}),Z},_destroy:function(){Y.forEach(function(k){return k.destroy()}),D.forEach(function(k){k({root:U})}),Q.forEach(function(k){return k._destroy()})}},V=te({},ae,{rect:{get:function(){return b}}});Object.keys(C).sort(function(k,ee){return k==="styles"?1:ee==="styles"?-1:0}).forEach(function(k){var ee=cT[k]({mixinConfig:C[k],viewProps:L,viewState:ce,viewInternalAPI:I,viewExternalAPI:A,view:_r(V)});ee&&Y.push(ee)});var U=_r(I);d({root:U,props:L});var W=dT(q)||0;return Q.forEach(function(k,ee){U.appendChild(k.element,W+ee)}),_(U),_r(A)}},hT=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:60,r="__framePainter";if(window[r])return window[r].readers.push(e),void window[r].writers.push(t);window[r]={readers:[e],writers:[t]};var i=window[r],o=1e3/n,a=null,s=null,l=null,c=null,u=function(){document.hidden?(l=function(){return window.setTimeout(function(){return f(performance.now())},o)},c=function(){return window.clearTimeout(s)}):(l=function(){return window.requestAnimationFrame(f)},c=function(){return window.cancelAnimationFrame(s)})};document.addEventListener("visibilitychange",function(){c&&c(),u(),f(performance.now())});var f=function d(h){s=l(d),a||(a=h);var p=h-a;p<=o||(a=h-p%o,i.readers.forEach(function(g){return g()}),i.writers.forEach(function(g){return g(h)}))};return u(),f(performance.now()),{pause:function(){c(s)}}},Be=function(e,t){return function(n){var r=n.root,i=n.props,o=n.actions,a=o===void 0?[]:o,s=n.timestamp;if(a.filter(function(l){return e[l.type]}).forEach(function(l){return e[l.type]({root:r,props:i,action:l.data,timestamp:s})}),t)return t({root:r,props:i,actions:a,timestamp:s})}},Up=function(e){return Array.isArray(e)},pc=function(e){return e==null},pT=function(e){return e.trim()},qa=function(e){return""+e},gT=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return pc(e)?[]:Up(e)?e:qa(e).split(t).map(pT).filter(function(n){return n.length})},_l=function(e){return typeof e=="boolean"},mT=function(e){return _l(e)?e:e==="true"},ct=function(e){return typeof e=="string"},Bp=function(e){return $t(e)?e:ct(e)?qa(e).replace(/[a-z]+/gi,""):0},ta=function(e){return parseInt(Bp(e),10)},sf=function(e){return parseFloat(Bp(e))},Vp=function(e){return $t(e)&&isFinite(e)&&Math.floor(e)===e},lf=function(e){if(Vp(e))return e;var t=qa(e).trim();return/MB$/i.test(t)?(t=t.replace(/MB$i/,"").trim(),1e3*ta(t)*1e3):/KB/i.test(t)?(t=t.replace(/KB$i/,"").trim(),1e3*ta(t)):ta(t)},ET=function(e){return typeof e=="function"},_T=function(e){for(var t=self,n=e.split("."),r=null;r=n.shift();)if(!(t=t[r]))return null;return t},yT=function(e){return e===null},yl=function(e){return Up(e)?"array":yT(e)?"null":Vp(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":In(e)},vT=function(e){return e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",')},TT={array:gT,boolean:mT,int:function(e){return yl(e)==="bytes"?lf(e):ta(e)},float:sf,bytes:lf,number:sf,string:function(e){return ET(e)?e:qa(e)},object:function(e){try{return JSON.parse(vT(e))}catch{return e}},file:function(e){return e},function:function(e){return _T(e)}},IT=function(e,t){return TT[t](e)},Fp=function(e,t,n){if(e===t)return e;var r=yl(e);if(r!==n){var i=IT(e,n);if(r=yl(i),i===null)throw'Trying to assign value with incorrect type, allowed type: "'.concat(n,'"');e=i}return e},RT=function(e,t){var n=e;return{enumerable:!0,get:function(){return n},set:function(r){n=Fp(r,e,t)}}},wT=function(e){var t={};return $e(e,function(n){var r=ct(e[n])?e[n]:n,i=e[r];t[n]=r===n?RT(i[0],i[1]):t[r]}),_r(t)},Fi=function(e){e.file=null,e.activeView=null,e.markup=[],e.markupToolValues={},e.rootRect={x:0,y:0,left:0,top:0,width:0,height:0},e.stage=null,e.stageOffset=null,e.image=null,e.zoomTimeoutId=null,e.instantUpdate=!1,e.filePromise=null,e.fileLoader=null,e.instructions={size:null,crop:null,filter:null,color:null},e.filter=null,e.filterName=null,e.filterValue=null,e.colorValues={},e.colorMatrices={},e.size={width:!1,height:!1,aspectRatioLocked:!0,aspectRatioPrevious:!1},e.crop={rectangle:null,transforms:null,rotation:null,flip:null,aspectRatio:null,isRotating:!1,isDirty:!1,limitToImageBounds:!0,draft:{rectangle:null,transforms:null}}},AT=function(e){var t={noImageTimeout:null,options:wT(e)};return Fi(t),t},Wa=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"-";return e.split(/(?=[A-Z])/).map(function(n){return n.toLowerCase()}).join(t)},OT=function(e,t){var n={};return $e(t,function(r){var i=ct(t[r])?t[r]:r;n[r]={get:function(){return e.getState().options[i]},set:function(o){e.dispatch("SET_".concat(Wa(i,"_").toUpperCase()),{value:o})}}}),n},ST=function(e){return function(t,n,r){var i={};return $e(e,function(o){var a=Wa(o,"_").toUpperCase();i["SET_".concat(a)]=function(s){var l;try{l=r.options[o],r.options[o]=s.value}catch{}t("DID_SET_".concat(a),{value:r.options[o],prevValue:l})}}),i}},bT=function(e){return function(t){var n={};return $e(e,function(r){n["GET_".concat(Wa(r,"_").toUpperCase())]=function(){return t.options[r]}}),n}},un=function(){return Math.random().toString(36).substr(2,9)},CT=function(e,t){return e.splice(t,1)},gc=function(){var e=[],t=function(n,r){CT(e,e.findIndex(function(i){return i.event===n&&(i.cb===r||!r)}))};return{fire:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];e.filter(function(a){return a.event===n}).map(function(a){return a.cb}).forEach(function(a){setTimeout(function(){a.apply(void 0,i)},0)})},on:function(n,r){e.push({event:n,cb:r})},onOnce:function(n,r){e.push({event:n,cb:function(){t(n,r),r.apply(void 0,arguments)}})},off:t}},G={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",FILE:"file"},xs=null,hi=function(){return xs===null&&(xs=(/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream),xs},ha=function(){return te({},yr)},xT=function(e){$e(e,function(t,n){yr[t]&&LT(t,n)})},MT=function(e){return ct(yr[e])?yr[e]:e},LT=function(e,t){e=MT(e),yr[e][0]=Fp(t,yr[e][0],yr[e][1])},yr={id:[null,G.STRING],className:[null,G.STRING],src:[null,G.FILE],storageName:["doka",G.STRING],maxImagePreviewWidth:[1500,G.INT],maxImagePreviewHeight:[1500,G.INT],imagePreviewScaleMode:["stage",G.STRING],allowPreviewFitToView:[!0,G.BOOLEAN],allowButtonCancel:[!0,G.BOOLEAN],allowButtonConfirm:[!0,G.BOOLEAN],allowButtonReset:[!0,G.BOOLEAN],allowDropFiles:[!1,G.BOOLEAN],allowBrowseFiles:[!0,G.BOOLEAN],allowAutoClose:[!0,G.BOOLEAN],allowAutoDestroy:[!1,G.BOOLEAN],utils:[["crop","filter","color","markup"],G.ARRAY],util:[null,G.STRING],initialState:[null,G.OBJECT],outputData:[!1,G.BOOLEAN],outputFile:[!0,G.BOOLEAN],outputCorrectImageExifOrientation:[!0,G.BOOLEAN],outputStripImageHead:[!0,G.BOOLEAN],outputType:[null,G.STRING],outputQuality:[null,G.INT],outputFit:["cover",G.STRING],outputUpscale:[!0,G.BOOLEAN],outputWidth:[null,G.INT],outputHeight:[null,G.INT],outputCanvasBackgroundColor:[null,G.STRING],outputCanvasMemoryLimit:[Rr()&&hi()?16777216:null,G.INT],outputCanvasSyncTarget:[null,G.OBJECT],size:[null,G.OBJECT],sizeMin:[{width:1,height:1},G.OBJECT],sizeMax:[{width:9999,height:9999},G.OBJECT],filter:[null,G.OBJECT],filters:[{original:{label:"Original",matrix:function(){return null}},chrome:{label:"Chrome",matrix:function(){return[1.398,-.316,.065,-.273,.201,-.051,1.278,-.08,-.273,.201,-.051,.119,1.151,-.29,.215,0,0,0,1,0]}},fade:{label:"Fade",matrix:function(){return[1.073,-.015,.092,-.115,-.017,.107,.859,.184,-.115,-.017,.015,.077,1.104,-.115,-.017,0,0,0,1,0]}},mono:{label:"Mono",matrix:function(){return[.212,.715,.114,0,0,.212,.715,.114,0,0,.212,.715,.114,0,0,0,0,0,1,0]}},noir:{label:"Noir",matrix:function(){return[.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,0,0,0,1,0]}}},G.OBJECT],crop:[null,G.OBJECT],cropShowSize:[!1,G.BOOLEAN],cropZoomTimeout:[null,G.INT],cropMask:[null,G.FUNCTION],cropMaskInset:[0,G.INT],cropAllowResizeRect:[!0,G.BOOLEAN],cropAllowImageTurnLeft:[!0,G.BOOLEAN],cropAllowImageTurnRight:[!1,G.BOOLEAN],cropAllowImageFlipHorizontal:[!0,G.BOOLEAN],cropAllowImageFlipVertical:[!0,G.BOOLEAN],cropAllowToggleLimit:[!1,G.BOOLEAN],cropLimitToImageBounds:[!0,G.BOOLEAN],cropAllowInstructionZoom:[!1,G.BOOLEAN],cropAllowRotate:[!0,G.BOOLEAN],cropResizeMatchImageAspectRatio:[!1,G.BOOLEAN],cropResizeKeyCodes:[[18,91,92,93],G.ARRAY],cropResizeScrollRectOnly:[!1,G.BOOLEAN],cropAspectRatio:[null,G.STRING],cropAspectRatioOptions:[null,G.ARRAY],cropMinImageWidth:[1,G.INT],cropMinImageHeight:[1,G.INT],color:[void 0,G.OBJECT],colorBrightness:[0,G.NUMBER],colorBrightnessRange:[[-.25,.25],G.ARRAY],colorContrast:[1,G.NUMBER],colorContrastRange:[[.5,1.5],G.ARRAY],colorExposure:[1,G.NUMBER],colorExposureRange:[[.5,1.5],G.ARRAY],colorSaturation:[1,G.NUMBER],colorSaturationRange:[[0,2],G.ARRAY],markup:[null,G.ARRAY],markupUtil:["select",G.STRING],markupFilter:[function(){return!0},G.FUNCTION],markupAllowAddMarkup:[!0,G.BOOLEAN],markupAllowCustomColor:[!0,G.BOOLEAN],markupDrawDistance:[4,G.NUMBER],markupColor:["#000",G.STRING],markupColorOptions:[[["White","#fff","#f6f6f6"],["Silver","#9e9e9e"],["Black","#000","#333"],["Red","#f44336"],["Orange","#ff9800"],["Yellow","#ffeb3b"],["Green","#4caf50"],["Blue","#2196f3"],["Violet","#3f51b5"],["Purple","#9c27b0"]],G.ARRAY],markupFontSize:[.1,G.NUMBER],markupFontSizeOptions:[[["XL",.15],["L",.125],["M",.1],["S",.075],["XS",.05]],G.ARRAY],markupFontFamily:["Helvetica, Arial, Verdana",G.STRING],markupFontFamilyOptions:[[["Serif","Palatino, 'Times New Roman', serif"],["Sans Serif","Helvetica, Arial, Verdana"],["Monospaced","Monaco, 'Lucida Console', monospaced"]],G.ARRAY],markupShapeStyle:[[.015,null],G.ARRAY],markupShapeStyleOptions:[[["Fill",0,null,0],["Outline thick",.025,null,4],["Outline default",.015,null,2],["Outline thin",.005,null,1],["Outline dashed",.005,[.01],1]],G.ARRAY],markupLineStyle:[[.015,null],G.ARRAY],markupLineStyleOptions:[[["Thick",.025,null,4],["Default",.015,null,2],["Thin",.005,null,1],["Dashed",.005,[.01],1]],G.ARRAY],markupLineDecoration:[["arrow-end"],G.ARRAY],markupLineDecorationOptions:[[["None",[]],["Single arrow",["arrow-end"]],["Double arrow",["arrow-begin","arrow-end"]]],G.ARRAY],stickers:[null,G.ARRAY],beforeReset:[null,G.FUNCTION],beforeLoadImage:[null,G.FUNCTION],beforeCreateBlob:[null,G.FUNCTION],afterCreateBlob:[null,G.FUNCTION],afterCreateOutput:[null,G.FUNCTION],onconfirm:[null,G.FUNCTION],oncancel:[null,G.FUNCTION],onclose:[null,G.FUNCTION],onloadstart:[null,G.FUNCTION],onload:[null,G.FUNCTION],onloaderror:[null,G.FUNCTION],oninit:[null,G.FUNCTION],onready:[null,G.FUNCTION],onupdate:[null,G.FUNCTION],ondestroy:[null,G.FUNCTION],labelButtonReset:["Reset",G.STRING],labelButtonCancel:["Cancel",G.STRING],labelButtonConfirm:["Done",G.STRING],labelButtonUtilCrop:["Crop",G.STRING],labelButtonUtilResize:["Resize",G.STRING],labelButtonUtilFilter:["Filter",G.STRING],labelButtonUtilColor:["Colors",G.STRING],labelButtonUtilMarkup:["Markup",G.STRING],labelButtonUtilSticker:["Stickers",G.STRING],labelStatusMissingWebGL:["WebGL is required but is disabled on your browser",G.STRING],labelStatusAwaitingImage:["Waiting for image\u2026",G.STRING],labelStatusLoadImageError:["Error loading image\u2026",G.STRING],labelStatusLoadingImage:["Loading image\u2026",G.STRING],labelStatusProcessingImage:["Processing image\u2026",G.STRING],labelColorBrightness:["Brightness",G.STRING],labelColorContrast:["Contrast",G.STRING],labelColorExposure:["Exposure",G.STRING],labelColorSaturation:["Saturation",G.STRING],labelMarkupTypeRectangle:["Square",G.STRING],labelMarkupTypeEllipse:["Circle",G.STRING],labelMarkupTypeText:["Text",G.STRING],labelMarkupTypeLine:["Arrow",G.STRING],labelMarkupSelectFontSize:["Size",G.STRING],labelMarkupSelectFontFamily:["Font",G.STRING],labelMarkupSelectLineDecoration:["Decoration",G.STRING],labelMarkupSelectLineStyle:["Style",G.STRING],labelMarkupSelectShapeStyle:["Style",G.STRING],labelMarkupRemoveShape:["Remove",G.STRING],labelMarkupToolSelect:["Select",G.STRING],labelMarkupToolDraw:["Draw",G.STRING],labelMarkupToolLine:["Arrow",G.STRING],labelMarkupToolText:["Text",G.STRING],labelMarkupToolRect:["Square",G.STRING],labelMarkupToolEllipse:["Circle",G.STRING],labelResizeWidth:["Width",G.STRING],labelResizeHeight:["Height",G.STRING],labelResizeApplyChanges:["Apply",G.STRING],labelCropInstructionZoom:["Zoom in and out with your scroll wheel or touchpad.",G.STRING],labelButtonCropZoom:["Zoom",G.STRING],labelButtonCropRotateLeft:["Rotate left",G.STRING],labelButtonCropRotateRight:["Rotate right",G.STRING],labelButtonCropRotateCenter:["Center rotation",G.STRING],labelButtonCropFlipHorizontal:["Flip horizontal",G.STRING],labelButtonCropFlipVertical:["Flip vertical",G.STRING],labelButtonCropAspectRatio:["Aspect ratio",G.STRING],labelButtonCropToggleLimit:["Crop selection",G.STRING],labelButtonCropToggleLimitEnable:["Limited to image",G.STRING],labelButtonCropToggleLimitDisable:["Select outside image",G.STRING],pointerEventsPolyfillScope:["root",G.STRING],styleCropCorner:["circle",G.STRING],styleFullscreenSafeArea:[Rr()&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?"bottom":"none",G.STRING],styleLayoutMode:[null,G.STRING]},rn=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.min(n,Math.max(t,e))},ge=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10;return parseFloat(e.toFixed(t))},PT=function(e,t){return ge(e.x)===ge(t.x)&&ge(e.y)===ge(t.y)},cf=function(e,t){return{x:ge(e.x,t),y:ge(e.y,t)}},vl=function(e,t){return Lt(e.x-t.x,e.y-t.y)},DT=function(e,t){return e.x*t.x+e.y*t.y},Ya=function(e,t){return DT(vl(e,t),vl(e,t))},ki=function(e,t){return Math.sqrt(Ya(e,t))},NT=function(e,t){var n=vl(e,t);return Math.atan2(n.y,n.x)},kp=function(e,t){return Lt(rn(e.x,t.x,t.x+t.width),rn(e.y,t.y,t.y+t.height))},st=function(e,t,n){var r=Math.cos(t),i=Math.sin(t),o=Lt(e.x-n.x,e.y-n.y);return Lt(n.x+r*o.x-i*o.y,n.y+i*o.x+r*o.y)},Lt=function(){return{x:arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,y:arguments.length>1&&arguments[1]!==void 0?arguments[1]:0}},$p=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height},GT=function(e,t){var n=fn(e),r=fn(t);return n.left>=r.left&&n.top>=r.top&&n.bottom<=r.bottom&&n.right<=r.right},UT=function(e,t,n){return t===0?{tl:e.tl,tr:e.tr,br:e.br,bl:e.bl}:{tl:st(e.tl,t,n),tr:st(e.tr,t,n),br:st(e.br,t,n),bl:st(e.bl,t,n)}},BT=function(e,t,n){var r=UT(ja(e),t,n),i=r.tl,o=r.tr,a=r.br,s=r.bl,l=Math.min(i.x,o.x,a.x,s.x),c=Math.min(i.y,o.y,a.y,s.y),u=Math.max(i.x,o.x,a.x,s.x),f=Math.max(i.y,o.y,a.y,s.y);return dn(l,c,u-l,f-c)},VT=function(e,t,n){return dn(t*(e.x-n.x)+n.x,t*(e.y-n.y)+n.y,t*e.width,t*e.height)},uo=function(e,t){return dn(e.x+t.x,e.y+t.y,e.width,e.height)},FT={translate:uo,rotate:BT,scale:VT},kT=function(e,t,n){return t.reduce(function(r,i){return(0,FT[i[0]])(r,i[1],n)},e)},Tl=function(e){return dn(e.x,e.y,e.width,e.height)},fn=function(e){return{top:e.y,right:e.x+e.width,bottom:e.y+e.height,left:e.x}},fr=function(e){var t=e.top,n=e.right,r=e.bottom,i=e.left;return{x:i,y:t,width:n-i,height:r-t}},Pt=function(e){return Lt(e.x+.5*e.width,e.y+.5*e.height)},ja=function(e){return{tl:{x:e.x,y:e.y},tr:{x:e.x+e.width,y:e.y},br:{x:e.x+e.width,y:e.y+e.height},bl:{x:e.x,y:e.y+e.height}}},dn=function(e,t,n,r){return{x:e,y:t,width:n,height:r}},Wr=function(e){if(pc(e))return e;if(/:/.test(e)){var t=e.split(":"),n=t[0];return t[1]/n}return parseFloat(e)},Zn=function(e,t){var n=e.width,r=n*t;return r>e.height&&(n=(r=e.height)/t),{x:.5*(e.width-n),y:.5*(e.height-r),width:n,height:r}},Il=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=e.height/e.width,i=t,o=1,a=r;a>i&&(o=(a=i)/r);var s=Math.max(1/o,i/a),l=e.width/(n*s*o);return{width:l,height:l*t}},Xi=function(e,t){return{x:e,y:t}},$T=function(e,t){return e.x*t.x+e.y*t.y},uf=function(e,t){return Xi(e.x-t.x,e.y-t.y)},HT=function(e,t){return $T(uf(e,t),uf(e,t))},ff=function(e,t){return Math.sqrt(HT(e,t))},df=function(e,t){var n=e,r=t,i=1.5707963267948966-t,o=Math.sin(1.5707963267948966),a=Math.sin(r),s=Math.sin(i),l=Math.cos(i),c=n/o;return Xi(l*(c*a),l*(c*s))},zT=function(e,t){var n=e.width,r=e.height,i=df(n,t),o=df(r,t),a=Xi(e.x+Math.abs(i.x),e.y-Math.abs(i.y)),s=Xi(e.x+e.width+Math.abs(o.y),e.y+Math.abs(o.x)),l=Xi(e.x-Math.abs(o.y),e.y+e.height-Math.abs(o.x));return{width:ff(a,s),height:ff(a,l)}},ai=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{x:.5,y:.5},i=r.x>.5?1-r.x:r.x,o=r.y>.5?1-r.y:r.y,a=2*i*e.width,s=2*o*e.height,l=zT(t,n);return Math.max(l.width/a,l.height/s)},Yr=function(e,t){var n=t.origin,r=t.translation,i=t.scale;return kT(e,[["scale",i],["translate",r]],n)},hf=function(e,t){var n=e,r=t,i=1.5707963267948966-t,o=Math.sin(1.5707963267948966),a=Math.sin(r),s=Math.sin(i),l=Math.cos(i),c=n/o;return Lt(l*(c*a),l*(c*s))},qT=function(e,t){var n=e.width,r=e.height,i=t%(Math.PI/2),o=hf(n,i),a=hf(r,i),s=ja(e);return{tl:Lt(s.tl.x+Math.abs(o.x),s.tl.y-Math.abs(o.y)),tr:Lt(s.tr.x+Math.abs(a.y),s.tr.y+Math.abs(a.x)),br:Lt(s.br.x-Math.abs(o.x),s.br.y+Math.abs(o.y)),bl:Lt(s.bl.x-Math.abs(a.y),s.bl.y-Math.abs(a.x))}},Xa=function(e,t,n,r){var i={x:e.x+t.x,y:e.y+t.y},o=qT(r,n),a=st(o.tl,-n,i),s=st(o.tr,-n,i),l=st(o.br,-n,i);return dn(Math.min(a.x,s.x,l.x),Math.min(a.y,s.y,l.y),Math.max(a.x,s.x,l.x)-Math.min(a.x,s.x,l.x),Math.max(a.y,s.y,l.y)-Math.min(a.y,s.y,l.y))},Hp=function(e,t,n){var r=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],i=n.origin,o=n.translation,a=Yr(e,n),s=2*Math.PI+n.rotation%(2*Math.PI),l=Xa(i,o,s,t),c=Pt(l),u=t.height/t.width,f={x:(c.x-a.x)/a.width,y:(c.y-a.y)/a.height},d=f.y>.5?1-f.y:f.y,h=2*(f.x>.5?1-f.x:f.x)*a.width,p=2*d*a.height;return{center:f,zoom:r?Math.min(h/l.width,p/l.height):Math.min(a.width/l.width,a.height/l.height),rotation:n.rotation,aspectRatio:u,scaleToFit:r}},zp=function(e,t){var n=qp(e,t);return{center:{x:ge(n.center.x),y:ge(n.center.y)},rotation:ge(n.rotation),zoom:ge(n.zoom),aspectRatio:ge(n.aspectRatio),flip:te({},t.flip),scaleToFit:n.scaleToFit}},qp=function(e,t){var n=Hp(e,t.rectangle,t.transforms,t.limitToImageBounds);return{center:{x:n.center.x,y:n.center.y},rotation:n.rotation,zoom:n.zoom,aspectRatio:n.aspectRatio,flip:te({},t.flip),scaleToFit:n.scaleToFit}},jr=function(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"width",o=e.width,a=e.height;return!o&&!a?{width:o,height:a}:(o=o&&rn(o,t.width,n.width),a=a&&rn(a,t.height,n.height),r?(a?o?i==="width"?a=o/r:i==="height"?o=a*r:(a*r<t.width?a=(o=t.width)/r:o/r<t.height&&(o=(a=t.height)*r),a*r>n.width?a=(o=n.width)/r:o/r>n.height&&(o=(a=n.height)*r)):a=rn(a*r,t.width,n.width)/r:o=rn(o/r,t.height,n.height)*r,{width:o,height:a}):{width:o,height:a})},WT=function(e,t){var n=new Array(20);return n[0]=e[0]*t[0]+e[1]*t[5]+e[2]*t[10]+e[3]*t[15],n[1]=e[0]*t[1]+e[1]*t[6]+e[2]*t[11]+e[3]*t[16],n[2]=e[0]*t[2]+e[1]*t[7]+e[2]*t[12]+e[3]*t[17],n[3]=e[0]*t[3]+e[1]*t[8]+e[2]*t[13]+e[3]*t[18],n[4]=e[0]*t[4]+e[1]*t[9]+e[2]*t[14]+e[3]*t[19]+e[4],n[5]=e[5]*t[0]+e[6]*t[5]+e[7]*t[10]+e[8]*t[15],n[6]=e[5]*t[1]+e[6]*t[6]+e[7]*t[11]+e[8]*t[16],n[7]=e[5]*t[2]+e[6]*t[7]+e[7]*t[12]+e[8]*t[17],n[8]=e[5]*t[3]+e[6]*t[8]+e[7]*t[13]+e[8]*t[18],n[9]=e[5]*t[4]+e[6]*t[9]+e[7]*t[14]+e[8]*t[19]+e[9],n[10]=e[10]*t[0]+e[11]*t[5]+e[12]*t[10]+e[13]*t[15],n[11]=e[10]*t[1]+e[11]*t[6]+e[12]*t[11]+e[13]*t[16],n[12]=e[10]*t[2]+e[11]*t[7]+e[12]*t[12]+e[13]*t[17],n[13]=e[10]*t[3]+e[11]*t[8]+e[12]*t[13]+e[13]*t[18],n[14]=e[10]*t[4]+e[11]*t[9]+e[12]*t[14]+e[13]*t[19]+e[14],n[15]=e[15]*t[0]+e[16]*t[5]+e[17]*t[10]+e[18]*t[15],n[16]=e[15]*t[1]+e[16]*t[6]+e[17]*t[11]+e[18]*t[16],n[17]=e[15]*t[2]+e[16]*t[7]+e[17]*t[12]+e[18]*t[17],n[18]=e[15]*t[3]+e[16]*t[8]+e[17]*t[13]+e[18]*t[18],n[19]=e[15]*t[4]+e[16]*t[9]+e[17]*t[14]+e[18]*t[19]+e[19],n},fo=function(e){var t;if(/^#/.test(e)){if(e.length===4){var n=e.split("");e="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]}var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);t=[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)]}else/^rgb/.test(e)&&((t=e.match(/\d+/g).map(function(i){return parseInt(i,10)})).length=3);return t},pf=[],Wp=function(e){var t=[];return $e(e,function(n,r){return t.push(r)}),t.length?t.reduce(function(n,r){return WT(tn(n),r)},t.shift()):[]},Yp=function(e){return e.crop.draft.transforms?e.crop.draft.transforms.scale:e.crop.transforms.scale},gf=function(e){var t=e.image.width/e.image.naturalWidth,n=Yp(e);return{width:e.options.cropMinImageWidth*n*t,height:e.options.cropMinImageHeight*n*t}},mf=function(e){var t=Yp(e);return{width:e.image.width*t,height:e.image.height*t}},YT=function(e){return e.options.size?e.options.size.width:null},jT=function(e){return e.options.size?e.options.size.height:null},XT=function(e){return e.size.width===!1?YT(e):e.size.width},ZT=function(e){return e.size.height===!1?jT(e):e.size.height},Ef=function(e){return e.options.cropAspectRatioOptions?e.options.cropAspectRatioOptions.map(function(t){var n={aspectRatio:null,width:null,height:null};return typeof t.value=="number"&&(n.aspectRatio=t.value),typeof t.value=="string"&&(n.aspectRatio=Wr(t.value)),In(t.value)==="object"&&t.value!==null&&(n.width=t.value.width,n.height=t.value.height,n.aspectRatio=n.height/n.width),{label:t.label,value:n}}):null},KT=function(e,t){t.aspectRatio||(t.aspectRatio=e.image.height/e.image.width);var n=jp(e.image,t,t.scaleToFit),r=n.width/n.height;return e.stage.width<n.width&&(n.width=e.stage.width,n.height=n.width/r),e.stage.height<n.height&&(n.height=e.stage.height,n.width=n.height*r),dn(.5*e.stage.width-.5*n.width,.5*e.stage.height-.5*n.height,n.width,n.height)},Ms=function(e){var t=e.image.naturalWidth,n=e.image.naturalHeight,r=n/t;return e.stage.width<t&&(n=r*(t=e.stage.width)),e.stage.height<n&&(t=(n=e.stage.height)/r),dn(.5*e.stage.width-.5*t,.5*e.stage.height-.5*n,t,n)},QT=function(e){return{GET_SIZE:function(){return e.size.width!==!1&&e.size.height!==!1?{width:e.size.width,height:e.size.height}:{width:null,height:null}},GET_SIZE_INPUT:function(){return{width:e.size.width,height:e.size.height}},GET_SIZE_ASPECT_RATIO_LOCK:function(){return e.size.aspectRatioLocked},IS_ACTIVE_VIEW:function(t){return e.activeView===t},GET_ACTIVE_VIEW:function(){return e.activeView},GET_STYLES:function(){return Object.keys(e.options).filter(function(t){return/^style/.test(t)}).map(function(t){return{name:t,value:e.options[t]}})},GET_FILE:function(){return e.file},GET_IMAGE:function(){return e.image},GET_STAGE:function(){return te({},e.stage,e.stageOffset)},GET_STAGE_RECT:function(t){var n,r=e.options.imagePreviewScaleMode;return(n=r==="crop"?t?KT(e,t):Ms(e):r==="image"?Ms(e):te({},e.stage)).fits=n.width<e.stage.width&&n.height<e.stage.height,n.mode=r,n},GET_IMAGE_STAGE_RECT:function(){return Ms(e)},GET_ROOT:function(){return e.rootRect},GET_ROOT_SIZE:function(){return{width:e.rootRect.width,height:e.rootRect.height}},GET_MIN_IMAGE_SIZE:function(){return{width:e.options.cropMinImageWidth,height:e.options.cropMinImageHeight}},GET_IMAGE_PREVIEW_SCALE_FACTOR:function(){return e.image.width/e.image.naturalWidth},GET_MIN_PREVIEW_IMAGE_SIZE:function(){var t=e.image.width/e.image.naturalWidth;return{width:e.options.cropMinImageWidth*t,height:e.options.cropMinImageHeight*t}},GET_MIN_CROP_SIZE:function(){return gf(e)},GET_MAX_CROP_SIZE:function(){return mf(e)},GET_MIN_PIXEL_CROP_SIZE:function(){var t=e.crop.transforms.scale,n=gf(e);return{width:n.width/t,height:n.height/t}},GET_MAX_PIXEL_CROP_SIZE:function(){var t=e.crop.transforms.scale,n=mf(e);return{width:n.width/t,height:n.height/t}},GET_CROP_ASPECT_RATIO_OPTIONS:function(){return Ef(e)},GET_ACTIVE_CROP_ASPECT_RATIO:function(){var t=e.crop.aspectRatio;return ct(t)?Wr(t):t},GET_CROP_ASPECT_RATIO:function(){var t=ct(e.options.cropAspectRatio)?Wr(e.options.cropAspectRatio):e.options.cropAspectRatio,n=Ef(e);return!n||n&&!n.length||n.find(function(r){return r.value.aspectRatio===t})?t:n[0].value.aspectRatio},GET_CROP_RECTANGLE_ASPECT_RATIO:function(){var t=e.crop,n=t.rectangle,r=t.aspectRatio;return n?n.width/n.height:r},GET_CROP_RECT:function(){return te({},e.crop.rectangle)},GET_CROP:function(t,n){var r=pf[t];if(r&&r.ts===n)return r;var i=nI(e);return i&&(i.ts=n,pf[t]=i),i},GET_COLOR_MATRIX:function(){return Wp(e.colorMatrices)},GET_COLOR_VALUES:function(){return te({exposure:e.options.colorExposure,brightness:e.options.colorBrightness,contrast:e.options.colorContrast,saturation:e.options.colorSaturation},e.colorValues)},GET_MARKUP_TOOL_VALUES:function(){return te({color:e.options.markupColor,fontFamily:e.options.markupFontFamily,fontSize:e.options.markupFontSize,shapeStyle:e.options.markupShapeStyle,lineStyle:e.options.markupLineStyle,lineDecoration:e.options.markupLineDecoration},e.markupToolValues)},GET_PREVIEW_IMAGE_DATA:function(){return e.file.preview},GET_THUMB_IMAGE_DATA:function(){return e.file.thumb},GET_FILTER:function(){return e.filter},GET_UID:function(){return e.uid},GET_MARKUP_BY_ID:function(t){return e.markup.find(function(n){return n[1].id===t})},GET_BACKGROUND_COLOR:function(){var t=e.options.outputCanvasBackgroundColor;if(!t)return JT;if(Co[t])return Co[t];var n=fo(t);return Co[t]=n.concat(1),Co[t]}}},Co={},JT=[0,0,0,0],eI=function(e,t){var n=XT(e),r=ZT(e),i=t.width/t.height;return jr({width:n,height:r},e.options.sizeMin,e.options.sizeMax,i)},jp=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],r=t.zoom,i=t.rotation,o=t.center,a=t.aspectRatio,s=Il(e,a,r),l={x:.5*s.width,y:.5*s.height},c={x:0,y:0,width:s.width,height:s.height,center:l},u=r*ai(e,Zn(c,a),i,n?o:{x:.5,y:.5});return{widthFloat:s.width/u,heightFloat:s.height/u,width:Math.round(s.width/u),height:Math.round(s.height/u)}},tI=function(e,t){var n=Pt(t),r=Pt(e);return!PT(r,n)},nI=function(e){if(!e.stage||!e.image)return null;var t=e.crop.draft.rectangle||{free:e.crop.rectangle,limited:e.crop.rectangle},n=e.crop.draft.transforms||e.crop.transforms,r=n.origin,i=n.translation,o=n.scale,a=n.interaction,s=e.crop.rotation,l=e.crop.flip,c=!(!e.crop.draft.rectangle&&!e.crop.draft.transforms),u=c||e.instantUpdate,f=tI(t.limited,e.stage),d=e.crop.isDirty||c,h=e.crop.isRotating,p=e.crop.limitToImageBounds===void 0||e.crop.limitToImageBounds,g={width:e.image.naturalWidth,height:e.image.naturalHeight},m=Wp(e.colorMatrices),y=qp(e.image,{rectangle:t.limited,transforms:{origin:r,translation:i,scale:o,rotation:s.main+s.sub},flip:l,limitToImageBounds:e.crop.limitToImageBounds}),_={props:y,crop:jp(g,y,e.crop.limitToImageBounds),image:eI(e,t.limited)},E=_.image,v=_.crop,T=v.width,R=v.height,O=v.widthFloat/v.heightFloat;E.width&&E.height?(T=E.width,R=E.height):E.width&&!E.height?(T=E.width,R=E.width/O):E.height&&!E.width&&(R=E.height,T=E.height*O),_.currentWidth=Math.round(T),_.currentHeight=Math.round(R);var w={x:0,y:0},S=0,M=0;if(u&&a){if(a.translation){var P=a.translation.x-i.x,C=a.translation.y-i.y;w.x=100*Math.sign(P)*Math.log10(1+Math.abs(P)/100),w.y=100*Math.sign(C)*Math.log10(1+Math.abs(C)/100)}if(a.scale){var z=a.scale-o;S=.25*Math.sign(z)*Math.log10(1+Math.abs(z)/.25)}if(a.rotation){var L=a.rotation-(s.main+s.sub);M=.05*Math.sign(L)*Math.log10(1+Math.abs(L)/.05)}}var q={},x=t.free,b=fn(x),N=fn(t.limited);return $e(b,function(H){var Q=b[H]-N[H];q[H]=N[H]+5*Math.sign(Q)*Math.log10(1+Math.abs(Q)/5)}),{canRecenter:f,canReset:d,isDraft:u,isRotating:h,isLimitedToImageBounds:p,cropRect:{x:q.left,y:q.top,width:q.right-q.left,height:q.bottom-q.top},origin:r,translation:i,translationBand:w,scale:o,scaleBand:S,rotation:s,rotationBand:M,flip:l,interaction:a,cropStatus:_,colorMatrix:m,markup:e.markup,previewSize:{width:e.image.width,height:e.image.height}}},mc=function(e){return/^image/.test(e)},rI={1:function(){return[1,0,0,1,0,0]},2:function(e){return[-1,0,0,1,e,0]},3:function(e,t){return[-1,0,0,-1,e,t]},4:function(e,t){return[1,0,0,-1,0,t]},5:function(){return[0,1,1,0,0,0]},6:function(e,t){return[0,1,-1,0,t,0]},7:function(e,t){return[0,-1,-1,0,t,e]},8:function(e){return[0,-1,1,0,0,e]}},Xp=function(e,t,n){return n===-1&&(n=1),rI[n](e,t)},pa=function(e){e.width=1,e.height=1,e.getContext("2d").clearRect(0,0,1,1)},_f=function(e){return e&&(e.horizontal||e.vertical)},iI=function(e,t,n){if(t<=1&&!_f(n))return e.width=e.naturalWidth,e.height=e.naturalHeight,e;var r=document.createElement("canvas"),i=e.naturalWidth,o=e.naturalHeight,a=t>=5&&t<=8;a?(r.width=o,r.height=i):(r.width=i,r.height=o);var s=r.getContext("2d");if(t&&s.transform.apply(s,Xp(i,o,t)),_f(n)){var l=[1,0,0,1,0,0];(!a&&n.horizontal||a&n.vertical)&&(l[0]=-1,l[4]=i),(!a&&n.vertical||a&&n.horizontal)&&(l[3]=-1,l[5]=o),s.transform.apply(s,l)}return s.drawImage(e,0,0,i,o),r},oI=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=r.canvasMemoryLimit,o=r.background,a=o===void 0?null:o,s=n.zoom||1,l=iI(e,t,n.flip),c={width:l.width,height:l.height},u=n.aspectRatio||c.height/c.width,f=Il(c,u,s);if(i){var d=f.width*f.height;if(d>i){var h=Math.sqrt(i)/Math.sqrt(d);c.width=Math.floor(c.width*h),c.height=Math.floor(c.height*h),f=Il(c,u,s)}}var p=document.createElement("canvas"),g={x:.5*f.width,y:.5*f.height},m={x:0,y:0,width:f.width,height:f.height,center:g},y=n.scaleToFit===void 0||n.scaleToFit,_=s*ai(c,Zn(m,u),n.rotation,y?n.center:{x:.5,y:.5});p.width=Math.round(f.width/_),p.height=Math.round(f.height/_),g.x/=_,g.y/=_;var E=g.x-c.width*(n.center?n.center.x:.5),v=g.y-c.height*(n.center?n.center.y:.5),T=p.getContext("2d");a&&(T.fillStyle=a,T.fillRect(0,0,p.width,p.height)),T.translate(g.x,g.y),T.rotate(n.rotation||0),T.drawImage(l,E-g.x,v-g.y,c.width,c.height);var R=T.getImageData(0,0,p.width,p.height);return pa(p),R},aI=typeof window<"u"&&window.document!==void 0;aI&&(HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){var r=this.toDataURL(t,n).split(",")[1];setTimeout(function(){for(var i=atob(r),o=i.length,a=new Uint8Array(o),s=0;s<o;s++)a[s]=i.charCodeAt(s);e(new Blob([a],{type:t||"image/png"}))})}}));var sI=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return new Promise(function(r){var i=n?n(e):e;Promise.resolve(i).then(function(o){o.toBlob(r,t.type,t.quality)})})},ga=function(e,t){return ho(e.x*t,e.y*t)},ma=function(e,t){return ho(e.x+t.x,e.y+t.y)},Zp=function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y);return t===0?{x:0,y:0}:ho(e.x/t,e.y/t)},$n=function(e,t,n){var r=Math.cos(t),i=Math.sin(t),o=ho(e.x-n.x,e.y-n.y);return ho(n.x+r*o.x-i*o.y,n.y+i*o.x+r*o.y)},ho=function(){return{x:arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,y:arguments.length>1&&arguments[1]!==void 0?arguments[1]:0}},Xe=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0;return typeof e=="string"?parseFloat(e)*n:typeof e=="number"?e*(r?t[r]:Math.min(t.width,t.height)):void 0},Kn=function(e,t,n){var r=e.borderStyle||e.lineStyle||"solid",i=e.backgroundColor||e.fontColor||"transparent",o=e.borderColor||e.lineColor||"transparent",a=Xe(e.borderWidth||e.lineWidth,t,n);return{"stroke-linecap":e.lineCap||"round","stroke-linejoin":e.lineJoin||"round","stroke-width":a||0,"stroke-dasharray":typeof r=="string"?"":r.map(function(s){return Xe(s,t,n)}).join(","),stroke:o,fill:i,opacity:e.opacity||1}},At=function(e){return e!=null},pi=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=Xe(e.x,t,n,"width")||Xe(e.left,t,n,"width"),i=Xe(e.y,t,n,"height")||Xe(e.top,t,n,"height"),o=Xe(e.width,t,n,"width"),a=Xe(e.height,t,n,"height"),s=Xe(e.right,t,n,"width"),l=Xe(e.bottom,t,n,"height");return At(i)||(i=At(a)&&At(l)?t.height-a-l:l),At(r)||(r=At(o)&&At(s)?t.width-o-s:s),At(o)||(o=At(r)&&At(s)?t.width-r-s:0),At(a)||(a=At(i)&&At(l)?t.height-i-l:0),{x:r||0,y:i||0,width:o||0,height:a||0}},Rl=function(e){return e.map(function(t,n){return"".concat(n===0?"M":"L"," ").concat(t.x," ").concat(t.y)}).join(" ")},Rt=function(e,t){return Object.keys(t).forEach(function(n){return e.setAttribute(n,t[n])})},lI="http://www.w3.org/2000/svg",en=function(e,t){var n=document.createElementNS(lI,e);return t&&Rt(n,t),n},cI=function(e){return Rt(e,te({},e.rect,e.styles))},uI=function(e){var t=e.rect.x+.5*e.rect.width,n=e.rect.y+.5*e.rect.height,r=.5*e.rect.width,i=.5*e.rect.height;return Rt(e,te({cx:t,cy:n,rx:r,ry:i},e.styles))},fI={contain:"xMidYMid meet",cover:"xMidYMid slice"},dI=function(e,t){Rt(e,te({},e.rect,e.styles,{preserveAspectRatio:fI[t.fit]||"none"}))},hI={left:"start",center:"middle",right:"end"},pI=function(e,t,n,r){var i=Xe(t.fontSize,n,r),o=t.fontFamily||"sans-serif",a=t.fontWeight||"normal",s=hI[t.textAlign]||"start";Rt(e,te({},e.rect,e.styles,{"stroke-width":0,"font-weight":a,"font-size":i,"font-family":o,"text-anchor":s})),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},gI=function(e,t,n,r){Rt(e,te({},e.rect,e.styles,{fill:"none"}));var i=e.childNodes[0],o=e.childNodes[1],a=e.childNodes[2],s=e.childNodes[3],l=e.rect,c={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(Rt(i,{x1:l.x,y1:l.y,x2:c.x,y2:c.y}),Rt(s,{x1:l.x,y1:l.y,x2:c.x,y2:c.y}),t.lineDecoration){o.style.display="none",a.style.display="none";var u=Zp({x:c.x-l.x,y:c.y-l.y}),f=Xe(.05,n,r);if(t.lineDecoration.indexOf("arrow-begin")!==-1){var d=ga(u,f),h=ma(l,d),p=$n(l,2,h),g=$n(l,-2,h);Rt(o,{style:"display:block;",d:"M".concat(p.x,",").concat(p.y," L").concat(l.x,",").concat(l.y," L").concat(g.x,",").concat(g.y)})}if(t.lineDecoration.indexOf("arrow-end")!==-1){var m=ga(u,-f),y=ma(c,m),_=$n(c,2,y),E=$n(c,-2,y);Rt(a,{style:"display:block;",d:"M".concat(_.x,",").concat(_.y," L").concat(c.x,",").concat(c.y," L").concat(E.x,",").concat(E.y)})}}},mI=function(e,t,n,r){Rt(e,te({},e.styles,{fill:"none"}));var i=e.childNodes[0],o=e.childNodes[1],a=Rl(t.points.map(function(s){return{x:Xe(s.x,n,r,"width"),y:Xe(s.y,n,r,"height")}}));Rt(i,{d:a}),Rt(o,{d:a})},Ls=function(e){return function(t){return en(e,{id:t.id})}},EI=function(e){var t=en("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=function(){t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},_I=function(e){var t=en("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),n=en("line");t.appendChild(n);var r=en("path");t.appendChild(r);var i=en("path");t.appendChild(i);var o=en("line",{style:"stroke-width: 40; stroke-opacity: 0;"});return t.appendChild(o),t},yI=function(e){var t=en("g",{id:e.id}),n=en("path");t.appendChild(n);var r=en("path",{style:"stroke-width: 40; stroke-opacity: 0;"});return t.appendChild(r),t},vI={image:EI,rect:Ls("rect"),ellipse:Ls("ellipse"),text:Ls("text"),path:yI,line:_I},TI={rect:cI,ellipse:uI,image:dI,text:pI,path:mI,line:gI},Ec=function(e,t){return vI[e](t)},_c=function(e,t,n,r,i){t!=="path"&&(e.rect=pi(n,r,i)),e.styles=Kn(n,r,i),TI[t](e,n,r,i)},po=function(e,t){return e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0},II=function(e,t,n,r){return new Promise(function(i){var o=r.background,a=o===void 0?null:o,s=new FileReader;s.onloadend=function(){var l=s.result,c=document.createElement("div");c.style.cssText="position:absolute;pointer-events:none;width:0;height:0;visibility:hidden;",c.innerHTML=l;var u=c.querySelector("svg");document.body.appendChild(c);var f=u.getBBox();c.parentNode.removeChild(c);var d=c.querySelector("title"),h=u.getAttribute("viewBox")||"",p=u.getAttribute("width")||"",g=u.getAttribute("height")||"",m=parseFloat(p)||null,y=parseFloat(g)||null,_=(p.match(/[a-z]+/)||[])[0]||"",E=(g.match(/[a-z]+/)||[])[0]||"",v=h.split(" ").map(parseFloat),T=v.length?{x:v[0],y:v[1],width:v[2],height:v[3]}:f,R=m!=null?m:T.width,O=y!=null?y:T.height;u.style.overflow="visible",u.setAttribute("width",R),u.setAttribute("height",O);var w="";if(n&&n.length){var S={width:R,height:O};w=n.sort(po).reduce(function(oe,ce){var de=Ec(ce[0],ce[1]);return _c(de,ce[0],ce[1],S),de.removeAttribute("id"),de.getAttribute("opacity")===1&&de.removeAttribute("opacity"),oe+`
`+de.outerHTML+`
`},""),w=`

<g>`.concat(w.replace(/&nbsp;/g," "),`</g>

`)}var M=t.aspectRatio||O/R,P=R,C=P*M,z=t.scaleToFit===void 0||t.scaleToFit,L=ai({width:R,height:O},Zn({width:P,height:C},M),t.rotation,z?t.center:{x:.5,y:.5}),q=t.zoom*L,x=t.rotation*(180/Math.PI),b={x:.5*P,y:.5*C},N={x:b.x-R*t.center.x,y:b.y-O*t.center.y},H=["rotate(".concat(x," ").concat(b.x," ").concat(b.y,")"),"translate(".concat(b.x," ").concat(b.y,")"),"scale(".concat(q,")"),"translate(".concat(-b.x," ").concat(-b.y,")"),"translate(".concat(N.x," ").concat(N.y,")")],Q=["scale(".concat(t.flip.horizontal?-1:1," ").concat(t.flip.vertical?-1:1,")"),"translate(".concat(t.flip.horizontal?-R:0," ").concat(t.flip.vertical?-O:0,")")],Y=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="`.concat(P).concat(_,'" height="').concat(C).concat(E,`" 
viewBox="0 0 `).concat(P," ").concat(C,'" ').concat(a?'style="background:'+a+'" ':"",`
preserveAspectRatio="xMinYMin"
xmlns:xlink="http://www.w3.org/1999/xlink"
xmlns="http://www.w3.org/2000/svg">
<!-- Generated by PQINA - https://pqina.nl/ -->
<title>`).concat(d?d.textContent:"",`</title>
<g transform="`).concat(H.join(" "),`">
<g transform="`).concat(Q.join(" "),`">
`).concat(u.outerHTML).concat(w,`
</g>
</g>
</svg>`);i(Y)},s.readAsText(e)})},RI=function(e){var t;try{t=new ImageData(e.width,e.height)}catch{t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(e.data),t},Kp=function(){var e={resize:function(c,u){var f=u.mode,d=f===void 0?"contain":f,h=u.upscale,p=h!==void 0&&h,g=u.width,m=u.height,y=u.matrix;if(y=!y||s(y)?null:y,!g&&!m)return l(c,y);if(g===null?g=m:m===null&&(m=g),d!=="force"){var _=g/c.width,E=m/c.height,v=1;if(d==="cover"?v=Math.max(_,E):d==="contain"&&(v=Math.min(_,E)),v>1&&p===!1)return l(c,y);g=c.width*v,m=c.height*v}for(var T=c.width,R=c.height,O=Math.round(g),w=Math.round(m),S=c.data,M=new Uint8ClampedArray(O*w*4),P=T/O,C=R/w,z=Math.ceil(.5*P),L=Math.ceil(.5*C),q=0;q<w;q++)for(var x=0;x<O;x++){for(var b=4*(x+q*O),N=0,H=0,Q=0,Y=0,oe=0,ce=0,de=0,B=(q+.5)*C,D=Math.floor(q*C);D<(q+1)*C;D++)for(var $=Math.abs(B-(D+.5))/L,X=(x+.5)*P,ne=$*$,ie=Math.floor(x*P);ie<(x+1)*P;ie++){var ae=Math.abs(X-(ie+.5))/z,I=Math.sqrt(ne+ae*ae);if(I>=-1&&I<=1&&(N=2*I*I*I-3*I*I+1)>0){var A=S[(ae=4*(ie+D*T))+3];de+=N*A,Q+=N,A<255&&(N=N*A/250),Y+=N*S[ae],oe+=N*S[ae+1],ce+=N*S[ae+2],H+=N}}M[b]=Y/H,M[b+1]=oe/H,M[b+2]=ce/H,M[b+3]=de/Q,y&&o(b,M,y)}return{data:M,width:O,height:w}},filter:l},t=function(c,u){var f=c.transforms,d=null;if(f.forEach(function(p){p.type==="filter"&&(d=p)}),d){var h=null;f.forEach(function(p){p.type==="resize"&&(h=p)}),h&&(h.data.matrix=d.data,f=f.filter(function(p){return p.type!=="filter"}))}u(function(p,g){return p.forEach(function(m){g=e[m.type](g,m.data)}),g}(f,c.imageData))};self.onmessage=function(c){t(c.data.message,function(u){self.postMessage({id:c.data.id,message:u},[u.data.buffer])})};var n=1,r=1,i=1;function o(c,u,f){var d=u[c]/255,h=u[c+1]/255,p=u[c+2]/255,g=u[c+3]/255,m=d*f[0]+h*f[1]+p*f[2]+g*f[3]+f[4],y=d*f[5]+h*f[6]+p*f[7]+g*f[8]+f[9],_=d*f[10]+h*f[11]+p*f[12]+g*f[13]+f[14],E=d*f[15]+h*f[16]+p*f[17]+g*f[18]+f[19],v=Math.max(0,m*E)+n*(1-E),T=Math.max(0,y*E)+r*(1-E),R=Math.max(0,_*E)+i*(1-E);u[c]=255*Math.max(0,Math.min(1,v)),u[c+1]=255*Math.max(0,Math.min(1,T)),u[c+2]=255*Math.max(0,Math.min(1,R))}var a=self.JSON.stringify([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]);function s(c){return self.JSON.stringify(c||[])===a}function l(c,u){if(!u||s(u))return c;for(var f=c.data,d=f.length,h=u[0],p=u[1],g=u[2],m=u[3],y=u[4],_=u[5],E=u[6],v=u[7],T=u[8],R=u[9],O=u[10],w=u[11],S=u[12],M=u[13],P=u[14],C=u[15],z=u[16],L=u[17],q=u[18],x=u[19],b=0,N=0,H=0,Q=0,Y=0,oe=0,ce=0,de=0,B=0,D=0,$=0,X=0;b<d;b+=4)oe=(N=f[b]/255)*h+(H=f[b+1]/255)*p+(Q=f[b+2]/255)*g+(Y=f[b+3]/255)*m+y,ce=N*_+H*E+Q*v+Y*T+R,de=N*O+H*w+Q*S+Y*M+P,B=N*C+H*z+Q*L+Y*q+x,D=Math.max(0,oe*B)+n*(1-B),$=Math.max(0,ce*B)+r*(1-B),X=Math.max(0,de*B)+i*(1-B),f[b]=255*Math.max(0,Math.min(1,D)),f[b+1]=255*Math.max(0,Math.min(1,$)),f[b+2]=255*Math.max(0,Math.min(1,X));return c}},wI=function(e,t){if(e.getUint32(t+4,!1)===1165519206){t+=4;var n=e.getUint16(t+=6,!1)===18761;t+=e.getUint32(t+4,n);var r=e.getUint16(t,n);t+=2;for(var i=0;i<r;i++)if(e.getUint16(t+12*i,n)===274)return e.setUint16(t+12*i+8,1,n),!0;return!1}},AI=function(e){var t=new DataView(e);if(t.getUint16(0)!==65496)return null;for(var n,r,i=2,o=!1;i<t.byteLength&&(n=t.getUint16(i,!1),r=t.getUint16(i+2,!1)+2,!(!(n>=65504&&n<=65519||n===65534)||(o||(o=wI(t,i)),i+r>t.byteLength)));)i+=r;return e.slice(0,i)},OI=function(e){return new Promise(function(t){var n=new FileReader;n.onload=function(){return t(AI(n.result)||null)},n.readAsArrayBuffer(e.slice(0,262144))})},SI=function(){return window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder},bI=function(e,t){var n=SI();if(n){var r=new n;return r.append(e),r.getBlob(t)}return new Blob([e],{type:t})},CI=function(){return Math.random().toString(36).substr(2,9)},yc=function(e){var t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(t),r=new Worker(n),i=[];return{transfer:function(){},post:function(o,a,s){var l=CI();i[l]=a,r.onmessage=function(c){var u=i[c.data.id];u&&(u(c.data.message),delete i[c.data.id])},r.postMessage({id:l,message:o},s)},terminate:function(){r.terminate(),URL.revokeObjectURL(n)}}},xI=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=function(i){n(i)},r.src=e})},MI=function(e){return e.reduce(function(t,n){return t.then(function(r){return n().then(Array.prototype.concat.bind(r))})},Promise.resolve([]))},LI=function(e,t){return new Promise(function(n){var r={width:e.width,height:e.height},i=e.getContext("2d"),o=t.sort(po).map(function(a){return function(){return new Promise(function(s){VI[a[0]](i,r,a[1],s)&&s()})}});MI(o).then(function(){return n(e)})})},gi=function(e,t){e.beginPath(),e.lineCap=t["stroke-linecap"],e.lineJoin=t["stroke-linejoin"],e.lineWidth=t["stroke-width"],t["stroke-dasharray"].length&&e.setLineDash(t["stroke-dasharray"].split(",")),e.fillStyle=t.fill,e.strokeStyle=t.stroke,e.globalAlpha=t.opacity||1},mi=function(e){e.fill(),e.stroke(),e.globalAlpha=1},PI=function(e,t,n){var r=pi(n,t),i=Kn(n,t);return gi(e,i),e.rect(r.x,r.y,r.width,r.height),mi(e),!0},DI=function(e,t,n){var r=pi(n,t),i=Kn(n,t);gi(e,i);var o=r.x,a=r.y,s=r.width,l=r.height,c=s/2*.5522848,u=l/2*.5522848,f=o+s,d=a+l,h=o+s/2,p=a+l/2;return e.moveTo(o,p),e.bezierCurveTo(o,p-u,h-c,a,h,a),e.bezierCurveTo(h+c,a,f,p-u,f,p),e.bezierCurveTo(f,p+u,h+c,d,h,d),e.bezierCurveTo(h-c,d,o,p+u,o,p),mi(e),!0},NI=function(e,t,n,r){var i=pi(n,t),o=Kn(n,t);gi(e,o);var a=new Image;new URL(n.src,window.location.href).origin!==window.location.origin&&(a.crossOrigin=""),a.onload=function(){if(n.fit==="cover"){var s=i.width/i.height,l=s>1?a.width:a.height*s,c=s>1?a.width/s:a.height,u=.5*a.width-.5*l,f=.5*a.height-.5*c;e.drawImage(a,u,f,l,c,i.x,i.y,i.width,i.height)}else if(n.fit==="contain"){var d=Math.min(i.width/a.width,i.height/a.height),h=d*a.width,p=d*a.height,g=i.x+.5*i.width-.5*h,m=i.y+.5*i.height-.5*p;e.drawImage(a,0,0,a.width,a.height,g,m,h,p)}else e.drawImage(a,0,0,a.width,a.height,i.x,i.y,i.width,i.height);mi(e),r()},a.src=n.src},GI=function(e,t,n){var r=pi(n,t),i=Kn(n,t);gi(e,i);var o=Xe(n.fontSize,t),a=n.fontFamily||"sans-serif",s=n.fontWeight||"normal",l=n.textAlign||"left";return e.font="".concat(s," ").concat(o,"px ").concat(a),e.textAlign=l,e.fillText(n.text,r.x,r.y),mi(e),!0},UI=function(e,t,n){var r=Kn(n,t);gi(e,r),e.beginPath();var i=n.points.map(function(s){return{x:Xe(s.x,t,1,"width"),y:Xe(s.y,t,1,"height")}});e.moveTo(i[0].x,i[0].y);for(var o=i.length,a=1;a<o;a++)e.lineTo(i[a].x,i[a].y);return mi(e),!0},BI=function(e,t,n){var r=pi(n,t),i=Kn(n,t);gi(e,i),e.beginPath();var o={x:r.x,y:r.y},a={x:r.x+r.width,y:r.y+r.height};e.moveTo(o.x,o.y),e.lineTo(a.x,a.y);var s=Zp({x:a.x-o.x,y:a.y-o.y}),l=.04*Math.min(t.width,t.height);if(n.lineDecoration.indexOf("arrow-begin")!==-1){var c=ga(s,l),u=ma(o,c),f=$n(o,2,u),d=$n(o,-2,u);e.moveTo(f.x,f.y),e.lineTo(o.x,o.y),e.lineTo(d.x,d.y)}if(n.lineDecoration.indexOf("arrow-end")!==-1){var h=ga(s,-l),p=ma(a,h),g=$n(a,2,p),m=$n(a,-2,p);e.moveTo(g.x,g.y),e.lineTo(a.x,a.y),e.lineTo(m.x,m.y)}return mi(e),!0},VI={rect:PI,ellipse:DI,image:NI,text:GI,line:BI,path:UI},FI=function(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e,0,0),t},kI=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise(function(r,i){if(!e||!mc(e.type))return i({status:"not an image file",file:e});var o=n.stripImageHead,a=n.beforeCreateBlob,s=n.afterCreateBlob,l=n.canvasMemoryLimit,c=t.crop,u=t.size,f=t.filter,d=t.markup,h=t.output,p=t.image&&t.image.orientation?Math.max(1,Math.min(8,t.image.orientation)):null,g=h&&h.quality,m=g===null?null:g/100,y=h&&h.type||null,_=h&&h.background||null,E=[];!u||typeof u.width!="number"&&typeof u.height!="number"||E.push({type:"resize",data:u}),f&&f.length===20&&E.push({type:"filter",data:f});var v=function(O){var w=s?s(O):O;Promise.resolve(w).then(r)},T=function(O,w){var S=FI(O),M=d.length?LI(S,d):S;Promise.resolve(M).then(function(P){sI(P,w,a).then(function(C){if(pa(P),o)return v(C);OI(e).then(function(z){z!==null&&(C=new Blob([z,C.slice(20)],{type:C.type})),v(C)})}).catch(i)})};if(/svg/.test(e.type)&&y===null)return II(e,c,d,{background:_}).then(function(O){r(bI(O,"image/svg+xml"))});var R=URL.createObjectURL(e);xI(R).then(function(O){URL.revokeObjectURL(R);var w=oI(O,p,c,{canvasMemoryLimit:l,background:_}),S={quality:m,type:y||e.type};if(!E.length)return T(w,S);var M=yc(Kp);M.post({transforms:E,imageData:w},function(P){T(RI(P),S),M.terminate()},[w.data.buffer])}).catch(i)})},$I=function(e,t){if(e.getUint32(t+=2,!1)!==1165519206)return-1;var n=e.getUint16(t+=6,!1)===18761;t+=e.getUint32(t+4,n);var r=e.getUint16(t,n);t+=2;for(var i=0;i<r;i++)if(e.getUint16(t+12*i,n)===274)return e.getUint16(t+12*i+8,n)},HI=function(e){var t=new DataView(e);if(t.getUint16(0,!1)!=65496)return null;for(var n,r=t.byteLength,i=2;i<r;){if(t.getUint16(i+2,!1)<=8)return-1;if(n=t.getUint16(i,!1),i+=2,n===65505)return $I(t,i);if((65280&n)!=65280)return null;i+=t.getUint16(i,!1)}},zI=function(e){return new Promise(function(t){var n=new FileReader;n.onload=function(){return t(HI(n.result)||-1)},n.readAsArrayBuffer(e.slice(0,262144))})},yn={HORIZONTAL:1,VERTICAL:2},vc=function(e,t,n){var r=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],i=e.center,o=e.zoom,a=e.aspectRatio,s=Pt(t),l={x:s.x-n.width*i.x,y:s.y-n.height*i.y},c=2*Math.PI+e.rotation%(2*Math.PI),u=o*ai(n,Zn(t,a||n.height/n.width),c,r?i:{x:.5,y:.5});return{origin:{x:i.x*n.width,y:i.y*n.height},translation:l,scale:u,rotation:e.rotation}},go=function(e){return{origin:te({},e.origin),translation:te({},e.translation),rotation:e.rotation,scale:e.scale}},Xr=function(e,t,n,r){var i=n.translation,o=n.scale,a=n.rotation,s=n.origin,l={origin:te({},s),translation:te({},i),scale:o,rotation:2*Math.PI+a%(2*Math.PI)},c=e.height/e.width,u=Xa(s,i,l.rotation,t),f=Pt(u),d=fn(u),h=Yr(e,n),p=Pt(h),g={x:h.x,y:h.y},m={x:p.x,y:p.y},y=f.x,_=f.y,E={x:g.x,y:g.y,width:h.width,height:h.height};if(!GT(u,h)){if(r==="moving"){E.y>u.y?E.y=u.y:E.y+E.height<d.bottom&&(E.y=d.bottom-E.height),E.x>u.x?E.x=u.x:E.x+E.width<d.right&&(E.x=d.right-E.width);var v=Yr(e,te({},n,{scale:l.scale})),T=Pt(v);m.x=T.x,m.y=T.y,g.x=v.x,g.y=v.y,E.x=m.x-.5*E.width,E.y=m.y-.5*E.height,E.y>u.y?E.y=u.y:E.y+E.height<d.bottom&&(E.y=d.bottom-E.height),E.x>u.x?E.x=u.x:E.x+E.width<d.right&&(E.x=d.right-E.width);var R={x:E.x-g.x,y:E.y-g.y},O={x:R.x*Math.cos(l.rotation)-R.y*Math.sin(l.rotation),y:R.x*Math.sin(l.rotation)+R.y*Math.cos(l.rotation)};l.translation.x+=O.x,l.translation.y+=O.y}else if(r==="resizing"){h.width<u.width&&(E.width=u.width,E.height=E.width*c,E.height<u.height&&(E.height=u.height,E.width=E.height/c)),h.height<u.height&&(E.height=u.height,E.width=E.height/c,E.width<u.width&&(E.width=u.width,E.height=E.width*c)),E.x=m.x-.5*E.width,E.y=m.y-.5*E.height,E.y>u.y?E.y=u.y:E.y+E.height<d.bottom&&(E.y=d.bottom-E.height),E.x>u.x?E.x=u.x:E.x+E.width<d.right&&(E.x=d.right-E.width),l.scale=ai(e,t,l.rotation,{x:(y-E.x)/E.width,y:(_-E.y)/E.height});var w=Yr(e,te({},n,{scale:l.scale})),S=Pt(w);m.x=S.x,m.y=S.y,g.x=w.x,g.y=w.y,E.x=m.x-.5*E.width,E.y=m.y-.5*E.height,E.y>u.y?E.y=u.y:E.y+E.height<d.bottom&&(E.y=d.bottom-E.height),E.x>u.x?E.x=u.x:E.x+E.width<d.right&&(E.x=d.right-E.width);var M={x:E.x-g.x,y:E.y-g.y},P={x:M.x*Math.cos(l.rotation)-M.y*Math.sin(l.rotation),y:M.x*Math.sin(l.rotation)+M.y*Math.cos(l.rotation)};l.translation.x+=P.x,l.translation.y+=P.y}else if(r==="rotating"){var C=!1;if(E.y>u.y){var z=E.y-u.y;E.y=u.y,E.height+=2*z,C=!0}if(E.y+E.height<d.bottom){var L=d.bottom-(E.y+E.height);E.y=d.bottom-E.height,E.height+=2*L,C=!0}if(E.x>u.x){var q=E.x-u.x;E.x=u.x,E.width+=2*q,C=!0}if(E.x+E.width<d.right){var x=d.right-(E.x+E.width);E.x=d.right-E.width,E.width+=2*x,C=!0}C&&(l.scale=ai(e,t,l.rotation,{x:(y-h.x)/h.width,y:(_-h.y)/h.height}))}}return te({},l,{rotation:n.rotation})},qI=function(e,t,n){var r=n.origin,i=n.translation,o=n.scale,a=2*Math.PI+n.rotation%(2*Math.PI),s={x:r.x+i.x,y:r.y+i.y},l=Xa(r,i,a,t),c=Yr(e,n),u=ja(c),f=Pt(c),d=st(u.tl,a,s),h=st(u.br,a,s),p=d.x+.5*(h.x-d.x),g=d.y+.5*(h.y-d.y),m=uo(c,{x:p-f.x,y:g-f.y}),y=uo(l,{x:p-f.x,y:g-f.y}),_=Pt(y),E={x:m.x,y:m.y},v=m.width,T=m.height,R=(_.x-E.x)/v,O=(_.y-E.y)/T,w={x:R*e.width,y:O*e.height},S=1-o,M=w.x*S,P=w.y*S,C={x:E.x+v*R,y:E.y+T*O},z=st(E,a,{x:E.x+.5*v,y:E.y+.5*T}),L=st(E,a,C),q=z.x-L.x,x=z.y-L.y;return{origin:cf(w),translation:cf({x:E.x-M+q,y:E.y-P+x})}},WI={n:function(e){return{x:e.x+.5*e.width,y:e.y}},e:function(e){return{x:e.x+e.width,y:e.y+.5*e.height}},s:function(e){return{x:e.x+.5*e.width,y:e.y+e.height}},w:function(e){return{x:e.x,y:e.y+.5*e.height}}},yf=function(e,t){return WI[e](t)},wl=function(e,t,n){var r=n.origin,i=n.translation,o=2*Math.PI+n.rotation%(2*Math.PI),a=Yr(e,n),s={x:r.x+i.x,y:r.y+i.y},l=Xa(r,i,o,t),c=fn(l),u=fn(a),f=a;if(c.top<u.top||c.right>u.right||c.bottom>u.bottom||c.left<u.left){var d=te({},u);if(c.top<=d.top){var h=d.bottom-d.top,p=d.right-d.left,g=Math.max(1,l.height/h),m=h*g,y=p*g-p;d.bottom=c.top+m,d.top=c.top,d.left-=.5*y,d.right+=.5*y}if(c.bottom>=d.bottom){var _=d.bottom-d.top,E=d.right-d.left,v=Math.max(1,l.height/_),T=_*v,R=E*v-E;d.bottom=c.bottom,d.top=c.bottom-T,d.left-=.5*R,d.right+=.5*R}if(c.left<=d.left){var O=d.bottom-d.top,w=d.right-d.left,S=Math.max(1,l.width/w),M=w*S,P=O*S-O;d.right=c.left+M,d.left=c.left,d.top-=.5*P,d.bottom+=.5*P}if(c.right>=d.right){var C=d.bottom-d.top,z=d.right-d.left,L=Math.max(1,l.width/z),q=z*L,x=C*L-C;d.right=c.right,d.left=c.right-q,d.top-=.5*x,d.bottom+=.5*x}f=dn(d.left,d.top,d.right-d.left,d.bottom-d.top)}var b=ja(f),N=Pt(f),H=st(b.tl,o,s),Q=st(b.br,o,s),Y=H.x+.5*(Q.x-H.x),oe=H.y+.5*(Q.y-H.y),ce=uo(f,{x:Y-N.x,y:oe-N.y}),de=uo(l,{x:Y-N.x,y:oe-N.y}),B=Pt(de),D={x:ce.x,y:ce.y},$=ce.width,X=ce.height,ne=(B.x-D.x)/$,ie=(B.y-D.y)/X,ae=$/e.width,I={x:ne*e.width,y:ie*e.height},A=1-ae,V=I.x*A,U=I.y*A,W={x:D.x+$*ne,y:D.y+X*ie},k=st(D,o,{x:D.x+.5*$,y:D.y+.5*X}),ee=st(D,o,W),Z=k.x-ee.x,K=k.y-ee.y;return{origin:I,translation:{x:D.x-V+Z,y:D.y-U+K},scale:ae,rotation:n.rotation}},YI=function(e,t,n,r,i,o,a,s,l){var c=o.left,u=o.right,f=o.top,d=o.bottom,h=u-c,p=d-f,g=i.left,m=i.right,y=i.top,_=i.bottom;if(n===yn.VERTICAL){if(y=e.y>0?r.y:Math.min(r.y,Math.max(t.y,f)),_=e.y>0?Math.max(r.y,Math.min(t.y,d)):r.y,a){var E=(_-y)/a;g=r.x-.5*E,m=r.x+.5*E}}else if(g=e.x>0?r.x:Math.min(r.x,Math.max(t.x,c)),m=e.x>0?Math.max(r.x,Math.min(t.x,u)):r.x,a){var v=(m-g)*a;y=r.y-.5*v,_=r.y+.5*v}var T,R,O,w,S=s.width,M=s.height;if(n===yn.VERTICAL?(T=r.x-.5*S,R=r.x+.5*S,e.y<0?(O=r.y-M,w=r.y):e.y>0&&(O=r.y,w=r.y+M)):(O=r.y-.5*M,w=r.y+.5*M,e.x<0?(T=r.x-S,R=r.x):e.x>0&&(T=r.x,R=r.x+S)),a)if(n===yn.VERTICAL){var P=Math.min((_-y)/a,h),C=P*a;g<c&&(m=(g=c)+P),m>u&&(g=(m=u)-P),r.x=g+.5*P,e.y<0?y=r.y-C:e.y>0&&(_=r.y+C)}else{var z=Math.min((m-g)*a,p),L=z/a;y<f&&(_=(y=f)+z),_>d&&(y=(_=d)-z),r.y=y+.5*z,e.x<0?g=r.x-L:e.x>0&&(m=r.x+L)}var q=fr({top:y,right:m,bottom:_,left:g}),x=function(){var D=S*a;n===yn.HORIZONTAL?(y=r.y-.5*D,_=r.y+.5*D):e.y<0?(_=r.y,y=_-D):e.y>0&&(y=r.y,_=y+D)},b=function(){var D=M/a;n===yn.VERTICAL?(g=r.x-.5*D,m=r.x+.5*D):e.x<0?(m=r.x,g=m-D):e.x>0&&(g=r.x,m=g+D)};m<R&&(m=R,g=R-S,a&&x()),g>T&&(g=T,m=T+S,a&&x()),y>O&&(y=O,_=O+M,a&&b()),_<w&&(_=w,y=w-M,a&&b());var N=l.width,H=l.height;if(a&&(a<1?N=H/a:H=N*a),m-g>N&&(e.x<0?g=r.x-N:m=r.x+N),_-y>H&&(e.y<0?y=r.y-H:_=r.y+H),m-g==0&&(e.x>0?m=r.x+2:g=r.x-2),_-y==0&&(e.y>0?_=r.y+2:y=r.y-2),Math.round(g)<c||Math.round(m)>u||Math.round(y)<f||Math.round(_)>d){var Q=d-f,Y=u-c;if(g<c){g=c;var oe=Math.min(m-g,Y);m=g+oe}if(m>u){m=u;var ce=Math.min(m-g,Y);g=m-ce}if(y<f){y=f;var de=Math.min(_-y,Q);_=y+de}if(_>d){_=d;var B=Math.min(_-y,Q);y=_-B}q=fr({top:y,right:m,bottom:_,left:g})}return{free:q,limited:fr({top:y,right:m,bottom:_,left:g})}},jI={nw:function(e){return{x:e.x,y:e.y}},ne:function(e){return{x:e.x+e.width,y:e.y}},se:function(e){return{x:e.x+e.width,y:e.y+e.height}},sw:function(e){return{x:e.x,y:e.y+e.height}}},vf=function(e,t){return jI[e](t)},XI=function(e,t,n,r,i,o,a){var s=fn(r),l=s.left,c=s.right,u=s.top,f=s.bottom,d=kp({x:t.x,y:t.y},r),h=e.x>0?n.x:Math.min(d.x,n.x),p=e.x>0?Math.max(n.x,d.x):n.x,g=e.y>0?n.y:Math.min(d.y,n.y),m=e.y>0?Math.max(n.y,d.y):n.y;if(i){var y=d.x-n.x;e.x>0?p=Math.max(n.x,n.x+e.x*y):h=Math.min(n.x,n.x-e.x*y),e.y>0?m=Math.max(n.y,n.y+e.x*y*i):g=Math.min(n.y,n.y-e.x*y*i)}var _=fr({top:g,right:p,bottom:m,left:h});if(fr({top:g,right:p,bottom:m,left:h}),o.width&&o.height){var E=o.width,v=o.height;i&&(i===1?v=E=Math.max(E,v):E<v?E=v/i:E>v?v=E*i:E=v/i),p-h<E&&(e.x>0?p=n.x+E:h=n.x-E),m-g<v&&(e.y>0?m=n.y+v:g=n.y-v);var T=a.width,R=a.height;i&&(i<1?T=R/i:R=T*i),p-h>T&&(e.x<0?h=n.x-T:p=n.x+T),m-g>R&&(e.y<0?g=n.y-R:m=n.y+R)}if(p-h==0&&(e.x>0?p=n.x+2:h=n.x-2),m-g==0&&(e.y>0?m=n.y+2:g=n.y-2),Math.round(h)<l||Math.round(p)>c||Math.round(g)<u||Math.round(m)>f){var O=f-u,w=c-l;if(h<l){h=l;var S=Math.min(p-h,w);p=h+S,i&&(e.y>0&&(m=n.y+S*i),e.y<0&&(g=n.y-S*i))}if(p>c){p=c;var M=Math.min(p-h,w);h=p-M,i&&(e.y>0&&(m=n.y+M*i),e.y<0&&(g=n.y-M*i))}if(g<u){g=u;var P=Math.min(m-g,O);m=g+P,i&&(e.x>0&&(p=n.x+P/i),e.x<0&&(h=n.x-P/i))}if(m>f){m=f;var C=Math.min(m-g,O);g=m-C,i&&(e.x>0&&(p=n.x+C/i),e.x<0&&(h=n.x-C/i))}_=fr({top:g,right:p,bottom:m,left:h})}return{free:_,limited:fr({top:g,right:p,bottom:m,left:h})}},ZI=function(e,t,n){var r=Tl(e);return r.width=Math.min(r.height,r.width),r.height=r.width,r.height=r.width*t,r.height<n.height&&(r.height=n.height,r.width=r.height/t),r.width<n.width&&(r.width=n.width,r.height=r.width*t),r},KI=Math.PI/2,QI=Math.PI/4,Tc=function(e){var t=ge(QI),n=ge(KI),r=e/n,i=Math.floor(r)*n,o=e-i;return o>t&&(o-=n,i+=n),{main:i,sub:o}},JI=function(e){return new Promise(function(t,n){var r=new Image;r.src=URL.createObjectURL(e),r.onerror=function(o){clearInterval(i),n(o)};var i=setInterval(function(){r.naturalWidth&&r.naturalHeight&&(clearInterval(i),URL.revokeObjectURL(r.src),t({width:r.naturalWidth,height:r.naturalHeight}))},1)})},Qp=function(e,t){var n={width:e.width,height:e.height};if(e.width>t.width||e.height>t.height){var r=e.height/e.width,i=t.width/e.width,o=t.height/e.height;i<o?(n.width=e.width*i,n.height=n.width*r):(n.height=e.height*o,n.width=n.height/r)}return n},Si=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(t+e).slice(-t.length)},Jp=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date;return"".concat(e.getFullYear(),"-").concat(Si(e.getMonth()+1,"00"),"-").concat(Si(e.getDate(),"00"),"_").concat(Si(e.getHours(),"00"),"-").concat(Si(e.getMinutes(),"00"),"-").concat(Si(e.getSeconds(),"00"))},Ps=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=e("GET_CROP_ASPECT_RATIO"),o={center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null};n?Object.assign(o,n):t.options.crop?Object.assign(o,t.options.crop):o.aspectRatio=i;var a=r.width,s=r.height;if(a&&s)o.aspectRatio=s/a;else if(t.instructions.size){var l=t.instructions.size,c=l.width,u=l.height;c&&u&&(o.aspectRatio=u/c)}return o},bi=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},eg=function(e){return e.split(".").pop()},eR=function(e){if(typeof e!="string")return"";var t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?t==="jpeg"?"jpg":t:""},tR=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=typeof n=="string"?e.slice(0,e.size,n):e.slice(0,e.size,e.type);return i.lastModifiedDate=new Date,ct(t)||(t=Jp()),t&&r===null&&eg(t)?i.name=t:(r=r||eR(i.type),i.name=t+(r?"."+r:"")),i},nR=function(e){return e.substr(0,e.lastIndexOf("."))||e},rR={jpeg:"jpg","svg+xml":"svg"},iR=function(e,t){var n=nR(e),r=t.split("/")[1],i=rR[r]||r;return"".concat(n,".").concat(i)},oR=function(e){return/jpeg|png|svg\+xml/.test(e)?e:"image/jpeg"},tg=function(e){return Array.isArray(e)&&e.length===20},aR=["x","y","left","top","right","bottom","width","height"],sR=function(e){return typeof e=="string"&&/%/.test(e)?parseFloat(e)/100:e},lR=function(){return Math.random().toString(36).substr(2,9)},Tf=function(e){var t=qr(e,2),n=t[0],r=t[1],i=r.allowSelect!==!1,o=r.allowMove!==!1,a=r.allowResize!==!1,s=r.allowInput!==!1,l=r.allowDestroy!==!1,c=r.allowEdit===void 0||r.allowEdit;(r.allowResize===!0||r.allowMove===!0||r.allowInput===!0||r.allowEdit)&&(i=!0),r.allowMove===!1&&(a=!1),r.allowResize===!0&&(o=!0);var u=r.points?{}:aR.reduce(function(f,d){return f[d]=sR(r[d]),f},{});return r.points&&(a=!1),[n,te({zIndex:0,id:lR()},r,u,{isDestroyed:!1,isSelected:!1,isDirty:!0,allowDestroy:l,allowSelect:i,allowMove:o,allowResize:a,allowInput:s,allowEdit:c})]},cR=function(e){if(!e)return null;var t=e.split(/filename=|filename\*=.+''/).splice(1).map(function(n){return n.trim().replace(/^["']|[;"']{0,2}$/g,"")}).filter(function(n){return n.length});return t.length?decodeURI(t[t.length-1]):null},uR=function(e){return[1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0]},fR=function(e){return[e,0,0,0,.5*(1-e),0,e,0,0,.5*(1-e),0,0,e,0,.5*(1-e),0,0,0,1,0]},dR=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return[.213+.787*e,.715-.715*e,.072-.072*e,0,0,.213-.213*e,.715+.285*e,.072-.072*e,0,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,0,1,0]},hR=function(e){return[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0]},pR="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=",ng=void 0,Ci=Rr()?new Image:{};Ci.onload=function(){ng=Ci.naturalWidth>Ci.naturalHeight,Ci=void 0},Ci.src=pR;var gR=function(){return ng},Ds=null,Al=function(){return Ds===null&&(Ds=/MSIE|Trident/.test(window.navigator.userAgent)),Ds},xi={contrast:fR,exposure:hR,brightness:uR,saturation:dR},mR=function(e){return e.borderWidth?"borderColor":e.lineWidth?"lineColor":e.fontColor?"fontColor":e.backgroundColor?"backgroundColor":void 0},ER=function(e){var t=e.fontColor,n=e.backgroundColor,r=e.lineColor,i=e.borderColor;return t||n||r||i},$i=Math.PI/2,rg=function(e){var t={upscale:e("GET_OUTPUT_UPSCALE"),mode:e("GET_OUTPUT_FIT"),width:e("GET_OUTPUT_WIDTH"),height:e("GET_OUTPUT_HEIGHT")},n=e("GET_SIZE_INPUT");if(n.width||n.height){var r=n.width,i=n.height,o=e("GET_CROP_RECTANGLE_ASPECT_RATIO");r&&!i?i=r/o:i&&!r&&(r=i*o),t.width=r,t.height=i,t.upscale=!0,t.mode="force"}return t},_R=function(e,t){var n=t("GET_UID"),r=t("GET_CROP",n,Date.now()),i={width:r.cropStatus.currentWidth,height:r.cropStatus.currentHeight},o=e.mode,a=e.width,s=e.height,l=e.upscale;if(!a&&!s)return i;if(a===null?a=s:s===null&&(s=a),o!=="force"){var c=a/i.width,u=s/i.height,f=1;if(o==="cover"?f=Math.max(c,u):o==="contain"&&(f=Math.min(c,u)),f>1&&l===!1)return i;a=i.width*f,s=i.height*f}return{width:Math.round(a),height:Math.round(s)}},yR=function(e){return e.markup.filter(function(t){return!t[1].isDestroyed})},vR=function(e){return e.map(function(t){var n=te({},t[1]);return Object.keys(n).forEach(function(r){n[r]===void 0&&delete n[r]}),delete n.isDestroyed,delete n.isSelected,delete n.isDirty,[t[0],n]})},TR=function(e,t,n){return new Promise(function(r,i){var o={data:null,file:null},a=zp(t.image,t.crop),s=rg(n),l={crop:a,image:te({},_R(s,n),{orientation:t.file.orientation}),size:s,output:{type:n("GET_OUTPUT_TYPE"),quality:n("GET_OUTPUT_QUALITY"),background:t.options.outputCanvasBackgroundColor},filter:t.colorMatrices.filter?{id:t.filterName,value:t.filterValue,matrix:t.colorMatrices.filter}:null,color:Object.keys(t.colorValues).length?Object.keys(t.colorValues).reduce(function(d,h){return d[h]={value:t.colorValues[h],matrix:t.colorMatrices[h].map(function(p){return ge(p,5)})},d},{}):null,markup:vR(yR(t).map(function(d){return[d[0],te({},d[1])]})),colorMatrix:n("GET_COLOR_MATRIX")};if(e.data&&(o.data=l),e.file){var c={beforeCreateBlob:n("GET_BEFORE_CREATE_BLOB"),afterCreateBlob:n("GET_AFTER_CREATE_BLOB"),stripImageHead:n("GET_OUTPUT_STRIP_IMAGE_HEAD"),canvasMemoryLimit:n("GET_OUTPUT_CANVAS_MEMORY_LIMIT")},u=t.file.data,f=te({},l,{filter:l.colorMatrix,markup:l.markup});kI(u,f,c).then(function(d){o.file=tR(d,iR(u.name,oR(d.type))),r(o)}).catch(i)}else r(o)})},mo=function(e){e.crop.draft.rotateMinScale=null},IR=function(e){e.crop.draft.rotateMinScale||(e.crop.draft.rotateMinScale=e.crop.transforms.scale)},Mi=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0&&arguments[3],i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];IR(e);var o=te({},e.crop.transforms,{scale:e.crop.draft.rotateMinScale});e.crop.draft.transforms=wR(e.image,e.crop.rectangle,o,t.main+t.sub,n,e.crop.draft.transforms?e.crop.draft.transforms.rotation:e.crop.rotation.main+e.crop.rotation.sub,r,i),e.crop.rotation=Tc(e.crop.draft.transforms.rotation)},ig=function(e,t){if(e.stage!==null){var n=e.instructions.crop.scaleToFit===void 0?e.crop.limitToImageBounds===void 0?e.options.cropLimitToImageBounds:e.crop.limitToImageBounds:e.instructions.crop.scaleToFit,r=t("GET_STAGE_RECT",e.instructions.crop);e.crop.rectangle=Zn(r.fits?r:e.stage,e.instructions.crop.aspectRatio||e.image.aspectRatio),e.crop.draft.rectangle=null,r.mode!=="stage"&&r.fits&&(e.crop.rectangle.x=r.x,e.crop.rectangle.y=r.y),e.crop.transforms=vc(e.instructions.crop,r,e.image,n),e.crop.draft.transforms=null,e.crop.rotation=Tc(e.instructions.crop.rotation),e.crop.flip=te({},e.instructions.crop.flip);var i=t("GET_CROP_ASPECT_RATIO_OPTIONS")||[],o=i.map(function(s){return s.value.aspectRatio}).find(function(s){return s===e.instructions.crop.aspectRatio}),a=i.find(function(s){return s.value.aspectRatio===null});o?e.crop.aspectRatio=o:a&&i.length?e.crop.aspectRatio=null:e.crop.aspectRatio=t("GET_CROP_ASPECT_RATIO"),e.crop.isDirty=!1}},If=function(e,t,n){if(e.stage!==null){Ne(e),e.size.width=!!e.instructions.size&&e.instructions.size.width,e.size.height=!!e.instructions.size&&e.instructions.size.height,e.size.aspectRatioLocked=!0,e.size.aspectRatioPrevious=!1;var r=e.instructions.crop.scaleToFit===void 0?e.crop.limitToImageBounds===void 0?e.options.cropLimitToImageBounds:e.crop.limitToImageBounds:e.instructions.crop.scaleToFit;ig(e,t),e.instructions.markup&&n("MARKUP_SET_VALUE",{value:e.instructions.markup}),n("CROP_SET_LIMIT",{value:r,silent:!0}),Object.keys(e.instructions.color).forEach(function(i){return n("COLOR_SET_VALUE",{key:i,value:e.instructions.color[i]})}),n("FILTER_SET_VALUE",{value:e.instructions.filter}),mo(e)}},xo=function(e,t){if(e.stage){Ne(e);var n=e.crop.rectangle,r=n.height/n.width,i=e.crop.aspectRatio;if(i!==null&&ge(r,3)!==ge(i,3)){var o=t("GET_MIN_CROP_SIZE");o.width=ge(o.width),o.height=ge(o.height);var a=Math.min(n.width,n.height);Math.min(a*i,a/i)<Math.max(o.width,o.height)&&(e.crop.rectangle=ZI(te({},e.crop.rectangle),i,o),e.crop.draft.transforms=wl(e.image,e.crop.rectangle,e.crop.transforms))}var s=e.crop.draft.transforms||e.crop.transforms,l=Hp(e.image,e.crop.rectangle,s,e.crop.limitToImageBounds);e.crop.aspectRatio&&(l.aspectRatio=e.crop.aspectRatio);var c=t("GET_STAGE_RECT",l);e.crop.transforms=vc(l,c,e.image,l.scaleToFit),e.crop.draft.transforms=null;var u=e.crop.aspectRatio||e.crop.rectangle.height/e.crop.rectangle.width;e.crop.rectangle=Zn(c,u),e.crop.draft.rectangle=null,c.mode!=="stage"&&(e.crop.rectangle.x+=c.x,e.crop.rectangle.y+=c.y),mo(e)}},Hi=function(e,t,n){var r=t("GET_CROP_ZOOM_TIMEOUT");r&&(clearTimeout(e.zoomTimeoutId),e.zoomTimeoutId=setTimeout(function(){n("CROP_ZOOM")},r))},Mo=function(e,t,n){Ne(e),Hi(e,t,n)},Ne=function(e){clearTimeout(e.zoomTimeoutId)},RR=function(e){e.crop.rectangle=e.crop.draft.rectangle.limited,e.crop.draft.rectangle=null,Gn(e),mo(e)},Lo=function(e){e.crop.draft.transforms=go(e.crop.transforms),e.crop.draft.rectangle={limited:Tl(e.crop.rectangle),free:Tl(e.crop.rectangle)},Ne(e)},Ea=function(e,t){return Math.min(e.width/t.width,e.height/t.height)},wR=function(e,t,n,r,i,o,a,s){var l=te({},go(n),{rotation:r}),c=s?Xr(e,t,l,"rotating"):l,u=Ea(t,i);return ge(c.scale,5)>ge(u,5)?(a&&(o+=2*a),te({},go(n),{rotation:o,interaction:{rotation:c.rotation}})):(c.scale=Math.min(u,c.scale),c.interaction={rotation:c.rotation},c)},Po=function(e,t,n,r,i,o){var a=Math.max(1e-10,r),s=te({},go(n),{scale:a}),l=o?Xr(e,t,s,"resizing"):s,c=Ea(t,i);return l.scale=Math.min(c,l.scale),l.interaction={scale:a},l},AR=function(e,t,n,r,i){var o={x:n.translation.x+r.x,y:n.translation.y+r.y},a=te({},go(n),{translation:o}),s=i?Xr(e,t,a,"moving"):a;return s.interaction={translation:o},s},OR=function(e,t){var n=ge(e.crop.draft.transforms.scale,5);if(!(ge(e.crop.draft.targetSize,5)<n)||e.crop.aspectRatio!==null||e.crop.limitToImageBounds===!1||ge(e.crop.rotation.sub,5)!==0)return!1;var r=ge(e.crop.rotation.main/$i,5)%2!=0?e.image.width/e.image.height:e.image.height/e.image.width;if(r===e.crop.rectangle.height/e.crop.rectangle.width)return!1;var i=e.stage.x+.5*e.stage.width,o=e.stage.y+.5*e.stage.height,a=e.crop.rectangle.x+.5*e.crop.rectangle.width,s=e.crop.rectangle.y+.5*e.crop.rectangle.height;if(a!==i||s!==o)return!1;var l=t("GET_STAGE_RECT");return e.crop.rectangle=Zn(l,r),l.mode!=="stage"&&(e.crop.rectangle.x+=l.x,e.crop.rectangle.y+=l.y),e.crop.transforms=vc({center:{x:.5,y:.5},rotation:e.crop.transforms.rotation,zoom:1,aspectRatio:r},l,e.image,!0),e.crop.draft.transforms=null,!0},Gn=function(e){e.crop.draft.rectangle=null,e.crop.transforms=e.crop.draft.transforms||e.crop.transforms,e.crop.transforms.interaction=null,e.crop.draft.transforms=null,e.crop.transforms=te({},e.crop.transforms,qI(e.image,e.crop.rectangle,e.crop.transforms)),e.crop.isRotating=!1,e.crop.isDirty=!0},Rf=function(e,t){return e.getAllResponseHeaders().indexOf(t)>=0?e.getResponseHeader(t):null},SR={svg:"svg+xml",jpg:"jpeg"},bR=function(e,t){if(mc(e)||!t)return e;var n=eg(t);return n?"image/".concat(SR[n]||n):e},CR=function(e){return e.split("/").pop().split("?").shift()},xR=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.progress,r=n===void 0?function(c){}:n,i=t.load,o=i===void 0?function(c,u){}:i,a=t.error,s=a===void 0?function(){}:a,l=new XMLHttpRequest;l.onprogress=function(c){return r(c.lengthComputable?c.loaded/c.total:null)},l.onerror=function(){return s(l)},l.onload=function(){var c=l.status>=200&&l.status<300,u=l.response;if(!c||!u)return s(l);var f=Rf(l,"Content-Disposition"),d=f?cR(f):CR(e),h=bR(l.getResponseHeader("Content-Type"),d),p=Rf(l,"Content-Doka"),g=null;if(p)try{g=JSON.parse(p)}catch{}!mc(u.type)&&h&&(u=u.slice(0,u.size,h)),"name"in u||!d||(u.name=d),o(u,g)},l.open("GET",e),l.responseType="blob",l.send()},MR=function(e){for(var t=e.split(","),n=t[0].match(/([a-z]+\/[a-z]+)/)[0],r=atob(t[1]),i=r.length,o=new ArrayBuffer(r.length),a=new Uint8Array(o),s=0;s<i;s++)a[s]=r.charCodeAt(s);return new Blob([o],{type:n})},LR=function(e){return/^data:/.test(e)},PR=function(e,t){var n=t.progress;return new Promise(function(r,i){if(ct(e)){var o=LR(e);return o&&Al()?r({file:MR(e)}):void xR(e,{progress:o?function(){}:n,error:i,load:function(s,l){return r({file:s,fileInstructions:l})}})}if(e instanceof Blob)r({file:e});else{if(e.nodeName==="IMG"){var a=function(s){var l=document.createElement("canvas");l.width=s.naturalWidth,l.height=s.naturalHeight,l.getContext("2d").drawImage(s,0,0),l.toBlob(function(c){return r({file:c})})};return e.complete?void a(e):void(e.onload=function(){return a(e)})}e.nodeName!=="CANVAS"?i(e):e.toBlob(function(s){return r({file:s})})}})},Ln=function(e){return e.file===!1},DR=function(e,t,n){return te({SET_UID:function(r){var i=r.id;n.uid=i},AWAIT_IMAGE:function(){n.file||(n.noImageTimeout=setTimeout(function(){e("AWAITING_IMAGE")},250))},REQUEST_REMOVE_IMAGE:function(){e("UNLOAD_IMAGE"),n.file=!1,n.noImageTimeout=setTimeout(function(){e("AWAITING_IMAGE")},500)},DID_UNLOAD_IMAGE:function(){e("ABORT_IMAGE")},REQUEST_ABORT_IMAGE:function(r){e("UNLOAD_IMAGE"),n.file=!1,n.queuedFile=r},DID_SET_SRC:function(r){r.value!==r.prevValue&&(clearTimeout(n.noImageTimeout),e("REQUEST_LOAD_IMAGE",{source:r.value}))},ABORT_IMAGE:function(){if(n.file=null,n.queuedFile){var r=n.queuedFile;n.queuedFile=null,e("REQUEST_LOAD_IMAGE",r)}},REQUEST_LOAD_IMAGE:function(r){var i=r.source,o=r.success,a=o===void 0?function(){}:o,s=r.failure,l=s===void 0?function(h){}:s,c=r.options,u=r.resolveOnConfirm,f=u!==void 0&&u;if(clearTimeout(n.noImageTimeout),!i)return l("no-image-source");if(n.file!==null)return n.file.error?(n.file=null,void e("REQUEST_LOAD_IMAGE",{source:i,success:a,failure:l,options:c,resolveOnConfirm:f})):void e("REQUEST_ABORT_IMAGE",{source:i,success:a,failure:l,options:c,resolveOnConfirm:f});Fi(n),n.file={uid:un()},e("DID_REQUEST_LOAD_IMAGE",{source:i});var d=function(h){if(Ln(n))return e("ABORT_IMAGE");n.file.error=!0,e("DID_LOAD_IMAGE_ERROR",{error:{status:"IMAGE_LOAD_ERROR",data:h}}),l(h)};PR(i,{progress:function(h){return h!==null&&e("DID_MAKE_PROGRESS",{progress:h})}}).then(function(h){var p=h.file,g=h.fileInstructions;if(!c&&g){var m=g.crop,y=g.filter,_=g.colorMatrix,E=g.color,v=g.markup,T=g.size;c={crop:m,filter:y?y.id||y.matrix:_,color:E,markup:v,size:T}}if(Ln(n))return e("ABORT_IMAGE");var R=n.options.beforeLoadImage,O=R?R(p):p;Promise.resolve(O).then(function(w){w.name||(w.name=Jp()),n.file.orientation=-1,n.file.data=w,e("LOAD_IMAGE",{success:a,failure:l,options:c,resolveOnConfirm:f},!0),e("KICK")}).catch(function(w){setTimeout(function(){d(w)},100)})}).catch(d)},LOAD_IMAGE:function(r){var i=r.success,o=r.failure,a=r.options,s=a===void 0?{}:a,l=r.resolveOnConfirm;if(Ln(n))return e("ABORT_IMAGE");var c=n.file.data;Promise.all([JI(c),zI(c)]).then(function(u){var f=qr(u,2),d=f[0],h=f[1];if(Ln(n))return e("ABORT_IMAGE");if(n.file.orientation=t("GET_OUTPUT_CORRECT_IMAGE_EXIF_ORIENTATION")&&gR()?h:-1,n.file.orientation>-1){var p=d.width,g=d.height;h>=5&&h<=8&&(d.width=g,d.height=p)}var m=t("GET_MIN_IMAGE_SIZE");if(d.width<m.width||d.height<m.height)return e("DID_LOAD_IMAGE_ERROR",{error:{status:"IMAGE_MIN_SIZE_VALIDATION_ERROR",data:{size:d,minImageSize:m}}}),Fi(n),void o();var y=Qp(d,{width:t("GET_MAX_IMAGE_PREVIEW_WIDTH"),height:t("GET_MAX_IMAGE_PREVIEW_HEIGHT")});if(n.image={x:0,y:0,width:y.width,height:y.height,naturalWidth:d.width,naturalHeight:d.height,aspectRatio:d.height/d.width,orientation:h},s.size&&(s.size.hasOwnProperty("mode")&&s.size.hasOwnProperty("upscale")?(n.options.outputWidth=s.size.width,n.options.outputHeight=s.size.height,n.options.outputFit=s.size.mode,n.options.upscale=s.size.upscale):(n.size.width=s.size.width,n.size.height=s.size.height,n.size.aspectRatioLocked=!0,n.size.aspectRatioPrevious=!1,n.instructions.size={width:s.size.width,height:s.size.height})),n.instructions.crop=Ps(t,n,s.crop?te({},s.crop):null,n.size),n.crop.limitToImageBounds=n.options.cropLimitToImageBounds,n.instructions.crop.scaleToFit===!1&&(n.crop.limitToImageBounds=n.instructions.crop.scaleToFit),s.filter===void 0)n.options.filter?typeof n.options.filter=="string"?n.instructions.filter=n.options.filter:n.options.filter.id&&(n.instructions.filter=n.options.filter.id):n.instructions.filter=void 0;else{var _=s.filter;n.instructions.filter=_===null?_:_.id||_.matrix||_}var E=n.options.markup||[];n.instructions.markup=E.concat(s.markup||[]),n.instructions.color=Object.keys(xi).reduce(function(v,T){var R=null;return n.options.color&&n.options.color[T]&&(R=n.options.color[T].value),v[T]=s.color&&s.color[T]!==void 0?typeof s.color[T]=="number"?s.color[T]:s.color[T].value:R===null?n.options["color".concat(bi(T))]:R,v},{}),e("DID_LOAD_IMAGE",{image:te({size:n.file.data.size,name:n.file.data.name,type:n.file.data.type,orientation:h},d)}),n.filePromise={resolveOnConfirm:l,success:i,failure:o}}).catch(function(u){if(Ln(n))return e("ABORT_IMAGE");e("DID_LOAD_IMAGE_ERROR",{error:{status:"IMAGE_UNKNOWN_ERROR",data:u}}),Fi(n),o()})},CHANGE_VIEW:function(r){var i=r.id;n.activeView=i,e("SHOW_VIEW",{id:i})},UPDATE_ROOT_RECT:function(r){var i=r.rect;n.rootRect=i},DID_RESIZE_STAGE:function(r){var i=r.size,o=r.offset,a=r.animate,s=n.stage===null;if(n.stage=dn(0,0,i.width,i.height),n.stageOffset=Lt(o.x,o.y),!t("GET_ALLOW_PREVIEW_FIT_TO_VIEW")){var l=t("GET_IMAGE_STAGE_RECT");n.stage=dn(0,0,l.width,l.height),n.stageOffset=Lt(n.stageOffset.x+l.x,n.stageOffset.y+l.y)}if(s){if(If(n,t,e),e("DID_SHOW_IMAGE",{image:{size:n.file.data.size,name:n.file.data.name,type:n.file.data.type,orientation:n.image.orientation,width:n.image.naturalWidth,height:n.image.naturalHeight}}),!n.filePromise.resolveOnConfirm){var c=zp(n.image,n.crop),u=rg(t);n.filePromise.success({crop:c,image:{orientation:n.file.orientation},size:u,output:{type:t("GET_OUTPUT_TYPE"),quality:t("GET_OUTPUT_QUALITY")}})}}else n.instantUpdate=!a,xo(n,t),setTimeout(function(){n.instantUpdate=!1},16)},RESIZE_SET_OUTPUT_SIZE_ASPECT_RATIO_LOCK:function(r){var i=r.value;n.size.aspectRatioLocked=i},RESIZE_SET_OUTPUT_SIZE:function(r){var i=r.width,o=r.height,a=jr({width:i=i||null,height:o=o||null},t("GET_SIZE_MIN"),t("GET_SIZE_MAX"),t("GET_CROP_RECTANGLE_ASPECT_RATIO"));if(n.size.width=a.width?Math.round(a.width):null,n.size.height=a.height?Math.round(a.height):null,i&&o){var s=o/i;if(s===n.crop.aspectRatio)return;n.size.aspectRatioPrevious===!1&&(n.size.aspectRatioPrevious=n.crop.aspectRatio),e("CROP_SET_ASPECT_RATIO",{value:s})}else n.size.aspectRatioPrevious!==!1&&(e("CROP_SET_ASPECT_RATIO",{value:n.size.aspectRatioPrevious}),n.size.aspectRatioPrevious=!1)},CROP_SET_ASPECT_RATIO:function(r){var i=r.value;if(Ne(n),n.crop.aspectRatio=ct(i)?Wr(i):i,n.crop.aspectRatio&&xo(n,t),n.crop.isDirty=!0,n.size.width&&n.size.height)if(n.crop.aspectRatio){var o=n.size.width*n.crop.aspectRatio,a=rn(o,t("GET_SIZE_MIN").height,t("GET_SIZE_MAX").height);n.size.height=a,n.size.width=a/n.crop.aspectRatio}else n.size.height=null},DID_SET_CROP_ASPECT_RATIO:function(r){var i=r.value,o=r.prevValue;Wr(i)!==Wr(o)&&e("CROP_SET_ASPECT_RATIO",{value:i})},CROP_ZOOM:function(){n.stage&&(Ne(n),xo(n,t))},DID_SET_CROP_LIMIT_TO_IMAGE_BOUNDS:function(r){var i=r.value,o=r.prevValue;n.crop.limitToImageBounds=i,o===!1&&i===!0&&e("CROP_ENABLED_LIMIT_TO_IMAGE_BOUNDS")},CROP_ENABLED_LIMIT_TO_IMAGE_BOUNDS:function(){var r=n.stage,i=n.image;if(n.crop.rectangle){var o=n.crop.rectangle.height/n.crop.rectangle.width,a=Zn(r,o);n.crop.rectangle=a,n.crop.transforms=Xr(i,n.crop.rectangle,n.crop.transforms,"moving"),n.crop.transforms=Xr(i,n.crop.rectangle,n.crop.transforms,"resizing"),n.crop.transforms=Xr(i,n.crop.rectangle,n.crop.transforms,"rotating"),n.crop.draft.rectangle=null,n.crop.draft.transforms=null,xo(n,t)}},CROP_SET_LIMIT:function(r){var i=r.value,o=r.silent,a=o!==void 0&&o,s=n.crop.limitToImageBounds!==i;n.crop.limitToImageBounds=i,s&&!a&&(n.crop.isDirty=!0),s&&i&&e("CROP_ENABLED_LIMIT_TO_IMAGE_BOUNDS")},CROP_IMAGE_RESIZE_GRAB:function(){Lo(n),Ne(n)},CROP_IMAGE_ROTATE_GRAB:function(){Lo(n),Ne(n),n.crop.isRotating=!0},CROP_RECT_DRAG_GRAB:function(){Lo(n),Ne(n)},CROP_RECT_DRAG_RELEASE:function(){RR(n),Hi(n,t,e)},CROP_RECT_EDGE_DRAG:function(r){var i=r.offset,o=r.origin,a=r.anchor,s=n.image,l=n.stage,c=/n|s/.test(o)?yn.VERTICAL:yn.HORIZONTAL,u=yf(o,n.crop.rectangle),f=yf(a,n.crop.rectangle),d=kp({x:u.x+(c===yn.HORIZONTAL?i.x:0),y:u.y+(c===yn.VERTICAL?i.y:0)},l),h=t("GET_MIN_CROP_SIZE"),p=t("GET_MAX_CROP_SIZE");h.width=ge(h.width),h.height=ge(h.height);var g=Ea(n.crop.rectangle,t("GET_MIN_PREVIEW_IMAGE_SIZE"))/(n.crop.draft.transforms.scale||n.crop.transforms.scale);p.width=ge(p.width*g),p.height=ge(p.height*g);var m={x:Math.sign(u.x-f.x),y:Math.sign(u.y-f.y)};n.crop.draft.rectangle=YI(m,d,c,f,fn(n.crop.rectangle),fn(l),n.crop.aspectRatio,h,p),n.crop.limitToImageBounds&&(n.crop.draft.transforms=wl(s,n.crop.draft.rectangle.limited,n.crop.transforms))},CROP_RECT_CORNER_DRAG:function(r){var i=r.offset,o=r.origin,a=r.anchor,s=n.image,l=n.stage,c=vf(o,n.crop.rectangle),u=vf(a,n.crop.rectangle),f={x:c.x+i.x,y:c.y+i.y},d=t("GET_MIN_CROP_SIZE"),h=t("GET_MAX_CROP_SIZE");d.width=ge(d.width),d.height=ge(d.height);var p=Ea(n.crop.rectangle,t("GET_MIN_PREVIEW_IMAGE_SIZE"))/(n.crop.draft.transforms.scale||n.crop.transforms.scale);h.width=ge(h.width*p),h.height=ge(h.height*p);var g={x:Math.sign(c.x-u.x),y:Math.sign(c.y-u.y)};n.crop.draft.rectangle=XI(g,f,u,l,n.crop.aspectRatio,d,h),n.crop.limitToImageBounds&&(n.crop.draft.transforms=wl(s,n.crop.draft.rectangle.limited,n.crop.transforms))},CROP_IMAGE_DRAG_GRAB:function(){return Lo(n)||Ne(n)},CROP_IMAGE_DRAG_RELEASE:function(){Gn(n),mo(n),Hi(n,t,e)},CROP_IMAGE_ROTATE_RELEASE:function(){Gn(n),Hi(n,t,e)},CROP_IMAGE_DRAG:function(r){var i=r.value;Ne(n),n.crop.draft.transforms=AR(n.image,n.crop.rectangle,n.crop.transforms,i,n.crop.limitToImageBounds)},CROP_IMAGE_RESIZE_RELEASE:function(){t("GET_CROP_RESIZE_MATCH_IMAGE_ASPECT_RATIO")&&OR(n,t),Gn(n),mo(n),Hi(n,t,e)},CROP_IMAGE_RESIZE:function(r){var i=r.value;Ne(n);var o=n.crop.transforms;n.crop.draft.targetSize=o.scale+o.scale*i,n.crop.draft.transforms=Po(n.image,n.crop.rectangle,o,n.crop.draft.targetSize,t("GET_MIN_PREVIEW_IMAGE_SIZE"),n.crop.limitToImageBounds)},CROP_IMAGE_RESIZE_SET:function(r){var i=r.value,o=Math.max(n.crop.rectangle.width/n.image.width,n.crop.rectangle.height/n.image.height);Ne(n);var a=n.crop.transforms;n.crop.draft.targetSize=i*o,n.crop.draft.transforms=Po(n.image,n.crop.rectangle,a,n.crop.draft.targetSize,t("GET_MIN_PREVIEW_IMAGE_SIZE"),n.crop.limitToImageBounds)},CROP_IMAGE_RESIZE_MULTIPLY:function(r){var i=r.value;Ne(n);var o=n.crop.transforms;n.crop.draft.targetSize=o.scale*i,n.crop.draft.transforms=Po(n.image,n.crop.rectangle,o,n.crop.draft.targetSize,t("GET_MIN_PREVIEW_IMAGE_SIZE"),n.crop.limitToImageBounds)},CROP_IMAGE_RESIZE_AMOUNT:function(r){var i=r.value;Ne(n);var o=n.crop.transforms;n.crop.draft.targetSize=(n.crop.draft.transforms?n.crop.draft.transforms.scale:o.scale)+i,n.crop.draft.transforms=Po(n.image,n.crop.rectangle,o,n.crop.draft.targetSize,t("GET_MIN_PREVIEW_IMAGE_SIZE"),n.crop.limitToImageBounds)},CROP_IMAGE_ROTATE:function(r){var i=r.value;Ne(n),n.crop.isRotating=!0,Mi(n,{main:n.crop.rotation.main,sub:i},t("GET_MIN_PREVIEW_IMAGE_SIZE"),!1,n.crop.limitToImageBounds)},CROP_IMAGE_ROTATE_ADJUST:function(r){var i=r.value;Ne(n),Mi(n,{main:n.crop.rotation.main,sub:Math.min(Math.PI/4,Math.max(-Math.PI/4,n.crop.rotation.sub+i))},t("GET_MIN_PREVIEW_IMAGE_SIZE"),!1,n.crop.limitToImageBounds),Gn(n)},CROP_IMAGE_ROTATE_CENTER:function(){Ne(n),Mi(n,{main:n.crop.rotation.main,sub:0},t("GET_MIN_PREVIEW_IMAGE_SIZE"),!1,n.crop.limitToImageBounds),Gn(n)},CROP_IMAGE_ROTATE_LEFT:function(){Mo(n,t,e),Mi(n,{main:n.crop.rotation.main-$i,sub:n.crop.rotation.sub},t("GET_MIN_PREVIEW_IMAGE_SIZE"),-$i,n.crop.limitToImageBounds),Gn(n),t("GET_CROP_FORCE_LETTERBOX")&&e("CROP_UPDATE_LETTERBOX")},CROP_IMAGE_ROTATE_RIGHT:function(){Mo(n,t,e),Mi(n,{main:n.crop.rotation.main+$i,sub:n.crop.rotation.sub},t("GET_MIN_PREVIEW_IMAGE_SIZE"),$i,n.crop.limitToImageBounds),Gn(n),t("GET_CROP_FORCE_LETTERBOX")&&e("CROP_UPDATE_LETTERBOX")},CROP_IMAGE_FLIP_HORIZONTAL:function(){Mo(n,t,e),ge(n.crop.rotation.main%Math.PI/2,5)===0?n.crop.flip.horizontal=!n.crop.flip.horizontal:n.crop.flip.vertical=!n.crop.flip.vertical,n.crop.isDirty=!0},CROP_IMAGE_FLIP_VERTICAL:function(){Mo(n,t,e),ge(n.crop.rotation.main%Math.PI/2,5)===0?n.crop.flip.vertical=!n.crop.flip.vertical:n.crop.flip.horizontal=!n.crop.flip.horizontal,n.crop.isDirty=!0},DID_RECEIVE_IMAGE_DATA:function(r){var i=r.previewData,o=r.thumbData;n.file.preview=i,n.file.thumb=o},MARKUP_SET_VALUE:function(r){var i=r.value;n.markup=(i||[]).map(Tf).sort(po)},MARKUP_ADD_DEFAULT:function(r){var i=r.value,o=function(){return-.5+Math.random()},a=t("GET_CROP_RECTANGLE_ASPECT_RATIO"),s=a>1?.5/a:.5,l=a>1?.5:.5*a,c=function(){return{width:s,height:l,x:.5+.5*o()-.5*s,y:.5+.5*o()-.5*l}},u=function(h){return t("GET_MARKUP_TOOL_VALUES")[h]},f=function(){var h=u("shapeStyle"),p=u("color"),g=h[0]||h[1]?null:p;return{backgroundColor:g,borderWidth:h[0],borderStyle:h[1]?h[1]:null,borderColor:g!==null?null:p}},d={rect:function(){return te({},c(),f())},ellipse:function(){return te({},c(),f())},text:function(){return{x:.5+.5*o()-.1,y:.5+.5*o(),width:0,height:0,fontColor:u("color"),fontSize:u("fontSize"),fontFamily:u("fontFamily"),text:"Text"}},line:function(){var h=u("lineStyle");return te({},c(),{lineColor:u("color"),lineWidth:h[0],lineStyle:h[1]?h[1]:null,lineDecoration:u("lineDecoration")})}}[i]();e("MARKUP_ADD",[i,d])},MARKUP_ADD:function(r){n.markup.forEach(function(o){return o[1].isSelected=!1}),n.markup=n.markup.filter(function(o){return!o[1].isDestroyed});var i=Tf(r);n.markup.push(i),n.markup.sort(po),t("GET_MARKUP_UTIL")!=="draw"&&e("MARKUP_SELECT",{id:i[1].id}),n.crop.isDirty=!0},MARKUP_SELECT:function(r){var i=r.id;n.markup.forEach(function(o){o[1].isSelected=o[1].id===i,o[1].isDirty=!0})},MARKUP_ELEMENT_DRAG:function(r){var i=r.id,o=r.origin,a=r.offset,s=r.size,l=n.markup.find(function(m){return m[1].id===i});if(l){var c=l[1],u=o.x/s.width,f=o.y/s.height,d=o.width/s.width,h=o.height/s.height,p=a.x/s.width,g=a.y/s.height;c.x=u+p,c.y=f+g,c.width=d,c.height=h,c.left=void 0,c.top=void 0,c.right=void 0,c.bottom=void 0,c.isDirty=!0,n.crop.isDirty=!0}},MARKUP_ELEMENT_RESIZE:function(r){var i=r.id,o=r.corner,a=r.origin,s=r.offset,l=r.size,c=n.markup.find(function(y){return y[1].id===i});if(c){var u=qr(c,2),f=u[0],d=u[1],h=(a.x+s.x)/l.width,p=(a.y+s.y)/l.height;if(/n/.test(o))if(f==="line")d.height=d.height-(p-d.y),d.y=p;else{var g=d.y+d.height;p>g&&(p=g),d.height=d.height-(p-d.y),d.y=p}if(/w/.test(o))if(f==="line")d.width=d.width-(h-d.x),d.x=h;else{var m=d.x+d.width;h>m&&(h=m),d.width=d.width-(h-d.x),d.x=h}/s/.test(o)&&(d.height=f==="line"?p-d.y:Math.max(0,p-d.y)),/e/.test(o)&&(d.width=f==="line"?h-d.x:Math.max(0,h-d.x)),d.left=void 0,d.top=void 0,d.right=void 0,d.bottom=void 0,d.isDirty=!0,n.crop.isDirty=!0}},MARKUP_DELETE:function(r){var i=r.id,o=n.markup.find(function(u){return u[1].id===i});if(o){var a=o[1];a.allowDestroy&&(a.isDestroyed=!0,a.isSelected=!1,a.isDirty=!0);for(var s=null,l=n.markup.length;l>0;){l--;var c=n.markup[l][1];if(!c.isDestroyed&&c.allowDestroy){s=c.id;break}}e("MARKUP_SELECT",{id:s})}},MARKUP_UPDATE:function(r){var i=r.style,o=r.value;n.markupToolValues[i]=o,n.markup.map(function(a){return a[1]}).filter(function(a){return a.isSelected}).forEach(function(a){if(i==="color")a[mR(a)]=o;else if(i==="shapeStyle"){var s=ER(a);a.borderColor=s,a.borderWidth=o[0],a.borderStyle=o[1],a.backgroundColor=o[0]||o[1]?null:s,a.backgroundColor!==null&&(a.borderColor=null)}else i==="lineStyle"?(a.lineWidth=o[0],a.lineStyle=o[1]):a[i]=o;a.isDirty=!0}),n.crop.isDirty=!0}},["color","shapeStyle","lineStyle","textDecoration","fontSize","fontFamily"].reduce(function(r,i){var o=i.split(/(?=[A-Z])/).join("_").toUpperCase(),a=bi(i);return r["SET_MARKUP_"+o]=function(s){var l=s.value;l!==s.prevValue&&(n.options["markup".concat(a)]=l,e("MARKUP_UPDATE",{style:i,value:l}))},r},{}),{DID_SET_CROP:function(r){var i=r.value;i!==r.prevValue&&e("SET_DATA",{crop:i})},COLOR_SET_COLOR_VALUE:function(r){var i=r.key,o=r.value;n.crop.isDirty=!0,e("COLOR_SET_VALUE",{key:i,value:o})},COLOR_SET_VALUE:function(r){var i=r.key,o=r.value;n.colorValues[i]=o,e("SET_COLOR_MATRIX",{key:i,matrix:xi[i](o)})}},Object.keys(xi).reduce(function(r,i){var o=i.toUpperCase(),a=bi(i);return r["SET_COLOR_".concat(o)]=function(s){var l=s.value;if(l!==s.prevValue){var c=qr(t("GET_COLOR_".concat(o,"_RANGE")),2),u=c[0],f=c[1],d=rn(l,u,f);n.options["color".concat(a)]=d,n.instructions.color||(n.instructions.color={}),n.instructions.color[i]=d,e("COLOR_SET_VALUE",{key:i,value:d})}},r},{}),{SET_COLOR_MATRIX:function(r){var i=r.key,o=r.matrix;o?n.colorMatrices[i]=tn(o):delete n.colorMatrices[i],e("DID_SET_COLOR_MATRIX",{key:i,matrix:o})},FILTER_SET_FILTER:function(r){var i=r.value;n.crop.isDirty=!0,e("FILTER_SET_VALUE",{value:i})},FILTER_SET_VALUE:function(r){var i=r.value,o=tg(i)?i:null;if(ct(i)){var a=t("GET_FILTERS");$e(a,function(s,l){s===i&&(o=l.matrix())})}n.filter=i,n.filterName=ct(i)?i:null,e("SET_COLOR_MATRIX",{key:"filter",matrix:o})},DID_SET_UTIL:function(r){var i=r.value;r.prevValue,n.options.utils.indexOf(i)!==-1&&e("CHANGE_VIEW",{id:i})},DID_SET_FILTER:function(r){var i=r.value;i!==r.prevValue&&(i&&i.id&&(i=i.id),e("FILTER_SET_VALUE",{value:i}),e("SET_DATA",{filter:i}))},DID_SET_SIZE:function(r){var i=r.value;i!==r.prevValue&&e("SET_DATA",{size:i})},DID_SET_MARKUP_UTIL:function(r){var i=r.value;i!==r.prevValue&&i&&(/^(draw|line|text|rect|ellipse)$/.test(i)||(i="select"),e("SWITCH_MARKUP_UTIL",{util:i}))},DID_SET_MARKUP:function(r){var i=r.value,o=r.prevValue;i!==o&&JSON.stringify(i)===JSON.stringify(o)||(e("MARKUP_SET_VALUE",{value:i}),e("SET_DATA",{markup:i}))},SET_DATA:function(r){if(r.size){var i=te({width:null,height:null},r.size),o=jr(i,t("GET_SIZE_MIN"),t("GET_SIZE_MAX"),null);n.instructions.size=te({},o),e("RESIZE_SET_OUTPUT_SIZE",o)}r.filter&&(n.instructions.filter=r.filter?r.filter.id||r.filter.matrix:r.colorMatrix),n.instructions.markup=r.markup||[],n.instructions.markup.forEach(function(a){return a[1].isDirty=!0}),n.instructions.color=Object.keys(xi).reduce(function(a,s){var l=r.color===void 0||r.color[s]===void 0,c=n.options["color".concat(bi(s))];return a[s]=l?c:$t(r.color[s])?r.color[s]:r.color[s].value,a},{}),r.crop&&(n.instructions.crop=Ps(t,n,r.crop,n.size),n.crop.limitToImageBounds=n.options.cropLimitToImageBounds,n.instructions.crop.scaleToFit===!1&&(n.crop.limitToImageBounds=n.instructions.crop.scaleToFit),ig(n,t))},DID_SET_INITIAL_STATE:function(r){var i=r.value||{},o=i.crop,a=i.filter,s=i.color,l=i.size,c=l===void 0?{}:l,u=i.markup,f=u===void 0?[]:u,d=te({width:null,height:null},c),h=jr(d,t("GET_SIZE_MIN"),t("GET_SIZE_MAX"),null);n.instructions.size=te({},h),n.instructions.crop=Ps(t,n,o),n.crop.limitToImageBounds=n.options.cropLimitToImageBounds,n.instructions.crop.scaleToFit===!1&&(n.crop.limitToImageBounds=n.instructions.crop.scaleToFit),n.instructions.filter=a||null,n.instructions.color=Object.keys(xi).reduce(function(p,g){return p[g]=s===void 0||s[g]===void 0?n.options["color".concat(bi(g))]:s[g],p},{}),n.instructions.markup=f,n.crop.isDirty=!0},GET_DATA:function(r){var i=r.success,o=r.failure,a=r.file,s=r.data;if(!n.file)return o("no-image-source");if(!n.stage)return o("image-not-fully-loaded");var l={file:_l(a)?a:t("GET_OUTPUT_FILE"),data:_l(s)?s:t("GET_OUTPUT_DATA"),success:i,failure:o};e(l.file?"REQUEST_PREPARE_OUTPUT":"PREPARE_OUTPUT",l)},REQUEST_PREPARE_OUTPUT:function(r){var i=r.file,o=r.data,a=r.success,s=r.failure;e("PREPARE_OUTPUT",{file:i,data:o,success:a,failure:s},!0),e("DID_REQUEST_PREPARE_OUTPUT")},PREPARE_OUTPUT:function(r){var i=r.file,o=r.data,a=r.success,s=a===void 0?function(){}:a,l=r.failure,c=l===void 0?function(){}:l;if(Ln(n))return e("ABORT_IMAGE");var u=function(f){if(e("DID_PREPARE_OUTPUT"),Ln(n))return e("ABORT_IMAGE");s(f)};TR({file:i,data:o},n,t).then(function(f){var d=n.options.afterCreateOutput,h=d?d(f,function(p,g){return e("DID_REQUEST_POSTPROCESS_OUTPUT",{label:p,progress:g}),function(m){e("DID_MAKE_PROGRESS",{progress:m})}}):f;Promise.resolve(h).then(u).catch(function(p){e("DID_REQUEST_POSTPROCESS_OUTPUT_ERROR",{error:p})})}).catch(function(f){if(Ln(n))return e("ABORT_IMAGE");c(f)})},EDIT_RESET:function(){Ne(n),If(n,t,e)},EDIT_CONFIRM:function(){if(n.file&&n.stage){Ne(n),e("CROP_ZOOM");var r={file:t("GET_OUTPUT_FILE"),data:t("GET_OUTPUT_DATA"),success:function(i){n.filePromise.resolveOnConfirm&&n.filePromise.success(i),e("DID_CONFIRM",{output:i})},failure:console.error};e(r.file?"REQUEST_PREPARE_OUTPUT":"PREPARE_OUTPUT",r)}},EDIT_CANCEL:function(){n.filePromise&&n.filePromise.success(null),e("DID_CANCEL")},EDIT_CLOSE:function(){Ne(n)},EDIT_DESTROY:function(){Fi(n)},SET_OPTIONS:function(r){var i=r.options;$e(i,function(o,a){e("SET_".concat(Wa(o,"_").toUpperCase()),{value:a})})}})},Se=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:24;return'<svg width="'.concat(t,'" height="').concat(t,'" viewBox="0 0 ').concat(t," ").concat(t,'" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">').concat(e,"</svg>")},lt=he({ignoreRect:!0,ignoreRectUpdate:!0,name:"button",mixins:{styles:["opacity"],animations:{opacity:{type:"tween",duration:250}},apis:["id"],listeners:!0},tag:"button",create:function(e){var t=e.root,n=e.props;t.element.innerHTML="".concat(n.icon||"","<span>").concat(n.label,"</span>"),t.element.setAttribute("type",n.type||"button"),n.name&&n.name.split(" ").forEach(function(r){t.element.className+=" doka--button-".concat(r)}),t.ref.handleClick=function(){typeof n.action=="string"?t.dispatch(n.action):n.action()},t.element.addEventListener("click",t.ref.handleClick),t.ref.handlePointer=function(r){return r.stopPropagation()},t.element.addEventListener("pointerdown",t.ref.handlePointer),n.create&&n.create({root:t,props:n})},destroy:function(e){var t=e.root;t.element.removeEventListener("pointerdown",t.ref.handlePointer),t.element.removeEventListener("click",t.ref.handleClick)}}),NR=function(e){return he({ignoreRect:!0,tag:e,create:function(t){var n=t.root,r=t.props;n.element.textContent=r.text}})},GR=he({name:"status-progress",tag:"svg",ignoreRect:!0,ignoreRectUpdate:!0,mixins:{apis:["progress"],animations:{progress:{type:"spring",stiffness:.25,damping:.25,mass:2.5}}},create:function(e){var t=e.root,n=e.props;t.element.setAttribute("data-value",0),t.element.setAttribute("width",24),t.element.setAttribute("height",24),t.element.setAttribute("viewBox","0 0 20 20");var r=t.ref.circle=document.createElementNS("http://www.w3.org/2000/svg","circle"),i={r:5,cx:10,cy:10,fill:"none",stroke:"currentColor","stroke-width":10,transform:"rotate(-90) translate(-20)"};t.element.appendChild(r),Object.keys(i).forEach(function(o){r.setAttribute(o,i[o])}),t.ref.updateStroke=function(o){t.ref.circle.setAttribute("stroke-dasharray","".concat(31.42*Math.min(1,o)," 31.42"))},typeof n.progress=="number"?(t.progress=n.progress,t.element.setAttribute("data-value",Math.max(n.progress,.001)),t.ref.updateStroke(t.progress)):t.progress=0},write:Be({DID_MAKE_PROGRESS:function(e){var t=e.root,n=e.action;t.progress=n.progress,t.element.setAttribute("data-value",Math.max(n.progress,.001))}},function(e){var t=e.root;t.ref.updateStroke(t.progress)})}),UR=he({name:"status-bubble-inner",create:function(e){var t=e.root,n=e.props;n.onClose?t.appendChildView(t.createChildView(lt,{label:"Close",name:"icon-only status-bubble-close",icon:Se('<g fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></g>'),action:n.onClose})):t.ref.progressIndicator=t.appendChildView(t.createChildView(GR,{progress:n.progress})),t.appendChildView(t.createChildView(NR("p"),{text:n.label}))}}),BR=he({name:"status-bubble",mixins:{styles:["opacity","translateY"],apis:["markedForRemoval"],animations:{opacity:{type:"tween",duration:500},translateY:{type:"spring",mass:20}}},create:function(e){var t=e.root,n=e.props;return t.appendChildView(t.createChildView(UR,n))}}),wf=function(e){e.element.dataset.viewStatus="idle",og(e)},og=function(e){e.ref.busyIndicators.forEach(function(t){t.translateY=-10,t.opacity=0,t.markedForRemoval=!0})},or=function(e,t,n,r){e.element.dataset.viewStatus="busy";var i=VR(e,t,n,r);og(e),e.ref.busyIndicators.push(i),i.markedForRemoval=!1,i.translateY=0,i.opacity=1},VR=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0&&arguments[2],r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return e.appendChildView(e.createChildView(BR,{translateY:20,opacity:0,label:t,onClose:n,progress:r}))},FR=he({name:"edit-status",ignoreRect:!0,create:function(e){var t=e.root;t.ref.busyIndicators=[],t.element.setAttribute("tabindex",-1)},write:Be({MISSING_WEBGL:function(e){var t=e.root,n=/fullscreen/.test(t.query("GET_STYLE_LAYOUT_MODE"));or(t,t.query("GET_LABEL_STATUS_MISSING_WEB_G_L"),n?function(){t.dispatch("EDIT_CANCEL")}:null)},AWAITING_IMAGE:function(e){var t=e.root;or(t,t.query("GET_LABEL_STATUS_AWAITING_IMAGE"))},DID_PRESENT_IMAGE:function(e){var t=e.root;wf(t)},DID_LOAD_IMAGE_ERROR:function(e){var t=e.root,n=e.action,r=/fullscreen/.test(t.query("GET_STYLE_LAYOUT_MODE")),i=t.query("GET_LABEL_STATUS_LOAD_IMAGE_ERROR"),o=typeof i=="function"?i(n.error):i;or(t,o,r?function(){t.dispatch("EDIT_CANCEL")}:null)},DID_REQUEST_LOAD_IMAGE:function(e){var t=e.root;or(t,t.query("GET_LABEL_STATUS_LOADING_IMAGE"))},DID_REQUEST_PREPARE_OUTPUT:function(e){var t=e.root;or(t,t.query("GET_LABEL_STATUS_PROCESSING_IMAGE"))},DID_REQUEST_POSTPROCESS_OUTPUT:function(e){var t=e.root,n=e.action;or(t,n.label,null,n.progress)},DID_REQUEST_POSTPROCESS_OUTPUT_ERROR:function(e){var t=e.root,n=e.action.error;or(t,n,function(){return t.dispatch("DID_PREPARE_OUTPUT")})},DID_PREPARE_OUTPUT:function(e){var t=e.root;wf(t)}}),didWriteView:function(e){var t=e.root;t.ref.busyIndicators=t.ref.busyIndicators.filter(function(n){return!n.markedForRemoval||n.opacity!==0||(t.removeChildView(n),!1)})}}),ag={down:"pointerdown",move:"pointermove",up:"pointerup"},sg=function(){var e=[],t=function(n){return e.findIndex(function(r){return r.pointerId===n.pointerId})};return{update:function(n){var r=t(n);r<0||(e[r]=n)},multiple:function(){return e.length>1},count:function(){return e.length},active:function(){return e.concat()},push:function(n){(function(r){return t(r)>=0})(n)||e.push(n)},pop:function(n){var r=t(n);r<0||e.splice(r,1)}}},Hn=function(e,t,n,r){return e.addEventListener(ag[t],n,r)},_n=function(e,t,n){return e.removeEventListener(ag[t],n)},on=function(e,t){if("contains"in e)return e.contains(t);var n=t;do if(n===e)return!0;while(n=n.parentNode);return!1},On=function(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{stopPropagation:!0,cancelOnMultiple:!1},o={x:0,y:0},a={enabled:!0,origin:null,cancel:!1,cancelled:!1,pointers:sg()},s=null,l=function(h,p){p&&(s||c(h,p),cancelAnimationFrame(s),s=requestAnimationFrame(function(){c(h,p),s=null}))},c=function(h,p){return p.apply(null,[h,function(g){return{x:g.pageX-o.x,y:g.pageY-o.y}}(h)])},u=function(h){var p=a.pointers.count()===0;p&&(a.active=!1,a.cancel=!1,a.cancelled=!1),(e===h.target||on(e,h.target))&&(p?h.isPrimary&&(a.pointers.push(h),Hn(document.documentElement,"up",d),h.preventDefault(),i.stopPropagation&&(h.stopPropagation(),h.stopImmediatePropagation()),a.active=!0,o.x=h.pageX,o.y=h.pageY,Hn(document.documentElement,"move",f),t(h)):i.cancelOnMultiple&&(a.cancel=!0))},f=function(h){h.isPrimary&&(a.cancelled||(h.preventDefault(),i.stopPropagation&&h.stopPropagation(),l(h,n),a.cancel&&(a.cancelled=!0,l(h,r))))},d=function h(p){a.pointers.pop(p),a.pointers.count()===0&&(_n(document.documentElement,"move",f),_n(document.documentElement,"up",h)),a.active&&(a.cancelled||(p.preventDefault(),i.stopPropagation&&p.stopPropagation(),l(p,n),l(p,r)))};return Hn(document.documentElement,"down",u),{enable:function(){a.enabled||Hn(document.documentElement,"down",u),a.enabled=!0},disable:function(){a.enabled&&_n(document.documentElement,"down",u),a.enabled=!1},destroy:function(){_n(document.documentElement,"up",d),_n(document.documentElement,"move",f),_n(document.documentElement,"down",u)}}},Ve={type:"spring",stiffness:.4,damping:.65,mass:7},Af=function(e,t,n){if(/^(line|text|ellipse|rect)$/.test(n))e.dispatch("MARKUP_ADD_DEFAULT",{value:n}),e.dispatch("SET_MARKUP_UTIL",{value:"select"});else if(n==="draw"&&!e.ref.drawInput){var r=e.ref,i=r.drawState,o=r.viewSize,a=0,s=0,l={},c=e.query("GET_MARKUP_DRAW_DISTANCE");e.ref.drawInput=On(e.element,function(u){var f=e.query("GET_MARKUP_TOOL_VALUES"),d=f.lineStyle[0],h=f.lineStyle[1];i.lineColor=f.color,i.lineWidth=d,i.lineStyle=h;var p=e.query("GET_ROOT"),g=u.offsetX!==void 0?u.offsetX:u.pageX-p.x-t.stageOffsetX-window.pageXOffset,m=u.offsetY!==void 0?u.offsetY:u.pageY-p.y-t.stageOffsetY-window.pageYOffset;a=g-e.markupX,s=m-e.markupY,l.x=0,l.y=0,i.points.push({x:a/o.width,y:s/o.height})},function(u,f){if(e.dispatch("KICK"),c){var d=ki(f,l);if(d>c){var h=NT(l,f)+Math.PI/2,p=c-d;l.x+=Math.sin(h)*p,l.y-=Math.cos(h)*p,i.points.push({x:(a+l.x)/o.width,y:(s+l.y)/o.height})}}else i.points.push({x:(a+f.x)/o.width,y:(s+f.y)/o.height})},function(u,f){i.points.length>1&&e.dispatch("MARKUP_ADD",["path",te({},i)]),i.points=[]})}n!=="draw"&&e.ref.drawInput&&(e.ref.drawInput.destroy(),e.ref.drawInput=null)},kR=function(e){var t=e.fontColor,n=e.backgroundColor,r=e.lineColor,i=e.borderColor;return t||n||r||i},Do=10,Un=function(e,t){return Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})},$R="http://www.w3.org/2000/svg",gn=function(e,t){var n=document.createElementNS($R,e);return t&&Un(n,t),n},lg=["nw","se"],cg=["nw","n","ne","w","e","sw","s","se"],HR={nw:"nwse",n:"ns",ne:"nesw",w:"ew",e:"ew",sw:"nesw",s:"ns",se:"nwse"},zR={nw:function(e){return{x:e.x,y:e.y}},n:function(e){return{x:e.x+.5*e.width,y:e.y}},ne:function(e){return{x:e.x+e.width,y:e.y}},w:function(e){return{x:e.x,y:e.y+.5*e.height}},e:function(e){return{x:e.x+e.width,y:e.y+.5*e.height}},sw:function(e){return{x:e.x,y:e.y+e.height}},s:function(e){return{x:e.x+.5*e.width,y:e.y+e.height}},se:function(e){return{x:e.x+e.width,y:e.y+e.height}}},Ot=5,qR={nw:function(e){return{x:e.x-Ot,y:e.y-Ot}},n:function(e){return{x:e.x+.5*e.width,y:e.y-Ot}},ne:function(e){return{x:e.x+e.width+Ot,y:e.y-Ot}},w:function(e){return{x:e.x-Ot,y:e.y+.5*e.height}},e:function(e){return{x:e.x+e.width+Ot,y:e.y+.5*e.height}},sw:function(e){return{x:e.x-Ot,y:e.y+e.height+Ot}},s:function(e){return{x:e.x+.5*e.width,y:e.y+e.height+Ot}},se:function(e){return{x:e.x+e.width+Ot,y:e.y+e.height+Ot}}},WR=he({tag:"div",name:"image-markup",ignoreRect:!0,mixins:{styles:["opacity"],animations:{opacity:"spring",markupX:Ve,markupY:Ve,markupWidth:Ve,markupHeight:Ve},listeners:!0,apis:["toolsReference","onSelect","onDrag","markupX","markupY","markupWidth","markupHeight","allowInteraction","stageOffsetX","stageOffsetY"]},create:function(e){var t=e.root,n=e.props,r=n.onSelect,i=r===void 0?function(){}:r,o=n.onUpdate,a=o===void 0?function(){}:o,s=gn("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"});t.ref.canvas=s;var l=t.query("GET_ROOT_SIZE");s.setAttribute("width",l.width),s.setAttribute("height",l.height);var c=document.createElement("input");Un(c,{type:"text",autocomplete:"off",autocapitalize:"off"}),c.addEventListener("keydown",function(R){R.stopPropagation(),R.keyCode===13||R.keyCode===9?(R.target.blur(),f()):R.keyCode!==8||t.ref.input.value.length||t.dispatch("MARKUP_DELETE",{id:t.ref.selected.id})}),t.ref.input=c,t.ref.elements=[],t.ref.viewSize={width:0,height:0,scale:0},t.ref.resetSelected=function(){return t.ref.selected={id:null,type:null,settings:{}},t.ref.selected},t.ref.resetSelected();var u=function(R){return R.id?R:R.parentNode},f=function(){t.ref.resetSelected(),i(null)};t.ref.handleDeselect=function(R){var O;(t.query("IS_ACTIVE_VIEW","markup")||t.query("IS_ACTIVE_VIEW","sticker"))&&t.ref.selected.id&&R.target!==t.ref.removeButton.element&&(O=R.target,t.ref.selected.id!==u(O).id&&(function(w){return on(t.ref.manipulatorGroup,w)||w===t.ref.input}(R.target)||n.isMarkupUtil(R.target)||f()))},Hn(document.body,"down",t.ref.handleDeselect),t.ref.handleTextInput=function(){return a("text",t.ref.input.value)},t.ref.input.addEventListener("input",t.ref.handleTextInput),t.ref.handleAttemptDelete=function(R){(t.query("IS_ACTIVE_VIEW","markup")||t.query("IS_ACTIVE_VIEW","sticker"))&&(!t.ref.selected.id||R.keyCode!==8&&R.keyCode!==46||(R.stopPropagation(),R.preventDefault(),t.dispatch("MARKUP_DELETE",{id:t.ref.selected.id})))},document.body.addEventListener("keydown",t.ref.handleAttemptDelete);var d=gn("g"),h=gn("g",{class:"doka--shape-group"});d.appendChild(h),t.ref.shapeGroup=h;var p=gn("g",{fill:"none",class:"doka--manipulator-group"}),g=gn("rect",{x:0,y:0,width:0,height:0,fill:"none"}),m=gn("path");p.appendChild(m),p.appendChild(g),t.ref.manipulatorPath=m,t.ref.manipulatorRect=g,t.ref.manipulators=[];for(var y=0;y<10;y++){var _=gn("circle",{r:6,"stroke-width":2}),E=gn("circle",{r:22,class:"doka--hitbox",style:"opacity: 0"});p.appendChild(E),p.appendChild(_),t.ref.manipulators.push({visual:_,hitbox:E,dragger:null})}d.appendChild(p),t.ref.manipulatorGroup=p,s.appendChild(d),t.ref.shapeOffsetGroup=d,t.ref.removeButton=t.appendChildView(t.createChildView(lt,{label:t.query("GET_LABEL_MARKUP_REMOVE_SHAPE"),name:"destroy-shape",action:function(){t.dispatch("MARKUP_DELETE",{id:t.ref.selected.id})}})),(t.query("IS_ACTIVE_VIEW","markup")||t.query("IS_ACTIVE_VIEW","sticker"))&&(t.element.dataset.active=!0),t.ref.drawInput=null,t.ref.drawState={lineColor:null,lineWidth:null,lineStyle:null,points:[]};var v=gn("path",{fill:"none",class:"doka--draw-path"});t.ref.drawPath=v,s.appendChild(v);var T=Te("div","doka--image-markup-clip");T.appendChild(c),T.appendChild(s),t.ref.clip=T,t.element.appendChild(T),t.query("GET_MARKUP_UTIL")==="draw"&&Af(t,n,"draw")},destroy:function(e){var t=e.root;t.ref.elements.concat(t.ref.manipulators).forEach(function(n){n.dragger&&n.dragger.destroy()}),t.ref.input.removeEventListener("input",t.ref.handleTextInput),document.body.removeEventListener("keydown",t.ref.handleAttemptDelete),_n(document.body,"down",t.ref.handleDeselect)},read:function(e){var t=e.root;if(!t.rect.element.hidden)for(var n in t.ref.elements){var r=t.ref.elements[n];if(r&&r.nodeName==="text"&&r.parentNode){var i=r.getBBox();r.bbox={x:i.x,y:i.y,width:i.width,height:i.height}}}},write:Be({SHOW_VIEW:function(e){var t=e.root,n=e.props,r=e.action;r.id==="markup"||r.id==="sticker"?t.element.dataset.active=!0:(t.element.dataset.active=!1,n.onSelect(null))},MARKUP_SET_VALUE:function(e){var t=e.root;$e(t.ref.elements,function(n,r){r&&r.dragger&&r.dragger.destroy()}),t.ref.elements=[],t.ref.shapeGroup.innerHTML=""},UPDATE_ROOT_RECT:function(e){var t=e.root,n=e.action,r=t.ref.canvas;r.setAttribute("width",n.rect.width),r.setAttribute("height",n.rect.height),t.ref.previousScale=null},SWITCH_MARKUP_UTIL:function(e){var t=e.root,n=e.action,r=e.props,i=n.util;Af(t,r,i)}},function(e){var t=e.root,n=e.props,r=e.timestamp;if(!(t.opacity<=0)){var i=t.query("GET_CROP",n.id,r);if(i){var o=t.query("GET_MARKUP_UTIL");t.element.dataset.util=o||"";var a=i.markup,s=i.cropStatus,l=n.onSelect,c=n.onDrag,u=t.ref,f=u.clip,d=u.manipulatorGroup,h=u.drawPath,p=u.viewSize,g=u.shapeOffsetGroup,m=u.manipulators,y=u.manipulatorPath,_=u.manipulatorRect,E=u.removeButton,v=u.drawState,T=t.query("GET_OUTPUT_WIDTH"),R=t.query("GET_OUTPUT_HEIGHT"),O=s.image,w=s.crop,S=w.width,M=w.height,P=w.widthFloat/w.heightFloat;if(T||R){var C=t.query("GET_OUTPUT_FIT");T&&!R&&(R=T),R&&!T&&(T=R);var z,L=T/S,q=R/M;C==="force"?(S=T,M=R):(C==="cover"?z=Math.max(L,q):C==="contain"&&(z=Math.min(L,q)),S*=z,M*=z)}else O.width&&O.height?(S=O.width,M=O.height):O.width&&!O.height?(S=O.width,M=O.width/P):O.height&&!O.width&&(M=O.height,S=O.height*P);var x=v.points.length,b=ge(t.markupX,3),N=ge(t.markupY,3),H=ge(t.markupWidth,3),Q=ge(t.markupHeight,3),Y=ge(Math.min(t.markupWidth/S,t.markupHeight/M),4);if(p.width=H,p.height=Q,p.scale=Y,YR(t,{drawLength:x,markupX:b,markupY:N,scale:Y,markup:a,currentWidth:S,currentHeight:M})){var oe=b,ce=t.rect.element.width-b-H,de=N,B=t.rect.element.height-N-Q,D="inset(".concat(de,"px ").concat(ce,"px ").concat(B,"px ").concat(oe,"px)");if(f.style.clipPath=D,f.style.webkitClipPath=D,g.setAttribute("transform","translate(".concat(b," ").concat(N,")")),t.ref.previousDrawLength=x,t.ref.previousX=b,t.ref.previousY=N,t.ref.previousScale=Y,t.ref.previousCurrentHeight=M,t.ref.previousCurrentWidth=S,t.ref.previousMarkupLength=a.length,!(p.width<1||p.height<1)){var $,X=a.find(function(I){return I[1].isSelected}),ne=X&&t.ref.selected.id!==X[1].id||t.ref.selected.id&&!X;if($=X?t.ref.selected={id:X[1].id,type:X[0],settings:X[1]}:t.ref.resetSelected(),v.points.length){var ie=Kn(v,p,Y);return ie.d=Rl(v.points.map(function(I){return{x:b+I.x*p.width,y:N+I.y*p.height}})),void Un(h,ie)}h.removeAttribute("d"),t.ref.input.hidden=t.ref.selected.type!=="text"||!t.ref.selected.settings.allowInput,E.element.dataset.active=t.ref.selected.id!==null,y.setAttribute("style","opacity:0"),_.setAttribute("style","opacity:0"),m.forEach(function(I){I.visual.setAttribute("style","opacity:0; pointer-events:none;"),I.hitbox.setAttribute("style","pointer-events:none;")});var ae=t.query("GET_MARKUP_FILTER");a.filter(ae).sort(po).forEach(function(I,A){var V=qr(I,2),U=V[0],W=V[1],k=W.id,ee=W.isDestroyed,Z=W.isDirty,K=W.isSelected,J=W.allowSelect,se=W.allowMove,re=W.allowResize,le=W.allowInput;if(ee){var ue=t.ref.elements[k];ue&&(ue.dragger&&ue.dragger.destroy(),t.ref.elements[k]=null,ue.parentNode.removeChild(ue))}else{var ye,Ie,Re,fe=t.ref.elements[k];if(fe||(fe=Ec(U,W),t.ref.elements[k]=fe,J?(fe.dragger=On(fe,function(){Ie=Date.now(),ye=te({},fe.rect),(Re=k===t.ref.selected.id)||l(k)},function(Nt,er){se&&c(k,ye,er,p,Y)},function(Nt,er){if(le&&U==="text"&&Re){var hn=Ya({x:0,y:0},er),Sn=Date.now()-Ie;if(!(hn>10||Sn>750)){t.ref.input.focus();var bn=t.markupX+fe.bbox.x,tr=fe.bbox.width,nr=(Nt.offsetX-bn)/tr,Cn=Math.round(t.ref.input.value.length*nr);t.ref.input.setSelectionRange(Cn,Cn)}}}),fe.dragger.disable()):fe.setAttribute("style","pointer-events:none;")),fe.dragger&&(n.allowInteraction?fe.dragger.enable():fe.dragger.disable()),A!==fe.index){fe.index=A;var ze=t.ref.shapeGroup;ze.insertBefore(fe,ze.childNodes[A+1])}if(Z&&_c(fe,U,W,p,Y),K){var wt=E.rect.element.width,jt=E.rect.element.height,Je=t.markupX-.5*wt,yt=t.markupY-jt-15,me=U==="text"?fe.bbox:fe.rect,it=!1,Qn=kR(W);if(Qn){var Ii=fo(Qn);it=(.2126*Ii[0]+.7152*Ii[1]+.0722*Ii[2])/255>.65,d.setAttribute("is-bright-color",it)}U==="line"?(Je+=me.x,yt+=me.y,Un(y,{d:"M ".concat(me.x," ").concat(me.y," L ").concat(me.x+me.width," ").concat(me.y+me.height),style:"opacity:1"})):U==="path"?(Je+=(me={x:W.points[0].x*p.width,y:W.points[0].y*p.height,width:0,height:0}).x,yt+=me.y,Un(y,{d:Rl(W.points.map(function(Nt){return{x:Nt.x*p.width,y:Nt.y*p.height}})),style:"opacity:1"})):me&&(Je+=me.x+.5*me.width,yt+=me.y,Un(_,{x:me.x-(U==="text"?5:0),y:me.y,width:me.width+(U==="text"?10:0),height:me.height,style:"opacity:1"}));var Jn=t.markupY+Do,Ri=t.markupY+t.markupHeight-Do,wi=t.markupX+Do,Cr=t.markupX+t.markupWidth-Do;if(yt<Jn?yt=Jn:yt+jt>Ri&&(yt=Ri-jt),Je<wi?Je=wi:Je+wt>Cr&&(Je=Cr-wt),me||(E.element.dataset.active="false"),E.element.setAttribute("style","transform: translate3d(".concat(Je,"px, ").concat(yt,"px, 0)")),U==="text"&&me&&le){var rs=me.width+65,is=t.markupWidth-me.x,vt=`
                        width: `.concat(Math.min(rs,is),`px;
                        height: `).concat(me.height,`px;
                        color: `).concat(fe.getAttribute("fill"),`;
                        font-family: `).concat(fe.getAttribute("font-family"),`;
                        font-size: `).concat(fe.getAttribute("font-size").replace(/px/,""),`px;
                        font-weight: `).concat(fe.getAttribute("font-weight")||"normal",`;
                    `);hi()?vt+=`
                            left: `.concat(Math.round(t.markupX+me.x),`px;
                            top: `).concat(Math.round(t.markupY+me.y),`px;
                        `):vt+=`
                            transform: translate3d(`.concat(Math.round(t.markupX+me.x),"px,").concat(Math.round(t.markupY+me.y),`px,0);
                        `),t.ref.input.setAttribute("style",vt),fe.setAttribute("fill","none")}if(U==="text"||!re)return;var os=U==="line"?lg:cg;m.forEach(function(Nt,er){var hn=os[er];if(hn){var Sn=U==="line"?"move":"".concat(HR[hn],"-resize"),bn=zR[hn](fe.rect),tr=fe.rect.width<100||fe.rect.height<100,nr=hn.length===2?1:tr?0:1;Un(Nt.visual,{cx:bn.x,cy:bn.y,style:"opacity:".concat(nr)});var Cn=qR[hn](fe.rect);Un(Nt.hitbox,{cx:Cn.x,cy:Cn.y,style:"cursor:".concat(Sn,";")})}})}W.isDirty=!1}}),ne&&(XR(t),$.type==="text"&&t.ref.selected.settings.allowInput?t.ref.input.value=$.settings.text:t.ref.selected.id&&jR(t,n.onResize))}}}}})}),Li=function(e){return e.forEach(function(t){return t[1].isDirty=!0})},YR=function(e,t){var n=t.drawLength,r=t.markup,i=t.markupX,o=t.markupY,a=t.currentWidth,s=t.currentHeight,l=t.scale;return n!==e.ref.previousDrawLength||(i!==e.ref.previousX||o!==e.ref.previousY||l!==e.ref.previousScale||s!==e.ref.previousCurrentHeight||a!==e.ref.previousCurrentWidth?(Li(r),!0):r.length!==e.ref.previousMarkupLength||!!r.find(function(c){return c[1].isDirty}))},jR=function(e,t){var n=e.ref.selected.id,r=e.ref.elements[n].nodeName==="g"?lg:cg;e.ref.manipulators.forEach(function(i,o){var a=r[o];if(a){var s=null;i.dragger=On(i.hitbox,function(){s={x:parseFloat(co(i.hitbox,"cx")),y:parseFloat(co(i.hitbox,"cy"))}},function(l,c){t(n,a,s,c,e.ref.viewSize)},null,{stopPropagation:!0})}})},XR=function(e){e.ref.manipulators.forEach(function(t){t.dragger&&(t.dragger.destroy(),t.dragger=null)})},Of={38:"up",40:"down",37:"left",39:"right",189:"minus",187:"plus",72:"h",76:"l",81:"q",82:"r",84:"t",86:"v",90:"z",219:"left_bracket",221:"right_bracket"},Ic=function(e,t,n,r,i){var o=null,a=!0,s={enabled:!0},l=function(u){var f=Of[u.keyCode]||u.keyCode;n[f]&&(u.stopPropagation(),a&&(o=t(f),a=!1),n[f](o),r(o))},c=function(u){var f=Of[u.keyCode]||u.keyCode;n[f]&&(u.stopPropagation(),i(o),a=!0)};return e.addEventListener("keydown",l),e.addEventListener("keyup",c),{enable:function(){s.enabled||(e.addEventListener("keydown",l),e.addEventListener("keyup",c)),s.enabled=!0},disable:function(){s.enabled&&(e.removeEventListener("keydown",l),e.removeEventListener("keyup",c)),s.enabled=!1},destroy:function(){e.removeEventListener("keydown",l),e.removeEventListener("keyup",c)}}},Sf=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,i=arguments.length>4?arguments[4]:void 0;t=Math.round(t),n=Math.round(n);var o=i||document.createElement("canvas"),a=o.getContext("2d");return r>=5&&r<=8?(o.width=n,o.height=t):(o.width=t,o.height=n),a.save(),r!==-1&&a.transform.apply(a,Xp(t,n,r)),a.drawImage(e,0,0,t,n),a.restore(),o},ZR=function(){self.onmessage=function(e){createImageBitmap(e.data.message.file).then(function(t){self.postMessage({id:e.data.id,message:t},[t])})}},KR=function(e){return/^image/.test(e.type)&&!/svg/.test(e.type)},QR=function(e){var t=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);return!((t?parseInt(t[1]):null)<=58)&&"createImageBitmap"in window&&KR(e)},JR=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=function(i){n(i)},r.src=e})},bf=function(e,t,n){var r=e.createShader(n);return e.shaderSource(r,t),e.compileShader(r),r},Ns=function(e,t,n){var r=e.createProgram();return e.attachShader(r,bf(e,t,e.VERTEX_SHADER)),e.attachShader(r,bf(e,n,e.FRAGMENT_SHADER)),e.linkProgram(r),r},ew=function(e,t,n,r,i){var o=e.createTexture();e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_2D,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.uniform1i(t,r),e.uniform2f(n,i.width,i.height);try{e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i)}catch{e.texImage2D(e.TEXTURE_2D,0,e.RGBA,i.width,i.height,0,e.RGBA,e.UNSIGNED_BYTE,null)}return o},tw=function(){var e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},nw=function(e,t,n,r,i){var o=1/Math.tan(t/2),a=1/(r-i);e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,e[10]=(i+r)*a,e[14]=2*i*r*a},rw=function(e,t){var n=t[0],r=t[1],i=t[2];e[12]=e[0]*n+e[4]*r+e[8]*i+e[12],e[13]=e[1]*n+e[5]*r+e[9]*i+e[13],e[14]=e[2]*n+e[6]*r+e[10]*i+e[14],e[15]=e[3]*n+e[7]*r+e[11]*i+e[15]},iw=function(e,t){var n=t[0],r=t[1],i=t[2];e[0]=e[0]*n,e[1]=e[1]*n,e[2]=e[2]*n,e[3]=e[3]*n,e[4]=e[4]*r,e[5]=e[5]*r,e[6]=e[6]*r,e[7]=e[7]*r,e[8]=e[8]*i,e[9]=e[9]*i,e[10]=e[10]*i,e[11]=e[11]*i},ow=function(e,t){var n=Math.sin(t),r=Math.cos(t),i=e[4],o=e[5],a=e[6],s=e[7],l=e[8],c=e[9],u=e[10],f=e[11];e[4]=i*r+l*n,e[5]=o*r+c*n,e[6]=a*r+u*n,e[7]=s*r+f*n,e[8]=l*r-i*n,e[9]=c*r-o*n,e[10]=u*r-a*n,e[11]=f*r-s*n},aw=function(e,t){var n=Math.sin(t),r=Math.cos(t),i=e[0],o=e[1],a=e[2],s=e[3],l=e[8],c=e[9],u=e[10],f=e[11];e[0]=i*r-l*n,e[1]=o*r-c*n,e[2]=a*r-u*n,e[3]=s*r-f*n,e[8]=i*n+l*r,e[9]=o*n+c*r,e[10]=a*n+u*r,e[11]=s*n+f*r},sw=function(e,t){var n=Math.sin(t),r=Math.cos(t),i=e[0],o=e[1],a=e[2],s=e[3],l=e[4],c=e[5],u=e[6],f=e[7];e[0]=i*r+l*n,e[1]=o*r+c*n,e[2]=a*r+u*n,e[3]=s*r+f*n,e[4]=l*r-i*n,e[5]=c*r-o*n,e[6]=u*r-a*n,e[7]=f*r-s*n},mn={create:tw,perspective:nw,translate:rw,scale:iw,rotateX:ow,rotateY:aw,rotateZ:sw},lw=function(e){return e*Math.PI/180},cw=`
precision mediump float;

uniform sampler2D uTexture;
uniform vec2 uTextureSize;

uniform float uColorOpacity;
uniform mat4 uColorMatrix;
uniform vec4 uColorOffset;

uniform vec4 uOverlayColor;
uniform vec2 uOverlayLeftTop;
uniform vec2 uOverlayRightBottom;

varying vec2 vTexCoord;
varying vec4 vPosition;

void main () {

    vec3 cB = vec3(1.0);

	vec4 cF = texture2D(uTexture, vTexCoord);
	
	vec4 cM = (cF * uColorMatrix) + uColorOffset;

    float r = max(0.0, cM.r * cM.a) + (cB.r * (1.0 - cM.a));
    float g = max(0.0, cM.g * cM.a) + (cB.g * (1.0 - cM.a));
    float b = max(0.0, cM.b * cM.a) + (cB.b * (1.0 - cM.a));

	vec4 color = vec4(r, g, b, cF.a);
	
	// test if falls within
    if ((gl_FragCoord.x < uOverlayLeftTop.x || gl_FragCoord.x > uOverlayRightBottom.x) || 
        (gl_FragCoord.y > uOverlayLeftTop.y || gl_FragCoord.y < uOverlayRightBottom.y)) {
		color *= uOverlayColor;
	}
	
    gl_FragColor = color * uColorOpacity;
}
`,uw=`
attribute vec4 aPosition;
attribute vec2 aTexCoord;
uniform mat4 uMatrix;

// send to fragment shader
varying vec2 vTexCoord;
varying vec4 vPosition;

void main () {
    vPosition = uMatrix * aPosition;
    gl_Position = vPosition;
    vTexCoord = aTexCoord;
}
`,fw=`
precision mediump float;

uniform vec2 uViewportSize;
uniform vec3 uColorStart;
uniform vec3 uColorEnd;
uniform vec2 uOverlayLeftTop;
uniform vec2 uOverlayRightBottom;
uniform vec4 uColorCanvasBackground;

void main() {

	float x = gl_FragCoord.x;
	float y = gl_FragCoord.y;

	vec2 center = vec2(.5, .5);
	vec2 st = vec2(x / uViewportSize.x, y / uViewportSize.y);
	float mixValue = distance(st, center) * 1.5; // expand outside view (same as doka--root::after)
	vec3 color = mix(uColorStart, uColorEnd, mixValue);

	if (uColorCanvasBackground[3] == 1.0) {

		float innerLeft = uOverlayLeftTop.x;
		float innerRight = uOverlayRightBottom.x;
		float innerTop = uOverlayRightBottom.y;
		float innerBottom = uOverlayLeftTop.y;

		if (x < innerLeft || x > innerRight || y < innerTop || y > innerBottom) {
			gl_FragColor = vec4(color, 1.0);
			return;
		}

		gl_FragColor = uColorCanvasBackground;
		return;
	}
	
	gl_FragColor = vec4(color, 1.0);
}
`,dw=`
precision mediump float;

uniform vec2 uOverlayLeftTop;
uniform vec2 uOverlayRightBottom;
uniform vec4 uOutlineColor;
uniform float uOutlineWidth;

void main() {

	float x = gl_FragCoord.x;
	float y = gl_FragCoord.y;

	float innerLeft = uOverlayLeftTop.x;
	float innerRight = uOverlayRightBottom.x;
	float innerTop = uOverlayRightBottom.y;
	float innerBottom = uOverlayLeftTop.y;

	float outerLeft = innerLeft - uOutlineWidth;
	float outerRight = innerRight + uOutlineWidth;
	float outerTop = innerTop - uOutlineWidth;
	float outerBottom = innerBottom + uOutlineWidth;
	
	if (x < outerLeft || x >= outerRight || y < outerTop || y >= outerBottom) {
		discard;
	}

	if (x < innerLeft || x >= innerRight || y < innerTop || y >= innerBottom) {
		gl_FragColor = uOutlineColor;
	}
}
`,Cf=`
attribute vec4 aPosition;
void main() {
	gl_Position = aPosition;
}
`,hw=function(e,t,n){var r={width:0,height:0},i={x:0,y:0},o=null,a=lw(30),s=Math.tan(a/2),l={antialias:!1,alpha:!1},c=e.getContext("webgl",l)||e.getContext("experimental-webgl",l);if(!c)return null;c.enable(c.BLEND),c.blendFunc(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA);var u=Ns(c,Cf,fw),f=c.getUniformLocation(u,"uColorStart"),d=c.getUniformLocation(u,"uColorEnd"),h=c.getUniformLocation(u,"uViewportSize"),p=c.getAttribLocation(u,"aPosition"),g=c.getUniformLocation(u,"uOverlayLeftTop"),m=c.getUniformLocation(u,"uOverlayRightBottom"),y=c.getUniformLocation(u,"uColorCanvasBackground"),_=c.createBuffer(),E=new Float32Array([1,-1,1,1,-1,-1,-1,1]);c.bindBuffer(c.ARRAY_BUFFER,_),c.bufferData(c.ARRAY_BUFFER,E,c.STATIC_DRAW),c.bindBuffer(c.ARRAY_BUFFER,null);var v=Ns(c,Cf,dw),T=c.getAttribLocation(v,"aPosition"),R=c.getUniformLocation(v,"uOutlineWidth"),O=c.getUniformLocation(v,"uOutlineColor"),w=c.getUniformLocation(v,"uOverlayLeftTop"),S=c.getUniformLocation(v,"uOverlayRightBottom"),M=c.createBuffer(),P=new Float32Array([1,-1,1,1,-1,-1,-1,1]);c.bindBuffer(c.ARRAY_BUFFER,M),c.bufferData(c.ARRAY_BUFFER,P,c.STATIC_DRAW),c.bindBuffer(c.ARRAY_BUFFER,null);var C=Ns(c,uw,cw);c.useProgram(C);var z=c.getUniformLocation(C,"uMatrix"),L=c.getUniformLocation(C,"uTexture"),q=c.getUniformLocation(C,"uTextureSize"),x=c.getUniformLocation(C,"uOverlayColor"),b=c.getUniformLocation(C,"uOverlayLeftTop"),N=c.getUniformLocation(C,"uOverlayRightBottom"),H=c.getUniformLocation(C,"uColorOpacity"),Q=c.getUniformLocation(C,"uColorOffset"),Y=c.getUniformLocation(C,"uColorMatrix"),oe=c.getAttribLocation(C,"aPosition"),ce=c.getAttribLocation(C,"aTexCoord"),de=ew(c,L,q,0,t),B=t.width*n,D=t.height*n,$=-.5*B,X=.5*D,ne=.5*B,ie=-.5*D,ae=new Float32Array([$,X,$,ie,ne,X,ne,ie]),I=new Float32Array([0,0,0,1,1,0,1,1]),A=ae.length/2,V=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,V),c.bufferData(c.ARRAY_BUFFER,ae,c.STATIC_DRAW),c.bindBuffer(c.ARRAY_BUFFER,null);var U=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,U),c.bufferData(c.ARRAY_BUFFER,I,c.STATIC_DRAW),c.bindBuffer(c.ARRAY_BUFFER,null);var W=0,k=0,ee={release:function(){e.width=1,e.height=1},resize:function(Z,K){e.width=Z*n,e.height=K*n,e.style.width="".concat(Z,"px"),e.style.height="".concat(K,"px"),r.width=Z*n,r.height=K*n,i.x=.5*r.width,i.y=.5*r.height,o=r.width/r.height,c.viewport(0,0,c.canvas.width,c.canvas.height)},update:function(Z,K,J,se,re,le,ue,ye,Ie,Re,fe,ze,wt,jt,Je,yt,me,it,Qn){var Ii=fe?fe.height*n:r.height;W=t.width*n,k=t.height*n,Z*=n,K*=n,J*=n,se*=n;var Jn=k/2/s*(r.height/Ii)*-1;Jn/=-s*Jn*2/r.height;var Ri=.5*W,wi=.5*k;Z-=Ri,K-=wi;var Cr=ye,rs=-(i.x-Ri)+J,is=i.y-wi-se,vt=mn.create();mn.perspective(vt,a,o,1,2*-Jn),mn.translate(vt,[rs,is,Jn]),mn.translate(vt,[Z,-K,0]),mn.scale(vt,[Cr,Cr,Cr]),mn.rotateZ(vt,-ue),mn.translate(vt,[-Z,K,0]),mn.rotateY(vt,le),mn.rotateX(vt,re),c.clearColor(jt[0],jt[1],jt[2],1),c.clear(c.COLOR_BUFFER_BIT);var os=ze.x*n,Nt=ze.y*n,er=ze.width*n,hn=ze.height*n,Sn=os,bn=Sn+er,tr=r.height-Nt,nr=r.height-(Nt+hn);c.useProgram(u),c.uniform3fv(f,Je),c.uniform3fv(d,yt),c.uniform4fv(y,Qn.map(function(Cn,ym){return ym<3?Cn/255:Cn})),c.uniform2f(h,r.width,r.height),c.uniform2f(g,Sn,tr),c.uniform2f(m,bn,nr),c.bindBuffer(c.ARRAY_BUFFER,_),c.vertexAttribPointer(p,2,c.FLOAT,!1,0,0),c.enableVertexAttribArray(p),c.drawArrays(c.TRIANGLE_STRIP,0,4),c.useProgram(C),c.bindFramebuffer(c.FRAMEBUFFER,null),c.bindTexture(c.TEXTURE_2D,de),c.bindBuffer(c.ARRAY_BUFFER,V),c.vertexAttribPointer(oe,2,c.FLOAT,!1,0,0),c.enableVertexAttribArray(oe),c.bindBuffer(c.ARRAY_BUFFER,U),c.vertexAttribPointer(ce,2,c.FLOAT,!1,0,0),c.enableVertexAttribArray(ce),c.uniformMatrix4fv(z,!1,vt),c.uniform2f(b,Sn,tr),c.uniform2f(N,bn,nr),c.uniform4fv(x,wt),c.uniform1f(H,Re),c.uniform4f(Q,Ie[4],Ie[9],Ie[14],Ie[19]),c.uniformMatrix4fv(Y,!1,[].concat(tn(Ie.slice(0,4)),tn(Ie.slice(5,9)),tn(Ie.slice(10,14)),tn(Ie.slice(15,19)))),c.drawArrays(c.TRIANGLE_STRIP,0,A),c.useProgram(v),c.uniform1f(R,me),c.uniform4fv(O,it),c.uniform2f(w,Sn,tr),c.uniform2f(S,bn,nr),c.bindBuffer(c.ARRAY_BUFFER,M),c.vertexAttribPointer(T,2,c.FLOAT,!1,0,0),c.enableVertexAttribArray(T),c.drawArrays(c.TRIANGLE_STRIP,0,4),ee.onupdate(c)},onupdate:function(){}};return ee},xf=function(e){var t=0,n={},r=nn(e),i=nn(e),o=nn(e),a=nn(e);return r.onupdate=function(s){return n.x=s},r.oncomplete=function(){return t++},i.onupdate=function(s){return n.y=s},i.oncomplete=function(){return t++},o.onupdate=function(s){return n.width=s},o.oncomplete=function(){return t++},a.onupdate=function(s){return n.height=s},a.oncomplete=function(){return t++},{interpolate:function(s){r.interpolate(s),i.interpolate(s),o.interpolate(s),a.interpolate(s)},setTarget:function(s){t=0,r.target=s?s.x:null,i.target=s?s.y:null,o.target=s?s.width:null,a.target=s?s.height:null},getRect:function(){return n},isStable:function(){return t===4}}},Mf=function(e){var t=0,n={},r=nn(e),i=nn(e),o=nn(e);return r.onupdate=function(a){return n.r=a},r.oncomplete=function(){return t++},i.onupdate=function(a){return n.g=a},i.oncomplete=function(){return t++},o.onupdate=function(a){return n.b=a},o.oncomplete=function(){return t++},{interpolate:function(a){r.interpolate(a),i.interpolate(a),o.interpolate(a)},setTarget:function(a){t=0,r.target=a?a[0]:null,i.target=a?a[1]:null,o.target=a?a[2]:null},getColor:function(){return[n.r,n.g,n.b]},isStable:function(){return t===3}}},Gs={stiffness:.25,damping:.25,mass:2.5},Lf=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],pw=he({name:"image-gl",ignoreRect:!0,ignoreRectUpdate:!0,mixins:{apis:["top","left","width","height","xOrigin","yOrigin","xTranslation","yTranslation","xRotation","yRotation","zRotation","scale","overlay","stage","colorMatrix","colorOpacity","overlayOpacity","outlineWidth","isDraft"],animations:{xTranslation:Ve,yTranslation:Ve,xOrigin:Ve,yOrigin:Ve,scale:Ve,xRotation:{type:"spring",stiffness:.25,damping:.25,mass:2.5},yRotation:{type:"spring",stiffness:.25,damping:.25,mass:2.5},zRotation:{type:"spring",stiffness:.25,damping:.25,mass:2.5},colorOpacity:{type:"tween",delay:150,duration:750},overlayOpacity:"spring",introScale:{type:"spring",stiffness:.25,damping:.75,mass:15},outlineWidth:Ve}},create:function(e){var t=e.root;t.ref.canvas=document.createElement("canvas"),t.ref.canvas.width=0,t.ref.canvas.height=0,t.appendChild(t.ref.canvas),t.ref.gl=null,t.introScale=1,t.ref.isPreview=t.query("GET_STYLE_LAYOUT_MODE")==="preview",t.ref.shouldZoom=!t.ref.isPreview,t.ref.didZoom=!1,t.ref.backgroundColor=null,t.ref.backgroundColorSpring=Mf(Gs),t.ref.backgroundColorCenter=null,t.ref.backgroundColorCenterSpring=Mf(Gs),t.ref.overlaySpring=xf(Ve),t.ref.stageSpring=xf(Ve),t.ref.outlineSpring=nn(Ve),t.ref.colorMatrixSpring=[],t.ref.colorMatrixStable=!0,t.ref.colorMatrixStableCount=0,t.ref.colorMatrixPositions=[];for(var n=0;n<20;n++)(function(){var u=n,f=nn(Gs);f.target=Lf[u],f.onupdate=function(d){t.ref.colorMatrixPositions[u]=d},f.oncomplete=function(){t.ref.colorMatrixStableCount++},t.ref.colorMatrixSpring[u]=f})();t.ref.dragger=On(t.element,function(){t.dispatch("CROP_IMAGE_DRAG_GRAB")},function(u,f){t.dispatch("CROP_IMAGE_DRAG",{value:f})},function(){t.dispatch("CROP_IMAGE_DRAG_RELEASE")},{cancelOnMultiple:!0});var r=0,i=0;t.ref.keyboard=Ic(t.element,function(){return r=0,i=0,{x:0,y:0}},{up:function(u){u.y-=20},down:function(u){u.y+=20},left:function(u){u.x-=20},right:function(u){u.x+=20},plus:function(){r+=.1,t.dispatch("CROP_IMAGE_RESIZE_AMOUNT",{value:r}),t.dispatch("CROP_IMAGE_RESIZE_RELEASE")},minus:function(){r-=.1,t.dispatch("CROP_IMAGE_RESIZE_AMOUNT",{value:r}),t.dispatch("CROP_IMAGE_RESIZE_RELEASE")},left_bracket:function(){i-=Math.PI/128,t.dispatch("CROP_IMAGE_ROTATE_ADJUST",{value:i})},right_bracket:function(){i+=Math.PI/128,t.dispatch("CROP_IMAGE_ROTATE_ADJUST",{value:i})},h:function(){t.dispatch("CROP_IMAGE_FLIP_HORIZONTAL")},l:function(){t.dispatch("CROP_IMAGE_ROTATE_LEFT")},q:function(){t.dispatch("CROP_RESET")},r:function(){t.dispatch("CROP_IMAGE_ROTATE_RIGHT")},v:function(){t.dispatch("CROP_IMAGE_FLIP_VERTICAL")},z:function(){t.dispatch("CROP_ZOOM")}},function(u){u&&t.dispatch("CROP_IMAGE_DRAG",{value:u})},function(u){u&&t.dispatch("CROP_IMAGE_DRAG_RELEASE")});var o=t.query("GET_FILE"),a=URL.createObjectURL(o.data),s=function(u){var f=Qp(u,{width:t.query("GET_MAX_IMAGE_PREVIEW_WIDTH"),height:t.query("GET_MAX_IMAGE_PREVIEW_HEIGHT")}),d=Sf(u,f.width,f.height,o.orientation),h=Math.max(1,.75*window.devicePixelRatio),p=d.height/d.width,g=96*h,m=Sf(d,p>1?g:g/p,p>1?g*p:g),y=d.getContext("2d").getImageData(0,0,d.width,d.height),_=m.getContext("2d").getImageData(0,0,m.width,m.height);pa(d),pa(m),t.ref.gl=hw(t.ref.canvas,y,h);var E=t.query("GET_OUTPUT_CANVAS_SYNC_TARGET");E&&(t.ref.gl.onupdate=function(){var v=t.ref.overlaySpring.getRect();E.getContext("2d").drawImage(t.ref.canvas,v.x*h,v.y*h,v.width*h,v.height*h,0,0,E.width,E.height)}),t.ref.gl?(t.dispatch("DID_RECEIVE_IMAGE_DATA",{previewData:y,thumbData:_}),t.dispatch("DID_PRESENT_IMAGE")):t.dispatch("MISSING_WEBGL")},l=function(){JR(a).then(s)};if(QR(o.data)){var c=yc(ZR);c.post({file:o.data},function(u){c.terminate(),u?s(u):l()})}else l();t.ref.canvasStyle=getComputedStyle(t.ref.canvas),t.ref.previousBackgroundColor,t.ref.previousLeft,t.ref.previousTop,t.ref.previousWidth,t.ref.previousHeight,t.element.dataset.showInteractionIndicator=!1,t.ref.handleFocus=function(u){u.keyCode===9&&(t.element.dataset.showInteractionIndicator=!0)},t.ref.handleBlur=function(u){t.element.dataset.showInteractionIndicator=!1},ml(t.element)("keyup",t.ref.handleFocus),ml(t.element)("blur",t.ref.handleBlur)},destroy:function(e){var t=e.root;t.ref.gl&&(t.ref.gl.release(),t.ref.gl=null),t.ref.dragger.destroy(),El(t.element)("keyup",t.ref.handleFocus),El(t.element)("blur",t.ref.handleBlur)},read:function(e){var t=e.root,n=t.ref.canvasStyle.backgroundColor,r=t.ref.canvasStyle.color;if(r!=="transparent"&&r!==""||(r=null),n!=="transparent"&&n!==""||(n=null),n&&n!==t.ref.previousBackgroundColor){var i=fo(n).map(function(a){return a/255}),o=(i[0]+i[1]+i[2])/3;t.ref.backgroundColor=i,t.ref.backgroundColorCenter=i.map(function(a){return o>.5?a-.15:a+.15}),t.ref.previousBackgroundColor=n}r&&r!==t.ref.previousOutlineColor&&(t.ref.outlineColor=fo(r).map(function(a){return a/255}).concat(1),t.ref.previousOutlineColor=r)},write:Be({SHOW_VIEW:function(e){var t=e.root;e.action.id==="crop"?(t.ref.dragger.enable(),t.element.setAttribute("tabindex","0")):(t.ref.dragger.disable(),t.element.removeAttribute("tabindex"))}},function(e){var t=e.root,n=e.props,r=(e.actions,e.timestamp);if(t.ref.gl&&n.width&&n.height){var i=t.ref,o=i.gl,a=i.previousWidth,s=i.previousHeight,l=i.shouldZoom,c=i.stageSpring,u=i.overlaySpring,f=i.backgroundColorSpring,d=i.backgroundColorCenterSpring;n.width===a&&n.height===s||(t.ref.gl.resize(n.width,n.height),t.ref.previousWidth=n.width,t.ref.previousHeight=n.height),n.left===t.ref.previousLeft&&n.top===t.ref.previousTop||(t.ref.canvas.style.transform="translate(".concat(-n.left,"px, ").concat(-n.top,"px)"),t.ref.previousLeft=n.left,t.ref.previousTop=n.top),l&&!t.ref.didZoom&&(t.introScale=null,t.introScale=1.15,t.introScale=1,t.ref.didZoom=!0),f.setTarget(t.ref.backgroundColor),f.interpolate(r);var h=f.isStable();d.setTarget(t.ref.backgroundColorCenter),d.interpolate(r);var p=d.isStable();t.ref.colorMatrixStableCount=0;var g=n.colorMatrix||Lf,m=t.ref.colorMatrixSpring.map(function(v,T){return v.target=g[T],v.interpolate(r),t.ref.colorMatrixPositions[T]}),y=t.ref.colorMatrixStableCount===20;n.isDraft&&u.setTarget(null),u.setTarget(n.overlay),u.interpolate(r);var _=u.isStable();n.isDraft&&c.setTarget(null),c.setTarget(n.stage),c.interpolate(r);var E=c.isStable();return o.update(t.xOrigin,t.yOrigin,t.xTranslation+n.left,t.yTranslation+n.top,t.xRotation,t.yRotation,t.zRotation,t.scale*t.introScale,m,t.ref.isPreview?1:t.colorOpacity,c.getRect(),u.getRect(),[1,1,1,1-t.overlayOpacity],f.getColor(),d.getColor(),f.getColor(),t.outlineWidth,t.ref.outlineColor,t.query("GET_BACKGROUND_COLOR")),_&&E&&y&&h&&p}})}),gw=he({name:"image",ignoreRect:!0,mixins:{apis:["offsetTop"]},create:function(e){var t=e.root,n=e.props;t.ref.imageGL=t.appendChildView(t.createChildView(pw)),/markup|sticker/.test(t.query("GET_UTILS"))&&(t.ref.markup=t.appendChildView(t.createChildView(WR,{id:n.id,opacity:0,onSelect:function(r){t.dispatch("MARKUP_SELECT",{id:r})},onDrag:function(r,i,o,a,s){t.dispatch("MARKUP_ELEMENT_DRAG",{id:r,origin:i,offset:o,size:a,scale:s})},onResize:function(r,i,o,a,s){t.dispatch("MARKUP_ELEMENT_RESIZE",{id:r,corner:i,origin:o,offset:a,size:s})},onUpdate:function(r,i){t.dispatch("MARKUP_UPDATE",{style:r,value:i})},isMarkupUtil:function(r){var i=r;do if(i.className==="doka--markup-tools")return!0;while(i=i.parentNode);return!1}}))),t.ref.isModal=/modal/.test(t.query("GET_STYLE_LAYOUT_MODE"))},write:Be({DID_PRESENT_IMAGE:function(e){e.root.ref.imageGL.colorOpacity=1}},function(e){var t=e.root,n=e.props,r=e.timestamp,i=t.ref.imageGL,o=t.ref.markup,a=t.query("GET_CROP",n.id,r);if(a){var s=a.isDraft,l=a.cropRect,c=a.cropStatus,u=a.origin,f=a.translation,d=a.translationBand,h=a.scale,p=a.scaleBand,g=a.rotation,m=a.rotationBand,y=a.flip,_=a.colorMatrix,E=t.query("GET_ROOT"),v=t.query("GET_STAGE"),T=v.x,R=v.y;s&&(i.scale=null,i.zRotation=null,i.xTranslation=null,i.yTranslation=null,i.xOrigin=null,i.yOrigin=null),i.colorMatrix=_;var O=t.query("IS_ACTIVE_VIEW","crop"),w=t.query("IS_ACTIVE_VIEW","markup")||t.query("IS_ACTIVE_VIEW","sticker"),S=O?.75:.95,M=te({},l),P=1,C=O?1:5;if(t.query("IS_ACTIVE_VIEW","resize")){var z=c.image.width,L=c.image.height;P=z===null&&L===null?c.crop.width/l.width:z===null?L/l.height:z/l.width,P/=window.devicePixelRatio;var q=l.width*P,x=l.height*P;M.x=M.x+(.5*l.width-.5*q),M.y=M.y+(.5*l.height-.5*x),M.width=q,M.height=x}var b=t.ref.isModal?0:E.left,N=t.ref.isModal?0:E.top,H=t.ref.isModal?0:E.width-t.rect.element.width,Q=t.ref.isModal?0:E.height-t.rect.element.height-n.offsetTop,Y=(h+p)*P;i.isDraft=s,i.overlayOpacity=S,i.xOrigin=u.x,i.yOrigin=u.y,i.xTranslation=f.x+d.x+T,i.yTranslation=f.y+d.y+R,i.left=b,i.top=N+n.offsetTop,i.width=t.rect.element.width+H,i.height=t.rect.element.height+Q+n.offsetTop,i.scale=Y,i.xRotation=y.vertical?Math.PI:0,i.yRotation=y.horizontal?Math.PI:0,i.zRotation=g.main+g.sub+m,i.stage={x:v.x+b,y:v.y+N+n.offsetTop,width:v.width,height:v.height},i.overlay={x:M.x+T+b,y:M.y+R+N+n.offsetTop,width:M.width,height:M.height},i.outlineWidth=C,o&&(s&&(o.translateX=null,o.translateY=null,o.markupX=null,o.markupY=null,o.markupWidth=null,o.markupHeight=null),o.opacity=O?.3:1,o.stageOffsetX=T,o.stageOffsetY=R,o.markupX=M.x+T,o.markupY=M.y+R,o.markupWidth=M.width,o.markupHeight=M.height,o.allowInteraction=w)}})}),Rc=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"group",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["opacity"],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return he({ignoreRect:!0,name:e,mixins:{styles:["opacity"].concat(tn(t)),animations:te({opacity:{type:"spring",stiffness:.25,damping:.5,mass:5}},n)},create:function(r){var i=r.root,o=r.props;(o.controls||[]).map(function(a){var s=i.createChildView(a.view,a);a.didCreateView&&a.didCreateView(s),i.appendChildView(s)}),o.element&&i.element.appendChild(o.element)}})},mw=he({ignoreRect:!0,tag:"div",name:"dropdown-list",mixins:{styles:["translateY","opacity"],apis:["selectedValue","options","onSelect"],animations:{translateY:"spring",opacity:{type:"tween",duration:250}}},create:function(e){var t=e.root,n=e.props;t.element.setAttribute("role","list"),t.ref.handleClick=function(){return n.action&&n.action()},t.element.addEventListener("click",t.ref.handleClick),t.ref.activeOptions=null,t.ref.activeSelectedValue},write:function(e){var t=e.root,n=e.props;if(n.options!==t.ref.activeOptions&&(t.ref.activeOptions=n.options,t.childViews.forEach(function(i){return t.removeChildView(i)}),n.options.map(function(i){var o=t.createChildView(lt,te({},i,{action:function(){return n.onSelect(i.value)}}));return t.appendChildView(o)})),n.selectedValue!==t.ref.activeSelectedValue){t.ref.activeSelectedValue=n.selectedValue;var r=n.options.findIndex(function(i){return In(i.value)==="object"&&n.selectedValue?i.value[0]===i.label&&JSON.stringify(i.value.slice(1))===JSON.stringify(n.selectedValue)||JSON.stringify(i.value)===JSON.stringify(n.selectedValue):i.value===n.selectedValue});t.childViews.forEach(function(i,o){i.element.setAttribute("aria-selected",o===r)})}},destroy:function(e){var t=e.root;t.element.removeEventListener("click",t.ref.handleClick)}}),cr=he({ignoreRect:!0,tag:"div",name:"dropdown",mixins:{styles:["opacity"],animations:{opacity:"spring"},apis:["direction","selectedValue","options","onSelect"]},create:function(e){var t=e.root,n=e.props;t.ref.open=!1;var r=function(i){t.ref.open=i,t.dispatch("KICK")};t.ref.button=t.appendChildView(t.createChildView(lt,te({},n,{action:function(){r(!t.ref.open)}}))),t.ref.list=t.appendChildView(t.createChildView(mw,te({},n,{opacity:0,action:function(){r(!1)}}))),t.ref.handleBodyClick=function(i){on(t.element,i.target)||r(!1)},t.element.addEventListener("focusin",function(i){i.target!==t.ref.button.element&&r(!0)}),t.element.addEventListener("focusout",function(i){i.relatedTarget&&(on(t.element,i.relatedTarget)||r(!1))}),document.body.addEventListener("click",t.ref.handleBodyClick)},destroy:function(e){var t=e.root;document.body.removeEventListener("click",t.ref.handleBodyClick)},write:function(e){var t=e.root,n=e.props;if(t.ref.list.opacity=t.ref.open?1:0,t.ref.list.selectedValue=n.selectedValue,t.ref.list.options=n.options,n.direction==="up"){var r=t.ref.list.rect.element.height;t.ref.list.translateY=(t.ref.open?-(r+5):-r)-t.rect.element.height}else t.ref.list.translateY=t.ref.open?0:-5}}),Us=312,Ew=function(e,t){return he({name:e,ignoreRect:!0,create:t})},_w=he({name:"crop-rotator-line",ignoreRect:!0,ignoreRectUpdate:!0,mixins:{styles:["translateX"],animations:{translateX:"spring"}},create:function(e){for(var t=e.root,n='<svg viewBox="-90 -5 180 10" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">',r=0;r<=180;r+=2){var i=r*.9777777777777777-90+2,o=r%10==0?.5:.2;n+='<circle fill="currentColor" cx="'.concat(i,'" cy="').concat(0,'" r="').concat(o,'"/>'),r%10==0&&(n+='<text fill="currentColor" x="'.concat(i+(i<0?-2.25:i===0?-.75:-1.5),'" y="').concat(3.5,'">').concat(-90+r,"&deg;</text>"))}n+="</svg>",t.element.innerHTML=n}}),yw=he({name:"crop-rotator",ignoreRect:!0,mixins:{styles:["opacity","translateY"],animations:{opacity:{type:"spring",damping:.5,mass:5},translateY:"spring"},apis:["rotation","animate","setAllowInteraction"]},create:function(e){var t=e.root,n=e.props;t.element.setAttribute("tabindex",0);var r=document.createElement("button");r.innerHTML="<span>".concat(t.query("GET_LABEL_BUTTON_CROP_ROTATE_CENTER"),"</span>"),r.className="doka--crop-rotator-center",r.addEventListener("click",function(){t.dispatch("CROP_IMAGE_ROTATE_CENTER")}),t.appendChild(r);var i=null;t.appendChildView(t.createChildView(Ew("crop-rotator-line-mask",function(l){var c=l.root,u=l.props;i=c.appendChildView(c.createChildView(_w,{translateX:Math.round(u.rotation*Us)}))}),n)),t.ref.line=i;var o=document.createElement("div");o.className="doka--crop-rotator-bar",t.appendChild(o);var a=Math.PI/4,s=0;t.ref.dragger=On(o,function(){s=i.translateX/Us,t.dispatch("CROP_IMAGE_ROTATE_GRAB")},function(l,c){var u=c.x/t.rect.element.width*(Math.PI/2),f=rn(s+u,-a,a);t.dispatch("CROP_IMAGE_ROTATE",{value:-f})},function(){t.dispatch("CROP_IMAGE_ROTATE_RELEASE")},{stopPropagation:!0}),n.setAllowInteraction=function(l){l?t.ref.dragger.enable():t.ref.dragger.disable()},t.ref.keyboard=Ic(t.element,function(){s=0},{left:function(){s+=Math.PI/128,t.dispatch("CROP_IMAGE_ROTATE_ADJUST",{value:s})},right:function(){s-=Math.PI/128,t.dispatch("CROP_IMAGE_ROTATE_ADJUST",{value:s})}},function(){},function(){}),t.ref.prevRotation},destroy:function(e){var t=e.root;t.ref.dragger.destroy(),t.ref.keyboard.destroy()},write:function(e){var t=e.root,n=e.props,r=e.timestamp,i=n.animate,o=n.rotation;if(t.ref.prevRotation!==o){t.ref.prevRotation=o,i||o===0||(t.ref.line.translateX=null);var a=0,s=t.query("GET_CROP",n.id,r);if(s&&s.interaction&&s.interaction.rotation){var l=Tc(s.interaction.rotation).sub-o;a=.025*Math.sign(l)*Math.log10(1+Math.abs(l)/.025)}t.ref.line.translateX=Math.round((-o-a)*Us)}}}),dr=["nw","ne","se","sw"],vw=function(e){return dr[(dr.indexOf(e)+2)%dr.length]},Zi=["n","e","s","w"],Tw=function(e){return Zi[(Zi.indexOf(e)+2)%Zi.length]},an=Rr()&&window.devicePixelRatio===1?function(e){return Math.round(e)}:function(e){return e},Iw=he({ignoreRect:!0,ignoreRectUpdate:!0,name:"crop-rect-focal-line",mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{translateX:"spring",translateY:"spring",scaleX:"spring",scaleY:"spring",opacity:"spring"}}}),Rw=function(e){return he({ignoreRect:!0,ignoreRectUpdate:!0,tag:"div",name:"crop-rect-edge-".concat(e),mixins:{styles:["translateX","translateY","scaleX","scaleY"],apis:["setAllowInteraction"]},create:function(t){var n=t.root,r=t.props;n.element.classList.add("doka--crop-rect-edge"),n.element.setAttribute("tabindex",0),n.element.setAttribute("role","button");var i=e,o=Tw(e);n.ref.dragger=On(n.element,function(){n.dispatch("CROP_RECT_DRAG_GRAB")},function(a,s){return n.dispatch("CROP_RECT_EDGE_DRAG",{offset:s,origin:i,anchor:o})},function(){return n.dispatch("CROP_RECT_DRAG_RELEASE")},{stopPropagation:!0,cancelOnMultiple:!0}),r.setAllowInteraction=function(a){a?n.ref.dragger.enable():n.ref.dragger.disable()},n.ref.keyboard=Ic(n.element,function(){return{x:0,y:0}},{up:function(a){a.y-=20},down:function(a){a.y+=20},left:function(a){a.x-=20},right:function(a){a.x+=20}},function(a){n.dispatch("CROP_RECT_DRAG_GRAB"),n.dispatch("CROP_RECT_EDGE_DRAG",{offset:a,origin:i,anchor:o})},function(){n.dispatch("CROP_RECT_DRAG_RELEASE")})},destroy:function(t){var n=t.root;n.ref.keyboard.destroy(),n.ref.dragger.destroy()}})},ww=function(e,t,n){return he({ignoreRect:!0,ignoreRectUpdate:!0,tag:"div",name:"crop-rect-corner-".concat(e),mixins:{styles:["translateX","translateY","scaleX","scaleY"],animations:{translateX:Ve,translateY:Ve,scaleX:{type:"spring",delay:n},scaleY:{type:"spring",delay:n},opacity:{type:"spring",delay:t}},apis:["setAllowInteraction"]},create:function(r){var i=r.root,o=r.props;i.element.classList.add("doka--crop-rect-corner"),i.element.setAttribute("role","button"),i.element.setAttribute("tabindex",-1);var a=e,s=vw(e);i.ref.dragger=On(i.element,function(){i.dispatch("CROP_RECT_DRAG_GRAB")},function(l,c){i.dispatch("CROP_RECT_CORNER_DRAG",{offset:c,origin:a,anchor:s})},function(){i.dispatch("CROP_RECT_DRAG_RELEASE")},{stopPropagation:!0,cancelOnMultiple:!0}),o.setAllowInteraction=function(l){l?i.ref.dragger.enable():i.ref.dragger.disable()}},destroy:function(r){r.root.ref.dragger.destroy()}})},Aw=he({ignoreRect:!0,ignoreRectUpdate:!0,name:"crop-rect",mixins:{apis:["rectangle","draft","rotating","enabled"]},create:function(e){var t=e.root;t.ref.wasRotating=!1,dr.forEach(function(r,i){var o=10*i,a=250+o+50,s=250+o;t.ref[r]=t.appendChildView(t.createChildView(ww(r,a,s),{opacity:0,scaleX:.5,scaleY:.5}))}),Zi.forEach(function(r){t.ref[r]=t.appendChildView(t.createChildView(Rw(r)))}),t.ref.lines=[];for(var n=0;n<10;n++)t.ref.lines.push(t.appendChildView(t.createChildView(Iw,{opacity:0})));t.ref.animationDir=null,t.ref.previousRotating,t.ref.previousRect={},t.ref.previousEnabled,t.ref.previousDraft},write:function(e){var t=e.root,n=e.props,r=n.rectangle,i=n.draft,o=n.rotating,a=n.enabled;if(r&&(!$p(r,t.ref.previousRect)||o!==t.ref.previousRotating||a!==t.ref.previousEnabled||i!==t.ref.previousDraft)){t.ref.previousRect=r,t.ref.previousRotating=o,t.ref.previousEnabled=a,t.ref.previousDraft=i;var s=t.ref,l=s.n,c=s.e,u=s.s,f=s.w,d=s.nw,h=s.ne,p=s.se,g=s.sw,m=s.lines,y=s.animationDir,_=r.x,E=r.y,v=r.x+r.width,T=r.y+r.height,R=T-E,O=v-_,w=Math.min(O,R);t.element.dataset.indicatorSize=w<80?"none":"default",Zi.forEach(function(Y){return t.ref[Y].setAllowInteraction(a)}),dr.forEach(function(Y){return t.ref[Y].setAllowInteraction(a)});var S=t.query("IS_ACTIVE_VIEW","crop");if(S&&y!=="in"?(t.ref.animationDir="in",dr.map(function(Y){return t.ref[Y]}).forEach(function(Y){Y.opacity=1,Y.scaleX=1,Y.scaleY=1})):S||y==="out"||(t.ref.animationDir="out",dr.map(function(Y){return t.ref[Y]}).forEach(function(Y){Y.opacity=0,Y.scaleX=.5,Y.scaleY=.5})),No(i,d,_,E),No(i,h,v,E),No(i,p,v,T),No(i,g,_,T),ht(i,l,_,E,O/100,1),ht(i,c,v,E,1,R/100),ht(i,u,_,T,O/100,1),ht(i,f,_,E,1,R/100),o){t.ref.wasRotating=!0;var M=m.slice(0,5),P=1/M.length;M.forEach(function(Y,oe){ht(i,Y,_,E+R*(P+oe*P),O/100,.01),Y.opacity=.5});var C=m.slice(5);P=1/C.length,C.forEach(function(Y,oe){ht(i,Y,_+O*(P+oe*P),E,.01,R/100),Y.opacity=.5})}else if(i){t.ref.wasRotating=!1;var z=m[0],L=m[1],q=m[2],x=m[3];ht(i,z,_,E+.333*R,O/100,.01),ht(i,L,_,E+.666*R,O/100,.01),ht(i,q,_+.333*O,E,.01,R/100),ht(i,x,_+.666*O,E,.01,R/100),z.opacity=.5,L.opacity=.5,q.opacity=.5,x.opacity=.5}else{var b=m[0],N=m[1],H=m[2],Q=m[3];!t.ref.wasRotating&&b.opacity>0&&(ht(i,b,_,E+.333*R,O/100,.01),ht(i,N,_,E+.666*R,O/100,.01),ht(i,H,_+.333*O,E,.01,R/100),ht(i,Q,_+.666*O,E,.01,R/100)),m.forEach(function(Y){return Y.opacity=0})}}}}),ht=function(e,t,n,r,i,o){e&&(t.translateX=null,t.translateY=null,t.scaleX=null,t.scaleY=null),t.translateX=an(n),t.translateY=an(r),t.scaleX=i,t.scaleY=o},No=function(e,t,n,r){e&&(t.translateX=null,t.translateY=null),t.translateX=an(n),t.translateY=an(r)},Pf=function(e,t){if(!/svg/.test(e.namespaceURI)||"innerHTML"in e)e.innerHTML=t;else{var n=document.createElement("div");n.innerHTML="<svg>"+t+"</svg>";for(var r=n.firstChild;r.firstChild;)e.appendChild(r.firstChild)}},Ow=he({ignoreRect:!0,ignoreRectUpdate:!0,name:"crop-mask",tag:"svg",mixins:{styles:["opacity","translateX","translateY"],animations:{scale:Ve,maskWidth:Ve,maskHeight:Ve,translateX:Ve,translateY:Ve,opacity:{type:"tween",delay:0,duration:1e3}},apis:["rectangle","animate","maskWidth","maskHeight","scale"]},create:function(e){e.root.ref.writer=null},write:function(e){var t=e.root,n=t.query("GET_CROP_MASK");n!==t.ref.writer&&(t.ref.writer=n,t.ref.writerFn=n?n(t.element,Pf):null,t.ref.writer||Pf(t.element,""))},didWriteView:function(e){var t=e.root,n=e.props,r=n.maskWidth,i=n.maskHeight,o=n.scale;if(t.ref.writer&&r&&i&&(t.element.setAttribute("width",an(r)),t.element.setAttribute("height",an(i)),t.ref.writerFn)){var a=t.query("GET_CROP_MASK_INSET");t.ref.writerFn({x:o*a,y:o*a,width:r-o*a*2,height:i-o*a*2},{width:r,height:i})}}}),Go=function(e,t){var n=e.childNodes[0];n?t!==n.nodeValue&&(n.nodeValue=t):(n=document.createTextNode(t),e.appendChild(n))},Df={type:"spring",stiffness:.25,damping:.1,mass:1},Sw=he({ignoreRect:!0,name:"crop-size",mixins:{styles:["translateX","translateY","opacity"],animations:{translateX:"spring",translateY:"spring",opacity:"spring",sizeWidth:Df,sizeHeight:Df},apis:["sizeWidth","sizeHeight"],listeners:!0},create:function(e){var t=e.root,n=Te("span");n.className="doka--crop-size-info doka--crop-resize-percentage",t.ref.resizePercentage=n,t.appendChild(n);var r=Te("span");r.className="doka--crop-size-info";var i=Te("span");i.className="doka--crop-size-multiply",i.textContent="\xD7";var o=Te("span"),a=Te("span");t.ref.outputWidth=o,t.ref.outputHeight=a,r.appendChild(o),r.appendChild(i),r.appendChild(a),t.appendChild(r),t.ref.previousValues={width:0,height:0,percentage:0}},write:function(e){var t=e.root,n=e.props,r=e.timestamp;if(!(t.opacity<=0)){var i=t.query("GET_CROP",n.id,r);if(i){var o=i.cropStatus,a=i.isDraft,s=t.ref,l=s.outputWidth,c=s.outputHeight,u=s.resizePercentage,f=s.previousValues,d=o.image,h=o.crop,p=o.currentWidth,g=o.currentHeight,m=d.width?Math.round(d.width/h.width*100):0;a&&(t.sizeWidth=null,t.sizeHeight=null),t.sizeWidth=p,t.sizeHeight=g;var y=Math.round(t.sizeWidth),_=Math.round(t.sizeHeight);y!==f.width&&(Go(l,y),f.width=y),_!==f.height&&(Go(c,_),f.height=_),m!==f.percentage&&(d.width?Go(u,"".concat(m,"%")):Go(u,""),f.percentage=m)}}}}),bw=function(e,t){return he({ignoreRect:!0,name:e,mixins:t,create:function(n){var r=n.root,i=n.props;i.className&&r.element.classList.add(i.className),i.controls.map(function(o){var a=r.createChildView(o.view,o);o.didCreateView&&o.didCreateView(a),r.appendChildView(a)})}})},ug=function(){return console.log("Doka: localStorage not available")},fg=function(e){try{JSON.parse(localStorage.getItem(e)||"{}")}catch{ug()}return{}},Cw=function(e,t,n){var r=fg(e);r[t]=n;try{localStorage.setItem(e,JSON.stringify(r))}catch{ug()}return n},xw=function(e,t,n){var r=fg(e);return r[t]===void 0?n:r[t]},dg=function(){return window.matchMedia("(pointer: fine) and (hover: hover)").matches},Mw=he({ignoreRect:!0,ignoreRectUpdate:!0,name:"instructions-bubble",mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:400}},apis:["seen"]},create:function(e){var t=e.root,n=e.props;return t.element.innerHTML=(n.iconBefore||"")+n.text},write:function(e){var t=e.root;e.props.seen&&(t.opacity=0)}}),Nf={type:"spring",stiffness:.4,damping:.65,mass:7},Lw=he({name:"crop-subject",ignoreRect:!0,mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:250},translateX:Nf,translateY:Nf}},create:function(e){var t=e.root,n=e.props;t.opacity=1,t.ref.timestampOffset=null,t.query("GET_CROP_ALLOW_INSTRUCTION_ZOOM")&&dg()&&(xw(t.query("GET_STORAGE_NAME"),"instruction_zoom_shown",!1)||(t.ref.instructions=t.appendChildView(t.createChildView(Mw,{opacity:0,seen:!1,text:t.query("GET_LABEL_CROP_INSTRUCTION_ZOOM"),iconBefore:Se('<rect stroke-width="1.5" fill="none" stroke="currentColor" x="5" y="1" width="14" height="22" rx="7" ry="7"></rect><circle fill="currentColor" stroke="none" cx="12" cy="8" r="2"></circle>')})))),t.ref.maskView=t.appendChildView(t.createChildView(Ow)),t.query("GET_CROP_ALLOW_RESIZE_RECT")&&(t.ref.cropView=t.appendChildView(t.createChildView(Aw))),t.query("GET_CROP_SHOW_SIZE")&&(t.ref.cropSize=t.appendChildView(t.createChildView(Sw,{id:n.id,opacity:1,scaleX:1,scaleY:1,translateX:null}))),t.query("GET_CROP_ZOOM_TIMEOUT")||(t.ref.btnZoom=t.appendChildView(t.createChildView(bw("zoom-wrapper",{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:250}}}),{opacity:0,controls:[{view:lt,label:t.query("GET_LABEL_BUTTON_CROP_ZOOM"),name:"zoom",icon:Se('<g fill="currentColor" fill-rule="nonzero"><path d="M12.5 19a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13zm0-2a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9z"/><path d="M15.765 17.18a1 1 0 1 1 1.415-1.415l3.527 3.528a1 1 0 0 1-1.414 1.414l-3.528-3.527z"/></g>',26),action:function(){return t.dispatch("CROP_ZOOM")}}]})))},write:Be({CROP_IMAGE_RESIZE_MULTIPLY:function(e){var t=e.root,n=t.ref.instructions;n&&!n.seen&&(n.seen=!0,Cw(t.query("GET_STORAGE_NAME"),"instruction_zoom_shown",!0))},CROP_RECT_DRAG_RELEASE:function(e){var t=e.root,n=e.props,r=e.timestamp,i=t.ref.btnZoom;if(i){var o=t.query("GET_CROP",n.id,r).cropRect,a=o.x+.5*o.width,s=o.y+.5*o.height;i.translateX=a,i.translateY=s}}},function(e){var t=e.root,n=e.props,r=e.timestamp,i=t.ref,o=i.cropView,a=i.maskView,s=i.btnZoom,l=i.cropSize,c=i.instructions;if(!t.query("IS_ACTIVE_VIEW","crop")&&o)return o.enabled=!1,t.ref.timestampOffset=null,void(l&&(l.opacity=0));t.ref.timestampOffset||(t.ref.timestampOffset=r);var u=t.query("GET_CROP",n.id,r);if(u){var f=u.cropRect,d=u.isRotating,h=u.isDraft,p=u.scale,g=t.query("GET_STAGE");if(t.translateX=g.x-t.rect.element.left,t.translateY=g.y-t.rect.element.top,o&&(o.draft=h,o.rotating=d,o.rectangle=f,o.enabled=!0),l){l.opacity=1,h&&(l.translateX=null,l.translateY=null);var m=Pw(t.rect.element,l.rect.element,f);l.translateX=h?m.x:an(m.x),l.translateY=h?m.y:an(m.y)}if(t.query("GET_CROP_MASK")&&(h&&(a.translateX=null,a.translateY=null,a.maskWidth=null,a.maskHeight=null),a.translateX=an(f.x),a.translateY=an(f.y),a.maskWidth=f.width,a.maskHeight=f.height,a.scale=p),u.canRecenter)c&&(c.opacity=0),s&&(s.opacity=u.isDraft?0:1);else if(s&&(s.opacity=0),c&&!c.seen&&!u.isDraft){var y=f.x+.5*f.width,_=f.y+.5*f.height;c.translateX=Math.round(y-.5*c.rect.element.width),c.translateY=Math.round(_-.5*c.rect.element.height),r-t.ref.timestampOffset>2e3&&(c.opacity=1)}}})}),Pw=function(e,t,n){var r=n.x,i=n.x+n.width,o=n.y+n.height,a=i-t.width-16,s=o-t.height-16;return t.width>n.width-32&&(a=r+(.5*n.width-.5*t.width),(s=o+16)>e.height-t.height&&(s=o-t.height-16)),{x:a=Math.max(0,Math.min(a,e.width-t.width)),y:s}},Nr=function(){return performance.now()},Dw=function(e,t){var n=null,r=null;return function(){var i=arguments;if(!r)return e.apply(null,Array.from(arguments)),void(r=Nr());clearTimeout(n),n=setTimeout(function(){Nr()-r>=t&&(e.apply(null,Array.from(i)),r=Nr())},t-(Nr()-r))}},hg=function(e,t){for(;e.nodeType===1&&!t(e);)e=e.parentNode;return e.nodeType===1?e:null},Pi=function(e,t){var n=hg(t,function(r){return r.classList.contains("doka--root")});return!!n&&on(n,e)},Gf=function(e){var t=e.root,n=e.props,r=e.action.position,i=n.pivotPoint,o=t.ref,a=o.indicatorA,s=o.indicatorB,l=i.x-r.x,c=i.y-r.y,u={x:i.x+l,y:i.y+c},f={x:i.x-l,y:i.y-c};a.style.cssText="transform: translate3d(".concat(u.x,"px, ").concat(u.y,"px, 0)"),s.style.cssText="transform: translate3d(".concat(f.x,"px, ").concat(f.y,"px, 0)")},Di=function(e){return{x:e.pageX,y:e.pageY}},Nw=he({ignoreRect:!0,ignoreRectUpdate:!0,name:"crop-resizer",mixins:{apis:["pivotPoint","scrollRect"]},create:function(e){var t=e.root,n=e.props;t.ref.isActive=!1,t.ref.isCropping=!1,t.ref.indicatorA=document.createElement("div"),t.appendChild(t.ref.indicatorA),t.ref.indicatorB=document.createElement("div"),t.appendChild(t.ref.indicatorB);var r=t.query("GET_CROP_RESIZE_KEY_CODES");t.ref.hasEnabledResizeModifier=r.length>0;var i={origin:{x:null,y:null},position:{x:null,y:null},selecting:!1,enabled:!1,scrollY:0,offsetX:0,offsetY:0},o=Nr();t.ref.state=i;var a=sg(),s=0,l=!1;t.ref.resizeStart=function(h){if(t.ref.isActive&&(a.count()===0&&(l=!1),Pi(t.element,h.target)&&(a.push(h),Hn(document.documentElement,"up",t.ref.resizeEnd),a.multiple()))){h.stopPropagation(),h.preventDefault();var p=a.active(),g=Di(p[0]),m=Di(p[1]);s=ki(g,m),Hn(document.documentElement,"move",t.ref.resizeMove),l=!0}},t.ref.resizeMove=function(h){if(t.ref.isActive&&l&&(h.preventDefault(),a.count()===2)){a.update(h);var p=a.active(),g=Di(p[0]),m=Di(p[1]),y=(ki(g,m)-s)/s;t.dispatch("CROP_IMAGE_RESIZE",{value:y})}},t.ref.resizeEnd=function(h){if(t.ref.isActive){a.pop(h);var p=a.count()===0;p&&(_n(document.documentElement,"move",t.ref.resizeMove),_n(document.documentElement,"up",t.ref.resizeEnd)),l&&(h.preventDefault(),p&&t.dispatch("CROP_IMAGE_RESIZE_RELEASE"))}},Hn(document.documentElement,"down",t.ref.resizeStart);var c=performance.now(),u=0,f=1,d=Dw(function(h){if(!t.ref.isCropping){var p=Math.sign(h.wheelDelta||h.deltaY),g=Nr(),m=g-c;c=g,(m>750||u!==p)&&(f=1,u=p),f+=.05*p,t.dispatch("CROP_IMAGE_RESIZE_MULTIPLY",{value:Math.max(.1,f)}),t.dispatch("CROP_IMAGE_RESIZE_RELEASE")}},100);t.ref.wheel=function(h){if(t.ref.isActive&&Pi(t.element,h.target)){if(n.scrollRect){var p=n.scrollRect,g=t.query("GET_ROOT"),m=Di(h),y={x:m.x-g.leftScroll,y:m.y-g.topScroll};if(y.x<p.x||y.x>p.x+p.width||y.y<p.y||y.y>p.y+p.height)return}h.preventDefault(),d(h)}},document.addEventListener("wheel",t.ref.wheel,{passive:!1}),t.ref.hasEnabledResizeModifier&&(t.ref.move=function(h){if(t.ref.isActive&&!t.ref.isCropping&&(i.position.x=h.pageX-t.ref.state.offsetX,i.position.y=h.pageY-t.ref.state.scrollY-t.ref.state.offsetY,i.enabled))if(Pi(t.element,h.target)){t.element.dataset.state==="idle"&&t.dispatch("RESIZER_SHOW",{position:te({},i.position)}),h.preventDefault(),t.dispatch("RESIZER_MOVE",{position:te({},i.position)});var p=n.pivotPoint,g=p.x-i.position.x,m=p.y-i.position.y,y={x:p.x+g,y:p.y+m},_=te({},i.position);if(i.selecting){var E=(ki(y,_)-s)/s,v=performance.now();v-o>25&&(o=v,t.dispatch("CROP_IMAGE_RESIZE",{value:E}))}}else t.dispatch("RESIZER_CANCEL")},t.ref.select=function(h){if(t.ref.isActive&&Pi(t.element,h.target)){var p=n.pivotPoint,g=p.x-i.position.x,m=p.y-i.position.y,y={x:p.x+g,y:p.y+m},_=i.position;s=ki(y,_),i.selecting=!0,i.origin.x=h.pageX,i.origin.y=h.pageY,t.dispatch("CROP_IMAGE_RESIZE_GRAB")}},t.ref.confirm=function(h){t.ref.isActive&&Pi(t.element,h.target)&&(i.selecting=!1,t.dispatch("CROP_IMAGE_RESIZE_RELEASE"))},t.ref.blur=function(){t.ref.isActive&&(i.selecting=!1,i.enabled=!1,document.removeEventListener("mousedown",t.ref.select),document.removeEventListener("mouseup",t.ref.confirm),t.dispatch("RESIZER_CANCEL"))},window.addEventListener("blur",t.ref.blur),document.addEventListener("mousemove",t.ref.move),t.ref.keyDown=function(h){t.ref.isActive&&r.includes(h.keyCode)&&i.position&&(i.enabled=!0,document.addEventListener("mousedown",t.ref.select),document.addEventListener("mouseup",t.ref.confirm),t.dispatch("RESIZER_SHOW",{position:te({},i.position)}))},t.ref.keyUp=function(h){t.ref.isActive&&r.includes(h.keyCode)&&(i.enabled=!1,document.removeEventListener("mousedown",t.ref.select),document.removeEventListener("mouseup",t.ref.confirm),t.dispatch("RESIZER_CANCEL"))},document.body.addEventListener("keydown",t.ref.keyDown),document.body.addEventListener("keyup",t.ref.keyUp))},destroy:function(e){var t=e.root;document.removeEventListener("touchmove",t.ref.resizeMove),document.removeEventListener("touchend",t.ref.resizeEnd),document.removeEventListener("touchstart",t.ref.resizeStart),document.removeEventListener("wheel",t.ref.wheel),document.removeEventListener("mousedown",t.ref.select),document.removeEventListener("mouseup",t.ref.confirm),t.ref.hasEnabledResizeModifier&&(document.removeEventListener("mousemove",t.ref.move),document.body.removeEventListener("keydown",t.ref.keyDown),document.body.removeEventListener("keyup",t.ref.keyUp),window.removeEventListener("blur",t.ref.blur))},read:function(e){var t=e.root;t.ref.state.scrollY=window.scrollY;var n=t.element.getBoundingClientRect();t.ref.state.offsetX=n.x,t.ref.state.offsetY=n.y},write:Be({CROP_RECT_DRAG_GRAB:function(e){e.root.ref.isCropping=!0},CROP_RECT_DRAG_RELEASE:function(e){e.root.ref.isCropping=!1},SHOW_VIEW:function(e){var t=e.root,n=e.action;t.ref.isActive=n.id==="crop"},RESIZER_SHOW:function(e){var t=e.root,n=e.props,r=e.action;t.element.dataset.state="multi-touch",Gf({root:t,props:n,action:r})},RESIZER_CANCEL:function(e){e.root.element.dataset.state="idle"},RESIZER_MOVE:Gf})}),Qt=function(e,t){return e.style.opacity=t},Uf=function(e,t){var n=Array.from(e.element.querySelectorAll(".doka--icon-crop-limit rect"));n.length&&(Qt(n[0],t?.3:0),Qt(n[1],t?1:0),Qt(n[2],t?0:.3),Qt(n[3],t?0:1))},Bf=function(e,t){var n=e.element.querySelectorAll(".doka--icon-aspect-ratio rect");if(n.length){if(!t)return Qt(n[0],.2),Qt(n[1],.3),void Qt(n[2],.4);Qt(n[0],t>1?1:.3),Qt(n[1],t===1?.85:.5),Qt(n[2],t<1?1:.3)}},Gw=function(e,t){Array.from(e.element.querySelectorAll(".doka--icon-turn rect")).forEach(function(n){t>1&&(n.setAttribute("x",n.previousElementSibling?5:4),n.setAttribute("width",9)),t<1&&(n.setAttribute("y",11),n.setAttribute("height",10))})},Uw=function(e){var t,n;e>1?(n=14,t=Math.round(n/e)):(t=14,n=Math.round(t*e));var r=Math.round(.5*(23-t)),i=Math.round(.5*(23-n));return'<svg width="23" height="23" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false"><g fill="currentColor"><rect x="'.concat(r,'" y="').concat(i,'" width="').concat(t,'" height="').concat(n,'" rx="2.5"/></g></svg>')},Bw=he({name:"crop",ignoreRect:!0,mixins:{apis:["viewId","stagePosition","hidden","offsetTop"]},create:function(e){var t=e.root,n=e.props;n.viewId="crop",n.hidden=!1,t.ref.isHiding=!1;var r=[];t.query("GET_CROP_ALLOW_IMAGE_TURN_LEFT")&&r.push({view:lt,name:"tool",label:t.query("GET_LABEL_BUTTON_CROP_ROTATE_LEFT"),icon:Se('<g transform="translate(3 2)" fill="currentColor" fill-rule="evenodd" class="doka--icon-turn"><rect y="9" width="12" height="12" rx="1"/><path d="M9.823 5H11a5 5 0 0 1 5 5 1 1 0 0 0 2 0 7 7 0 0 0-7-7H9.626l.747-.747A1 1 0 0 0 8.958.84L6.603 3.194a1 1 0 0 0 0 1.415l2.355 2.355a1 1 0 0 0 1.415-1.414L9.823 5z" fill-rule="nonzero" /></g>',26),action:function(){return t.dispatch("CROP_IMAGE_ROTATE_LEFT")}}),t.query("GET_CROP_ALLOW_IMAGE_TURN_RIGHT")&&r.push({view:lt,name:"tool",label:t.query("GET_LABEL_BUTTON_CROP_ROTATE_RIGHT"),icon:Se('<g transform="translate(5 2)" fill="currentColor" fill-rule="evenodd" class="doka--icon-turn"><path d="M8.177 5H7a5 5 0 0 0-5 5 1 1 0 0 1-2 0 7 7 0 0 1 7-7h1.374l-.747-.747A1 1 0 0 1 9.042.84l2.355 2.355a1 1 0 0 1 0 1.415L9.042 6.964A1 1 0 0 1 7.627 5.55l.55-.55z" fill-rule="nonzero"/><rect x="6" y="9" width="12" height="12" rx="1"/></g>',26),action:function(){return t.dispatch("CROP_IMAGE_ROTATE_RIGHT")}}),t.query("GET_CROP_ALLOW_IMAGE_FLIP_HORIZONTAL")&&r.push({view:lt,name:"tool",label:t.query("GET_LABEL_BUTTON_CROP_FLIP_HORIZONTAL"),icon:Se('<g fill="currentColor" fill-rule="evenodd"><path d="M11.93 7.007V20a1 1 0 0 1-1 1H5.78a1 1 0 0 1-.93-1.368l5.15-12.993a1 1 0 0 1 1.929.368z"/><path d="M14 7.007V20a1 1 0 0 0 1 1h5.149a1 1 0 0 0 .93-1.368l-5.15-12.993A1 1 0 0 0 14 7.007z" opacity=".6"/></g>',26),action:function(){return t.dispatch("CROP_IMAGE_FLIP_HORIZONTAL")}}),t.query("GET_CROP_ALLOW_IMAGE_FLIP_VERTICAL")&&r.push({view:lt,name:"tool",label:t.query("GET_LABEL_BUTTON_CROP_FLIP_VERTICAL"),icon:Se('<g fill="currentColor" fill-rule="evenodd"><path d="M19.993 12.143H7a1 1 0 0 1-1-1V5.994a1 1 0 0 1 1.368-.93l12.993 5.15a1 1 0 0 1-.368 1.93z"/><path d="M19.993 14a1 1 0 0 1 .368 1.93L7.368 21.078A1 1 0 0 1 6 20.148V15a1 1 0 0 1 1-1h12.993z" opacity=".6"/></g>',26),action:function(){return t.dispatch("CROP_IMAGE_FLIP_VERTICAL")}});var i=t.query("GET_CROP_ASPECT_RATIO_OPTIONS");i&&i.length&&r.push({view:cr,name:"tool",label:t.query("GET_LABEL_BUTTON_CROP_ASPECT_RATIO"),icon:Se('<g class="doka--icon-aspect-ratio" fill="currentColor" fill-rule="evenodd"><rect x="2" y="4" opacity=".3" width="10" height="18" rx="1"/><rect opacity=".5" x="4" y="8" width="14" height="14" rx="1"/><rect x="6" y="12" width="17" height="10" rx="1"/></g>',26),options:null,onSelect:function(o){o.width&&o.height?t.dispatch("RESIZE_SET_OUTPUT_SIZE",{width:o.width,height:o.height}):(t.query("GET_CROP_ASPECT_RATIO_OPTIONS").find(function(a){return a.value&&a.value.width||a.value.height})&&t.dispatch("RESIZE_SET_OUTPUT_SIZE",{width:null,height:null}),t.dispatch("CROP_SET_ASPECT_RATIO",{value:o.aspectRatio}))},didCreateView:function(o){t.ref.aspectRatioDropdown=o}}),t.query("GET_CROP_ALLOW_TOGGLE_LIMIT")&&r.push({view:cr,name:"tool",label:t.query("GET_LABEL_BUTTON_CROP_TOGGLE_LIMIT"),icon:Se(`<g class="doka--icon-crop-limit" fill="currentColor" fill-rule="evenodd">
                    <rect x="2" y="3" width="20" height="20" rx="1"/>
                    <rect x="7" y="8" width="10" height="10" rx="1"/>
                    <rect x="4" y="8" width="14" height="14" rx="1"/>
                    <rect x="12" y="4" width="10" height="10" rx="1"/>
                </g>`,26),options:[{value:!0,label:t.query("GET_LABEL_BUTTON_CROP_TOGGLE_LIMIT_ENABLE"),icon:'<svg width="23" height="23" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false"><g fill="currentColor"><rect x="3" y="3" width="17" height="17" rx="2.5" opacity=".3"/><rect x="7" y="7" width="9" height="9" rx="2.5"/></g></svg>'},{value:!1,label:t.query("GET_LABEL_BUTTON_CROP_TOGGLE_LIMIT_DISABLE"),icon:'<svg width="23" height="23" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false"><g fill="currentColor"><rect x="3" y="6" width="13" height="13" rx="2.5" opacity=".3"/><rect x="10" y="3" width="9" height="9" rx="2.5"/></g></svg>'}],onSelect:function(o){t.dispatch("CROP_SET_LIMIT",{value:o})},didCreateView:function(o){t.ref.cropToggleLimitDropdown=o}}),t.ref.menu=t.appendChildView(t.createChildView(Rc("toolbar",["opacity"],{opacity:{type:"spring",mass:15,delay:50}}),{opacity:0,controls:r})),t.ref.menuItemsRequiredWidth=null,t.ref.subject=t.appendChildView(t.createChildView(Lw,te({},n))),t.query("GET_CROP_ALLOW_ROTATE")&&(t.ref.rotator=t.appendChildView(t.createChildView(yw,{rotation:0,opacity:0,translateY:20,id:n.id}))),t.ref.resizer=t.appendChildView(t.createChildView(Nw,{pivotPoint:{x:0,y:0}})),t.ref.updateControls=function(){var o=t.query("GET_IMAGE");if(Gw(t,o.height/o.width),t.ref.cropToggleLimitDropdown&&(t.ref.isLimitedToImageBounds=t.query("GET_CROP_LIMIT_TO_IMAGE_BOUNDS"),Uf(t,t.ref.isLimitedToImageBounds),t.ref.cropToggleLimitDropdown.selectedValue=t.ref.isLimitedToImageBounds),t.ref.aspectRatioDropdown){var a=t.query("GET_MIN_IMAGE_SIZE"),s=i.filter(function(l){if(!l.value.aspectRatio)return!0;if(l.value.aspectRatio<1){if(o.naturalWidth*l.value.aspectRatio<a.height)return!1}else if(o.naturalHeight/l.value.aspectRatio<a.width)return!1;return!0});t.ref.aspectRatioDropdown.options=s.map(function(l){return te({},l,{icon:Uw(l.value.aspectRatio)})})}},t.ref.isModal=/modal|fullscreen/.test(t.query("GET_STYLE_LAYOUT_MODE"))},read:function(e){var t=e.root,n=e.props;if(n.hidden)t.ref.menuItemsRequiredWidth=null;else{var r=t.rect;if(r.element.width!==0&&r.element.height!==0){if(t.ref.menuItemsRequiredWidth===null){var i=t.ref.menu.childViews.reduce(function(u,f){return u+f.rect.outer.width},0);t.ref.menuItemsRequiredWidth=i===0?null:i}var o=t.ref.subject.rect.element,a=o.left,s=o.top,l=o.width,c=o.height;n.stagePosition={x:a,y:s,width:l,height:c}}}},shouldUpdateChildViews:function(e){var t=e.props,n=e.actions;return!t.hidden||t.hidden&&n&&n.length},write:Be({SHOW_VIEW:function(e){var t=e.root,n=e.action,r=e.props,i=t.ref,o=i.menu,a=i.rotator,s=i.subject;r.viewId===n.id?(s.opacity=1,o.opacity=1,a&&(a.opacity=1,a.translateY=0),r.hidden=!1,t.ref.isHiding=!1,t.ref.updateControls()):(s.opacity=0,o.opacity=0,a&&(a.opacity=0,a.translateY=20),t.ref.isHiding=!0)},UNLOAD_IMAGE:function(e){var t=e.root.ref,n=t.menu,r=t.rotator;n.opacity=0,r&&(r.opacity=0,r.translateY=20)},DID_PRESENT_IMAGE:function(e){var t=e.root,n=t.ref,r=n.menu,i=n.rotator;r.opacity=1,i&&(i.opacity=1,i.translateY=0),t.ref.updateControls()}},function(e){var t=e.root,n=e.props,r=e.timestamp,i=t.ref,o=i.resizer,a=i.subject,s=i.menu,l=i.rotator,c=i.isHiding,u=i.cropToggleLimitDropdown,f=i.aspectRatioDropdown,d=n.hidden,h=a.opacity===0&&s.opacity===0&&(!l||l&&l.opacity===0);if(!d&&c&&h&&(t.ref.isHiding=!1,n.hidden=!0),!n.hidden){var p=t.query("GET_CROP",n.id,r);if(p){if(f){var g=t.query("GET_ACTIVE_CROP_ASPECT_RATIO"),m=t.query("GET_SIZE"),y=f.selectedValue;y?(y.aspectRatio!==g&&Bf(t,g),y.aspectRatio===g&&y.width===m.width&&y.height===m.height||(f.selectedValue={aspectRatio:g,width:m.width,height:m.height})):(f.selectedValue={aspectRatio:g,width:m.width,height:m.height},Bf(t,g))}if(u&&t.ref.isLimitedToImageBounds!==p.isLimitedToImageBounds&&(t.ref.isLimitedToImageBounds=p.isLimitedToImageBounds,Uf(t,p.isLimitedToImageBounds),u.selectedValue=p.isLimitedToImageBounds),o.pivotPoint={x:.5*o.rect.element.width,y:.5*o.rect.element.height},l&&(l.animate=!p.isDraft,l.rotation=p.rotation.sub,l.setAllowInteraction(t.query("IS_ACTIVE_VIEW","crop"))),s.element.dataset.layout=t.ref.menuItemsRequiredWidth>t.ref.menu.rect.element.width?"compact":"spacious",t.query("GET_CROP_RESIZE_SCROLL_RECT_ONLY")){var _=t.query("GET_STAGE"),E=_.x,v=_.y,T=t.query("GET_ROOT"),R=t.ref.isModal?T.left:0,O=t.ref.isModal?T.top:0;o.scrollRect={x:R+E+p.cropRect.x,y:O+v+p.cropRect.y+n.offsetTop,width:p.cropRect.width,height:p.cropRect.height}}}}})}),Vf=he({name:"size-input",mixins:{listeners:!0,apis:["id","value","placeholder","getValue","setValue","setPlaceholder","hasFocus","onChange"]},create:function(e){var t=e.root,n=e.props,r=n.id,i=n.min,o=n.max,a=n.value,s=n.placeholder,l=n.onChange,c=l===void 0?function(){}:l,u=n.onBlur,f=u===void 0?function(){}:u,d="doka--".concat(r,"-").concat(un()),h=Te("input",{type:"number",step:1,id:d,min:i,max:o,value:a,placeholder:s}),p=h.getAttribute("max").length,g=Te("label",{for:d});g.textContent=n.label;var m=function(_,E,v){return ct(_)?((_=_.replace(/[^0-9]/g,"")).length>p&&(_=_.slice(0,p)),_=parseInt(_,10)):_=Math.round(_),isNaN(_)?null:rn(_,E,v)},y=function(_){return _.length?parseInt(h.value,10):null};t.ref.handleInput=function(){h.value=m(h.value,1,o),c(y(h.value))},t.ref.handleBlur=function(){h.value=m(h.value,i,o),f(y(h.value))},h.addEventListener("input",t.ref.handleInput),h.addEventListener("blur",t.ref.handleBlur),t.appendChild(h),t.appendChild(g),t.ref.input=h,n.hasFocus=function(){return h===document.activeElement},n.getValue=function(){return y(h.value)},n.setValue=function(_){return h.value=_?m(_,1,999999):null},n.setPlaceholder=function(_){return h.placeholder=_}},destroy:function(e){var t=e.root;t.ref.input.removeEventListener("input",t.ref.handleInput),t.ref.input.removeEventListener("blur",t.ref.handleBlur)}}),Vw=he({name:"checkable",tag:"span",mixins:{listeners:!0,apis:["id","checked","onChange","onSetValue","setValue","getValue"]},create:function(e){var t=e.root,n=e.props,r=n.id,i=n.checked,o=n.onChange,a=o===void 0?function(){}:o,s=n.onSetValue,l=s===void 0?function(){}:s,c="doka--".concat(r,"-").concat(un()),u=Te("input",{type:"checkbox",value:1,id:c});u.checked=i,t.ref.input=u;var f=Te("label",{for:c});f.innerHTML=n.label,t.appendChild(u),t.appendChild(f),t.ref.handleChange=function(){l(u.checked),a(u.checked)},u.addEventListener("change",t.ref.handleChange),n.getValue=function(){return u.checked},n.setValue=function(d){u.checked=d,l(u.checked)},setTimeout(function(){l(u.checked)},0)},destroy:function(e){var t=e.root;t.ref.input.removeEventListener("change",t.ref.handleChange)}}),Bs=null,Fw=function(){return Bs===null&&(Bs=/Android/i.test(navigator.userAgent)),Bs},kw=he({ignoreRect:!0,name:"resize-form",tag:"form",mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:15,delay:150}}},create:function(e){var t=e.root;t.element.setAttribute("novalidate","novalidate"),t.element.setAttribute("action","#"),t.ref.shouldBlurKeyboard=hi()||Fw();var n=t.query("GET_SIZE_MAX"),r=t.query("GET_SIZE_MIN"),i=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=a.axisLock,l=s===void 0?"none":s,c=a.enforceLimits,u=c!==void 0&&c,f=t.ref,d=f.inputImageWidth,h=f.inputImageHeight,p=f.buttonConfirm,g=t.query("GET_SIZE_ASPECT_RATIO_LOCK"),m=t.query("GET_CROP_RECTANGLE_ASPECT_RATIO"),y={width:d.getValue(),height:h.getValue()},_=jr(y,u?r:{width:1,height:1},u?n:{width:999999,height:999999},g?m:null,l);if(g)l==="width"?h.setValue(_.width/m):l==="height"?d.setValue(_.height*m):(d.setValue(_.width||_.height*m),h.setValue(_.height||_.width/m));else if(_.width&&!_.height){var E=Math.round(_.width/m),v=jr({width:_.width,height:E},u?r:{width:1,height:1},u?n:{width:999999,height:999999},m,l);u&&d.setValue(Math.round(v.width)),h.setPlaceholder(Math.round(v.height))}else if(_.height&&!_.width){var T=Math.round(_.height*m);d.setPlaceholder(T)}var R=t.query("GET_SIZE_INPUT"),O=R.width,w=R.height,S=$t(O)?Math.round(O):null,M=$t(w)?Math.round(w):null,P=d.getValue(),C=h.getValue(),z=P!==S||C!==M;return p.opacity=z?1:0,t.dispatch("KICK"),{width:d.getValue(),height:h.getValue()}},o=t;t.appendChildView(t.createChildView($w("Image size",function(a){var s=a.root,l=s.query("GET_SIZE"),c=s.appendChildView(s.createChildView(Vf,{id:"image-width",label:s.query("GET_LABEL_RESIZE_WIDTH"),value:$t(l.width)?Math.round(l.width):null,min:r.width,max:n.width,placeholder:0,onChange:function(){return i({axisLock:"width"})},onBlur:function(){return i({enforceLimits:!1})}})),u=s.appendChildView(s.createChildView(Vw,{id:"aspect-ratio-lock",label:Se('<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width="1.5" stroke-linecap="round" class="doka--aspect-ratio-lock-ring" d="M9.401 10.205v-.804a2.599 2.599 0 0 1 5.198 0V14"/><rect fill="currentColor" x="7" y="10" width="10" height="7" rx="1.5"/></g>'),checked:s.query("GET_SIZE_ASPECT_RATIO_LOCK"),onSetValue:function(d){var h=d?0:-3;u.element.querySelector(".doka--aspect-ratio-lock-ring").setAttribute("transform","translate(0 ".concat(h,")"))},onChange:function(d){s.dispatch("RESIZE_SET_OUTPUT_SIZE_ASPECT_RATIO_LOCK",{value:d}),i()}})),f=s.appendChildView(s.createChildView(Vf,{id:"image-height",label:s.query("GET_LABEL_RESIZE_HEIGHT"),value:$t(l.height)?Math.round(l.height):null,min:r.height,max:n.height,placeholder:0,onChange:function(){return i({axisLock:"height"})},onBlur:function(){return i({enforceLimits:!1})}}));o.ref.aspectRatioLock=u,o.ref.inputImageWidth=c,o.ref.inputImageHeight=f}))),t.ref.buttonConfirm=t.appendChildView(t.createChildView(lt,{name:"app action-confirm icon-only",label:t.query("GET_LABEL_RESIZE_APPLY_CHANGES"),action:function(){},opacity:0,icon:Se('<polyline fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" points="20 6 9 17 4 12"></polyline>'),type:"submit"})),t.ref.confirmForm=function(a){var s=i({enforceLimits:!0});a.preventDefault();var l=t.ref,c=l.shouldBlurKeyboard,u=l.buttonConfirm;c&&(document.activeElement.blur(),u.element.focus()),u.opacity=0,t.dispatch("RESIZE_SET_OUTPUT_SIZE",s)},t.element.addEventListener("submit",t.ref.confirmForm)},destroy:function(e){var t=e.root;t.element.removeEventListener("submit",t.ref.confirmForm)},write:Be({EDIT_RESET:function(e){var t=e.root,n=t.query("GET_SIZE"),r=t.ref,i=r.inputImageWidth,o=r.inputImageHeight,a=r.aspectRatioLock,s=r.buttonConfirm;i.setValue(n.width),o.setValue(n.height),a.setValue(t.query("GET_SIZE_ASPECT_RATIO_LOCK")),s.opacity=0},RESIZE_SET_OUTPUT_SIZE:function(e){var t=e.root,n=e.action,r=t.ref,i=r.inputImageWidth,o=r.inputImageHeight;i.setValue(n.width),o.setValue(n.height)},CROP_SET_ASPECT_RATIO:function(e){var t=e.root,n=e.props,r=e.action,i=e.timestamp,o=t.query("GET_CROP",n.id,i);if(o){var a=o.cropStatus,s=t.ref,l=s.inputImageWidth,c=s.inputImageHeight;r.value!==null?(l.setValue(a.image.width),l.setPlaceholder(a.crop.width),c.setValue(a.image.height),c.setPlaceholder(a.crop.height)):l.getValue()&&c.getValue()&&(c.setValue(null),c.setPlaceholder(a.crop.height))}}},function(e){var t=e.root,n=e.props,r=e.timestamp,i=t.query("GET_CROP",n.id,r);if(i){t.opacity;var o=i.cropStatus,a=t.ref,s=a.inputImageWidth,l=a.inputImageHeight;if(!s.hasFocus()&&!l.hasFocus()){var c=t.query("GET_CROP_RECTANGLE_ASPECT_RATIO");if(s.getValue()===null&&l.getValue()===null)s.setPlaceholder(o.crop.width),l.setPlaceholder(o.crop.height);else if(s.getValue()===null&&o.image.height!==null){var u=Math.round(o.image.height*c);s.setPlaceholder(u)}else if(l.getValue()===null&&o.image.width!==null){var f=Math.round(o.image.width/c);l.setPlaceholder(f)}}}})}),$w=function(e,t){return he({tag:"fieldset",create:function(n){var r=n.root,i=Te("legend");i.textContent=e,r.element.appendChild(i),t({root:r})}})},Hw=he({name:"resize",ignoreRect:!0,mixins:{apis:["viewId","stagePosition","hidden"]},create:function(e){var t=e.root,n=e.props;n.viewId="resize",n.hidden=!1,t.ref.isHiding=!1,t.ref.form=t.appendChildView(t.createChildView(kw,{opacity:0,id:n.id}))},read:function(e){var t=e.root,n=e.props;if(!n.hidden){var r=t.rect;if(r.element.width!==0&&r.element.height!==0){var i=t.ref.form.rect;n.stagePosition={x:r.element.left,y:r.element.top+i.element.height,width:r.element.width,height:r.element.height-i.element.height}}}},shouldUpdateChildViews:function(e){var t=e.props,n=e.actions;return!t.hidden||t.hidden&&n&&n.length},write:Be({SHOW_VIEW:function(e){var t=e.root,n=e.action,r=e.props;n.id===r.viewId?(t.ref.isHiding=!1,t.ref.form.opacity=1):(t.ref.isHiding=!0,t.ref.form.opacity=0)}},function(e){var t=e.root,n=e.props,r=t.ref,i=r.form,o=r.isHiding,a=n.hidden;o&&i.opacity===0&&!a?n.hidden=!0:n.hidden=!1})}),zw=he({name:"range-input",tag:"span",mixins:{listeners:!0,apis:["onUpdate","setValue","getValue","setAllowInteraction"]},create:function(e){var t=e.root,n=e.props,r=n.id,i=n.min,o=n.max,a=n.step,s=n.value,l=n.onUpdate,c=l===void 0?function(){}:l,u="doka--".concat(r,"-").concat(un()),f=Te("input",{type:"range",id:u,min:i,max:o,step:a});f.value=s,t.ref.input=f;var d=Te("span");d.className="doka--range-input-inner";var h=Te("label",{for:u});h.innerHTML=n.label;var p=i+.5*(o-i);t.element.dataset.centered=s===p,t.ref.handleRecenter=function(){n.setValue(p),t.ref.handleChange()};var g=Te("button",{type:"button"});g.textContent="center",g.addEventListener("click",t.ref.handleRecenter),t.ref.recenter=g,d.appendChild(f),d.appendChild(g),t.appendChild(h),t.appendChild(d),t.ref.handleChange=function(){var y=n.getValue();t.element.dataset.centered=y===p,c(y)},f.addEventListener("input",t.ref.handleChange);var m=null;t.ref.dragger=On(d,function(){m=f.getBoundingClientRect()},function(y){var _=(y.pageX-m.left)/m.width;f.value=i+_*(o-i),t.ref.handleChange()},function(){},{stopPropagation:!0}),n.getValue=function(){return parseFloat(f.value)},n.setValue=function(y){return f.value=y},n.setAllowInteraction=function(y){y?t.ref.dragger.enable():t.ref.dragger.disable()}},destroy:function(e){var t=e.root;t.ref.dragger.destroy(),t.ref.recenter.removeEventListener("click",t.ref.handleRecenter),t.ref.input.removeEventListener("input",t.ref.handleChange)}}),Ol={brightness:{icon:Se('<g fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="7"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></g>')},contrast:{icon:Se('<g fill="none" fill-rule="evenodd"><circle stroke="currentColor" stroke-width="3" cx="12" cy="12" r="10"/><path d="M12 2v20C6.477 22 2 17.523 2 12S6.477 2 12 2z" fill="currentColor"/></g>')},exposure:{icon:Se('<g fill="none" fill-rule="evenodd"><rect stroke="currentColor" stroke-width="3" x="2" y="2" width="20" height="20" rx="4"/><path d="M20.828 3.172L3.172 20.828A3.987 3.987 0 0 1 2 18V6a4 4 0 0 1 4-4h12c1.105 0 2.105.448 2.828 1.172zM7 7H5v2h2v2h2V9h2V7H9V5H7v2zM12 15h5v2h-5z" fill="currentColor"/></g>')},saturation:{icon:Se('<g fill="none" fill-rule="evenodd"><rect stroke="currentColor" stroke-width="3" x="2" y="2" width="20" height="20" rx="4"/><path fill="currentColor" opacity=".3" d="M7 2.5h5v18.75H7z"/><path fill="currentColor" opacity=".6" d="M12 2.5h5v18.75h-5z"/><path fill="currentColor" opacity=".9" d="M17 2.5h4v18.75h-4z"/></g>')}},qw=he({ignoreRect:!0,name:"color-form",tag:"form",mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:15}}},create:function(e){var t=e.root;t.element.setAttribute("novalidate","novalidate");var n=t.query("GET_COLOR_VALUES");t.ref.tools=Object.keys(Ol).reduce(function(r,i){var o=i,a=Ol[i].icon,s=t.query("GET_LABEL_COLOR_".concat(i.toUpperCase())),l=t.query("GET_COLOR_".concat(i.toUpperCase(),"_RANGE")),c=n[i];return r[o]={view:t.appendChildView(t.createChildView(zw,{id:o,label:"".concat(a,"<span>").concat(s,"</span>"),min:l[0],max:l[1],step:.01,value:c,onUpdate:function(u){return t.dispatch("COLOR_SET_COLOR_VALUE",{key:o,value:u})}}))},r},{})},write:Be({COLOR_SET_VALUE:function(e){var t=e.root,n=e.action;t.ref.tools[n.key].view.setValue(n.value)},SHOW_VIEW:function(e){var t=e.root,n=e.action;Object.keys(t.ref.tools).forEach(function(r){t.ref.tools[r].view.setAllowInteraction(n.id==="color")})}})}),Ni=null,Vs=null,Ff=function(e,t){var n=t.brightness,r=t.exposure,i=t.contrast,o=t.saturation;if(n!==0){var a=n<0,s=a?"multiply":"overlay",l=a?0:255,c=a?Math.abs(n):1-n;e.ref.imageOverlay.style.cssText="mix-blend-mode: ".concat(s,"; background: rgba(").concat(l,",").concat(l,",").concat(l,",").concat(c,")")}return e.ref.imageOverlay.style.cssText="background:transparent",e.ref.image.style.cssText="filter: brightness(".concat(r,") contrast(").concat(i,") saturate(").concat(o,")"),t},Ww=Object.keys(Ol),Yw=function(e,t){return Ww.findIndex(function(n){return e[n]!==t[n]})<0},jw=function(e){return he({ignoreRect:!0,tag:"li",name:"filter-tile",mixins:{styles:["opacity","translateY"],animations:{translateY:{type:"spring",delay:10*e},opacity:{type:"spring",delay:30*e}}},create:function(t){var n=t.root,r=t.props,i="doka--filter-".concat(r.style,"-").concat(un()),o=Te("input",{id:i,type:"radio",name:"filter"});n.appendChild(o),o.checked=r.selected,o.value=r.style,o.addEventListener("change",function(){o.checked&&r.onSelect()});var a=Te("label",{for:i});a.textContent=r.label,n.appendChild(a);var s=r.imageData,l=Math.min(s.width,s.height),c=l,u=Te("canvas");u.width=l,u.height=c;var f=u.getContext("2d");n.ref.image=u;var d=Te("div");n.ref.imageOverlay=d;var h={x:.5*l-.5*s.width,y:.5*c-.5*s.height},p=Te("div");p.appendChild(u),p.appendChild(d),n.appendChild(p),n.ref.imageWrapper=p,r.matrix?(Ni||(Ni=yc(Kp)),clearTimeout(Vs),Ni.post({transforms:[{type:"filter",data:r.matrix}],imageData:s},function(g){f.putImageData(g,h.x,h.y),clearTimeout(Vs),Vs=setTimeout(function(){Ni.terminate(),Ni=null},1e3)},[s.data.buffer]),n.ref.activeColors=Ff(n,n.query("GET_COLOR_VALUES"))):f.putImageData(s,h.x,h.y)},write:function(t){var n=t.root;if(!(n.opacity<=0)){var r=n.query("GET_COLOR_VALUES"),i=n.ref.activeColors;(!i&&r||!Yw(i,r))&&(n.ref.activeColors=r,Ff(n,r))}}})},Xw=function(e){var t;try{t=new ImageData(e.width,e.height)}catch{t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(new Uint8ClampedArray(e.data)),t},_a=function(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every(function(n,r){return n===t[r]})},Zw=he({ignoreRect:!0,tag:"ul",name:"filter-list",mixins:{apis:["filterOpacity","hidden"]},create:function(e){var t=e.root,n=e.props;t.element.setAttribute("role","list"),t.ref.tiles=[];var r=t.query("GET_THUMB_IMAGE_DATA"),i=t.query("GET_FILTERS"),o=[];$e(i,function(a,s){o.push(te({id:a},s))}),t.ref.activeFilter=t.query("GET_FILTER"),t.ref.tiles=o.map(function(a,s){var l=a.matrix(),c=t.ref.activeFilter===a.id||_a(t.ref.activeFilter,l)||s===0;return t.appendChildView(t.createChildView(jw(s),{opacity:0,translateY:-5,id:n.id,style:a.id,label:a.label,matrix:l,imageData:Xw(r),selected:c,onSelect:function(){return t.dispatch("FILTER_SET_FILTER",{value:l?a.id:null})}}))})},write:function(e){var t=e.root,n=e.props;if(!n.hidden){var r=t.query("GET_FILTER");if(r!==t.ref.activeFilter){t.ref.activeFilter=r;var i=t.query("GET_FILTERS"),o=r?ct(r)?r:tg(r)?Object.keys(i).find(function(a){return _a(i[a].matrix(),r)}):null:"original";Array.from(t.element.querySelectorAll("input")).forEach(function(a){return a.checked=a.value===o})}t.query("IS_ACTIVE_VIEW","filter")?t.ref.tiles.forEach(function(a){a.opacity=1,a.translateY=0}):t.ref.tiles.forEach(function(a){a.opacity=0,a.translateY=-5}),n.filterOpacity=t.ref.tiles.reduce(function(a,s){return a+s.opacity},0)/t.ref.tiles.length}}}),Kw=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return he({name:"scroller doka--".concat(e,"-scroller"),ignoreRect:!0,ignoreRectUpdate:!0,mixins:{styles:["opacity"],animations:{opacity:{type:"spring"}},apis:n},create:function(r){var i,o=r.root,a=r.props;o.ref.content=o.appendChildView(o.createChildView(t,{id:a.id})),o.element.isScrollContainer=!0,dg()&&(o.ref.handleMouseWheel=function(s){var l=o.element.scrollLeft,c=o.ref.scrollWidth-o.rect.element.width,u=l+s.deltaX;(u<0||u>c)&&(o.element.scrollLeft=Math.min(Math.max(u,0),c),s.preventDefault())},o.element.addEventListener("mousewheel",o.ref.handleMouseWheel),o.element.dataset.dragState="end",o.ref.dragger=On(o.ref.content.element,function(){o.element.dataset.dragState="start",i=o.element.scrollLeft},function(s,l){o.element.scrollLeft=i-l.x,o.ref.scrollWidth-o.rect.element.width!=0&&Ya({x:0,y:0},l)>0&&(o.element.dataset.dragState="dragging")},function(){o.element.dataset.dragState="end"},{stopPropagation:!0}))},destroy:function(r){var i=r.root;i.ref.handleMouseWheel&&i.element.removeEventListener("mousewheel",i.ref.handleMouseWheel),i.ref.dragger&&i.ref.dragger.destroy()},read:function(r){var i=r.root;i.ref.scrollWidth=i.element.scrollWidth},write:function(r){var i=r.root,o=r.props;i.ref.content.hidden=o.hidden,o.contentOpacity=i.ref.content.contentOpacity}})},pg=function(e,t){return he({name:e,ignoreRect:!0,mixins:{apis:["viewId","stagePosition","hidden"]},create:function(n){var r=n.root,i=n.props;i.viewId=e,i.hidden=!1,r.ref.isHiding=!1,r.ref.content=r.appendChildView(r.createChildView(Kw(e,t,["hidden","contentOpacity"]),{id:i.id}))},read:function(n){var r=n.root,i=n.props;if(r.ref.content&&!i.hidden){var o=r.rect;if(o.element.width!==0&&o.element.height!==0){var a=r.ref.content.rect,s=a.element.top===0,l=s?o.element.top+a.element.height+a.element.marginBottom:o.element.top,c=s?o.element.height-a.element.height-a.element.marginBottom:o.element.height-a.element.height-o.element.top;i.stagePosition={x:o.element.left,y:l,width:o.element.width,height:c}}}},shouldUpdateChildViews:function(n){var r=n.props,i=n.actions;return!r.hidden||r.hidden&&i&&i.length},write:Be({SHOW_VIEW:function(n){var r=n.root,i=n.action,o=n.props;r.ref.content&&(i.id===o.viewId?(r.ref.isHiding=!1,o.hidden=!1,r.ref.content.hidden=!1):r.ref.isHiding=!0)}},function(n){var r=n.root,i=n.props;r.ref.content.opacity=r.ref.isHiding||r.ref.content.hidden?0:1,r.ref.isHiding&&r.ref.content.contentOpacity<=0&&(r.ref.isHiding=!1,i.hidden=!0,r.ref.content.hidden=!0)})})},Qw=pg("filter",Zw),Jw=he({name:"color",ignoreRect:!0,mixins:{apis:["viewId","stagePosition","hidden"]},create:function(e){var t=e.root,n=e.props;n.viewId="color",n.hidden=!1,t.ref.isHiding=!1,t.ref.form=t.appendChildView(t.createChildView(qw,{opacity:0,id:n.id}))},read:function(e){var t=e.root,n=e.props;if(!n.hidden){var r=t.rect;if(r.element.width!==0&&r.element.height!==0){var i=t.ref.form.rect,o=i.element.height,a=i.element.top===0,s=a?r.element.top+o:r.element.top,l=a?r.element.height-o:r.element.height-o-r.element.top;n.stagePosition={x:r.element.left,y:s,width:r.element.width,height:l}}}},shouldUpdateChildViews:function(e){var t=e.props,n=e.actions;return!t.hidden||t.hidden&&n&&n.length},write:Be({SHOW_VIEW:function(e){var t=e.root,n=e.action,r=e.props;n.id===r.viewId?(t.ref.isHiding=!1,t.ref.form.opacity=1,r.hidden=!1):(t.ref.isHiding=!0,t.ref.form.opacity=0)}},function(e){var t=e.root,n=e.props;t.ref.isHiding&&t.ref.form.opacity===0&&(t.ref.isHiding=!1,n.hidden=!0)})}),eA=function(){try{var e=Te("input",{type:"color"}),t=e.type==="color";return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?t:t&&typeof e.selectionStart!="number"}catch{return!1}},tA=function(e,t,n){var r,i=Math.max(e,t,n),o=Math.min(e,t,n),a=i-o,s=i===0?0:a/i,l=i/255;switch(i){case o:r=0;break;case e:r=t-n+a*(t<n?6:0),r/=6*a;break;case t:r=n-e+2*a,r/=6*a;break;case n:r=e-t+4*a,r/=6*a}return[r,s,l]},nA=he({ignoreRect:!0,tag:"div",name:"markup-color",mixins:{animations:{opacity:"spring"},styles:["opacity"],apis:["onSelect","selectedValue"]},create:function(e){var t=e.root,n=e.props,r=n.colors,i=n.name,o=n.onSelect;t.ref.handleChange=function(p){o(p.target.value),p.stopPropagation()},t.element.addEventListener("change",t.ref.handleChange);var a=Te("ul");if(t.ref.inputs=r.map(function(p){var g="doka--color-"+un(),m=Te("li"),y=Te("input",{id:g,name:i,type:"radio",value:p[1]}),_=Te("label",{for:g,title:p[0],style:"background-color: "+(p[2]||p[1])});return _.textContent=p[0],Nn(m)(y),Nn(m)(_),Nn(a)(m),y}),t.element.appendChild(a),t.query("GET_MARKUP_ALLOW_CUSTOM_COLOR")&&eA()){var s=Te("div",{class:"doka--color-input"}),l="doka--color-"+un(),c=Te("label",{for:l});c.textContent="Choose color";var u=Te("input",{id:l,name:i,type:"color"}),f=Te("span",{class:"doka--color-visualizer"}),d=Te("span",{class:"doka--color-brightness"});t.ref.handleCustomColorChange=function(){var p=fo(u.value),g=tA.apply(void 0,tn(p)),m=360*g[0]-90,y=.625*g[1],_=1-g[2];f.style.backgroundColor=u.value,f.style.transform="rotateZ(".concat(m,"deg) translateX(").concat(y,"em)"),d.style.opacity=_,o(u.value)};var h=!0;t.ref.handleCustomColorSelect=function(p){h?o(p.target.value):t.ref.handleCustomColorChange(),h=!1},u.addEventListener("click",t.ref.handleCustomColorSelect),u.addEventListener("input",t.ref.handleCustomColorChange),Nn(s)(u),Nn(s)(c),Nn(s)(f),Nn(s)(d),t.appendChild(s),t.ref.customInput=u}},write:function(e){var t=e.root,n=e.props;if(n.selectedValue!==t.ref.activeSelectedValue){t.ref.activeSelectedValue=n.selectedValue;var r=!1;if(t.ref.inputs.forEach(function(i){i.checked=i.value===n.selectedValue,i.checked&&(r=!0)}),!t.ref.customInput)return;t.ref.customInput.dataset.selected=t.ref.inputs.length&&!r,r||(t.ref.customInput.value=n.selectedValue,t.ref.handleCustomColorChange())}},destroy:function(e){var t=e.root;t.element.removeEventListener("change",t.ref.handleChange),t.ref.customInput&&(t.ref.customInput.removeEventListener("click",t.ref.handleCustomColorSelect),t.ref.customInput.removeEventListener("input",t.ref.handleCustomColorChange))}}),kf=function(e){var t=e.ref,n=t.colorSelect,r=t.fontFamilySelect,i=t.fontSizeSelect,o=t.shapeStyleSelect,a=t.lineStyleSelect;[r,i,o,t.lineDecorationSelect].forEach(function(s){s.element.dataset.active="false"}),[n,a].forEach(function(s){s.element.dataset.active="true"})},$f=["fontFamily","fontSize","fontWeight","textAlign","backgroundColor","fontColor","borderColor","borderWidth","borderStyle","lineColor","lineWidth","lineDecoration","lineJoin","lineCap"],gg=function(e){return'<svg width="23" height="23" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">'.concat(e,"</svg>")},rA=function(e){var t=e===0?"currentColor":"none",n=e;return gg('<rect stroke="'.concat(e===0?"none":"currentColor",'" fill="').concat(t,'" stroke-width="').concat(n,'" x="2" y="3" width="17" height="17" rx="3"/>'))},iA=function(e){return gg('<line stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width="'.concat(e,'" x1="3" y1="12" x2="20" y2="12"/>'))},oA=he({name:"markup-tools",ignoreRect:!0,mixins:{apis:["onUpdate"],animations:{translateY:"spring",opacity:"spring"},styles:["translateY","opacity"]},create:function(e){var t=e.root,n=e.props.onUpdate;t.ref.colorSelect=t.appendChildView(t.createChildView(nA,{onSelect:function(r){t.ref.colorSelect.selectedValue=r,n("color",r)},name:"color-select",colors:t.query("GET_MARKUP_COLOR_OPTIONS")})),t.ref.shapeStyleSelect=t.appendChildView(t.createChildView(cr,{onSelect:function(r){t.ref.shapeStyleSelect.selectedValue=r,n("shapeStyle",r.slice(1))},name:"tool",label:t.query("GET_LABEL_MARKUP_SELECT_SHAPE_STYLE"),direction:"up",options:t.query("GET_MARKUP_SHAPE_STYLE_OPTIONS").map(function(r){return{value:r,label:r[0],icon:rA(r[3])}})})),t.ref.lineStyleSelect=t.appendChildView(t.createChildView(cr,{onSelect:function(r){t.ref.lineStyleSelect.selectedValue=r,n("lineStyle",r.slice(1))},name:"tool",label:t.query("GET_LABEL_MARKUP_SELECT_LINE_STYLE"),direction:"up",options:t.query("GET_MARKUP_LINE_STYLE_OPTIONS").map(function(r){return{value:r,label:r[0],icon:iA(r[3])}})})),t.ref.lineDecorationSelect=t.appendChildView(t.createChildView(cr,{onSelect:function(r){t.ref.lineDecorationSelect.selectedValue=r,n("lineDecoration",r)},name:"tool",label:t.query("GET_LABEL_MARKUP_SELECT_LINE_DECORATION"),direction:"up",options:t.query("GET_MARKUP_LINE_DECORATION_OPTIONS").map(function(r){return{value:r[1],label:r[0]}})})),t.ref.fontFamilySelect=t.appendChildView(t.createChildView(cr,{onSelect:function(r){t.ref.fontFamilySelect.selectedValue=r,n("fontFamily",r)},name:"tool",label:t.query("GET_LABEL_MARKUP_SELECT_FONT_FAMILY"),direction:"up",options:t.query("GET_MARKUP_FONT_FAMILY_OPTIONS").map(function(r){return{value:r[1],label:'<span style="font-family:'.concat(r[1],';font-weight:600;">').concat(r[0],"</span>")}})})),t.ref.fontSizeSelect=t.appendChildView(t.createChildView(cr,{onSelect:function(r){t.ref.fontSizeSelect.selectedValue=r,n("fontSize",r)},name:"tool",label:t.query("GET_LABEL_MARKUP_SELECT_FONT_SIZE"),direction:"up",options:t.query("GET_MARKUP_FONT_SIZE_OPTIONS").map(function(r){return{value:r[1],label:r[0]}})})),t.query("GET_MARKUP_UTIL")==="draw"&&kf(t)},write:Be({SWITCH_MARKUP_UTIL:function(e){var t=e.root;e.action.util==="draw"&&kf(t)},MARKUP_SELECT:function(e){var t=e.root,n=e.action,r=t.ref,i=r.colorSelect,o=r.fontFamilySelect,a=r.fontSizeSelect,s=r.shapeStyleSelect,l=r.lineStyleSelect,c=r.lineDecorationSelect,u=n.id?t.query("GET_MARKUP_BY_ID",n.id):null,f=[i,o,a,s,l,c],d=[];if(u){var h=qr(u,2),p=h[0],g=h[1],m=Array.isArray(g.allowEdit)?g.allowEdit:g.allowEdit===!1?[]:$f,y=$f.reduce(function(v,T){return v[T]=m.indexOf(T)!==-1,v},{});if(y.color=!!m.find(function(v){return/[a-z]Color/.test(v)}),p!=="image"&&y.color&&(i.selectedValue=aA(g),d.push(i)),p==="text"&&(y.fontFamily&&(o.selectedValue=g.fontFamily,d.push(o)),y.fontSize&&(a.selectedValue=g.fontSize,d.push(a))),(p==="rect"||p==="ellipse")&&y.borderStyle){var _=t.query("GET_MARKUP_SHAPE_STYLE_OPTIONS").find(function(v){var T=g.borderWidth===v[1],R=g.borderStyle===v[2]||_a(g.borderStyle,v[2]);return T&&R});s.selectedValue=_,d.push(s)}if(p==="line"||p==="path"){if(y.lineWidth){var E=t.query("GET_MARKUP_LINE_STYLE_OPTIONS").find(function(v){var T=g.lineWidth===v[1],R=g.lineStyle===v[2]||_a(g.lineStyle,v[2]);return T&&R});l.selectedValue=E,d.push(l)}p==="line"&&y.lineDecoration&&(c.selectedValue=g.lineDecoration,d.push(c))}f.forEach(function(v){v.element.dataset.active="false"}),d.forEach(function(v){v.element.dataset.active="true"})}},MARKUP_UPDATE:function(e){var t=e.root,n=e.action,r=n.style,i=n.value;t.ref[r+"Select"]&&(t.ref[r+"Select"].selectedValue=i)}})}),aA=function(e){var t=e.fontColor,n=e.backgroundColor,r=e.lineColor,i=e.borderColor;return t||n||r||i},sA=he({name:"markup",ignoreRect:!0,mixins:{apis:["viewId","stagePosition","hidden"]},create:function(e){var t=e.root,n=e.props;n.viewId="markup",n.hidden=!1,t.ref.isHiding=!1;var r=[["select",{label:t.query("GET_LABEL_MARKUP_TOOL_SELECT"),icon:Se('<g fill="none" fill-rule="evenodd"><path d="M7 13H5a1 1 0 01-1-1V5a1 1 0 011-1h7a1 1 0 011 1v2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M10.22 8.914l12.58 5.18a1 1 0 01.012 1.844l-4.444 1.904a1 1 0 00-.526.526l-1.904 4.444a1 1 0 01-1.844-.013l-5.18-12.58a1 1 0 011.305-1.305z" fill="currentColor"/></g>',26)}],["draw",{label:t.query("GET_LABEL_MARKUP_TOOL_DRAW"),icon:Se('<g fill="currentColor"><path d="M17.86 5.71a2.425 2.425 0 013.43 3.43L9.715 20.714 5 22l1.286-4.715L17.86 5.71z"/></g>',26)}],["line",{label:t.query("GET_LABEL_MARKUP_TOOL_LINE"),icon:Se('<g transform="translate(3 4.5)" fill-rule="nonzero" fill="currentColor" stroke="none"><path d="M15.414 9.414l-6.01 6.01a2 2 0 1 1-2.829-2.828L9.172 10H2a2 2 0 1 1 0-4h7.172L6.575 3.404A2 2 0 1 1 9.404.575l6.01 6.01c.362.363.586.863.586 1.415s-.224 1.052-.586 1.414z"/></g>',26)}],["text",{label:t.query("GET_LABEL_MARKUP_TOOL_TEXT"),icon:Se('<g transform="translate(5 5)" fill="currentColor" fill-rule="evenodd"><path d="M10 4v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V4H1a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-5z"/></g>',26)}],["rect",{label:t.query("GET_LABEL_MARKUP_TOOL_RECT"),icon:Se('<g fill="currentColor"><rect x="5" y="5" width="16" height="16" rx="2"/></g>',26)}],["ellipse",{label:t.query("GET_LABEL_MARKUP_TOOL_ELLIPSE"),icon:Se('<g fill="currentColor"><circle cx="13" cy="13" r="9"/></g>',26)}]];t.ref.utils=Te("fieldset"),t.ref.utils.className="doka--markup-utils",t.ref.utilsList=Te("ul");var i="markup-utils-".concat(un());t.ref.inputs=r.map(function(a){var s=a[0],l=a[1],c="doka--markup-tool-"+un(),u=Te("li"),f=Te("input");f.id=c,f.checked=t.query("GET_MARKUP_UTIL")===s,f.setAttribute("type","radio"),f.setAttribute("name",i),f.value=s;var d=Te("label");return d.setAttribute("for",c),d.className="doka--button-tool",d.innerHTML=l.icon+"<span>"+l.label+"</span>",d.title=l.label,u.appendChild(f),u.appendChild(d),t.ref.utilsList.appendChild(u),f}),t.ref.utils.appendChild(t.ref.utilsList),t.ref.utilsList.addEventListener("change",function(a){t.dispatch("SET_MARKUP_UTIL",{value:a.target.value})}),t.query("GET_MARKUP_ALLOW_ADD_MARKUP")&&(t.ref.menu=t.appendChildView(t.createChildView(Rc("toolbar",["opacity"],{opacity:{type:"spring",mass:15,delay:50}}),{opacity:0,element:t.ref.utils})));var o=t.ref.tools=t.appendChildView(t.createChildView(oA,{opacity:0,onUpdate:function(a,s){t.dispatch("MARKUP_UPDATE",{style:a,value:s})}}));t.ref.menuItemsRequiredWidth=null,t.query("GET_MARKUP_UTIL")==="draw"&&(o.opacity=1,o.translateY=0,o.element.dataset.active="true")},read:function(e){var t=e.root,n=e.props;if(n.hidden)t.ref.menuItemsRequiredWidth=null;else{var r=t.rect;if(r.element.width!==0&&r.element.height!==0){if(t.ref.menu&&t.ref.menuItemsRequiredWidth===null){var i=t.ref.menu.rect.element.width;t.ref.menuItemsRequiredWidth=i===0?null:i}var o=t.ref.menu&&t.ref.menu.rect,a=t.ref.tools.rect.element.height,s=o?o.element.height:a,l=!o||o.element.top===0,c=l?r.element.top+s:r.element.top,u=l?r.element.height-s:r.element.height-s-r.element.top;n.stagePosition={x:r.element.left+20,y:c,width:r.element.width-40,height:u-a}}}},shouldUpdateChildViews:function(e){var t=e.props,n=e.actions;return!t.hidden||t.hidden&&n&&n.length},write:Be({SHOW_VIEW:function(e){var t=e.root,n=e.action,r=e.props;n.id===r.viewId?(r.hidden=!1,t.ref.isHiding=!1,t.ref.menu&&(t.ref.menu.opacity=1)):(t.ref.isHiding=!0,t.ref.menu&&(t.ref.menu.opacity=0),t.ref.tools.opacity=0,t.ref.tools.translateY=5,t.dispatch("SET_MARKUP_UTIL",{value:"select"}))},MARKUP_SELECT:function(e){var t=e.root,n=e.action;t.ref.tools.opacity=n.id?1:0,t.ref.tools.translateY=n.id?0:5,t.ref.tools.element.dataset.active=n.id?"true":"false"},DID_SET_MARKUP_UTIL:function(e){var t=e.root,n=e.action,r=t.ref,i=r.inputs,o=r.tools;i.forEach(function(a){a.checked=a.value===n.value}),n.value==="draw"&&(o.opacity=1,o.translateY=0,o.element.dataset.active="true")}},function(e){var t=e.root,n=e.props;t.ref.isHiding&&t.ref.menu&&t.ref.menu.opacity===0&&(t.ref.isHiding=!1,n.hidden=!0),n.hidden||(t.ref.menu.element.dataset.layout=t.ref.menuItemsRequiredWidth>t.rect.element.width?"compact":"spacious")})}),lA=["x","y","left","top","right","bottom"],cA=function(e){return lA.every(function(t){return e[t]===void 0})},Hf=function(){return-.5+Math.random()},zf=function(e){return e.match(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g)!==null},uA=he({ignoreRect:!0,tag:"ul",name:"sticker-list",create:function(e){var t=e.root;t.element.setAttribute("role","list");var n=function(i,o){var a=i.markup;typeof i=="string"||Array.isArray(i)?a=i:i.markup||(a=i.sticker),Array.isArray(i.sticker)&&(a=[a[0],te({},i.sticker[1],a[1])]);var s,l,c=typeof a=="string",u=c&&zf(a),f=c&&!u,d=0,h=0,p=t.query("GET_CROP_RECTANGLE_ASPECT_RATIO");if(f)s="image",d=.5*-(l={src:a,width:.5,height:.5*p,fit:"contain"}).width,h=.5*-l.height;else{if(u?(s="text",l={text:a}):(s=a[0],l=te({},a[1])),s==="text"){l.fontColor=l.fontColor||"#000000",l.fontSize=l.fontSize||.125,l.allowInput=l.allowInput!==void 0&&l.allowInput,l.allowEdit=l.allowEdit!==void 0&&l.allowEdit;var g=u?.75*l.fontSize:.35*l.fontSize*l.text.length;d=-.5*g,h=.5*(u?g*p*.5:.5*l.fontSize)}typeof l.width=="string"||typeof l.height=="string"||s!=="rect"&&s!=="ellipse"&&s!=="line"&&s!=="image"||(l.height=l.height*p,d=.5*-l.width,h=.5*-l.height)}o&&(l.x=o.x+d,l.y=o.y+h),cA(l)&&(l.x=.5+.5*Hf()+d,l.y=.5+.5*Hf()+h),t.dispatch("MARKUP_ADD",[s,l])};t.element.addEventListener("pointerdown",function(i){var o=i.target.dataset.index||"";if(o.length){var a=t.query("GET_STICKERS")[o];if(a){var s={x:i.pageX,y:i.pageY},l=Date.now();document.documentElement.addEventListener("pointerup",function c(u){document.documentElement.removeEventListener("pointerup",c);var f={x:u.pageX,y:u.pageY},d=Ya(s,f),h=Date.now()-l;if(d<10&&h<300)n(a);else{var p=t.query("GET_ROOT"),g=t.query("GET_STAGE"),m=t.query("GET_CROP_RECT"),y=u.offsetX!==void 0?u.offsetX:u.pageX-p.x-g.x-window.pageXOffset,_=u.offsetY!==void 0?u.offsetY:u.pageY-p.y-g.y-window.pageYOffset,E=g.x+m.x,v=g.y+m.y,T=(y-E)/m.width,R=(_-v)/m.height;T<0||T>1||R<0||R>1||n(a,{x:T,y:R})}})}}});var r=function(){var i=t.query("GET_STICKERS");t.element.innerHTML="",i.forEach(function(o,a){var s,l;typeof o=="string"||Array.isArray(o)?(s="",l=o):(s=o.alt||"",l=o.sticker);var c,u=Te("button"),f=typeof l=="string",d=f&&zf(l);if(f&&!d)(c=new Image).src=l;else{var h,p;c=Te("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),d?(h="text",p={text:l}):(h=l[0],p=te({},l[1])),h==="text"&&(p.fontColor=p.fontColor||"#000000",p.fontSize=p.fontSize||.3125);var g=Ec(h,p);_c(g,h,p,{width:200,height:200}),g.removeAttribute("id");var m=h==="text"?6:0;h==="ellipse"?(g.setAttribute("cx","50"),g.setAttribute("cy","50")):(g.setAttribute("x",50-.5*g.getAttribute("width")),g.setAttribute("y",50-.5*g.getAttribute("height"))),h==="text"&&(g.setAttribute("x","50"),g.setAttribute("y",50+m),g.setAttribute("text-anchor","middle"),g.setAttribute("dominant-baseline","middle")),c.appendChild(g)}s&&(u.innerHTML="<span>".concat(s,"</span>")),u.appendChild(c),u.dataset.index=a,u.setAttribute("type","button"),u.className="doka--button doka--button-tool";var y=Te("li");y.appendChild(u),t.element.appendChild(y)})};t.ref.updateStickers=r,r()},write:Be({DID_SET_STICKERS:function(e){var t=e.root;e.action,e.props,t.ref.updateStickers()}})}),fA=pg("sticker",uA),dA=function(e,t){return!e||!t||!$p(e,t)},hA={crop:Bw,resize:Hw,filter:Qw,color:Jw,markup:sA,sticker:fA},pA=he({name:"view-stack",ignoreRect:!0,mixins:{apis:["offsetTop"]},create:function(e){var t=e.root;t.ref.activeView=null,t.ref.activeStagePosition=null,t.ref.shouldFocus=!1},write:Be({SHOW_VIEW:function(e){var t=e.root,n=e.props,r=e.action,i=t.childViews.length===0,o=t.childViews.find(function(s){return s.viewId===r.id});o||(o=t.appendChildView(t.createChildView(hA[r.id],te({},n)))),t.ref.activeView=o,t.childViews.map(function(s){return s.element}).forEach(function(s){s.dataset.viewActive="false",s.removeAttribute("tabindex"),Al()&&(s.style.transform="")});var a=t.ref.activeView.element;a.dataset.viewActive="true",a.setAttribute("tabindex",-1),Al()&&setTimeout(function(){a.style.transform="translateZ(0)"},32),t.ref.shouldFocus=!i},DID_PRESENT_IMAGE:function(e){var t=e.root;t.dispatch("CHANGE_VIEW",{id:t.query("GET_UTIL")||t.query("GET_UTILS")[0]})},DID_SET_UTILS:function(e){var t=e.root;t.dispatch("CHANGE_VIEW",{id:t.query("GET_UTIL")||t.query("GET_UTILS")[0]})}},function(e){var t=e.root,n=e.props,r=t.ref,i=r.activeView,o=r.previousStagePosition;if(i&&i.stagePosition&&(t.childViews.forEach(function(f){f.offsetTop=n.offsetTop,f.element.viewHidden!==f.hidden&&(f.element.viewHidden=f.hidden,f.element.dataset.viewHidden=f.hidden)}),dA(i.stagePosition,o))){var a=i.stagePosition,s=a.x,l=a.y,c=a.width,u=a.height;if(c===0&&u===0)return;t.dispatch("DID_RESIZE_STAGE",{offset:{x:s,y:l},size:{width:c,height:u},animate:!0}),t.ref.previousStagePosition=i.stagePosition}}),didWriteView:function(e){var t=e.root;t.ref.shouldFocus&&(t.ref.activeView.element.focus({preventScroll:!0}),t.ref.shouldFocus=!1)}}),gA=he({name:"content",ignoreRect:!0,mixins:{styles:["opacity"],animations:{opacity:{type:"tween",duration:250}}},create:function(e){var t=e.root,n=e.props;t.opacity=1,t.ref.viewStack=t.appendChildView(t.createChildView(pA,{id:n.id})),t.ref.image=null},write:Be({DID_LOAD_IMAGE:function(e){var t=e.root,n=e.props;t.ref.image=t.appendChildView(t.createChildView(gw,{id:n.id}))}},function(e){var t=e.root,n=t.ref,r=n.image,i=n.viewStack;if(r){var o=t.rect.element.top;i.offsetTop=o,r.offsetTop=o}})}),mA=function(e,t){e.element.dataset.scaleDirection=t===null||t>1?"up":"down"},EA=he({name:"utils",create:function(e){var t=e.root,n={crop:{title:t.query("GET_LABEL_BUTTON_UTIL_CROP"),icon:Se('<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width="2"><path d="M23 17H9a2 2 0 0 1-2-2v-5m0-3V1"/><path d="M1 7h14a2 2 0 0 1 2 2v7m0 4v3"/></g>')},filter:{title:t.query("GET_LABEL_BUTTON_UTIL_FILTER"),icon:Se('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18.347 9.907a6.5 6.5 0 1 0-1.872 3.306M3.26 11.574a6.5 6.5 0 1 0 2.815-1.417"/><path d="M10.15 17.897A6.503 6.503 0 0 0 16.5 23a6.5 6.5 0 1 0-6.183-8.51"/></g>')},color:{title:t.query("GET_LABEL_BUTTON_UTIL_COLOR"),icon:Se('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 1v5.5m0 3.503V23M12 1v10.5m0 3.5v8M20 1v15.5m0 3.5v3M2 7h4M10 12h4M18 17h4"/></g>')},markup:{title:t.query("GET_LABEL_BUTTON_UTIL_MARKUP"),icon:Se('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.086 2.914a2.828 2.828 0 1 1 4 4l-14.5 14.5-5.5 1.5 1.5-5.5 14.5-14.5z"/></g>')},sticker:{title:t.query("GET_LABEL_BUTTON_UTIL_STICKER"),icon:Se('<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke="currentColor" stroke-width="2"><path d="M19.046 14.938a11.87 11.87 0 01-1.796 2.312C16.083 18.417 14.667 19.333 13 20H6.5A2.5 2.5 0 014 17.5v-11A2.5 2.5 0 016.5 4h11A2.5 2.5 0 0120 6.5V12" stroke-linejoin="round"/><path d="M12 20v-5.5a2.5 2.5 0 012.5-2.5h5.473"/></g>')},resize:{title:t.query("GET_LABEL_BUTTON_UTIL_RESIZE"),icon:Se('<g fill="none" fill-rule="evenodd" stroke-width="2" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="12" width="10" height="10" rx="2"/><path d="M4 11.5V4a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-5.5"/><path d="M14 10l3.365-3.365M14 6h4v4" class="doka--icon-resize-arrow-ne"/><path d="M14 10l3.365-3.365M14 6v4h4" class="doka--icon-resize-arrow-sw"/></g>')}};t.ref.utils=Object.keys(n).map(function(r){return te({id:r},n[r])}),t.ref.utilMenuRequiredWidth=null},read:function(e){var t=e.root;if(t.ref.utilMenuRequiredWidth===null){var n=t.childViews.reduce(function(r,i){return r+i.rect.outer.width},0);t.ref.utilMenuRequiredWidth=n===0?null:n}},write:Be({DID_SET_UTILS:function(e){var t=e.root,n=tn(t.query("GET_UTILS"));t.childViews.forEach(function(r){return t.removeChildView(r)}),t.element.dataset.utilCount=n.length,n.length===1&&(n.length=0),n.forEach(function(r){var i=t.ref.utils.find(function(a){return a.id===r}),o=t.appendChildView(t.createChildView(lt,{name:"tab",view:lt,label:i.title,opacity:1,icon:i.icon,id:i.id,action:function(){return t.dispatch("CHANGE_VIEW",{id:i.id})}}));t.ref["util_button_".concat(i.id)]=o})},SHOW_VIEW:function(e){var t=e.root,n=e.action;t.childViews.forEach(function(r){r.element.dataset.active=r.id===n.id})}},function(e){var t=e.root,n=e.props,r=e.timestamp,i=t.query("GET_CROP",n.id,r);if(i){var o=i.cropStatus;t.ref.util_button_resize&&mA(t.ref.util_button_resize,o.image.width?o.image.width/o.crop.width:null),t.element.dataset.layout=t.ref.utilMenuRequiredWidth>t.rect.element.width?"compact":"spacious"}})}),_A=Rr()&&function(){try{var e={antialias:!1,alpha:!1},t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl",e)||t.getContext("experimental-webgl",e))}catch{return!1}}(),yA=function(){return _A},vA=he({name:"container",create:function(e){var t=e.root,n=[];t.query("GET_ALLOW_BUTTON_RESET")&&n.push({view:lt,opacity:0,label:t.query("GET_LABEL_BUTTON_RESET"),didCreateView:function(r){return t.ref.btnReset=r},name:"app action-reset icon-only",icon:Se('<g fill="currentColor" fill-rule="nonzero"><path d="M6.036 13.418L4.49 11.872A.938.938 0 1 0 3.163 13.2l2.21 2.209a.938.938 0 0 0 1.326 0l2.209-2.21a.938.938 0 0 0-1.327-1.326l-1.545 1.546zM12 10.216a1 1 0 0 1 2 0V13a1 1 0 0 1-2 0v-2.784z"/><path d="M15.707 14.293a1 1 0 0 1-1.414 1.414l-2-2a1 1 0 0 1 1.414-1.414l2 2z"/><path d="M8.084 19.312a1 1 0 0 1 1.23-1.577 6 6 0 1 0-2.185-3.488 1 1 0 0 1-1.956.412 8 8 0 1 1 2.912 4.653z"/></g>',26),action:function(){var r=t.query("GET_BEFORE_RESET"),i=!r||r();Promise.resolve(i).then(function(o){o&&t.dispatch("EDIT_RESET")})}}),t.query("GET_ALLOW_BUTTON_CANCEL")&&n.unshift({view:lt,label:t.query("GET_LABEL_BUTTON_CANCEL"),name:"app action-cancel icon-fallback",opacity:1,icon:Se('<g fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></g>'),didCreateView:function(r){t.ref.btnCancel=r},action:function(){t.dispatch("EDIT_CANCEL")}}),n.push({view:EA}),t.query("GET_ALLOW_BUTTON_CONFIRM")&&n.push({view:lt,label:t.query("GET_LABEL_BUTTON_CONFIRM"),name:"app action-confirm icon-fallback",opacity:1,icon:Se('<polyline fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" points="20 6 9 17 4 12"></polyline>'),didCreateView:function(r){t.ref.btnConfirm=r},action:function(){t.dispatch("EDIT_CONFIRM")}}),t.ref.menu=t.appendChildView(t.createChildView(Rc("menu"),{controls:n})),t.ref.menu.opacity=0,t.ref.status=t.appendChildView(t.createChildView(FR)),t.ref.hasWebGL=yA(),t.ref.hasWebGL?t.dispatch("AWAIT_IMAGE"):t.dispatch("MISSING_WEBGL"),t.ref.handleFocusOut=function(r){if(r.relatedTarget&&on(t.element,r.relatedTarget)){var i=t.ref.status;i.element.dataset.viewStatus==="busy"&&i.element.focus()}},t.ref.handleFocusIn=function(r){var i=t.ref,o=i.menu,a=i.content,s=r.target;if(!on(o.element,s)&&a&&on(a.element,s)){if(!Array.from(t.element.querySelectorAll("[data-view-active=false]")).reduce(function(l,c){return on(c,s)&&(l=!0),l},!1))return;o.element.querySelector("button,input,[tabindex]").focus()}},t.element.addEventListener("focusin",t.ref.handleFocusIn),t.element.addEventListener("focusout",t.ref.handleFocusOut),t.ref.previousState=null},destroy:function(e){var t=e.root;t.element.removeEventListener("focusin",t.ref.handleFocusIn),t.element.removeEventListener("focusout",t.ref.handleFocusOut)},write:Be({UNLOAD_IMAGE:function(e){var t=e.root;t.ref.content&&(t.ref.content.opacity=0,t.ref.menu.opacity=0)},DID_UNLOAD_IMAGE:function(e){var t=e.root;t.removeChildView(t.ref.content),t.ref.content=null},DID_LOAD_IMAGE:function(e){var t=e.root,n=e.props;t.ref.hasWebGL&&(t.ref.content=t.appendChildView(t.createChildView(gA,{opacity:null,id:n.id})),t.ref.menu.opacity=1)},SHOW_VIEW:function(e){var t=e.root,n=e.action;t.element.dataset.limitOverflow=n.id==="resize"}},function(e){var t=e.root,n=e.props,r=e.timestamp,i=t.query("GET_CROP",n.id,r);if(i){var o=i.cropStatus,a=o.props,s={crop:{center:{x:ge(a.center.x,5),y:ge(a.center.y,5)},rotation:ge(a.rotation,5),zoom:ge(a.zoom,5),aspectRatio:ge(a.aspectRatio,5),flip:{horizontal:a.flip.horizontal,vertical:a.flip.vertical},scaleToFit:a.scaleToFit,width:o.currentWidth,height:o.currentHeight},preview:{scale:i.scale/Math.max(i.cropRect.width/i.previewSize.width,i.cropRect.height/i.previewSize.height)}};TA(t.ref.previousState,s)&&(t.dispatch("DID_UPDATE",{state:te({},s)}),t.ref.previousState=s);var l=t.ref,c=l.btnReset,u=l.btnCancel,f=l.content,d=i.canReset;if(c&&(c.opacity=d?1:0),u&&c){var h=t.query("GET_ROOT_SIZE");u.opacity=d&&h.width<=600?0:1}f&&f.opacity===0&&t.dispatch("DID_UNLOAD_IMAGE")}})}),TA=function(e,t){if(!e)return!0;var n=e.crop,r=t.crop;return n.width!==r.width||n.height!==r.height||n.center.x!==r.center.x||n.center.y!==r.center.y||n.rotation!==r.rotation||n.scaleToFit!==r.scaleToFit||n.zoom!==r.zoom||n.aspectRatio!==r.aspectRatio||n.flip.horizontal!==r.flip.horizontal||n.flip.vertical!==r.flip.vertical},IA=function(e){var t={destroy:function(){}};if("onpointerdown"in window||e.pointersPolyfilled)return t;e.pointersPolyfilled=!0;var n=0,r=[],i=function(h,p,g){var m=new UIEvent(p.type,{view:window,bubbles:!g});Object.keys(p).forEach(function(y){Object.defineProperty(m,y,{value:p[y],writable:!1})}),h.dispatchEvent(m)},o=function(h,p,g){return Array.from(p.changedTouches).map(function(m){var y=r[m.identifier],_={type:h,pageX:m.pageX,pageY:m.pageY,pointerId:m.identifier,isPrimary:y?y.isPrimary:n===0,preventDefault:function(){return p.preventDefault()}};return i(m.target,_,g),_})},a=function(h){o("pointerdown",h).forEach(function(p){r[p.pointerId]=p,n++})},s=function(h){o("pointermove",h)},l=function(h){o("pointerup",h).forEach(function(p){delete r[p.pointerId],n--})},c=function(h,p,g){var m={type:h,pageX:p.pageX,pageY:p.pageY,pointerId:0,isPrimary:!0,preventDefault:function(){return p.preventDefault()}};return i(p.target,m,g),m},u=function(h){c("pointerdown",h)},f=function(h){c("pointermove",h)},d=function(h){c("pointerup",h)};return"ontouchstart"in window?(e.addEventListener("touchstart",a),e.addEventListener("touchmove",s),e.addEventListener("touchend",l)):"onmousedown"in window&&(e.addEventListener("mousedown",u),e.addEventListener("mousemove",f),e.addEventListener("mouseup",d)),t.destroy=function(){r.length=0,e.pointersPolyfilled=!1,e.removeEventListener("touchstart",a),e.removeEventListener("touchmove",s),e.removeEventListener("touchend",l),e.removeEventListener("mousedown",u),e.removeEventListener("mousemove",f),e.removeEventListener("mouseup",d)},t},Uo=function(e){e.type!=="gesturestart"&&hg(e.target,function(t){return t.isScrollContainer})||e.preventDefault()},RA=he({name:"editor",ignoreRect:!0,mixins:{styles:["opacity"],animations:{opacity:{type:"tween",duration:350}},apis:["markedForRemoval"]},create:function(e){var t=e.root,n=e.props;n.markedForRemoval=!1,hi()&&(t.element.addEventListener("touchmove",Uo,{passive:!1}),t.element.addEventListener("gesturestart",Uo)),t.ref.pointerPolyfill=IA(t.query("GET_POINTER_EVENTS_POLYFILL_SCOPE")==="root"?t.element:document.documentElement),t.appendChildView(t.createChildView(vA,te({},n)))},destroy:function(e){var t=e.root;t.ref.pointerPolyfill.destroy(),t.element.removeEventListener("touchmove",Uo,!0),t.element.removeEventListener("gesturestart",Uo)}}),wA=function(){function e(){t.fire("touch-detected"),window.removeEventListener("touchstart",e,!1)}var t=te({},gc(),{destroy:function(){window.removeEventListener("touchstart",e,!1)}});return window.addEventListener("touchstart",e,!1),t},AA=function(e){var t,n={browseEnabled:!1},r=function(){t.files.length&&i.fire("drop",Array.from(t.files))},i=te({},gc(),{enableBrowse:function(){n.browseEnabled||((t=document.createElement("input")).style.display="none",t.setAttribute("type","file"),t.addEventListener("change",r),e.appendChild(t),e.addEventListener("click",o),n.browseEnabled=!0)},disableBrowse:function(){n.browseEnabled&&(t.removeEventListener("change",r),t.parentNode.removeChild(t),e.removeEventListener("click",o),n.browseEnabled=!1)},destroy:function(){e.removeEventListener("dragover",a),e.removeEventListener("drop",s),e.removeEventListener("click",o),t&&t.removeEventListener("change",r)}}),o=function(){return t.click()},a=function(l){return l.preventDefault()},s=function(l){l.preventDefault();var c=Array.from(l.dataTransfer.items||l.dataTransfer.files).map(function(u){return u.getAsFile&&u.kind==="file"?u.getAsFile():u});i.fire("drop",c)};return e.addEventListener("dragover",a),e.addEventListener("drop",s),i},OA=function(e){var t=function(n){if(n.keyCode===9){var r=Array.from(e.querySelectorAll("button,input,[tabindex]")).filter(function(a){return a.style.visibility!=="hidden"&&a.tabIndex!==-1}),i=r[0],o=r[r.length-1];n.shiftKey?document.activeElement===i&&(o.focus(),n.preventDefault()):document.activeElement===o&&(i.focus(),n.preventDefault())}};return e.addEventListener("keydown",t),{destroy:function(){e.removeEventListener("keydown",t)}}},Fs=function(e){return e.ref.isFullscreen},ks=function(e){return/fullscreen/.test(e.query("GET_STYLE_LAYOUT_MODE"))},mg=function(e){return/fullscreen|preview/.test(e.query("GET_STYLE_LAYOUT_MODE"))},qf=function(e){return/modal/.test(e.query("GET_STYLE_LAYOUT_MODE"))},Wf=function(e){return e.query("GET_ALLOW_AUTO_CLOSE")},Yf=mg,SA=mg,jf=function(e){var t=e.ref,n=t.environment,r=t.isSingleUtil,i=t.canBeControlled;e.element.dataset.styleViewport=xA(e.rect.element.width,e.rect.element.height)+" "+n.join(" ")+(r?" single-util":" multi-util")+(i?" flow-controls":" no-flow-controls")},Eg=function(e){var t=e.touches?e.touches[0]:e;t.pageX>10&&t.pageX<window.innerWidth-10||e.preventDefault()},bA=function(e){var t=e.element,n=e.ref,r=n.handleFullscreenUpdate,i=n.handleEscapeKey;t.setAttribute("tabindex",-1),r(),e.ref.focusTrap=OA(t),t.addEventListener("keydown",i),hi()&&t.addEventListener("touchstart",Eg),window.addEventListener("resize",r),window.innerWidth-document.documentElement.clientWidth>0&&document.body.classList.add("doka--parent"),document.body.appendChild(t);var o=document.querySelector("meta[name=viewport]");e.ref.defaultViewportContent=o?o.getAttribute("content"):null,o||((o=document.createElement("meta")).setAttribute("name","viewport"),document.head.appendChild(o)),o.setAttribute("content","width=device-width, height=device-height, initial-scale=1, maximum-scale=1, user-scalable=0"),e.opacity=1,on(e.element,document.activeElement)||t.focus(),e.dispatch("INVALIDATE_VIEWPORT"),e.ref.isFullscreen=!0},Xf=function(e){var t=e.element,n=e.ref,r=n.handleFullscreenUpdate,i=n.focusTrap,o=n.handleEscapeKey;t.removeAttribute("tabindex"),i.destroy(),t.removeEventListener("keydown",o),hi()&&t.removeEventListener("touchstart",Eg),window.removeEventListener("resize",r),document.body.classList.remove("doka--parent");var a=document.querySelector("meta[name=viewport]");e.ref.defaultViewportContent?(a.setAttribute("content",e.ref.defaultViewportContent),e.ref.defaultViewportContent=null):a.parentNode.removeChild(a),e.ref.isFullscreen=!1},CA=he({name:"root",ignoreRect:!0,mixins:{styles:["opacity"],animations:{opacity:{type:"tween",duration:350}}},create:function(e){var t=e.root,n=e.props;t.element.id=t.query("GET_ID")||"doka-".concat(n.id);var r=t.query("GET_CLASS_NAME");r&&t.element.classList.add(r),t.ref.environment=[],t.ref.shouldBeDestroyed=!1,t.ref.isClosing=!1,t.ref.isClosed=!1,t.ref.isFullscreen=!1,t.query("GET_ALLOW_DROP_FILES")&&(t.ref.catcher=AA(t.element),t.ref.catcher.on("drop",function(o){o.forEach(function(a){t.dispatch("REQUEST_LOAD_IMAGE",{source:a})})})),t.ref.touchDetector=wA(),t.ref.touchDetector.onOnce("touch-detected",function(){t.ref.environment.push("touch")}),t.ref.editor=t.appendChildView(t.createChildView(RA,{id:n.id})),t.query("GET_STYLES").filter(function(o){return!pc(o.value)}).map(function(o){var a=o.name,s=o.value;t.element.dataset[a]=s}),t.ref.updateViewport=function(){t.dispatch("INVALIDATE_VIEWPORT")},window.addEventListener("resize",t.ref.updateViewport),window.addEventListener("scroll",t.ref.updateViewport),t.ref.isSingleUtil=t.query("GET_UTILS").length===1,t.ref.canBeControlled=t.query("GET_ALLOW_BUTTON_CONFIRM")||t.query("GET_ALLOW_BUTTON_CANCEL"),jf(t);var i=document.createElement("div");i.style.cssText="position:fixed;height:100vh;top:0;",t.ref.measure=i,document.body.appendChild(i),t.ref.handleEscapeKey=function(o){o.keyCode===27&&t.dispatch("EDIT_CANCEL")},t.ref.initialScreenMeasureHeight=null,t.ref.handleFullscreenUpdate=function(){t.element.dataset.styleFullscreen=window.innerHeight===t.ref.initialScreenMeasureHeight},t.ref.clientRect={left:0,top:0},qf(t)&&(t.ref.handleModalTap=function(o){o.target===t.element&&t.dispatch("EDIT_CANCEL")},t.element.addEventListener("pointerdown",t.ref.handleModalTap))},read:function(e){var t=e.root,n=t.ref.measure;n&&(t.ref.initialScreenMeasureHeight=n.offsetHeight,n.parentNode.removeChild(n),t.ref.measure=null),t.ref.clientRect=t.element.getBoundingClientRect(),t.ref.clientRect.leftScroll=t.ref.clientRect.left+(window.scrollX||window.pageXOffset),t.ref.clientRect.topScroll=t.ref.clientRect.top+(window.scrollY||window.pageYOffset)},write:Be({ENTER_FULLSCREEN:function(e){var t=e.root;bA(t)},EXIT_FULLSCREEN:function(e){var t=e.root;Xf(t)},SHOW_VIEW:function(e){var t=e.root,n=e.action;t.element.dataset.view=n.id},DID_SET_STYLE_LAYOUT_MODE:function(e){var t=e.root,n=e.action;t.element.dataset.styleLayoutMode=n.value||"none",/fullscreen/.test(n.value)&&!/fullscreen/.test(n.prevValue)&&t.dispatch("ENTER_FULLSCREEN")},AWAITING_IMAGE:function(e){var t=e.root;t.ref.catcher&&t.query("GET_ALLOW_BROWSE_FILES")&&t.ref.catcher.enableBrowse()},DID_REQUEST_LOAD_IMAGE:function(e){var t=e.root;if(t.ref.catcher&&t.query("GET_ALLOW_BROWSE_FILES")&&t.ref.catcher.disableBrowse(),t.opacity===0&&(t.opacity=1),t.ref.isClosing=!1,t.ref.isClosed=!1,!ks(t)||Fs(t)){var n=t.query("GET_STYLE_LAYOUT_MODE");n!==null&&n!=="modal"||t.element.parentNode||t.dispatch("SET_STYLE_LAYOUT_MODE",{value:("fullscreen "+(n||"")).trim()})}else t.dispatch("ENTER_FULLSCREEN")},DID_CANCEL:function(e){var t=e.root;Yf(t)&&Wf(t)&&t.dispatch("EDIT_CLOSE")},DID_CONFIRM:function(e){var t=e.root;Yf(t)&&Wf(t)&&t.dispatch("EDIT_CLOSE")},EDIT_CLOSE:function(e){var t=e.root;SA(t)&&(t.opacity=t.opacity||1,t.opacity=0,t.ref.isClosed=!1,t.ref.isClosing=!0,t.query("GET_ALLOW_AUTO_DESTROY")&&(t.ref.shouldBeDestroyed=!0),Fs(t)&&t.dispatch("EXIT_FULLSCREEN"))},DID_SET_UTILS:function(e){var t=e.root;t.ref.isSingleUtil=t.query("GET_UTILS").length===1}},function(e){var t=e.root;jf(t);var n=t.query("GET_ROOT"),r=t.rect.element;n.width===r.width&&n.height===r.height&&n.y===t.ref.clientRect.top&&n.topScroll===t.ref.clientRect.topScroll||t.dispatch("UPDATE_ROOT_RECT",{rect:{x:t.ref.clientRect.left,y:t.ref.clientRect.top,left:t.ref.editor.rect.element.left,top:t.ref.editor.rect.element.top,leftScroll:t.ref.clientRect.leftScroll,topScroll:t.ref.clientRect.topScroll,width:t.rect.element.width,height:t.rect.element.height}})}),didWriteView:function(e){var t=e.root,n=t.ref,r=n.isClosed,i=n.isClosing,o=n.shouldBeDestroyed;!r&&i&&t.opacity===0&&(t.dispatch("DID_CLOSE"),t.ref.isClosed=!0,t.ref.isClosing=!1,ks(t)&&t.element.parentNode&&document.body.removeChild(t.element),o&&t.dispatch("EDIT_DESTROY"))},destroy:function(e){var t=e.root;Fs(t)&&Xf(t),qf(t)&&t.element.removeEventListener("pointerdown",t.ref.handleModalTap),ks(t)&&t.element.parentNode&&document.body.removeChild(t.element),window.removeEventListener("resize",t.ref.updateViewport),t.ref.touchDetector.destroy(),t.ref.catcher&&t.ref.catcher.destroy()}}),xA=function(e,t){var n="";return e===0&&t===0?"detached":(n+=t>e?"portrait":"landscape",(n+=e<=600?" x-cramped":e<=1e3?" x-comfortable":" x-spacious").trim())},MA=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=ha(),n=W1(AT(t),[QT,bT(t)],[DR,ST(t)]);n.dispatch("SET_OPTIONS",{options:e});var r=function(){document.hidden||n.dispatch("KICK")};document.addEventListener("visibilitychange",r);var i=un();n.dispatch("SET_UID",{id:i});var o=null,a=CA(n,{id:i}),s=!1,l={_read:function(){s||a._read()},_write:function(p){var g=n.processActionQueue().filter(function(m){return!/^SET_/.test(m.type)});s&&!g.length||(f(g),(s=a._write(p,g))&&n.processDispatchQueue(),g.find(function(m){return m.type==="EDIT_DESTROY"})&&d())}},c=function(p){return function(g){var m={type:p};return g&&(g.hasOwnProperty("error")&&(m.error=lo(g.error)?te({},g.error):g.error||null),g.hasOwnProperty("output")&&(m.output=g.output),g.hasOwnProperty("image")&&(m.image=g.image),g.hasOwnProperty("source")&&(m.source=g.source),g.hasOwnProperty("state")&&(m.state=g.state)),m}},u={DID_CONFIRM:c("confirm"),DID_CANCEL:c("cancel"),DID_REQUEST_LOAD_IMAGE:c("loadstart"),DID_LOAD_IMAGE:c("load"),DID_LOAD_IMAGE_ERROR:c("loaderror"),DID_SHOW_IMAGE:c("ready"),DID_UPDATE:c("update"),DID_CLOSE:c("close"),DID_DESTROY:c("destroy"),DID_INIT:c("init")},f=function(p){p.length&&p.forEach(function(g){if(u[g.type]){var m=u[g.type];(Array.isArray(m)?m:[m]).forEach(function(y){setTimeout(function(){(function(_){var E=te({doka:h},_);delete E.type,a&&a.element.dispatchEvent(new CustomEvent("Doka:".concat(_.type),{detail:E,bubbles:!0,cancelable:!0,composed:!0}));var v=[];_.hasOwnProperty("error")&&v.push(_.error);var T=["type","error"];Object.keys(_).filter(function(O){return!T.includes(O)}).forEach(function(O){return v.push(_[O])}),h.fire.apply(h,[_.type].concat(v));var R=n.query("GET_ON".concat(_.type.toUpperCase()));R&&R.apply(void 0,v)})(y(g.data))},0)})}})},d=function(){h.fire("destroy",a.element),document.removeEventListener("visibilitychange",r),a._destroy(),n.dispatch("DID_DESTROY")},h=te({},gc(),l,OT(n,t),{setOptions:function(p){return n.dispatch("SET_OPTIONS",{options:p})},setData:function(p){n.dispatch("SET_DATA",p)},getData:function(p){return new Promise(function(g,m){n.dispatch("GET_DATA",te({},p,{success:g,failure:m}))})},open:function(p){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(m,y){p&&n.dispatch("REQUEST_LOAD_IMAGE",{source:p,options:g,success:m,failure:y,resolveOnConfirm:!!g&&g.resolveOnConfirm})})},edit:function(p,g){return h.open(p,te({},g,{resolveOnConfirm:!0}))},save:function(p){return new Promise(function(g,m){n.dispatch("GET_DATA",te({},p,{success:g,failure:m}))})},clear:function(){return n.dispatch("REQUEST_REMOVE_IMAGE")},close:function(){return n.dispatch("EDIT_CLOSE")},interact:function(p,g){p==="scale"&&n.dispatch("CROP_IMAGE_RESIZE_SET",{value:g})},interactEnd:function(p){p==="scale"&&n.dispatch("CROP_IMAGE_RESIZE_RELEASE")},destroy:d,insertBefore:function(p){Ju(a.element,p)},insertAfter:function(p){ef(a.element,p)},appendTo:function(p){p.appendChild(a.element)},replaceElement:function(p){Ju(a.element,p),p.parentNode.removeChild(p),o=p},restoreElement:function(){o&&(ef(o,a.element),a.element.parentNode.removeChild(a.element),o=null)},isAttachedTo:function(p){return!!a&&(a.element===p||o===p)},element:{get:function(){return a?a.element:null}}});return n.dispatch("DID_INIT"),_r(h)},_g=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=ha(),n={};return $e(t,function(r,i){ct(i)||(n[r]=i[0])}),MA(te({},n,e))},LA=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"-";return e.replace(new RegExp("".concat(t,"."),"g"),function(n){return n.charAt(1).toUpperCase()})},PA=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},DA=function(e){return LA(e.replace(/^data-/,""))},NA=function e(t,n){$e(n,function(r,i){$e(t,function(o,a){var s=new RegExp(r);if(s.test(o)&&(delete t[o],i!==!1))if(ct(i))t[i]=a;else{var l=i.group;lo(i)&&!t[l]&&(t[l]={}),t[l][PA(o.replace(s,""))]=a}}),i.mapping&&e(t[i.group],i.mapping)})},GA=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[];$e(e.attributes,function(i){return n.push(e.attributes[i])});var r=n.filter(function(i){return i.name}).reduce(function(i,o){var a=co(e,o.name);return i[DA(o.name)]=a===o.name||a,i},{});return NA(r,t),r},UA=function(e){var t=te({},arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),n=GA(e,{"^class$":"className"});Object.keys(n).forEach(function(i){lo(n[i])?(lo(t[i])||(t[i]={}),Object.assign(t[i],n[i])):t[i]=n[i]}),e.nodeName!=="CANVAS"&&e.nodeName!=="IMG"||(t.src=e.dataset.dokaSrc?e.dataset.dokaSrc:e);var r=_g(t);return r.replaceElement(e),r},BA=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return q1(t[0])?UA.apply(void 0,t):_g.apply(void 0,tn(t.filter(function(r){return r})))},VA=function(e,t,n){Object.getOwnPropertyNames(e).filter(function(r){return!n.includes(r)}).forEach(function(r){return Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})},FA=["fire","_read","_write"],Zf=function(e){var t={};return VA(e,t,FA),t},kA=function(){return Object.prototype.toString.call(window.operamini)==="[object OperaMini]"},$A=function(){return"Promise"in window},HA=function(){return"slice"in Blob.prototype},zA=function(){return"URL"in window&&"createObjectURL"in window.URL},qA=function(){return"visibilityState"in document},WA=function(){return"performance"in window},Kf=function(){var e=Rr()&&!kA()&&qA()&&$A()&&HA()&&zA()&&WA();return function(){return e}}(),Pn={apps:[]},YA="doka",Ei=function(){},Qf={},na=Ei,$s=Ei,Jf=Ei,ed=Ei,td=Ei,nd=Ei;if(Kf()){hT(function(){Pn.apps.forEach(function(e){return e._read()})},function(e){Pn.apps.forEach(function(t){return t._write(e)})});var rd=function e(){document.dispatchEvent(new CustomEvent("doka:loaded",{detail:{supported:Kf,create:na,destroy:$s,parse:Jf,find:ed,setOptions:nd}})),document.removeEventListener("DOMContentLoaded",e)};document.readyState!=="loading"?setTimeout(function(){return rd()},0):document.addEventListener("DOMContentLoaded",rd);var jA=function(){return $e(ha(),function(e,t){Qf[e]=t[1]})};Qf={},jA(),na=function(){var e=BA.apply(void 0,arguments);return e.on("destroy",$s),Pn.apps.push(e),Zf(e)},$s=function(e){var t=Pn.apps.findIndex(function(n){return n.isAttachedTo(e)});return t>=0&&(Pn.apps.splice(t,1)[0].restoreElement(),!0)},Jf=function(e){return Array.from(e.querySelectorAll(".".concat(YA))).filter(function(t){return!Pn.apps.find(function(n){return n.isAttachedTo(t)})}).map(function(t){return na(t)})},ed=function(e){var t=Pn.apps.find(function(n){return n.isAttachedTo(e)});return t?Zf(t):null},td=function(){var e={};return $e(ha(),function(t,n){e[t]=n[0]}),e},nd=function(e){return lo(e)&&(Pn.apps.forEach(function(t){t.setOptions(e)}),xT(e)),td()}}/*!
 * FilePond 4.30.4
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const XA=e=>e instanceof HTMLElement,ZA=(e,t=[],n=[])=>{const r={...e},i=[],o=[],a=()=>({...r}),s=()=>{const p=[...i];return i.length=0,p},l=()=>{const p=[...o];o.length=0,p.forEach(({type:g,data:m})=>{c(g,m)})},c=(p,g,m)=>{if(m&&!document.hidden){o.push({type:p,data:g});return}h[p]&&h[p](g),i.push({type:p,data:g})},u=(p,...g)=>d[p]?d[p](...g):null,f={getState:a,processActionQueue:s,processDispatchQueue:l,dispatch:c,query:u};let d={};t.forEach(p=>{d={...p(r),...d}});let h={};return n.forEach(p=>{h={...p(c,u,r),...h}}),f},KA=(e,t,n)=>{if(typeof n=="function"){e[t]=n;return}Object.defineProperty(e,t,{...n})},De=(e,t)=>{for(const n in e)!e.hasOwnProperty(n)||t(n,e[n])},Yn=e=>{const t={};return De(e,n=>{KA(t,n,e[n])}),t},ke=(e,t,n=null)=>{if(n===null)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,n)},QA="http://www.w3.org/2000/svg",JA=["svg","path"],id=e=>JA.includes(e),ya=(e,t,n={})=>{typeof t=="object"&&(n=t,t=null);const r=id(e)?document.createElementNS(QA,e):document.createElement(e);return t&&(id(e)?ke(r,"class",t):r.className=t),De(n,(i,o)=>{ke(r,i,o)}),r},eO=e=>(t,n)=>{typeof n<"u"&&e.children[n]?e.insertBefore(t,e.children[n]):e.appendChild(t)},tO=(e,t)=>(n,r)=>(typeof r<"u"?t.splice(r,0,n):t.push(n),n),nO=(e,t)=>n=>(t.splice(t.indexOf(n),1),n.element.parentNode&&e.removeChild(n.element),n),rO=(()=>typeof window<"u"&&typeof window.document<"u")(),yg=()=>rO,iO=yg()?ya("svg"):{},oO="children"in iO?e=>e.children.length:e=>e.childNodes.length,vg=(e,t,n,r)=>{const i=n[0]||e.left,o=n[1]||e.top,a=i+e.width,s=o+e.height*(r[1]||1),l={element:{...e},inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:i,top:o,right:a,bottom:s}};return t.filter(c=>!c.isRectIgnored()).map(c=>c.rect).forEach(c=>{od(l.inner,{...c.inner}),od(l.outer,{...c.outer})}),ad(l.inner),l.outer.bottom+=l.element.marginBottom,l.outer.right+=l.element.marginRight,ad(l.outer),l},od=(e,t)=>{t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},ad=e=>{e.width=e.right-e.left,e.height=e.bottom-e.top},hr=e=>typeof e=="number",aO=(e,t,n,r=.001)=>Math.abs(e-t)<r&&Math.abs(n)<r,sO=({stiffness:e=.5,damping:t=.75,mass:n=10}={})=>{let r=null,i=null,o=0,a=!1;const c=Yn({interpolate:(u,f)=>{if(a)return;if(!(hr(r)&&hr(i))){a=!0,o=0;return}o+=-(i-r)*e/n,i+=o,o*=t,aO(i,r,o)||f?(i=r,o=0,a=!0,c.onupdate(i),c.oncomplete(i)):c.onupdate(i)},target:{set:u=>{if(hr(u)&&!hr(i)&&(i=u),r===null&&(r=u,i=u),r=u,i===r||typeof r>"u"){a=!0,o=0,c.onupdate(i),c.oncomplete(i);return}a=!1},get:()=>r},resting:{get:()=>a},onupdate:u=>{},oncomplete:u=>{}});return c},lO=e=>e<.5?2*e*e:-1+(4-2*e)*e,cO=({duration:e=500,easing:t=lO,delay:n=0}={})=>{let r=null,i,o,a=!0,s=!1,l=null;const u=Yn({interpolate:(f,d)=>{a||l===null||(r===null&&(r=f),!(f-r<n)&&(i=f-r-n,i>=e||d?(i=1,o=s?0:1,u.onupdate(o*l),u.oncomplete(o*l),a=!0):(o=i/e,u.onupdate((i>=0?t(s?1-o:o):0)*l))))},target:{get:()=>s?0:l,set:f=>{if(l===null){l=f,u.onupdate(f),u.oncomplete(f);return}f<l?(l=1,s=!0):(s=!1,l=f),a=!1,r=null}},resting:{get:()=>a},onupdate:f=>{},oncomplete:f=>{}});return u},sd={spring:sO,tween:cO},uO=(e,t,n)=>{const r=e[t]&&typeof e[t][n]=="object"?e[t][n]:e[t]||e,i=typeof r=="string"?r:r.type,o=typeof r=="object"?{...r}:{};return sd[i]?sd[i](o):null},wc=(e,t,n,r=!1)=>{t=Array.isArray(t)?t:[t],t.forEach(i=>{e.forEach(o=>{let a=o,s=()=>n[o],l=c=>n[o]=c;typeof o=="object"&&(a=o.key,s=o.getter||s,l=o.setter||l),!(i[a]&&!r)&&(i[a]={get:s,set:l})})})},fO=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r})=>{const i={...t},o=[];return De(e,(a,s)=>{const l=uO(s);if(!l)return;l.onupdate=u=>{t[a]=u},l.target=i[a],wc([{key:a,setter:u=>{l.target!==u&&(l.target=u)},getter:()=>t[a]}],[n,r],t,!0),o.push(l)}),{write:a=>{let s=document.hidden,l=!0;return o.forEach(c=>{c.resting||(l=!1),c.interpolate(a,s)}),l},destroy:()=>{}}},dO=e=>(t,n)=>{e.addEventListener(t,n)},hO=e=>(t,n)=>{e.removeEventListener(t,n)},pO=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r,viewState:i,view:o})=>{const a=[],s=dO(o.element),l=hO(o.element);return r.on=(c,u)=>{a.push({type:c,fn:u}),s(c,u)},r.off=(c,u)=>{a.splice(a.findIndex(f=>f.type===c&&f.fn===u),1),l(c,u)},{write:()=>!0,destroy:()=>{a.forEach(c=>{l(c.type,c.fn)})}}},gO=({mixinConfig:e,viewProps:t,viewExternalAPI:n})=>{wc(e,n,t)},ot=e=>e!=null,mO={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},EO=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r,view:i})=>{const o={...t},a={};wc(e,[n,r],t);const s=()=>[t.translateX||0,t.translateY||0],l=()=>[t.scaleX||0,t.scaleY||0],c=()=>i.rect?vg(i.rect,i.childViews,s(),l()):null;return n.rect={get:c},r.rect={get:c},e.forEach(u=>{t[u]=typeof o[u]>"u"?mO[u]:o[u]}),{write:()=>{if(!!_O(a,t))return yO(i.element,t),Object.assign(a,{...t}),!0},destroy:()=>{}}},_O=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const n in t)if(t[n]!==e[n])return!0;return!1},yO=(e,{opacity:t,perspective:n,translateX:r,translateY:i,scaleX:o,scaleY:a,rotateX:s,rotateY:l,rotateZ:c,originX:u,originY:f,width:d,height:h})=>{let p="",g="";(ot(u)||ot(f))&&(g+=`transform-origin: ${u||0}px ${f||0}px;`),ot(n)&&(p+=`perspective(${n}px) `),(ot(r)||ot(i))&&(p+=`translate3d(${r||0}px, ${i||0}px, 0) `),(ot(o)||ot(a))&&(p+=`scale3d(${ot(o)?o:1}, ${ot(a)?a:1}, 1) `),ot(c)&&(p+=`rotateZ(${c}rad) `),ot(s)&&(p+=`rotateX(${s}rad) `),ot(l)&&(p+=`rotateY(${l}rad) `),p.length&&(g+=`transform:${p};`),ot(t)&&(g+=`opacity:${t};`,t===0&&(g+="visibility:hidden;"),t<1&&(g+="pointer-events:none;")),ot(h)&&(g+=`height:${h}px;`),ot(d)&&(g+=`width:${d}px;`);const m=e.elementCurrentStyle||"";(g.length!==m.length||g!==m)&&(e.style.cssText=g,e.elementCurrentStyle=g)},vO={styles:EO,listeners:pO,animations:fO,apis:gO},ld=(e={},t={},n={})=>(t.layoutCalculated||(e.paddingTop=parseInt(n.paddingTop,10)||0,e.marginTop=parseInt(n.marginTop,10)||0,e.marginRight=parseInt(n.marginRight,10)||0,e.marginBottom=parseInt(n.marginBottom,10)||0,e.marginLeft=parseInt(n.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=t.offsetParent===null,e),He=({tag:e="div",name:t=null,attributes:n={},read:r=()=>{},write:i=()=>{},create:o=()=>{},destroy:a=()=>{},filterFrameActionsForChild:s=(h,p)=>p,didCreateView:l=()=>{},didWriteView:c=()=>{},ignoreRect:u=!1,ignoreRectUpdate:f=!1,mixins:d=[]}={})=>(h,p={})=>{const g=ya(e,`filepond--${t}`,n),m=window.getComputedStyle(g,null),y=ld();let _=null,E=!1;const v=[],T=[],R={},O={},w=[i],S=[r],M=[a],P=()=>g,C=()=>v.concat(),z=()=>R,L=D=>($,X)=>$(D,X),q=()=>_||(_=vg(y,v,[0,0],[1,1]),_),x=()=>m,b=()=>{_=null,v.forEach(X=>X._read()),!(f&&y.width&&y.height)&&ld(y,g,m);const $={root:de,props:p,rect:y};S.forEach(X=>X($))},N=(D,$,X)=>{let ne=$.length===0;return w.forEach(ie=>{ie({props:p,root:de,actions:$,timestamp:D,shouldOptimize:X})===!1&&(ne=!1)}),T.forEach(ie=>{ie.write(D)===!1&&(ne=!1)}),v.filter(ie=>!!ie.element.parentNode).forEach(ie=>{ie._write(D,s(ie,$),X)||(ne=!1)}),v.forEach((ie,ae)=>{ie.element.parentNode||(de.appendChild(ie.element,ae),ie._read(),ie._write(D,s(ie,$),X),ne=!1)}),E=ne,c({props:p,root:de,actions:$,timestamp:D}),ne},H=()=>{T.forEach(D=>D.destroy()),M.forEach(D=>{D({root:de,props:p})}),v.forEach(D=>D._destroy())},Q={element:{get:P},style:{get:x},childViews:{get:C}},Y={...Q,rect:{get:q},ref:{get:z},is:D=>t===D,appendChild:eO(g),createChildView:L(h),linkView:D=>(v.push(D),D),unlinkView:D=>{v.splice(v.indexOf(D),1)},appendChildView:tO(g,v),removeChildView:nO(g,v),registerWriter:D=>w.push(D),registerReader:D=>S.push(D),registerDestroyer:D=>M.push(D),invalidateLayout:()=>g.layoutCalculated=!1,dispatch:h.dispatch,query:h.query},oe={element:{get:P},childViews:{get:C},rect:{get:q},resting:{get:()=>E},isRectIgnored:()=>u,_read:b,_write:N,_destroy:H},ce={...Q,rect:{get:()=>y}};Object.keys(d).sort((D,$)=>D==="styles"?1:$==="styles"?-1:0).forEach(D=>{const $=vO[D]({mixinConfig:d[D],viewProps:p,viewState:O,viewInternalAPI:Y,viewExternalAPI:oe,view:Yn(ce)});$&&T.push($)});const de=Yn(Y);o({root:de,props:p});const B=oO(g);return v.forEach((D,$)=>{de.appendChild(D.element,B+$)}),l(de),Yn(oe)},TO=(e,t,n=60)=>{const r="__framePainter";if(window[r]){window[r].readers.push(e),window[r].writers.push(t);return}window[r]={readers:[e],writers:[t]};const i=window[r],o=1e3/n;let a=null,s=null,l=null,c=null;const u=()=>{document.hidden?(l=()=>window.setTimeout(()=>f(performance.now()),o),c=()=>window.clearTimeout(s)):(l=()=>window.requestAnimationFrame(f),c=()=>window.cancelAnimationFrame(s))};document.addEventListener("visibilitychange",()=>{c&&c(),u(),f(performance.now())});const f=d=>{s=l(f),a||(a=d);const h=d-a;h<=o||(a=d-h%o,i.readers.forEach(p=>p()),i.writers.forEach(p=>p(d)))};return u(),f(performance.now()),{pause:()=>{c(s)}}},dt=(e,t)=>({root:n,props:r,actions:i=[],timestamp:o,shouldOptimize:a})=>{i.filter(s=>e[s.type]).forEach(s=>e[s.type]({root:n,props:r,action:s.data,timestamp:o,shouldOptimize:a})),t&&t({root:n,props:r,actions:i,timestamp:o,shouldOptimize:a})},cd=(e,t)=>t.parentNode.insertBefore(e,t),ud=(e,t)=>t.parentNode.insertBefore(e,t.nextSibling),Za=e=>Array.isArray(e),Rn=e=>e==null,IO=e=>e.trim(),Ka=e=>""+e,RO=(e,t=",")=>Rn(e)?[]:Za(e)?e:Ka(e).split(t).map(IO).filter(n=>n.length),Tg=e=>typeof e=="boolean",Ig=e=>Tg(e)?e:e==="true",ft=e=>typeof e=="string",Rg=e=>hr(e)?e:ft(e)?Ka(e).replace(/[a-z]+/gi,""):0,ra=e=>parseInt(Rg(e),10),fd=e=>parseFloat(Rg(e)),_i=e=>hr(e)&&isFinite(e)&&Math.floor(e)===e,dd=(e,t=1e3)=>{if(_i(e))return e;let n=Ka(e).trim();return/MB$/i.test(n)?(n=n.replace(/MB$i/,"").trim(),ra(n)*t*t):/KB/i.test(n)?(n=n.replace(/KB$i/,"").trim(),ra(n)*t):ra(n)},pr=e=>typeof e=="function",wO=e=>{let t=self,n=e.split("."),r=null;for(;r=n.shift();)if(t=t[r],!t)return null;return t},hd={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},AO=e=>{const t={};return t.url=ft(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},De(hd,n=>{t[n]=OO(n,e[n],hd[n],t.timeout,t.headers)}),t.process=e.process||ft(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t},OO=(e,t,n,r,i)=>{if(t===null)return null;if(typeof t=="function")return t;const o={url:n==="GET"||n==="PATCH"?`?${e}=`:"",method:n,headers:i,withCredentials:!1,timeout:r,onload:null,ondata:null,onerror:null};if(ft(t))return o.url=t,o;if(Object.assign(o,t),ft(o.headers)){const a=o.headers.split(/:(.+)/);o.headers={header:a[0],value:a[1]}}return o.withCredentials=Ig(o.withCredentials),o},SO=e=>AO(e),bO=e=>e===null,je=e=>typeof e=="object"&&e!==null,CO=e=>je(e)&&ft(e.url)&&je(e.process)&&je(e.revert)&&je(e.restore)&&je(e.fetch),Sl=e=>Za(e)?"array":bO(e)?"null":_i(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":CO(e)?"api":typeof e,xO=e=>e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),MO={array:RO,boolean:Ig,int:e=>Sl(e)==="bytes"?dd(e):ra(e),number:fd,float:fd,bytes:dd,string:e=>pr(e)?e:Ka(e),function:e=>wO(e),serverapi:SO,object:e=>{try{return JSON.parse(xO(e))}catch{return null}}},LO=(e,t)=>MO[t](e),wg=(e,t,n)=>{if(e===t)return e;let r=Sl(e);if(r!==n){const i=LO(e,n);if(r=Sl(i),i===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${n}"`;e=i}return e},PO=(e,t)=>{let n=e;return{enumerable:!0,get:()=>n,set:r=>{n=wg(r,e,t)}}},DO=e=>{const t={};return De(e,n=>{const r=e[n];t[n]=PO(r[0],r[1])}),Yn(t)},NO=e=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:DO(e)}),Qa=(e,t="-")=>e.split(/(?=[A-Z])/).map(n=>n.toLowerCase()).join(t),GO=(e,t)=>{const n={};return De(t,r=>{n[r]={get:()=>e.getState().options[r],set:i=>{e.dispatch(`SET_${Qa(r,"_").toUpperCase()}`,{value:i})}}}),n},UO=e=>(t,n,r)=>{const i={};return De(e,o=>{const a=Qa(o,"_").toUpperCase();i[`SET_${a}`]=s=>{try{r.options[o]=s.value}catch{}t(`DID_SET_${a}`,{value:r.options[o]})}}),i},BO=e=>t=>{const n={};return De(e,r=>{n[`GET_${Qa(r,"_").toUpperCase()}`]=i=>t.options[r]}),n},Dt={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},Ac=()=>Math.random().toString(36).substring(2,11),Oc=(e,t)=>e.splice(t,1),VO=(e,t)=>{t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)},Ja=()=>{const e=[],t=(r,i)=>{Oc(e,e.findIndex(o=>o.event===r&&(o.cb===i||!i)))},n=(r,i,o)=>{e.filter(a=>a.event===r).map(a=>a.cb).forEach(a=>VO(()=>a(...i),o))};return{fireSync:(r,...i)=>{n(r,i,!0)},fire:(r,...i)=>{n(r,i,!1)},on:(r,i)=>{e.push({event:r,cb:i})},onOnce:(r,i)=>{e.push({event:r,cb:(...o)=>{t(r,i),i(...o)}})},off:t}},Ag=(e,t,n)=>{Object.getOwnPropertyNames(e).filter(r=>!n.includes(r)).forEach(r=>Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r)))},FO=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],gt=e=>{const t={};return Ag(e,t,FO),t},kO=e=>{e.forEach((t,n)=>{t.released&&Oc(e,n)})},Ee={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},We={INPUT:1,LIMBO:2,LOCAL:3},Og=e=>/[^0-9]+/.exec(e),Sg=()=>Og(1.1 .toLocaleString())[0],$O=()=>{const e=Sg(),t=1e3 .toLocaleString(),n=1e3 .toString();return t!==n?Og(t)[0]:e==="."?",":"."},j={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},Sc=[],Bt=(e,t,n)=>new Promise((r,i)=>{const o=Sc.filter(s=>s.key===e).map(s=>s.cb);if(o.length===0){r(t);return}const a=o.shift();o.reduce((s,l)=>s.then(c=>l(c,n)),a(t,n)).then(s=>r(s)).catch(s=>i(s))}),Or=(e,t,n)=>Sc.filter(r=>r.key===e).map(r=>r.cb(t,n)),HO=(e,t)=>Sc.push({key:e,cb:t}),zO=e=>Object.assign(Gr,e),va=()=>({...Gr}),qO=e=>{De(e,(t,n)=>{!Gr[t]||(Gr[t][0]=wg(n,Gr[t][0],Gr[t][1]))})},Gr={id:[null,j.STRING],name:["filepond",j.STRING],disabled:[!1,j.BOOLEAN],className:[null,j.STRING],required:[!1,j.BOOLEAN],captureMethod:[null,j.STRING],allowSyncAcceptAttribute:[!0,j.BOOLEAN],allowDrop:[!0,j.BOOLEAN],allowBrowse:[!0,j.BOOLEAN],allowPaste:[!0,j.BOOLEAN],allowMultiple:[!1,j.BOOLEAN],allowReplace:[!0,j.BOOLEAN],allowRevert:[!0,j.BOOLEAN],allowRemove:[!0,j.BOOLEAN],allowProcess:[!0,j.BOOLEAN],allowReorder:[!1,j.BOOLEAN],allowDirectoriesOnly:[!1,j.BOOLEAN],storeAsFile:[!1,j.BOOLEAN],forceRevert:[!1,j.BOOLEAN],maxFiles:[null,j.INT],checkValidity:[!1,j.BOOLEAN],itemInsertLocationFreedom:[!0,j.BOOLEAN],itemInsertLocation:["before",j.STRING],itemInsertInterval:[75,j.INT],dropOnPage:[!1,j.BOOLEAN],dropOnElement:[!0,j.BOOLEAN],dropValidation:[!1,j.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],j.ARRAY],instantUpload:[!0,j.BOOLEAN],maxParallelUploads:[2,j.INT],allowMinimumUploadDuration:[!0,j.BOOLEAN],chunkUploads:[!1,j.BOOLEAN],chunkForce:[!1,j.BOOLEAN],chunkSize:[5e6,j.INT],chunkRetryDelays:[[500,1e3,3e3],j.ARRAY],server:[null,j.SERVER_API],fileSizeBase:[1e3,j.INT],labelFileSizeBytes:["bytes",j.STRING],labelFileSizeKilobytes:["KB",j.STRING],labelFileSizeMegabytes:["MB",j.STRING],labelFileSizeGigabytes:["GB",j.STRING],labelDecimalSeparator:[Sg(),j.STRING],labelThousandsSeparator:[$O(),j.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',j.STRING],labelInvalidField:["Field contains invalid files",j.STRING],labelFileWaitingForSize:["Waiting for size",j.STRING],labelFileSizeNotAvailable:["Size not available",j.STRING],labelFileCountSingular:["file in list",j.STRING],labelFileCountPlural:["files in list",j.STRING],labelFileLoading:["Loading",j.STRING],labelFileAdded:["Added",j.STRING],labelFileLoadError:["Error during load",j.STRING],labelFileRemoved:["Removed",j.STRING],labelFileRemoveError:["Error during remove",j.STRING],labelFileProcessing:["Uploading",j.STRING],labelFileProcessingComplete:["Upload complete",j.STRING],labelFileProcessingAborted:["Upload cancelled",j.STRING],labelFileProcessingError:["Error during upload",j.STRING],labelFileProcessingRevertError:["Error during revert",j.STRING],labelTapToCancel:["tap to cancel",j.STRING],labelTapToRetry:["tap to retry",j.STRING],labelTapToUndo:["tap to undo",j.STRING],labelButtonRemoveItem:["Remove",j.STRING],labelButtonAbortItemLoad:["Abort",j.STRING],labelButtonRetryItemLoad:["Retry",j.STRING],labelButtonAbortItemProcessing:["Cancel",j.STRING],labelButtonUndoItemProcessing:["Undo",j.STRING],labelButtonRetryItemProcessing:["Retry",j.STRING],labelButtonProcessItem:["Upload",j.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',j.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',j.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',j.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',j.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',j.STRING],oninit:[null,j.FUNCTION],onwarning:[null,j.FUNCTION],onerror:[null,j.FUNCTION],onactivatefile:[null,j.FUNCTION],oninitfile:[null,j.FUNCTION],onaddfilestart:[null,j.FUNCTION],onaddfileprogress:[null,j.FUNCTION],onaddfile:[null,j.FUNCTION],onprocessfilestart:[null,j.FUNCTION],onprocessfileprogress:[null,j.FUNCTION],onprocessfileabort:[null,j.FUNCTION],onprocessfilerevert:[null,j.FUNCTION],onprocessfile:[null,j.FUNCTION],onprocessfiles:[null,j.FUNCTION],onremovefile:[null,j.FUNCTION],onpreparefile:[null,j.FUNCTION],onupdatefiles:[null,j.FUNCTION],onreorderfiles:[null,j.FUNCTION],beforeDropFile:[null,j.FUNCTION],beforeAddFile:[null,j.FUNCTION],beforeRemoveFile:[null,j.FUNCTION],beforePrepareFile:[null,j.FUNCTION],stylePanelLayout:[null,j.STRING],stylePanelAspectRatio:[null,j.STRING],styleItemPanelAspectRatio:[null,j.STRING],styleButtonRemoveItemPosition:["left",j.STRING],styleButtonProcessItemPosition:["right",j.STRING],styleLoadIndicatorPosition:["right",j.STRING],styleProgressIndicatorPosition:["right",j.STRING],styleButtonRemoveItemAlign:[!1,j.BOOLEAN],files:[[],j.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],j.ARRAY]},gr=(e,t)=>Rn(t)?e[0]||null:_i(t)?e[t]||null:(typeof t=="object"&&(t=t.id),e.find(n=>n.id===t)||null),bg=e=>{if(Rn(e))return e;if(/:/.test(e)){const t=e.split(":");return t[1]/t[0]}return parseFloat(e)},Ft=e=>e.filter(t=>!t.archived),WO={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let Bo=null;const YO=()=>{if(Bo===null)try{const e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));const t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,Bo=t.files.length===1}catch{Bo=!1}return Bo},jO=[Ee.LOAD_ERROR,Ee.PROCESSING_ERROR,Ee.PROCESSING_REVERT_ERROR],XO=[Ee.LOADING,Ee.PROCESSING,Ee.PROCESSING_QUEUED,Ee.INIT],ZO=[Ee.PROCESSING_COMPLETE],KO=e=>jO.includes(e.status),QO=e=>XO.includes(e.status),JO=e=>ZO.includes(e.status),pd=e=>je(e.options.server)&&(je(e.options.server.process)||pr(e.options.server.process)),eS=e=>({GET_STATUS:()=>{const t=Ft(e.items),{EMPTY:n,ERROR:r,BUSY:i,IDLE:o,READY:a}=WO;return t.length===0?n:t.some(KO)?r:t.some(QO)?i:t.some(JO)?a:o},GET_ITEM:t=>gr(e.items,t),GET_ACTIVE_ITEM:t=>gr(Ft(e.items),t),GET_ACTIVE_ITEMS:()=>Ft(e.items),GET_ITEMS:()=>e.items,GET_ITEM_NAME:t=>{const n=gr(e.items,t);return n?n.filename:null},GET_ITEM_SIZE:t=>{const n=gr(e.items,t);return n?n.fileSize:null},GET_STYLES:()=>Object.keys(e.options).filter(t=>/^style/.test(t)).map(t=>({name:t,value:e.options[t]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(e.options.stylePanelLayout)?1:bg(e.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>e.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:t=>Ft(e.items).filter(n=>n.status===t),GET_TOTAL_ITEMS:()=>Ft(e.items).length,SHOULD_UPDATE_FILE_INPUT:()=>e.options.storeAsFile&&YO()&&!pd(e),IS_ASYNC:()=>pd(e),GET_FILE_SIZE_LABELS:t=>({labelBytes:t("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:t("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:t("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:t("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),tS=e=>{const t=Ft(e.items).length;if(!e.options.allowMultiple)return t===0;const n=e.options.maxFiles;return n===null||t<n},Cg=(e,t,n)=>Math.max(Math.min(n,e),t),nS=(e,t,n)=>e.splice(t,0,n),rS=(e,t,n)=>Rn(t)?null:typeof n>"u"?(e.push(t),t):(n=Cg(n,0,e.length),nS(e,n,t),t),bl=e=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e),Io=e=>e.split("/").pop().split("?").shift(),es=e=>e.split(".").pop(),iS=e=>{if(typeof e!="string")return"";const t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?t==="jpeg"?"jpg":t:""},Gi=(e,t="")=>(t+e).slice(-t.length),xg=(e=new Date)=>`${e.getFullYear()}-${Gi(e.getMonth()+1,"00")}-${Gi(e.getDate(),"00")}_${Gi(e.getHours(),"00")}-${Gi(e.getMinutes(),"00")}-${Gi(e.getSeconds(),"00")}`,si=(e,t,n=null,r=null)=>{const i=typeof n=="string"?e.slice(0,e.size,n):e.slice(0,e.size,e.type);return i.lastModifiedDate=new Date,e._relativePath&&(i._relativePath=e._relativePath),ft(t)||(t=xg()),t&&r===null&&es(t)?i.name=t:(r=r||iS(i.type),i.name=t+(r?"."+r:"")),i},oS=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,Mg=(e,t)=>{const n=oS();if(n){const r=new n;return r.append(e),r.getBlob(t)}return new Blob([e],{type:t})},aS=(e,t)=>{const n=new ArrayBuffer(e.length),r=new Uint8Array(n);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return Mg(n,t)},Lg=e=>(/^data:(.+);/.exec(e)||[])[1]||null,sS=e=>e.split(",")[1].replace(/\s/g,""),lS=e=>atob(sS(e)),cS=e=>{const t=Lg(e),n=lS(e);return aS(n,t)},uS=(e,t,n)=>si(cS(e),t,null,n),fS=e=>{if(!/^content-disposition:/i.test(e))return null;const t=e.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return t.length?decodeURI(t[t.length-1]):null},dS=e=>{if(/content-length:/i.test(e)){const t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},hS=e=>/x-content-transfer-id:/i.test(e)&&(e.split(":")[1]||"").trim()||null,bc=e=>{const t={source:null,name:null,size:null},n=e.split(`
`);for(let r of n){const i=fS(r);if(i){t.name=i;continue}const o=dS(r);if(o){t.size=o;continue}const a=hS(r);if(a){t.source=a;continue}}return t},pS=e=>{const t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},n=()=>t.progress,r=()=>{t.request&&t.request.abort&&t.request.abort()},i=()=>{const s=t.source;a.fire("init",s),s instanceof File?a.fire("load",s):s instanceof Blob?a.fire("load",si(s,s.name)):bl(s)?a.fire("load",uS(s)):o(s)},o=s=>{if(!e){a.fire("error",{type:"error",body:"Can't load URL",code:400});return}t.timestamp=Date.now(),t.request=e(s,l=>{t.duration=Date.now()-t.timestamp,t.complete=!0,l instanceof Blob&&(l=si(l,l.name||Io(s))),a.fire("load",l instanceof Blob?l:l?l.body:null)},l=>{a.fire("error",typeof l=="string"?{type:"error",code:0,body:l}:l)},(l,c,u)=>{if(u&&(t.size=u),t.duration=Date.now()-t.timestamp,!l){t.progress=null;return}t.progress=c/u,a.fire("progress",t.progress)},()=>{a.fire("abort")},l=>{const c=bc(typeof l=="string"?l:l.headers);a.fire("meta",{size:t.size||c.size,filename:c.name,source:c.source})})},a={...Ja(),setSource:s=>t.source=s,getProgress:n,abort:r,load:i};return a},gd=e=>/GET|HEAD/.test(e),vr=(e,t,n)=>{const r={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{i=!0,a.abort()}};let i=!1,o=!1;n={method:"POST",headers:{},withCredentials:!1,...n},t=encodeURI(t),gd(n.method)&&e&&(t=`${t}${encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))}`);const a=new XMLHttpRequest,s=gd(n.method)?a:a.upload;return s.onprogress=l=>{i||r.onprogress(l.lengthComputable,l.loaded,l.total)},a.onreadystatechange=()=>{a.readyState<2||a.readyState===4&&a.status===0||o||(o=!0,r.onheaders(a))},a.onload=()=>{a.status>=200&&a.status<300?r.onload(a):r.onerror(a)},a.onerror=()=>r.onerror(a),a.onabort=()=>{i=!0,r.onabort()},a.ontimeout=()=>r.ontimeout(a),a.open(n.method,t,!0),_i(n.timeout)&&(a.timeout=n.timeout),Object.keys(n.headers).forEach(l=>{const c=unescape(encodeURIComponent(n.headers[l]));a.setRequestHeader(l,c)}),n.responseType&&(a.responseType=n.responseType),n.withCredentials&&(a.withCredentials=!0),a.send(e),r},Ge=(e,t,n,r)=>({type:e,code:t,body:n,headers:r}),Tr=e=>t=>{e(Ge("error",0,"Timeout",t.getAllResponseHeaders()))},md=e=>/\?/.test(e),Ki=(...e)=>{let t="";return e.forEach(n=>{t+=md(t)&&md(n)?n.replace(/\?/,"&"):n}),t},Hs=(e="",t)=>{if(typeof t=="function")return t;if(!t||!ft(t.url))return null;const n=t.onload||(i=>i),r=t.onerror||(i=>null);return(i,o,a,s,l,c)=>{const u=vr(i,Ki(e,t.url),{...t,responseType:"blob"});return u.onload=f=>{const d=f.getAllResponseHeaders(),h=bc(d).name||Io(i);o(Ge("load",f.status,t.method==="HEAD"?null:si(n(f.response),h),d))},u.onerror=f=>{a(Ge("error",f.status,r(f.response)||f.statusText,f.getAllResponseHeaders()))},u.onheaders=f=>{c(Ge("headers",f.status,null,f.getAllResponseHeaders()))},u.ontimeout=Tr(a),u.onprogress=s,u.onabort=l,u}},St={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},gS=(e,t,n,r,i,o,a,s,l,c,u)=>{const f=[],{chunkTransferId:d,chunkServer:h,chunkSize:p,chunkRetryDelays:g}=u,m={serverId:d,aborted:!1},y=t.ondata||(L=>L),_=t.onload||((L,q)=>q==="HEAD"?L.getResponseHeader("Upload-Offset"):L.response),E=t.onerror||(L=>null),v=L=>{const q=new FormData;je(i)&&q.append(n,JSON.stringify(i));const x=typeof t.headers=="function"?t.headers(r,i):{...t.headers,"Upload-Length":r.size},b={...t,headers:x},N=vr(y(q),Ki(e,t.url),b);N.onload=H=>L(_(H,b.method)),N.onerror=H=>a(Ge("error",H.status,E(H.response)||H.statusText,H.getAllResponseHeaders())),N.ontimeout=Tr(a)},T=L=>{const q=Ki(e,h.url,m.serverId),b={headers:typeof t.headers=="function"?t.headers(m.serverId):{...t.headers},method:"HEAD"},N=vr(null,q,b);N.onload=H=>L(_(H,b.method)),N.onerror=H=>a(Ge("error",H.status,E(H.response)||H.statusText,H.getAllResponseHeaders())),N.ontimeout=Tr(a)},R=Math.floor(r.size/p);for(let L=0;L<=R;L++){const q=L*p,x=r.slice(q,q+p,"application/offset+octet-stream");f[L]={index:L,size:x.size,offset:q,data:x,file:r,progress:0,retries:[...g],status:St.QUEUED,error:null,request:null,timeout:null}}const O=()=>o(m.serverId),w=L=>L.status===St.QUEUED||L.status===St.ERROR,S=L=>{if(m.aborted)return;if(L=L||f.find(w),!L){f.every(Q=>Q.status===St.COMPLETE)&&O();return}L.status=St.PROCESSING,L.progress=null;const q=h.ondata||(Q=>Q),x=h.onerror||(Q=>null),b=Ki(e,h.url,m.serverId),N=typeof h.headers=="function"?h.headers(L):{...h.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":L.offset,"Upload-Length":r.size,"Upload-Name":r.name},H=L.request=vr(q(L.data),b,{...h,headers:N});H.onload=()=>{L.status=St.COMPLETE,L.request=null,C()},H.onprogress=(Q,Y,oe)=>{L.progress=Q?Y:null,P()},H.onerror=Q=>{L.status=St.ERROR,L.request=null,L.error=x(Q.response)||Q.statusText,M(L)||a(Ge("error",Q.status,x(Q.response)||Q.statusText,Q.getAllResponseHeaders()))},H.ontimeout=Q=>{L.status=St.ERROR,L.request=null,M(L)||Tr(a)(Q)},H.onabort=()=>{L.status=St.QUEUED,L.request=null,l()}},M=L=>L.retries.length===0?!1:(L.status=St.WAITING,clearTimeout(L.timeout),L.timeout=setTimeout(()=>{S(L)},L.retries.shift()),!0),P=()=>{const L=f.reduce((x,b)=>x===null||b.progress===null?null:x+b.progress,0);if(L===null)return s(!1,0,0);const q=f.reduce((x,b)=>x+b.size,0);s(!0,L,q)},C=()=>{f.filter(q=>q.status===St.PROCESSING).length>=1||S()},z=()=>{f.forEach(L=>{clearTimeout(L.timeout),L.request&&L.request.abort()})};return m.serverId?T(L=>{m.aborted||(f.filter(q=>q.offset<L).forEach(q=>{q.status=St.COMPLETE,q.progress=q.size}),C())}):v(L=>{m.aborted||(c(L),m.serverId=L,C())}),{abort:()=>{m.aborted=!0,z()}}},mS=(e,t,n,r)=>(i,o,a,s,l,c,u)=>{if(!i)return;const f=r.chunkUploads,d=f&&i.size>r.chunkSize,h=f&&(d||r.chunkForce);if(i instanceof Blob&&h)return gS(e,t,n,i,o,a,s,l,c,u,r);const p=t.ondata||(T=>T),g=t.onload||(T=>T),m=t.onerror||(T=>null),y=typeof t.headers=="function"?t.headers(i,o)||{}:{...t.headers},_={...t,headers:y};var E=new FormData;je(o)&&E.append(n,JSON.stringify(o)),(i instanceof Blob?[{name:null,file:i}]:i).forEach(T=>{E.append(n,T.file,T.name===null?T.file.name:`${T.name}${T.file.name}`)});const v=vr(p(E),Ki(e,t.url),_);return v.onload=T=>{a(Ge("load",T.status,g(T.response),T.getAllResponseHeaders()))},v.onerror=T=>{s(Ge("error",T.status,m(T.response)||T.statusText,T.getAllResponseHeaders()))},v.ontimeout=Tr(s),v.onprogress=l,v.onabort=c,v},ES=(e="",t,n,r)=>typeof t=="function"?(...i)=>t(n,...i,r):!t||!ft(t.url)?null:mS(e,t,n,r),Ui=(e="",t)=>{if(typeof t=="function")return t;if(!t||!ft(t.url))return(i,o)=>o();const n=t.onload||(i=>i),r=t.onerror||(i=>null);return(i,o,a)=>{const s=vr(i,e+t.url,t);return s.onload=l=>{o(Ge("load",l.status,n(l.response),l.getAllResponseHeaders()))},s.onerror=l=>{a(Ge("error",l.status,r(l.response)||l.statusText,l.getAllResponseHeaders()))},s.ontimeout=Tr(a),s}},Pg=(e=0,t=1)=>e+Math.random()*(t-e),_S=(e,t=1e3,n=0,r=25,i=250)=>{let o=null;const a=Date.now(),s=()=>{let l=Date.now()-a,c=Pg(r,i);l+c>t&&(c=l+c-t);let u=l/t;if(u>=1||document.hidden){e(1);return}e(u),o=setTimeout(s,c)};return t>0&&s(),{clear:()=>{clearTimeout(o)}}},yS=(e,t)=>{const n={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:r}=t,i=(u,f)=>{const d=()=>{n.duration===0||n.progress===null||c.fire("progress",c.getProgress())},h=()=>{n.complete=!0,c.fire("load-perceived",n.response.body)};c.fire("start"),n.timestamp=Date.now(),n.perceivedPerformanceUpdater=_S(p=>{n.perceivedProgress=p,n.perceivedDuration=Date.now()-n.timestamp,d(),n.response&&n.perceivedProgress===1&&!n.complete&&h()},r?Pg(750,1500):0),n.request=e(u,f,p=>{n.response=je(p)?p:{type:"load",code:200,body:`${p}`,headers:{}},n.duration=Date.now()-n.timestamp,n.progress=1,c.fire("load",n.response.body),(!r||r&&n.perceivedProgress===1)&&h()},p=>{n.perceivedPerformanceUpdater.clear(),c.fire("error",je(p)?p:{type:"error",code:0,body:`${p}`})},(p,g,m)=>{n.duration=Date.now()-n.timestamp,n.progress=p?g/m:null,d()},()=>{n.perceivedPerformanceUpdater.clear(),c.fire("abort",n.response?n.response.body:null)},p=>{c.fire("transfer",p)})},o=()=>{!n.request||(n.perceivedPerformanceUpdater.clear(),n.request.abort&&n.request.abort(),n.complete=!0)},a=()=>{o(),n.complete=!1,n.perceivedProgress=0,n.progress=0,n.timestamp=null,n.perceivedDuration=0,n.duration=0,n.request=null,n.response=null},s=r?()=>n.progress?Math.min(n.progress,n.perceivedProgress):null:()=>n.progress||null,l=r?()=>Math.min(n.duration,n.perceivedDuration):()=>n.duration,c={...Ja(),process:i,abort:o,getProgress:s,getDuration:l,reset:a};return c},Dg=e=>e.substring(0,e.lastIndexOf("."))||e,vS=e=>{let t=[e.name,e.size,e.type];return e instanceof Blob||bl(e)?t[0]=e.name||xg():bl(e)?(t[1]=e.length,t[2]=Lg(e)):ft(e)&&(t[0]=Io(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}},li=e=>!!(e instanceof File||e instanceof Blob&&e.name),Ng=e=>{if(!je(e))return e;const t=Za(e)?[]:{};for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n];t[n]=r&&je(r)?Ng(r):r}return t},TS=(e=null,t=null,n=null)=>{const r=Ac(),i={archived:!1,frozen:!1,released:!1,source:null,file:n,serverFileReference:t,transferId:null,processingAborted:!1,status:t?Ee.PROCESSING_COMPLETE:Ee.INIT,activeLoader:null,activeProcessor:null};let o=null;const a={},s=w=>i.status=w,l=(w,...S)=>{i.released||i.frozen||R.fire(w,...S)},c=()=>es(i.file.name),u=()=>i.file.type,f=()=>i.file.size,d=()=>i.file,h=(w,S,M)=>{if(i.source=w,R.fireSync("init"),i.file){R.fireSync("load-skip");return}i.file=vS(w),S.on("init",()=>{l("load-init")}),S.on("meta",P=>{i.file.size=P.size,i.file.filename=P.filename,P.source&&(e=We.LIMBO,i.serverFileReference=P.source,i.status=Ee.PROCESSING_COMPLETE),l("load-meta")}),S.on("progress",P=>{s(Ee.LOADING),l("load-progress",P)}),S.on("error",P=>{s(Ee.LOAD_ERROR),l("load-request-error",P)}),S.on("abort",()=>{s(Ee.INIT),l("load-abort")}),S.on("load",P=>{i.activeLoader=null;const C=L=>{i.file=li(L)?L:i.file,e===We.LIMBO&&i.serverFileReference?s(Ee.PROCESSING_COMPLETE):s(Ee.IDLE),l("load")},z=L=>{i.file=P,l("load-meta"),s(Ee.LOAD_ERROR),l("load-file-error",L)};if(i.serverFileReference){C(P);return}M(P,C,z)}),S.setSource(w),i.activeLoader=S,S.load()},p=()=>{!i.activeLoader||i.activeLoader.load()},g=()=>{if(i.activeLoader){i.activeLoader.abort();return}s(Ee.INIT),l("load-abort")},m=(w,S)=>{if(i.processingAborted){i.processingAborted=!1;return}if(s(Ee.PROCESSING),o=null,!(i.file instanceof Blob)){R.on("load",()=>{m(w,S)});return}w.on("load",C=>{i.transferId=null,i.serverFileReference=C}),w.on("transfer",C=>{i.transferId=C}),w.on("load-perceived",C=>{i.activeProcessor=null,i.transferId=null,i.serverFileReference=C,s(Ee.PROCESSING_COMPLETE),l("process-complete",C)}),w.on("start",()=>{l("process-start")}),w.on("error",C=>{i.activeProcessor=null,s(Ee.PROCESSING_ERROR),l("process-error",C)}),w.on("abort",C=>{i.activeProcessor=null,i.serverFileReference=C,s(Ee.IDLE),l("process-abort"),o&&o()}),w.on("progress",C=>{l("process-progress",C)});const M=C=>{i.archived||w.process(C,{...a})},P=console.error;S(i.file,M,P),i.activeProcessor=w},y=()=>{i.processingAborted=!1,s(Ee.PROCESSING_QUEUED)},_=()=>new Promise(w=>{if(!i.activeProcessor){i.processingAborted=!0,s(Ee.IDLE),l("process-abort"),w();return}o=()=>{w()},i.activeProcessor.abort()}),E=(w,S)=>new Promise((M,P)=>{const C=i.serverFileReference!==null?i.serverFileReference:i.transferId;if(C===null){M();return}w(C,()=>{i.serverFileReference=null,i.transferId=null,M()},z=>{if(!S){M();return}s(Ee.PROCESSING_REVERT_ERROR),l("process-revert-error"),P(z)}),s(Ee.IDLE),l("process-revert")}),v=(w,S,M)=>{const P=w.split("."),C=P[0],z=P.pop();let L=a;P.forEach(q=>L=L[q]),JSON.stringify(L[z])!==JSON.stringify(S)&&(L[z]=S,l("metadata-update",{key:C,value:a[C],silent:M}))},R={id:{get:()=>r},origin:{get:()=>e,set:w=>e=w},serverId:{get:()=>i.serverFileReference},transferId:{get:()=>i.transferId},status:{get:()=>i.status},filename:{get:()=>i.file.name},filenameWithoutExtension:{get:()=>Dg(i.file.name)},fileExtension:{get:c},fileType:{get:u},fileSize:{get:f},file:{get:d},relativePath:{get:()=>i.file._relativePath},source:{get:()=>i.source},getMetadata:w=>Ng(w?a[w]:a),setMetadata:(w,S,M)=>{if(je(w)){const P=w;return Object.keys(P).forEach(C=>{v(C,P[C],S)}),w}return v(w,S,M),S},extend:(w,S)=>O[w]=S,abortLoad:g,retryLoad:p,requestProcessing:y,abortProcessing:_,load:h,process:m,revert:E,...Ja(),freeze:()=>i.frozen=!0,release:()=>i.released=!0,released:{get:()=>i.released},archive:()=>i.archived=!0,archived:{get:()=>i.archived}},O=Yn(R);return O},IS=(e,t)=>Rn(t)?0:ft(t)?e.findIndex(n=>n.id===t):-1,Ed=(e,t)=>{const n=IS(e,t);if(!(n<0))return e[n]||null},_d=(e,t,n,r,i,o)=>{const a=vr(null,e,{method:"GET",responseType:"blob"});return a.onload=s=>{const l=s.getAllResponseHeaders(),c=bc(l).name||Io(e);t(Ge("load",s.status,si(s.response,c),l))},a.onerror=s=>{n(Ge("error",s.status,s.statusText,s.getAllResponseHeaders()))},a.onheaders=s=>{o(Ge("headers",s.status,null,s.getAllResponseHeaders()))},a.ontimeout=Tr(n),a.onprogress=r,a.onabort=i,a},yd=e=>(e.indexOf("//")===0&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),RS=e=>(e.indexOf(":")>-1||e.indexOf("//")>-1)&&yd(location.href)!==yd(e),Vo=e=>(...t)=>pr(e)?e(...t):e,wS=e=>!li(e.file),zs=(e,t)=>{clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout(()=>{e("DID_UPDATE_ITEMS",{items:Ft(t.items)})},0)},vd=(e,...t)=>new Promise(n=>{if(!e)return n(!0);const r=e(...t);if(r==null)return n(!0);if(typeof r=="boolean")return n(r);typeof r.then=="function"&&r.then(n)}),qs=(e,t)=>{e.items.sort((n,r)=>t(gt(n),gt(r)))},bt=(e,t)=>({query:n,success:r=()=>{},failure:i=()=>{},...o}={})=>{const a=gr(e.items,n);if(!a){i({error:Ge("error",0,"Item not found"),file:null});return}t(a,r,i,o||{})},AS=(e,t,n)=>({ABORT_ALL:()=>{Ft(n.items).forEach(r=>{r.freeze(),r.abortLoad(),r.abortProcessing()})},DID_SET_FILES:({value:r=[]})=>{const i=r.map(a=>({source:a.source?a.source:a,options:a.options}));let o=Ft(n.items);o.forEach(a=>{i.find(s=>s.source===a.source||s.source===a.file)||e("REMOVE_ITEM",{query:a,remove:!1})}),o=Ft(n.items),i.forEach((a,s)=>{o.find(l=>l.source===a.source||l.file===a.source)||e("ADD_ITEM",{...a,interactionMethod:Dt.NONE,index:s})})},DID_UPDATE_ITEM_METADATA:({id:r,action:i,change:o})=>{o.silent||(clearTimeout(n.itemUpdateTimeout),n.itemUpdateTimeout=setTimeout(()=>{const a=Ed(n.items,r);if(!t("IS_ASYNC")){Bt("SHOULD_PREPARE_OUTPUT",!1,{item:a,query:t,action:i,change:o}).then(u=>{const f=t("GET_BEFORE_PREPARE_FILE");f&&(u=f(a,u)),u&&e("REQUEST_PREPARE_OUTPUT",{query:r,item:a,success:d=>{e("DID_PREPARE_OUTPUT",{id:r,file:d})}},!0)});return}a.origin===We.LOCAL&&e("DID_LOAD_ITEM",{id:a.id,error:null,serverFileReference:a.source});const s=()=>{setTimeout(()=>{e("REQUEST_ITEM_PROCESSING",{query:r})},32)},l=u=>{a.revert(Ui(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(u?s:()=>{}).catch(()=>{})},c=u=>{a.abortProcessing().then(u?s:()=>{})};if(a.status===Ee.PROCESSING_COMPLETE)return l(n.options.instantUpload);if(a.status===Ee.PROCESSING)return c(n.options.instantUpload);n.options.instantUpload&&s()},0))},MOVE_ITEM:({query:r,index:i})=>{const o=gr(n.items,r);if(!o)return;const a=n.items.indexOf(o);i=Cg(i,0,n.items.length-1),a!==i&&n.items.splice(i,0,n.items.splice(a,1)[0])},SORT:({compare:r})=>{qs(n,r),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:r,index:i,interactionMethod:o,success:a=()=>{},failure:s=()=>{}})=>{let l=i;if(i===-1||typeof i>"u"){const h=t("GET_ITEM_INSERT_LOCATION"),p=t("GET_TOTAL_ITEMS");l=h==="before"?0:p}const c=t("GET_IGNORED_FILES"),u=h=>li(h)?!c.includes(h.name.toLowerCase()):!Rn(h),d=r.filter(u).map(h=>new Promise((p,g)=>{e("ADD_ITEM",{interactionMethod:o,source:h.source||h,success:p,failure:g,index:l++,options:h.options||{}})}));Promise.all(d).then(a).catch(s)},ADD_ITEM:({source:r,index:i=-1,interactionMethod:o,success:a=()=>{},failure:s=()=>{},options:l={}})=>{if(Rn(r)){s({error:Ge("error",0,"No source"),file:null});return}if(li(r)&&n.options.ignoredFiles.includes(r.name.toLowerCase()))return;if(!tS(n)){if(n.options.allowMultiple||!n.options.allowMultiple&&!n.options.allowReplace){const _=Ge("warning",0,"Max files");e("DID_THROW_MAX_FILES",{source:r,error:_}),s({error:_,file:null});return}const y=Ft(n.items)[0];if(y.status===Ee.PROCESSING_COMPLETE||y.status===Ee.PROCESSING_REVERT_ERROR){const _=t("GET_FORCE_REVERT");if(y.revert(Ui(n.options.server.url,n.options.server.revert),_).then(()=>{!_||e("ADD_ITEM",{source:r,index:i,interactionMethod:o,success:a,failure:s,options:l})}).catch(()=>{}),_)return}e("REMOVE_ITEM",{query:y.id})}const c=l.type==="local"?We.LOCAL:l.type==="limbo"?We.LIMBO:We.INPUT,u=TS(c,c===We.INPUT?null:r,l.file);Object.keys(l.metadata||{}).forEach(y=>{u.setMetadata(y,l.metadata[y])}),Or("DID_CREATE_ITEM",u,{query:t,dispatch:e});const f=t("GET_ITEM_INSERT_LOCATION");n.options.itemInsertLocationFreedom||(i=f==="before"?-1:n.items.length),rS(n.items,u,i),pr(f)&&r&&qs(n,f);const d=u.id;u.on("init",()=>{e("DID_INIT_ITEM",{id:d})}),u.on("load-init",()=>{e("DID_START_ITEM_LOAD",{id:d})}),u.on("load-meta",()=>{e("DID_UPDATE_ITEM_META",{id:d})}),u.on("load-progress",y=>{e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:d,progress:y})}),u.on("load-request-error",y=>{const _=Vo(n.options.labelFileLoadError)(y);if(y.code>=400&&y.code<500){e("DID_THROW_ITEM_INVALID",{id:d,error:y,status:{main:_,sub:`${y.code} (${y.body})`}}),s({error:y,file:gt(u)});return}e("DID_THROW_ITEM_LOAD_ERROR",{id:d,error:y,status:{main:_,sub:n.options.labelTapToRetry}})}),u.on("load-file-error",y=>{e("DID_THROW_ITEM_INVALID",{id:d,error:y.status,status:y.status}),s({error:y.status,file:gt(u)})}),u.on("load-abort",()=>{e("REMOVE_ITEM",{query:d})}),u.on("load-skip",()=>{e("COMPLETE_LOAD_ITEM",{query:d,item:u,data:{source:r,success:a}})}),u.on("load",()=>{const y=_=>{if(!_){e("REMOVE_ITEM",{query:d});return}u.on("metadata-update",E=>{e("DID_UPDATE_ITEM_METADATA",{id:d,change:E})}),Bt("SHOULD_PREPARE_OUTPUT",!1,{item:u,query:t}).then(E=>{const v=t("GET_BEFORE_PREPARE_FILE");v&&(E=v(u,E));const T=()=>{e("COMPLETE_LOAD_ITEM",{query:d,item:u,data:{source:r,success:a}}),zs(e,n)};if(E){e("REQUEST_PREPARE_OUTPUT",{query:d,item:u,success:R=>{e("DID_PREPARE_OUTPUT",{id:d,file:R}),T()}},!0);return}T()})};Bt("DID_LOAD_ITEM",u,{query:t,dispatch:e}).then(()=>{vd(t("GET_BEFORE_ADD_FILE"),gt(u)).then(y)}).catch(_=>{if(!_||!_.error||!_.status)return y(!1);e("DID_THROW_ITEM_INVALID",{id:d,error:_.error,status:_.status})})}),u.on("process-start",()=>{e("DID_START_ITEM_PROCESSING",{id:d})}),u.on("process-progress",y=>{e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:d,progress:y})}),u.on("process-error",y=>{e("DID_THROW_ITEM_PROCESSING_ERROR",{id:d,error:y,status:{main:Vo(n.options.labelFileProcessingError)(y),sub:n.options.labelTapToRetry}})}),u.on("process-revert-error",y=>{e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:d,error:y,status:{main:Vo(n.options.labelFileProcessingRevertError)(y),sub:n.options.labelTapToRetry}})}),u.on("process-complete",y=>{e("DID_COMPLETE_ITEM_PROCESSING",{id:d,error:null,serverFileReference:y}),e("DID_DEFINE_VALUE",{id:d,value:y})}),u.on("process-abort",()=>{e("DID_ABORT_ITEM_PROCESSING",{id:d})}),u.on("process-revert",()=>{e("DID_REVERT_ITEM_PROCESSING",{id:d}),e("DID_DEFINE_VALUE",{id:d,value:null})}),e("DID_ADD_ITEM",{id:d,index:i,interactionMethod:o}),zs(e,n);const{url:h,load:p,restore:g,fetch:m}=n.options.server||{};u.load(r,pS(c===We.INPUT?ft(r)&&RS(r)&&m?Hs(h,m):_d:c===We.LIMBO?Hs(h,g):Hs(h,p)),(y,_,E)=>{Bt("LOAD_FILE",y,{query:t}).then(_).catch(E)})},REQUEST_PREPARE_OUTPUT:({item:r,success:i,failure:o=()=>{}})=>{const a={error:Ge("error",0,"Item not found"),file:null};if(r.archived)return o(a);Bt("PREPARE_OUTPUT",r.file,{query:t,item:r}).then(s=>{Bt("COMPLETE_PREPARE_OUTPUT",s,{query:t,item:r}).then(l=>{if(r.archived)return o(a);i(l)})})},COMPLETE_LOAD_ITEM:({item:r,data:i})=>{const{success:o,source:a}=i,s=t("GET_ITEM_INSERT_LOCATION");if(pr(s)&&a&&qs(n,s),e("DID_LOAD_ITEM",{id:r.id,error:null,serverFileReference:r.origin===We.INPUT?null:a}),o(gt(r)),r.origin===We.LOCAL){e("DID_LOAD_LOCAL_ITEM",{id:r.id});return}if(r.origin===We.LIMBO){e("DID_COMPLETE_ITEM_PROCESSING",{id:r.id,error:null,serverFileReference:a}),e("DID_DEFINE_VALUE",{id:r.id,value:r.serverId||a});return}t("IS_ASYNC")&&n.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:r.id})},RETRY_ITEM_LOAD:bt(n,r=>{r.retryLoad()}),REQUEST_ITEM_PREPARE:bt(n,(r,i,o)=>{e("REQUEST_PREPARE_OUTPUT",{query:r.id,item:r,success:a=>{e("DID_PREPARE_OUTPUT",{id:r.id,file:a}),i({file:r,output:a})},failure:o},!0)}),REQUEST_ITEM_PROCESSING:bt(n,(r,i,o)=>{if(!(r.status===Ee.IDLE||r.status===Ee.PROCESSING_ERROR)){const s=()=>e("REQUEST_ITEM_PROCESSING",{query:r,success:i,failure:o}),l=()=>document.hidden?s():setTimeout(s,32);r.status===Ee.PROCESSING_COMPLETE||r.status===Ee.PROCESSING_REVERT_ERROR?r.revert(Ui(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(l).catch(()=>{}):r.status===Ee.PROCESSING&&r.abortProcessing().then(l);return}r.status!==Ee.PROCESSING_QUEUED&&(r.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:r.id}),e("PROCESS_ITEM",{query:r,success:i,failure:o},!0))}),PROCESS_ITEM:bt(n,(r,i,o)=>{const a=t("GET_MAX_PARALLEL_UPLOADS");if(t("GET_ITEMS_BY_STATUS",Ee.PROCESSING).length===a){n.processingQueue.push({id:r.id,success:i,failure:o});return}if(r.status===Ee.PROCESSING)return;const l=()=>{const u=n.processingQueue.shift();if(!u)return;const{id:f,success:d,failure:h}=u,p=gr(n.items,f);if(!p||p.archived){l();return}e("PROCESS_ITEM",{query:f,success:d,failure:h},!0)};r.onOnce("process-complete",()=>{i(gt(r)),l();const u=n.options.server;if(n.options.instantUpload&&r.origin===We.LOCAL&&pr(u.remove)){const h=()=>{};r.origin=We.LIMBO,n.options.server.remove(r.source,h,h)}t("GET_ITEMS_BY_STATUS",Ee.PROCESSING_COMPLETE).length===n.items.length&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")}),r.onOnce("process-error",u=>{o({error:u,file:gt(r)}),l()});const c=n.options;r.process(yS(ES(c.server.url,c.server.process,c.name,{chunkTransferId:r.transferId,chunkServer:c.server.patch,chunkUploads:c.chunkUploads,chunkForce:c.chunkForce,chunkSize:c.chunkSize,chunkRetryDelays:c.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(u,f,d)=>{Bt("PREPARE_OUTPUT",u,{query:t,item:r}).then(h=>{e("DID_PREPARE_OUTPUT",{id:r.id,file:h}),f(h)}).catch(d)})}),RETRY_ITEM_PROCESSING:bt(n,r=>{e("REQUEST_ITEM_PROCESSING",{query:r})}),REQUEST_REMOVE_ITEM:bt(n,r=>{vd(t("GET_BEFORE_REMOVE_FILE"),gt(r)).then(i=>{!i||e("REMOVE_ITEM",{query:r})})}),RELEASE_ITEM:bt(n,r=>{r.release()}),REMOVE_ITEM:bt(n,(r,i,o,a)=>{const s=()=>{const c=r.id;Ed(n.items,c).archive(),e("DID_REMOVE_ITEM",{error:null,id:c,item:r}),zs(e,n),i(gt(r))},l=n.options.server;r.origin===We.LOCAL&&l&&pr(l.remove)&&a.remove!==!1?(e("DID_START_ITEM_REMOVE",{id:r.id}),l.remove(r.source,()=>s(),c=>{e("DID_THROW_ITEM_REMOVE_ERROR",{id:r.id,error:Ge("error",0,c,null),status:{main:Vo(n.options.labelFileRemoveError)(c),sub:n.options.labelTapToRetry}})})):((a.revert&&r.origin!==We.LOCAL&&r.serverId!==null||n.options.chunkUploads&&r.file.size>n.options.chunkSize||n.options.chunkUploads&&n.options.chunkForce)&&r.revert(Ui(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")),s())}),ABORT_ITEM_LOAD:bt(n,r=>{r.abortLoad()}),ABORT_ITEM_PROCESSING:bt(n,r=>{if(r.serverId){e("REVERT_ITEM_PROCESSING",{id:r.id});return}r.abortProcessing().then(()=>{n.options.instantUpload&&e("REMOVE_ITEM",{query:r.id})})}),REQUEST_REVERT_ITEM_PROCESSING:bt(n,r=>{if(!n.options.instantUpload){e("REVERT_ITEM_PROCESSING",{query:r});return}const i=s=>{!s||e("REVERT_ITEM_PROCESSING",{query:r})},o=t("GET_BEFORE_REMOVE_FILE");if(!o)return i(!0);const a=o(gt(r));if(a==null)return i(!0);if(typeof a=="boolean")return i(a);typeof a.then=="function"&&a.then(i)}),REVERT_ITEM_PROCESSING:bt(n,r=>{r.revert(Ui(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(()=>{(n.options.instantUpload||wS(r))&&e("REMOVE_ITEM",{query:r.id})}).catch(()=>{})}),SET_OPTIONS:({options:r})=>{const i=Object.keys(r),o=OS.filter(s=>i.includes(s));[...o,...Object.keys(r).filter(s=>!o.includes(s))].forEach(s=>{e(`SET_${Qa(s,"_").toUpperCase()}`,{value:r[s]})})}}),OS=["server"],Cc=e=>e,wn=e=>document.createElement(e),Ue=(e,t)=>{let n=e.childNodes[0];n?t!==n.nodeValue&&(n.nodeValue=t):(n=document.createTextNode(t),e.appendChild(n))},Td=(e,t,n,r)=>{const i=(r%360-90)*Math.PI/180;return{x:e+n*Math.cos(i),y:t+n*Math.sin(i)}},SS=(e,t,n,r,i,o)=>{const a=Td(e,t,n,i),s=Td(e,t,n,r);return["M",a.x,a.y,"A",n,n,0,o,0,s.x,s.y].join(" ")},bS=(e,t,n,r,i)=>{let o=1;return i>r&&i-r<=.5&&(o=0),r>i&&r-i>=.5&&(o=0),SS(e,t,n,Math.min(.9999,r)*360,Math.min(.9999,i)*360,o)},CS=({root:e,props:t})=>{t.spin=!1,t.progress=0,t.opacity=0;const n=ya("svg");e.ref.path=ya("path",{"stroke-width":2,"stroke-linecap":"round"}),n.appendChild(e.ref.path),e.ref.svg=n,e.appendChild(n)},xS=({root:e,props:t})=>{if(t.opacity===0)return;t.align&&(e.element.dataset.align=t.align);const n=parseInt(ke(e.ref.path,"stroke-width"),10),r=e.rect.element.width*.5;let i=0,o=0;t.spin?(i=0,o=.5):(i=0,o=t.progress);const a=bS(r,r,r-n,i,o);ke(e.ref.path,"d",a),ke(e.ref.path,"stroke-opacity",t.spin||t.progress>0?1:0)},Id=He({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:CS,write:xS,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),MS=({root:e,props:t})=>{e.element.innerHTML=(t.icon||"")+`<span>${t.label}</span>`,t.isDisabled=!1},LS=({root:e,props:t})=>{const{isDisabled:n}=t,r=e.query("GET_DISABLED")||t.opacity===0;r&&!n?(t.isDisabled=!0,ke(e.element,"disabled","disabled")):!r&&n&&(t.isDisabled=!1,e.element.removeAttribute("disabled"))},Gg=He({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:MS,write:LS}),Ug=(e,t=".",n=1e3,r={})=>{const{labelBytes:i="bytes",labelKilobytes:o="KB",labelMegabytes:a="MB",labelGigabytes:s="GB"}=r;e=Math.round(Math.abs(e));const l=n,c=n*n,u=n*n*n;return e<l?`${e} ${i}`:e<c?`${Math.floor(e/l)} ${o}`:e<u?`${Rd(e/c,1,t)} ${a}`:`${Rd(e/u,2,t)} ${s}`},Rd=(e,t,n)=>e.toFixed(t).split(".").filter(r=>r!=="0").join(n),PS=({root:e,props:t})=>{const n=wn("span");n.className="filepond--file-info-main",ke(n,"aria-hidden","true"),e.appendChild(n),e.ref.fileName=n;const r=wn("span");r.className="filepond--file-info-sub",e.appendChild(r),e.ref.fileSize=r,Ue(r,e.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),Ue(n,Cc(e.query("GET_ITEM_NAME",t.id)))},Cl=({root:e,props:t})=>{Ue(e.ref.fileSize,Ug(e.query("GET_ITEM_SIZE",t.id),".",e.query("GET_FILE_SIZE_BASE"),e.query("GET_FILE_SIZE_LABELS",e.query))),Ue(e.ref.fileName,Cc(e.query("GET_ITEM_NAME",t.id)))},wd=({root:e,props:t})=>{if(_i(e.query("GET_ITEM_SIZE",t.id))){Cl({root:e,props:t});return}Ue(e.ref.fileSize,e.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},DS=He({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:dt({DID_LOAD_ITEM:Cl,DID_UPDATE_ITEM_META:Cl,DID_THROW_ITEM_LOAD_ERROR:wd,DID_THROW_ITEM_INVALID:wd}),didCreateView:e=>{Or("CREATE_VIEW",{...e,view:e})},create:PS,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),Bg=e=>Math.round(e*100),NS=({root:e})=>{const t=wn("span");t.className="filepond--file-status-main",e.appendChild(t),e.ref.main=t;const n=wn("span");n.className="filepond--file-status-sub",e.appendChild(n),e.ref.sub=n,Vg({root:e,action:{progress:null}})},Vg=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_LOADING"):`${e.query("GET_LABEL_FILE_LOADING")} ${Bg(t.progress)}%`;Ue(e.ref.main,n),Ue(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},GS=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_PROCESSING"):`${e.query("GET_LABEL_FILE_PROCESSING")} ${Bg(t.progress)}%`;Ue(e.ref.main,n),Ue(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},US=({root:e})=>{Ue(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING")),Ue(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},BS=({root:e})=>{Ue(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_ABORTED")),Ue(e.ref.sub,e.query("GET_LABEL_TAP_TO_RETRY"))},VS=({root:e})=>{Ue(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),Ue(e.ref.sub,e.query("GET_LABEL_TAP_TO_UNDO"))},Ad=({root:e})=>{Ue(e.ref.main,""),Ue(e.ref.sub,"")},Bi=({root:e,action:t})=>{Ue(e.ref.main,t.status.main),Ue(e.ref.sub,t.status.sub)},FS=He({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:dt({DID_LOAD_ITEM:Ad,DID_REVERT_ITEM_PROCESSING:Ad,DID_REQUEST_ITEM_PROCESSING:US,DID_ABORT_ITEM_PROCESSING:BS,DID_COMPLETE_ITEM_PROCESSING:VS,DID_UPDATE_ITEM_PROCESS_PROGRESS:GS,DID_UPDATE_ITEM_LOAD_PROGRESS:Vg,DID_THROW_ITEM_LOAD_ERROR:Bi,DID_THROW_ITEM_INVALID:Bi,DID_THROW_ITEM_PROCESSING_ERROR:Bi,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:Bi,DID_THROW_ITEM_REMOVE_ERROR:Bi}),didCreateView:e=>{Or("CREATE_VIEW",{...e,view:e})},create:NS,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),xl={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},Ml=[];De(xl,e=>{Ml.push(e)});const It=e=>{if(Ll(e)==="right")return 0;const t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},kS=e=>e.ref.buttonAbortItemLoad.rect.element.width,Fo=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.height/4),$S=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.left/2),HS=e=>e.query("GET_STYLE_LOAD_INDICATOR_POSITION"),zS=e=>e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),Ll=e=>e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),qS={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:HS},processProgressIndicator:{opacity:0,align:zS},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},Od={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:It},status:{translateX:It}},Ws={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},Ur={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:It},status:{translateX:It,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:It},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:Ll},info:{translateX:It},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:Ll},buttonRemoveItem:{opacity:1},info:{translateX:It},status:{opacity:1,translateX:It}},DID_LOAD_ITEM:Od,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:It},status:{translateX:It}},DID_START_ITEM_PROCESSING:Ws,DID_REQUEST_ITEM_PROCESSING:Ws,DID_UPDATE_ITEM_PROCESS_PROGRESS:Ws,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:It}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:It},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:Od},WS=He({create:({root:e})=>{e.element.innerHTML=e.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),YS=({root:e,props:t})=>{const n=Object.keys(xl).reduce((p,g)=>(p[g]={...xl[g]},p),{}),{id:r}=t,i=e.query("GET_ALLOW_REVERT"),o=e.query("GET_ALLOW_REMOVE"),a=e.query("GET_ALLOW_PROCESS"),s=e.query("GET_INSTANT_UPLOAD"),l=e.query("IS_ASYNC"),c=e.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let u;l?a&&!i?u=p=>!/RevertItemProcessing/.test(p):!a&&i?u=p=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(p):!a&&!i&&(u=p=>!/Process/.test(p)):u=p=>!/Process/.test(p);const f=u?Ml.filter(u):Ml.concat();if(s&&i&&(n.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",n.RevertItemProcessing.icon="GET_ICON_REMOVE"),l&&!i){const p=Ur.DID_COMPLETE_ITEM_PROCESSING;p.info.translateX=$S,p.info.translateY=Fo,p.status.translateY=Fo,p.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(l&&!a&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(p=>{Ur[p].status.translateY=Fo}),Ur.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=kS),c&&i){n.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const p=Ur.DID_COMPLETE_ITEM_PROCESSING;p.info.translateX=It,p.status.translateY=Fo,p.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}o||(n.RemoveItem.disabled=!0),De(n,(p,g)=>{const m=e.createChildView(Gg,{label:e.query(g.label),icon:e.query(g.icon),opacity:0});f.includes(p)&&e.appendChildView(m),g.disabled&&(m.element.setAttribute("disabled","disabled"),m.element.setAttribute("hidden","hidden")),m.element.dataset.align=e.query(`GET_STYLE_${g.align}`),m.element.classList.add(g.className),m.on("click",y=>{y.stopPropagation(),!g.disabled&&e.dispatch(g.action,{query:r})}),e.ref[`button${p}`]=m}),e.ref.processingCompleteIndicator=e.appendChildView(e.createChildView(WS)),e.ref.processingCompleteIndicator.element.dataset.align=e.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),e.ref.info=e.appendChildView(e.createChildView(DS,{id:r})),e.ref.status=e.appendChildView(e.createChildView(FS,{id:r}));const d=e.appendChildView(e.createChildView(Id,{opacity:0,align:e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));d.element.classList.add("filepond--load-indicator"),e.ref.loadProgressIndicator=d;const h=e.appendChildView(e.createChildView(Id,{opacity:0,align:e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));h.element.classList.add("filepond--process-indicator"),e.ref.processProgressIndicator=h,e.ref.activeStyles=[]},jS=({root:e,actions:t,props:n})=>{XS({root:e,actions:t,props:n});let r=t.concat().filter(i=>/^DID_/.test(i.type)).reverse().find(i=>Ur[i.type]);if(r){e.ref.activeStyles=[];const i=Ur[r.type];De(qS,(o,a)=>{const s=e.ref[o];De(a,(l,c)=>{const u=i[o]&&typeof i[o][l]<"u"?i[o][l]:c;e.ref.activeStyles.push({control:s,key:l,value:u})})})}e.ref.activeStyles.forEach(({control:i,key:o,value:a})=>{i[o]=typeof a=="function"?a(e):a})},XS=dt({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:e,action:t})=>{e.ref.buttonAbortItemProcessing.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:e,action:t})=>{e.ref.buttonAbortItemLoad.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:e,action:t})=>{e.ref.buttonAbortItemRemoval.label=t.value},DID_REQUEST_ITEM_PROCESSING:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:e})=>{e.ref.loadProgressIndicator.spin=!0,e.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:e,action:t})=>{e.ref.loadProgressIndicator.spin=!1,e.ref.loadProgressIndicator.progress=t.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{e.ref.processProgressIndicator.spin=!1,e.ref.processProgressIndicator.progress=t.progress}}),ZS=He({create:YS,write:jS,didCreateView:e=>{Or("CREATE_VIEW",{...e,view:e})},name:"file"}),KS=({root:e,props:t})=>{e.ref.fileName=wn("legend"),e.appendChild(e.ref.fileName),e.ref.file=e.appendChildView(e.createChildView(ZS,{id:t.id})),e.ref.data=!1},QS=({root:e,props:t})=>{Ue(e.ref.fileName,Cc(e.query("GET_ITEM_NAME",t.id)))},JS=He({create:KS,ignoreRect:!0,write:dt({DID_LOAD_ITEM:QS}),didCreateView:e=>{Or("CREATE_VIEW",{...e,view:e})},tag:"fieldset",name:"file-wrapper"}),Sd={type:"spring",damping:.6,mass:7},eb=({root:e,props:t})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:Sd},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:Sd},styles:["translateY"]}}].forEach(n=>{tb(e,n,t.name)}),e.element.classList.add(`filepond--${t.name}`),e.ref.scalable=null},tb=(e,t,n)=>{const r=He({name:`panel-${t.name} filepond--${n}`,mixins:t.mixins,ignoreRectUpdate:!0}),i=e.createChildView(r,t.props);e.ref[t.name]=e.appendChildView(i)},nb=({root:e,props:t})=>{if((e.ref.scalable===null||t.scalable!==e.ref.scalable)&&(e.ref.scalable=Tg(t.scalable)?t.scalable:!0,e.element.dataset.scalable=e.ref.scalable),!t.height)return;const n=e.ref.top.rect.element,r=e.ref.bottom.rect.element,i=Math.max(n.height+r.height,t.height);e.ref.center.translateY=n.height,e.ref.center.scaleY=(i-n.height-r.height)/100,e.ref.bottom.translateY=i-r.height},Fg=He({name:"panel",read:({root:e,props:t})=>t.heightCurrent=e.ref.bottom.translateY,write:nb,create:eb,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),rb=e=>{const t=e.map(r=>r.id);let n;return{setIndex:r=>{n=r},getIndex:()=>n,getItemIndex:r=>t.indexOf(r.id)}},bd={type:"spring",stiffness:.75,damping:.45,mass:10},Cd="spring",xd={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},ib=({root:e,props:t})=>{if(e.ref.handleClick=r=>e.dispatch("DID_ACTIVATE_ITEM",{id:t.id}),e.element.id=`filepond--item-${t.id}`,e.element.addEventListener("click",e.ref.handleClick),e.ref.container=e.appendChildView(e.createChildView(JS,{id:t.id})),e.ref.panel=e.appendChildView(e.createChildView(Fg,{name:"item-panel"})),e.ref.panel.height=null,t.markedForRemoval=!1,!e.query("GET_ALLOW_REORDER"))return;e.element.dataset.dragState="idle";const n=r=>{if(!r.isPrimary)return;let i=!1;const o={x:r.pageX,y:r.pageY};t.dragOrigin={x:e.translateX,y:e.translateY},t.dragCenter={x:r.offsetX,y:r.offsetY};const a=rb(e.query("GET_ACTIVE_ITEMS"));e.dispatch("DID_GRAB_ITEM",{id:t.id,dragState:a});const s=c=>{if(!c.isPrimary)return;c.stopPropagation(),c.preventDefault(),t.dragOffset={x:c.pageX-o.x,y:c.pageY-o.y},t.dragOffset.x*t.dragOffset.x+t.dragOffset.y*t.dragOffset.y>16&&!i&&(i=!0,e.element.removeEventListener("click",e.ref.handleClick)),e.dispatch("DID_DRAG_ITEM",{id:t.id,dragState:a})},l=c=>{!c.isPrimary||(document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",l),t.dragOffset={x:c.pageX-o.x,y:c.pageY-o.y},e.dispatch("DID_DROP_ITEM",{id:t.id,dragState:a}),i&&setTimeout(()=>e.element.addEventListener("click",e.ref.handleClick),0))};document.addEventListener("pointermove",s),document.addEventListener("pointerup",l)};e.element.addEventListener("pointerdown",n)},ob=dt({DID_UPDATE_PANEL_HEIGHT:({root:e,action:t})=>{e.height=t.height}}),ab=dt({DID_GRAB_ITEM:({root:e,props:t})=>{t.dragOrigin={x:e.translateX,y:e.translateY}},DID_DRAG_ITEM:({root:e})=>{e.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:e,props:t})=>{t.dragOffset=null,t.dragOrigin=null,e.element.dataset.dragState="drop"}},({root:e,actions:t,props:n,shouldOptimize:r})=>{e.element.dataset.dragState==="drop"&&e.scaleX<=1&&(e.element.dataset.dragState="idle");let i=t.concat().filter(a=>/^DID_/.test(a.type)).reverse().find(a=>xd[a.type]);i&&i.type!==n.currentState&&(n.currentState=i.type,e.element.dataset.filepondItemState=xd[n.currentState]||"");const o=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");o?r||(e.height=e.rect.element.width*o):(ob({root:e,actions:t,props:n}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),r&&(e.ref.panel.height=null),e.ref.panel.height=e.height}),sb=He({create:ib,write:ab,destroy:({root:e,props:t})=>{e.element.removeEventListener("click",e.ref.handleClick),e.dispatch("RELEASE_ITEM",{query:t.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:Cd,scaleY:Cd,translateX:bd,translateY:bd,opacity:{type:"tween",duration:150}}}});var xc=(e,t)=>Math.max(1,Math.floor((e+1)/t));const Mc=(e,t,n)=>{if(!n)return;const r=e.rect.element.width,i=t.length;let o=null;if(i===0||n.top<t[0].rect.element.top)return-1;const s=t[0].rect.element,l=s.marginLeft+s.marginRight,c=s.width+l,u=xc(r,c);if(u===1){for(let h=0;h<i;h++){const p=t[h],g=p.rect.outer.top+p.rect.element.height*.5;if(n.top<g)return h}return i}const f=s.marginTop+s.marginBottom,d=s.height+f;for(let h=0;h<i;h++){const p=h%u,g=Math.floor(h/u),m=p*c,y=g*d,_=y-s.marginTop,E=m+c,v=y+d+s.marginBottom;if(n.top<v&&n.top>_){if(n.left<E)return h;h!==i-1?o=h:o=null}}return o!==null?o:i},ko={height:0,width:0,get getHeight(){return this.height},set setHeight(e){(this.height===0||e===0)&&(this.height=e)},get getWidth(){return this.width},set setWidth(e){(this.width===0||e===0)&&(this.width=e)},setDimensions:function(e,t){(this.height===0||e===0)&&(this.height=e),(this.width===0||t===0)&&(this.width=t)}},lb=({root:e})=>{ke(e.element,"role","list"),e.ref.lastItemSpanwDate=Date.now()},cb=({root:e,action:t})=>{const{id:n,index:r,interactionMethod:i}=t;e.ref.addIndex=r;const o=Date.now();let a=o,s=1;if(i!==Dt.NONE){s=0;const l=e.query("GET_ITEM_INSERT_INTERVAL"),c=o-e.ref.lastItemSpanwDate;a=c<l?o+(l-c):o}e.ref.lastItemSpanwDate=a,e.appendChildView(e.createChildView(sb,{spawnDate:a,id:n,opacity:s,interactionMethod:i}),r)},Md=(e,t,n,r=0,i=1)=>{e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=n,Date.now()>e.spawnDate&&(e.opacity===0&&ub(e,t,n,r,i),e.scaleX=1,e.scaleY=1,e.opacity=1))},ub=(e,t,n,r,i)=>{e.interactionMethod===Dt.NONE?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=n):e.interactionMethod===Dt.DROP?(e.translateX=null,e.translateX=t-r*20,e.translateY=null,e.translateY=n-i*10,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===Dt.BROWSE?(e.translateY=null,e.translateY=n-30):e.interactionMethod===Dt.API&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},fb=({root:e,action:t})=>{const{id:n}=t,r=e.childViews.find(i=>i.id===n);!r||(r.scaleX=.9,r.scaleY=.9,r.opacity=0,r.markedForRemoval=!0)},Ys=e=>e.rect.element.height+e.rect.element.marginBottom*.5+e.rect.element.marginTop*.5,db=e=>e.rect.element.width+e.rect.element.marginLeft*.5+e.rect.element.marginRight*.5,hb=({root:e,action:t})=>{const{id:n,dragState:r}=t,i=e.query("GET_ITEM",{id:n}),o=e.childViews.find(m=>m.id===n),a=e.childViews.length,s=r.getItemIndex(i);if(!o)return;const l={x:o.dragOrigin.x+o.dragOffset.x+o.dragCenter.x,y:o.dragOrigin.y+o.dragOffset.y+o.dragCenter.y},c=Ys(o),u=db(o);let f=Math.floor(e.rect.outer.width/u);f>a&&(f=a);const d=Math.floor(a/f+1);ko.setHeight=c*d,ko.setWidth=u*f;var h={y:Math.floor(l.y/c),x:Math.floor(l.x/u),getGridIndex:function(){return l.y>ko.getHeight||l.y<0||l.x>ko.getWidth||l.x<0?s:this.y*f+this.x},getColIndex:function(){const y=e.query("GET_ACTIVE_ITEMS"),_=e.childViews.filter(P=>P.rect.element.height),E=y.map(P=>_.find(C=>C.id===P.id)),v=E.findIndex(P=>P===o),T=Ys(o),R=E.length;let O=R,w=0,S=0,M=0;for(let P=0;P<R;P++)if(w=Ys(E[P]),M=S,S=M+w,l.y<S){if(v>P){if(l.y<M+T){O=P;break}continue}O=P;break}return O}};const p=f>1?h.getGridIndex():h.getColIndex();e.dispatch("MOVE_ITEM",{query:o,index:p});const g=r.getIndex();if(g===void 0||g!==p){if(r.setIndex(p),g===void 0)return;e.dispatch("DID_REORDER_ITEMS",{items:e.query("GET_ACTIVE_ITEMS"),origin:s,target:p})}},pb=dt({DID_ADD_ITEM:cb,DID_REMOVE_ITEM:fb,DID_DRAG_ITEM:hb}),gb=({root:e,props:t,actions:n,shouldOptimize:r})=>{pb({root:e,props:t,actions:n});const{dragCoordinates:i}=t,o=e.rect.element.width,a=e.childViews.filter(E=>E.rect.element.height),s=e.query("GET_ACTIVE_ITEMS").map(E=>a.find(v=>v.id===E.id)).filter(E=>E),l=i?Mc(e,s,i):null,c=e.ref.addIndex||null;e.ref.addIndex=null;let u=0,f=0,d=0;if(s.length===0)return;const h=s[0].rect.element,p=h.marginTop+h.marginBottom,g=h.marginLeft+h.marginRight,m=h.width+g,y=h.height+p,_=xc(o,m);if(_===1){let E=0,v=0;s.forEach((T,R)=>{if(l){let S=R-l;S===-2?v=-p*.25:S===-1?v=-p*.75:S===0?v=p*.75:S===1?v=p*.25:v=0}r&&(T.translateX=null,T.translateY=null),T.markedForRemoval||Md(T,0,E+v),E+=(T.rect.element.height+p)*(T.markedForRemoval?T.opacity:1)})}else{let E=0,v=0;s.forEach((T,R)=>{R===l&&(u=1),R===c&&(d+=1),T.markedForRemoval&&T.opacity<.5&&(f-=1);const O=R+d+u+f,w=O%_,S=Math.floor(O/_),M=w*m,P=S*y,C=Math.sign(M-E),z=Math.sign(P-v);E=M,v=P,!T.markedForRemoval&&(r&&(T.translateX=null,T.translateY=null),Md(T,M,P,C,z))})}},mb=(e,t)=>t.filter(n=>n.data&&n.data.id?e.id===n.data.id:!0),Eb=He({create:lb,write:gb,tag:"ul",name:"list",didWriteView:({root:e})=>{e.childViews.filter(t=>t.markedForRemoval&&t.opacity===0&&t.resting).forEach(t=>{t._destroy(),e.removeChildView(t)})},filterFrameActionsForChild:mb,mixins:{apis:["dragCoordinates"]}}),_b=({root:e,props:t})=>{e.ref.list=e.appendChildView(e.createChildView(Eb)),t.dragCoordinates=null,t.overflowing=!1},yb=({root:e,props:t,action:n})=>{!e.query("GET_ITEM_INSERT_LOCATION_FREEDOM")||(t.dragCoordinates={left:n.position.scopeLeft-e.ref.list.rect.element.left,top:n.position.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},vb=({props:e})=>{e.dragCoordinates=null},Tb=dt({DID_DRAG:yb,DID_END_DRAG:vb}),Ib=({root:e,props:t,actions:n})=>{if(Tb({root:e,props:t,actions:n}),e.ref.list.dragCoordinates=t.dragCoordinates,t.overflowing&&!t.overflow&&(t.overflowing=!1,e.element.dataset.state="",e.height=null),t.overflow){const r=Math.round(t.overflow);r!==e.height&&(t.overflowing=!0,e.element.dataset.state="overflow",e.height=r)}},Rb=He({create:_b,write:Ib,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),Ht=(e,t,n,r="")=>{n?ke(e,t,r):e.removeAttribute(t)},wb=e=>{if(!(!e||e.value==="")){try{e.value=""}catch{}if(e.value){const t=wn("form"),n=e.parentNode,r=e.nextSibling;t.appendChild(e),t.reset(),r?n.insertBefore(e,r):n.appendChild(e)}}},Ab=({root:e,props:t})=>{e.element.id=`filepond--browser-${t.id}`,ke(e.element,"name",e.query("GET_NAME")),ke(e.element,"aria-controls",`filepond--assistant-${t.id}`),ke(e.element,"aria-labelledby",`filepond--drop-label-${t.id}`),kg({root:e,action:{value:e.query("GET_ACCEPTED_FILE_TYPES")}}),$g({root:e,action:{value:e.query("GET_ALLOW_MULTIPLE")}}),Hg({root:e,action:{value:e.query("GET_ALLOW_DIRECTORIES_ONLY")}}),Pl({root:e}),zg({root:e,action:{value:e.query("GET_REQUIRED")}}),qg({root:e,action:{value:e.query("GET_CAPTURE_METHOD")}}),e.ref.handleChange=n=>{if(!e.element.value)return;const r=Array.from(e.element.files).map(i=>(i._relativePath=i.webkitRelativePath,i));setTimeout(()=>{t.onload(r),wb(e.element)},250)},e.element.addEventListener("change",e.ref.handleChange)},kg=({root:e,action:t})=>{!e.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")||Ht(e.element,"accept",!!t.value,t.value?t.value.join(","):"")},$g=({root:e,action:t})=>{Ht(e.element,"multiple",t.value)},Hg=({root:e,action:t})=>{Ht(e.element,"webkitdirectory",t.value)},Pl=({root:e})=>{const t=e.query("GET_DISABLED"),n=e.query("GET_ALLOW_BROWSE"),r=t||!n;Ht(e.element,"disabled",r)},zg=({root:e,action:t})=>{t.value?e.query("GET_TOTAL_ITEMS")===0&&Ht(e.element,"required",!0):Ht(e.element,"required",!1)},qg=({root:e,action:t})=>{Ht(e.element,"capture",!!t.value,t.value===!0?"":t.value)},Ld=({root:e})=>{const{element:t}=e;e.query("GET_TOTAL_ITEMS")>0?(Ht(t,"required",!1),Ht(t,"name",!1)):(Ht(t,"name",!0,e.query("GET_NAME")),e.query("GET_CHECK_VALIDITY")&&t.setCustomValidity(""),e.query("GET_REQUIRED")&&Ht(t,"required",!0))},Ob=({root:e})=>{!e.query("GET_CHECK_VALIDITY")||e.element.setCustomValidity(e.query("GET_LABEL_INVALID_FIELD"))},Sb=He({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:Ab,destroy:({root:e})=>{e.element.removeEventListener("change",e.ref.handleChange)},write:dt({DID_LOAD_ITEM:Ld,DID_REMOVE_ITEM:Ld,DID_THROW_ITEM_INVALID:Ob,DID_SET_DISABLED:Pl,DID_SET_ALLOW_BROWSE:Pl,DID_SET_ALLOW_DIRECTORIES_ONLY:Hg,DID_SET_ALLOW_MULTIPLE:$g,DID_SET_ACCEPTED_FILE_TYPES:kg,DID_SET_CAPTURE_METHOD:qg,DID_SET_REQUIRED:zg})}),Pd={ENTER:13,SPACE:32},bb=({root:e,props:t})=>{const n=wn("label");ke(n,"for",`filepond--browser-${t.id}`),ke(n,"id",`filepond--drop-label-${t.id}`),ke(n,"aria-hidden","true"),e.ref.handleKeyDown=r=>{(r.keyCode===Pd.ENTER||r.keyCode===Pd.SPACE)&&(r.preventDefault(),e.ref.label.click())},e.ref.handleClick=r=>{r.target===n||n.contains(r.target)||e.ref.label.click()},n.addEventListener("keydown",e.ref.handleKeyDown),e.element.addEventListener("click",e.ref.handleClick),Wg(n,t.caption),e.appendChild(n),e.ref.label=n},Wg=(e,t)=>{e.innerHTML=t;const n=e.querySelector(".filepond--label-action");return n&&ke(n,"tabindex","0"),t},Cb=He({name:"drop-label",ignoreRect:!0,create:bb,destroy:({root:e})=>{e.ref.label.addEventListener("keydown",e.ref.handleKeyDown),e.element.removeEventListener("click",e.ref.handleClick)},write:dt({DID_SET_LABEL_IDLE:({root:e,action:t})=>{Wg(e.ref.label,t.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),xb=He({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),Mb=({root:e})=>{const t=e.rect.element.width*.5,n=e.rect.element.height*.5;e.ref.blob=e.appendChildView(e.createChildView(xb,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:t,translateY:n}))},Lb=({root:e,action:t})=>{if(!e.ref.blob){Mb({root:e});return}e.ref.blob.translateX=t.position.scopeLeft,e.ref.blob.translateY=t.position.scopeTop,e.ref.blob.scaleX=1,e.ref.blob.scaleY=1,e.ref.blob.opacity=1},Pb=({root:e})=>{!e.ref.blob||(e.ref.blob.opacity=0)},Db=({root:e})=>{!e.ref.blob||(e.ref.blob.scaleX=2.5,e.ref.blob.scaleY=2.5,e.ref.blob.opacity=0)},Nb=({root:e,props:t,actions:n})=>{Gb({root:e,props:t,actions:n});const{blob:r}=e.ref;n.length===0&&r&&r.opacity===0&&(e.removeChildView(r),e.ref.blob=null)},Gb=dt({DID_DRAG:Lb,DID_DROP:Db,DID_END_DRAG:Pb}),Ub=He({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:Nb}),Yg=(e,t)=>{try{const n=new DataTransfer;t.forEach(r=>{r instanceof File?n.items.add(r):n.items.add(new File([r],r.name,{type:r.type}))}),e.files=n.files}catch{return!1}return!0},Bb=({root:e})=>e.ref.fields={},ts=(e,t)=>e.ref.fields[t],Lc=e=>{e.query("GET_ACTIVE_ITEMS").forEach(t=>{!e.ref.fields[t.id]||e.element.appendChild(e.ref.fields[t.id])})},Dd=({root:e})=>Lc(e),Vb=({root:e,action:t})=>{const i=!(e.query("GET_ITEM",t.id).origin===We.LOCAL)&&e.query("SHOULD_UPDATE_FILE_INPUT"),o=wn("input");o.type=i?"file":"hidden",o.name=e.query("GET_NAME"),o.disabled=e.query("GET_DISABLED"),e.ref.fields[t.id]=o,Lc(e)},Fb=({root:e,action:t})=>{const n=ts(e,t.id);if(!n||(t.serverFileReference!==null&&(n.value=t.serverFileReference),!e.query("SHOULD_UPDATE_FILE_INPUT")))return;const r=e.query("GET_ITEM",t.id);Yg(n,[r.file])},kb=({root:e,action:t})=>{!e.query("SHOULD_UPDATE_FILE_INPUT")||setTimeout(()=>{const n=ts(e,t.id);!n||Yg(n,[t.file])},0)},$b=({root:e})=>{e.element.disabled=e.query("GET_DISABLED")},Hb=({root:e,action:t})=>{const n=ts(e,t.id);!n||(n.parentNode&&n.parentNode.removeChild(n),delete e.ref.fields[t.id])},zb=({root:e,action:t})=>{const n=ts(e,t.id);!n||(t.value===null?n.removeAttribute("value"):n.value=t.value,Lc(e))},qb=dt({DID_SET_DISABLED:$b,DID_ADD_ITEM:Vb,DID_LOAD_ITEM:Fb,DID_REMOVE_ITEM:Hb,DID_DEFINE_VALUE:zb,DID_PREPARE_OUTPUT:kb,DID_REORDER_ITEMS:Dd,DID_SORT_ITEMS:Dd}),Wb=He({tag:"fieldset",name:"data",create:Bb,write:qb,ignoreRect:!0}),Yb=e=>"getRootNode"in e?e.getRootNode():document,jb=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],Xb=["css","csv","html","txt"],Zb={zip:"zip|compressed",epub:"application/epub+zip"},jg=(e="")=>(e=e.toLowerCase(),jb.includes(e)?"image/"+(e==="jpg"?"jpeg":e==="svg"?"svg+xml":e):Xb.includes(e)?"text/"+e:Zb[e]||""),Pc=e=>new Promise((t,n)=>{const r=iC(e);if(r.length&&!Kb(e))return t(r);Qb(e).then(t)}),Kb=e=>e.files?e.files.length>0:!1,Qb=e=>new Promise((t,n)=>{const r=(e.items?Array.from(e.items):[]).filter(i=>Jb(i)).map(i=>eC(i));if(!r.length){t(e.files?Array.from(e.files):[]);return}Promise.all(r).then(i=>{const o=[];i.forEach(a=>{o.push.apply(o,a)}),t(o.filter(a=>a).map(a=>(a._relativePath||(a._relativePath=a.webkitRelativePath),a)))}).catch(console.error)}),Jb=e=>{if(Xg(e)){const t=Dc(e);if(t)return t.isFile||t.isDirectory}return e.kind==="file"},eC=e=>new Promise((t,n)=>{if(rC(e)){tC(Dc(e)).then(t).catch(n);return}t([e.getAsFile()])}),tC=e=>new Promise((t,n)=>{const r=[];let i=0,o=0;const a=()=>{o===0&&i===0&&t(r)},s=l=>{i++;const c=l.createReader(),u=()=>{c.readEntries(f=>{if(f.length===0){i--,a();return}f.forEach(d=>{d.isDirectory?s(d):(o++,d.file(h=>{const p=nC(h);d.fullPath&&(p._relativePath=d.fullPath),r.push(p),o--,a()}))}),u()},n)};u()};s(e)}),nC=e=>{if(e.type.length)return e;const t=e.lastModifiedDate,n=e.name,r=jg(es(e.name));return r.length&&(e=e.slice(0,e.size,r),e.name=n,e.lastModifiedDate=t),e},rC=e=>Xg(e)&&(Dc(e)||{}).isDirectory,Xg=e=>"webkitGetAsEntry"in e,Dc=e=>e.webkitGetAsEntry(),iC=e=>{let t=[];try{if(t=aC(e),t.length)return t;t=oC(e)}catch{}return t},oC=e=>{let t=e.getData("url");return typeof t=="string"&&t.length?[t]:[]},aC=e=>{let t=e.getData("text/html");if(typeof t=="string"&&t.length){const n=t.match(/src\s*=\s*"(.+?)"/);if(n)return[n[1]]}return[]},Ta=[],Ir=e=>({pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}),sC=(e,t,n)=>{const r=lC(t),i={element:e,filterElement:n,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return i.destroy=r.addListener(i),i},lC=e=>{const t=Ta.find(r=>r.element===e);if(t)return t;const n=cC(e);return Ta.push(n),n},cC=e=>{const t=[],n={dragenter:fC,dragover:dC,dragleave:pC,drop:hC},r={};De(n,(o,a)=>{r[o]=a(e,t),e.addEventListener(o,r[o],!1)});const i={element:e,addListener:o=>(t.push(o),()=>{t.splice(t.indexOf(o),1),t.length===0&&(Ta.splice(Ta.indexOf(i),1),De(n,a=>{e.removeEventListener(a,r[a],!1)}))})};return i},uC=(e,t)=>("elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)),Nc=(e,t)=>{const n=Yb(t),r=uC(n,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return r===t||t.contains(r)};let Zg=null;const $o=(e,t)=>{try{e.dropEffect=t}catch{}},fC=(e,t)=>n=>{n.preventDefault(),Zg=n.target,t.forEach(r=>{const{element:i,onenter:o}=r;Nc(n,i)&&(r.state="enter",o(Ir(n)))})},dC=(e,t)=>n=>{n.preventDefault();const r=n.dataTransfer;Pc(r).then(i=>{let o=!1;t.some(a=>{const{filterElement:s,element:l,onenter:c,onexit:u,ondrag:f,allowdrop:d}=a;$o(r,"copy");const h=d(i);if(!h){$o(r,"none");return}if(Nc(n,l)){if(o=!0,a.state===null){a.state="enter",c(Ir(n));return}if(a.state="over",s&&!h){$o(r,"none");return}f(Ir(n))}else s&&!o&&$o(r,"none"),a.state&&(a.state=null,u(Ir(n)))})})},hC=(e,t)=>n=>{n.preventDefault();const r=n.dataTransfer;Pc(r).then(i=>{t.forEach(o=>{const{filterElement:a,element:s,ondrop:l,onexit:c,allowdrop:u}=o;if(o.state=null,!(a&&!Nc(n,s))){if(!u(i))return c(Ir(n));l(Ir(n),i)}})})},pC=(e,t)=>n=>{Zg===n.target&&t.forEach(r=>{const{onexit:i}=r;r.state=null,i(Ir(n))})},gC=(e,t,n)=>{e.classList.add("filepond--hopper");const{catchesDropsOnPage:r,requiresDropOnElement:i,filterItems:o=u=>u}=n,a=sC(e,r?document.documentElement:e,i);let s="",l="";a.allowdrop=u=>t(o(u)),a.ondrop=(u,f)=>{const d=o(f);if(!t(d)){c.ondragend(u);return}l="drag-drop",c.onload(d,u)},a.ondrag=u=>{c.ondrag(u)},a.onenter=u=>{l="drag-over",c.ondragstart(u)},a.onexit=u=>{l="drag-exit",c.ondragend(u)};const c={updateHopperState:()=>{s!==l&&(e.dataset.hopperState=l,s=l)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{a.destroy()}};return c};let Dl=!1;const Zr=[],Kg=e=>{const t=document.activeElement;if(t&&/textarea|input/i.test(t.nodeName)){let n=!1,r=t;for(;r!==document.body;){if(r.classList.contains("filepond--root")){n=!0;break}r=r.parentNode}if(!n)return}Pc(e.clipboardData).then(n=>{!n.length||Zr.forEach(r=>r(n))})},mC=e=>{Zr.includes(e)||(Zr.push(e),!Dl&&(Dl=!0,document.addEventListener("paste",Kg)))},EC=e=>{Oc(Zr,Zr.indexOf(e)),Zr.length===0&&(document.removeEventListener("paste",Kg),Dl=!1)},_C=()=>{const e=n=>{t.onload(n)},t={destroy:()=>{EC(e)},onload:()=>{}};return mC(e),t},yC=({root:e,props:t})=>{e.element.id=`filepond--assistant-${t.id}`,ke(e.element,"role","status"),ke(e.element,"aria-live","polite"),ke(e.element,"aria-relevant","additions")};let Nd=null,Gd=null;const js=[],ns=(e,t)=>{e.element.textContent=t},vC=e=>{e.element.textContent=""},Qg=(e,t,n)=>{const r=e.query("GET_TOTAL_ITEMS");ns(e,`${n} ${t}, ${r} ${r===1?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(Gd),Gd=setTimeout(()=>{vC(e)},1500)},Jg=e=>e.element.parentNode.contains(document.activeElement),TC=({root:e,action:t})=>{if(!Jg(e))return;e.element.textContent="";const n=e.query("GET_ITEM",t.id);js.push(n.filename),clearTimeout(Nd),Nd=setTimeout(()=>{Qg(e,js.join(", "),e.query("GET_LABEL_FILE_ADDED")),js.length=0},750)},IC=({root:e,action:t})=>{if(!Jg(e))return;const n=t.item;Qg(e,n.filename,e.query("GET_LABEL_FILE_REMOVED"))},RC=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,i=e.query("GET_LABEL_FILE_PROCESSING_COMPLETE");ns(e,`${r} ${i}`)},Ud=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,i=e.query("GET_LABEL_FILE_PROCESSING_ABORTED");ns(e,`${r} ${i}`)},Ho=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename;ns(e,`${t.status.main} ${r} ${t.status.sub}`)},wC=He({create:yC,ignoreRect:!0,ignoreRectUpdate:!0,write:dt({DID_LOAD_ITEM:TC,DID_REMOVE_ITEM:IC,DID_COMPLETE_ITEM_PROCESSING:RC,DID_ABORT_ITEM_PROCESSING:Ud,DID_REVERT_ITEM_PROCESSING:Ud,DID_THROW_ITEM_REMOVE_ERROR:Ho,DID_THROW_ITEM_LOAD_ERROR:Ho,DID_THROW_ITEM_INVALID:Ho,DID_THROW_ITEM_PROCESSING_ERROR:Ho}),tag:"span",name:"assistant"}),em=(e,t="-")=>e.replace(new RegExp(`${t}.`,"g"),n=>n.charAt(1).toUpperCase()),tm=(e,t=16,n=!0)=>{let r=Date.now(),i=null;return(...o)=>{clearTimeout(i);const a=Date.now()-r,s=()=>{r=Date.now(),e(...o)};a<t?n||(i=setTimeout(s,t-a)):s()}},AC=1e6,Ia=e=>e.preventDefault(),OC=({root:e,props:t})=>{const n=e.query("GET_ID");n&&(e.element.id=n);const r=e.query("GET_CLASS_NAME");r&&r.split(" ").filter(l=>l.length).forEach(l=>{e.element.classList.add(l)}),e.ref.label=e.appendChildView(e.createChildView(Cb,{...t,translateY:null,caption:e.query("GET_LABEL_IDLE")})),e.ref.list=e.appendChildView(e.createChildView(Rb,{translateY:null})),e.ref.panel=e.appendChildView(e.createChildView(Fg,{name:"panel-root"})),e.ref.assistant=e.appendChildView(e.createChildView(wC,{...t})),e.ref.data=e.appendChildView(e.createChildView(Wb,{...t})),e.ref.measure=wn("div"),e.ref.measure.style.height="100%",e.element.appendChild(e.ref.measure),e.ref.bounds=null,e.query("GET_STYLES").filter(l=>!Rn(l.value)).map(({name:l,value:c})=>{e.element.dataset[l]=c}),e.ref.widthPrevious=null,e.ref.widthUpdated=tm(()=>{e.ref.updateHistory=[],e.dispatch("DID_RESIZE_ROOT")},250),e.ref.previousAspectRatio=null,e.ref.updateHistory=[];const i=window.matchMedia("(pointer: fine) and (hover: hover)").matches,o="PointerEvent"in window;e.query("GET_ALLOW_REORDER")&&o&&!i&&(e.element.addEventListener("touchmove",Ia,{passive:!1}),e.element.addEventListener("gesturestart",Ia));const a=e.query("GET_CREDITS");if(a.length===2){const l=document.createElement("a");l.className="filepond--credits",l.setAttribute("aria-hidden","true"),l.href=a[0],l.tabindex=-1,l.target="_blank",l.rel="noopener noreferrer",l.textContent=a[1],e.element.appendChild(l),e.ref.credits=l}},SC=({root:e,props:t,actions:n})=>{if(LC({root:e,props:t,actions:n}),n.filter(R=>/^DID_SET_STYLE_/.test(R.type)).filter(R=>!Rn(R.data.value)).map(({type:R,data:O})=>{const w=em(R.substring(8).toLowerCase(),"_");e.element.dataset[w]=O.value,e.invalidateLayout()}),e.rect.element.hidden)return;e.rect.element.width!==e.ref.widthPrevious&&(e.ref.widthPrevious=e.rect.element.width,e.ref.widthUpdated());let r=e.ref.bounds;r||(r=e.ref.bounds=xC(e),e.element.removeChild(e.ref.measure),e.ref.measure=null);const{hopper:i,label:o,list:a,panel:s}=e.ref;i&&i.updateHopperState();const l=e.query("GET_PANEL_ASPECT_RATIO"),c=e.query("GET_ALLOW_MULTIPLE"),u=e.query("GET_TOTAL_ITEMS"),f=c?e.query("GET_MAX_FILES")||AC:1,d=u===f,h=n.find(R=>R.type==="DID_ADD_ITEM");if(d&&h){const R=h.data.interactionMethod;o.opacity=0,c?o.translateY=-40:R===Dt.API?o.translateX=40:R===Dt.BROWSE?o.translateY=40:o.translateY=30}else d||(o.opacity=1,o.translateX=0,o.translateY=0);const p=bC(e),g=CC(e),m=o.rect.element.height,y=!c||d?0:m,_=d?a.rect.element.marginTop:0,E=u===0?0:a.rect.element.marginBottom,v=y+_+g.visual+E,T=y+_+g.bounds+E;if(a.translateY=Math.max(0,y-a.rect.element.marginTop)-p.top,l){const R=e.rect.element.width,O=R*l;l!==e.ref.previousAspectRatio&&(e.ref.previousAspectRatio=l,e.ref.updateHistory=[]);const w=e.ref.updateHistory;w.push(R);const S=2;if(w.length>S*2){const P=w.length,C=P-10;let z=0;for(let L=P;L>=C;L--)if(w[L]===w[L-2]&&z++,z>=S)return}s.scalable=!1,s.height=O;const M=O-y-(E-p.bottom)-(d?_:0);g.visual>M?a.overflow=M:a.overflow=null,e.height=O}else if(r.fixedHeight){s.scalable=!1;const R=r.fixedHeight-y-(E-p.bottom)-(d?_:0);g.visual>R?a.overflow=R:a.overflow=null}else if(r.cappedHeight){const R=v>=r.cappedHeight,O=Math.min(r.cappedHeight,v);s.scalable=!0,s.height=R?O:O-p.top-p.bottom;const w=O-y-(E-p.bottom)-(d?_:0);v>r.cappedHeight&&g.visual>w?a.overflow=w:a.overflow=null,e.height=Math.min(r.cappedHeight,T-p.top-p.bottom)}else{const R=u>0?p.top+p.bottom:0;s.scalable=!0,s.height=Math.max(m,v-R),e.height=Math.max(m,T-R)}e.ref.credits&&s.heightCurrent&&(e.ref.credits.style.transform=`translateY(${s.heightCurrent}px)`)},bC=e=>{const t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},CC=e=>{let t=0,n=0;const r=e.ref.list,i=r.childViews[0],o=i.childViews.filter(_=>_.rect.element.height),a=e.query("GET_ACTIVE_ITEMS").map(_=>o.find(E=>E.id===_.id)).filter(_=>_);if(a.length===0)return{visual:t,bounds:n};const s=i.rect.element.width,l=Mc(i,a,r.dragCoordinates),c=a[0].rect.element,u=c.marginTop+c.marginBottom,f=c.marginLeft+c.marginRight,d=c.width+f,h=c.height+u,p=typeof l<"u"&&l>=0?1:0,g=a.find(_=>_.markedForRemoval&&_.opacity<.45)?-1:0,m=a.length+p+g,y=xc(s,d);return y===1?a.forEach(_=>{const E=_.rect.element.height+u;n+=E,t+=E*_.opacity}):(n=Math.ceil(m/y)*h,t=n),{visual:t,bounds:n}},xC=e=>{const t=e.ref.measureHeight||null;return{cappedHeight:parseInt(e.style.maxHeight,10)||null,fixedHeight:t===0?null:t}},Gc=(e,t)=>{const n=e.query("GET_ALLOW_REPLACE"),r=e.query("GET_ALLOW_MULTIPLE"),i=e.query("GET_TOTAL_ITEMS");let o=e.query("GET_MAX_FILES");const a=t.length;return!r&&a>1?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:Ge("warning",0,"Max files")}),!0):(o=r?o:1,!r&&n?!1:_i(o)&&i+a>o?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:Ge("warning",0,"Max files")}),!0):!1)},MC=(e,t,n)=>{const r=e.childViews[0];return Mc(r,t,{left:n.scopeLeft-r.rect.element.left,top:n.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},Bd=e=>{const t=e.query("GET_ALLOW_DROP"),n=e.query("GET_DISABLED"),r=t&&!n;if(r&&!e.ref.hopper){const i=gC(e.element,o=>{const a=e.query("GET_BEFORE_DROP_FILE")||(()=>!0);return e.query("GET_DROP_VALIDATION")?o.every(l=>Or("ALLOW_HOPPER_ITEM",l,{query:e.query}).every(c=>c===!0)&&a(l)):!0},{filterItems:o=>{const a=e.query("GET_IGNORED_FILES");return o.filter(s=>li(s)?!a.includes(s.name.toLowerCase()):!0)},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});i.onload=(o,a)=>{const l=e.ref.list.childViews[0].childViews.filter(u=>u.rect.element.height),c=e.query("GET_ACTIVE_ITEMS").map(u=>l.find(f=>f.id===u.id)).filter(u=>u);Bt("ADD_ITEMS",o,{dispatch:e.dispatch}).then(u=>{if(Gc(e,u))return!1;e.dispatch("ADD_ITEMS",{items:u,index:MC(e.ref.list,c,a),interactionMethod:Dt.DROP})}),e.dispatch("DID_DROP",{position:a}),e.dispatch("DID_END_DRAG",{position:a})},i.ondragstart=o=>{e.dispatch("DID_START_DRAG",{position:o})},i.ondrag=tm(o=>{e.dispatch("DID_DRAG",{position:o})}),i.ondragend=o=>{e.dispatch("DID_END_DRAG",{position:o})},e.ref.hopper=i,e.ref.drip=e.appendChildView(e.createChildView(Ub))}else!r&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},Vd=(e,t)=>{const n=e.query("GET_ALLOW_BROWSE"),r=e.query("GET_DISABLED"),i=n&&!r;i&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(Sb,{...t,onload:o=>{Bt("ADD_ITEMS",o,{dispatch:e.dispatch}).then(a=>{if(Gc(e,a))return!1;e.dispatch("ADD_ITEMS",{items:a,index:-1,interactionMethod:Dt.BROWSE})})}}),0):!i&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},Fd=e=>{const t=e.query("GET_ALLOW_PASTE"),n=e.query("GET_DISABLED"),r=t&&!n;r&&!e.ref.paster?(e.ref.paster=_C(),e.ref.paster.onload=i=>{Bt("ADD_ITEMS",i,{dispatch:e.dispatch}).then(o=>{if(Gc(e,o))return!1;e.dispatch("ADD_ITEMS",{items:o,index:-1,interactionMethod:Dt.PASTE})})}):!r&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},LC=dt({DID_SET_ALLOW_BROWSE:({root:e,props:t})=>{Vd(e,t)},DID_SET_ALLOW_DROP:({root:e})=>{Bd(e)},DID_SET_ALLOW_PASTE:({root:e})=>{Fd(e)},DID_SET_DISABLED:({root:e,props:t})=>{Bd(e),Fd(e),Vd(e,t),e.query("GET_DISABLED")?e.element.dataset.disabled="disabled":e.element.removeAttribute("data-disabled")}}),PC=He({name:"root",read:({root:e})=>{e.ref.measure&&(e.ref.measureHeight=e.ref.measure.offsetHeight)},create:OC,write:SC,destroy:({root:e})=>{e.ref.paster&&e.ref.paster.destroy(),e.ref.hopper&&e.ref.hopper.destroy(),e.element.removeEventListener("touchmove",Ia),e.element.removeEventListener("gesturestart",Ia)},mixins:{styles:["height"]}}),DC=(e={})=>{let t=null;const n=va(),r=ZA(NO(n),[eS,BO(n)],[AS,UO(n)]);r.dispatch("SET_OPTIONS",{options:e});const i=()=>{document.hidden||r.dispatch("KICK")};document.addEventListener("visibilitychange",i);let o=null,a=!1,s=!1,l=null,c=null;const u=()=>{a||(a=!0),clearTimeout(o),o=setTimeout(()=>{a=!1,l=null,c=null,s&&(s=!1,r.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",u);const f=PC(r,{id:Ac()});let d=!1,h=!1;const p={_read:()=>{a&&(c=window.innerWidth,l||(l=c),!s&&c!==l&&(r.dispatch("DID_START_RESIZE"),s=!0)),h&&d&&(d=f.element.offsetParent===null),!d&&(f._read(),h=f.rect.element.hidden)},_write:x=>{const b=r.processActionQueue().filter(N=>!/^SET_/.test(N.type));d&&!b.length||(_(b),d=f._write(x,b,s),kO(r.query("GET_ITEMS")),d&&r.processDispatchQueue())}},g=x=>b=>{const N={type:x};if(!b)return N;if(b.hasOwnProperty("error")&&(N.error=b.error?{...b.error}:null),b.status&&(N.status={...b.status}),b.file&&(N.output=b.file),b.source)N.file=b.source;else if(b.item||b.id){const H=b.item?b.item:r.query("GET_ITEM",b.id);N.file=H?gt(H):null}return b.items&&(N.items=b.items.map(gt)),/progress/.test(x)&&(N.progress=b.progress),b.hasOwnProperty("origin")&&b.hasOwnProperty("target")&&(N.origin=b.origin,N.target=b.target),N},m={DID_DESTROY:g("destroy"),DID_INIT:g("init"),DID_THROW_MAX_FILES:g("warning"),DID_INIT_ITEM:g("initfile"),DID_START_ITEM_LOAD:g("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:g("addfileprogress"),DID_LOAD_ITEM:g("addfile"),DID_THROW_ITEM_INVALID:[g("error"),g("addfile")],DID_THROW_ITEM_LOAD_ERROR:[g("error"),g("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[g("error"),g("removefile")],DID_PREPARE_OUTPUT:g("preparefile"),DID_START_ITEM_PROCESSING:g("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:g("processfileprogress"),DID_ABORT_ITEM_PROCESSING:g("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:g("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:g("processfiles"),DID_REVERT_ITEM_PROCESSING:g("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[g("error"),g("processfile")],DID_REMOVE_ITEM:g("removefile"),DID_UPDATE_ITEMS:g("updatefiles"),DID_ACTIVATE_ITEM:g("activatefile"),DID_REORDER_ITEMS:g("reorderfiles")},y=x=>{const b={pond:q,...x};delete b.type,f.element.dispatchEvent(new CustomEvent(`FilePond:${x.type}`,{detail:b,bubbles:!0,cancelable:!0,composed:!0}));const N=[];x.hasOwnProperty("error")&&N.push(x.error),x.hasOwnProperty("file")&&N.push(x.file);const H=["type","error","file"];Object.keys(x).filter(Y=>!H.includes(Y)).forEach(Y=>N.push(x[Y])),q.fire(x.type,...N);const Q=r.query(`GET_ON${x.type.toUpperCase()}`);Q&&Q(...N)},_=x=>{!x.length||x.filter(b=>m[b.type]).forEach(b=>{const N=m[b.type];(Array.isArray(N)?N:[N]).forEach(H=>{b.type==="DID_INIT_ITEM"?y(H(b.data)):setTimeout(()=>{y(H(b.data))},0)})})},E=x=>r.dispatch("SET_OPTIONS",{options:x}),v=x=>r.query("GET_ACTIVE_ITEM",x),T=x=>new Promise((b,N)=>{r.dispatch("REQUEST_ITEM_PREPARE",{query:x,success:H=>{b(H)},failure:H=>{N(H)}})}),R=(x,b={})=>new Promise((N,H)=>{S([{source:x,options:b}],{index:b.index}).then(Q=>N(Q&&Q[0])).catch(H)}),O=x=>x.file&&x.id,w=(x,b)=>(typeof x=="object"&&!O(x)&&!b&&(b=x,x=void 0),r.dispatch("REMOVE_ITEM",{...b,query:x}),r.query("GET_ACTIVE_ITEM",x)===null),S=(...x)=>new Promise((b,N)=>{const H=[],Q={};if(Za(x[0]))H.push.apply(H,x[0]),Object.assign(Q,x[1]||{});else{const Y=x[x.length-1];typeof Y=="object"&&!(Y instanceof Blob)&&Object.assign(Q,x.pop()),H.push(...x)}r.dispatch("ADD_ITEMS",{items:H,index:Q.index,interactionMethod:Dt.API,success:b,failure:N})}),M=()=>r.query("GET_ACTIVE_ITEMS"),P=x=>new Promise((b,N)=>{r.dispatch("REQUEST_ITEM_PROCESSING",{query:x,success:H=>{b(H)},failure:H=>{N(H)}})}),C=(...x)=>{const b=Array.isArray(x[0])?x[0]:x,N=b.length?b:M();return Promise.all(N.map(T))},z=(...x)=>{const b=Array.isArray(x[0])?x[0]:x;if(!b.length){const N=M().filter(H=>!(H.status===Ee.IDLE&&H.origin===We.LOCAL)&&H.status!==Ee.PROCESSING&&H.status!==Ee.PROCESSING_COMPLETE&&H.status!==Ee.PROCESSING_REVERT_ERROR);return Promise.all(N.map(P))}return Promise.all(b.map(P))},L=(...x)=>{const b=Array.isArray(x[0])?x[0]:x;let N;typeof b[b.length-1]=="object"?N=b.pop():Array.isArray(x[0])&&(N=x[1]);const H=M();return b.length?b.map(Y=>hr(Y)?H[Y]?H[Y].id:null:Y).filter(Y=>Y).map(Y=>w(Y,N)):Promise.all(H.map(Y=>w(Y,N)))},q={...Ja(),...p,...GO(r,n),setOptions:E,addFile:R,addFiles:S,getFile:v,processFile:P,prepareFile:T,removeFile:w,moveFile:(x,b)=>r.dispatch("MOVE_ITEM",{query:x,index:b}),getFiles:M,processFiles:z,removeFiles:L,prepareFiles:C,sort:x=>r.dispatch("SORT",{compare:x}),browse:()=>{var x=f.element.querySelector("input[type=file]");x&&x.click()},destroy:()=>{q.fire("destroy",f.element),r.dispatch("ABORT_ALL"),f._destroy(),window.removeEventListener("resize",u),document.removeEventListener("visibilitychange",i),r.dispatch("DID_DESTROY")},insertBefore:x=>cd(f.element,x),insertAfter:x=>ud(f.element,x),appendTo:x=>x.appendChild(f.element),replaceElement:x=>{cd(f.element,x),x.parentNode.removeChild(x),t=x},restoreElement:()=>{!t||(ud(t,f.element),f.element.parentNode.removeChild(f.element),t=null)},isAttachedTo:x=>f.element===x||t===x,element:{get:()=>f.element},status:{get:()=>r.query("GET_STATUS")}};return r.dispatch("DID_INIT"),Yn(q)},nm=(e={})=>{const t={};return De(va(),(r,i)=>{t[r]=i[0]}),DC({...t,...e})},NC=e=>e.charAt(0).toLowerCase()+e.slice(1),GC=e=>em(e.replace(/^data-/,"")),rm=(e,t)=>{De(t,(n,r)=>{De(e,(i,o)=>{const a=new RegExp(n);if(!a.test(i)||(delete e[i],r===!1))return;if(ft(r)){e[r]=o;return}const l=r.group;je(r)&&!e[l]&&(e[l]={}),e[l][NC(i.replace(a,""))]=o}),r.mapping&&rm(e[r.group],r.mapping)})},UC=(e,t={})=>{const n=[];De(e.attributes,i=>{n.push(e.attributes[i])});const r=n.filter(i=>i.name).reduce((i,o)=>{const a=ke(e,o.name);return i[GC(o.name)]=a===o.name?!0:a,i},{});return rm(r,t),r},BC=(e,t={})=>{const n={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};Or("SET_ATTRIBUTE_TO_OPTION_MAP",n);const r={...t},i=UC(e.nodeName==="FIELDSET"?e.querySelector("input[type=file]"):e,n);Object.keys(i).forEach(a=>{je(i[a])?(je(r[a])||(r[a]={}),Object.assign(r[a],i[a])):r[a]=i[a]}),r.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map(a=>({source:a.value,options:{type:a.dataset.type}})));const o=nm(r);return e.files&&Array.from(e.files).forEach(a=>{o.addFile(a)}),o.replaceElement(e),o},VC=(...e)=>XA(e[0])?BC(...e):nm(...e),FC=["fire","_read","_write"],kd=e=>{const t={};return Ag(e,t,FC),t},kC=(e,t)=>e.replace(/(?:{([a-zA-Z]+)})/g,(n,r)=>t[r]),$C=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(t),r=new Worker(n);return{transfer:(i,o)=>{},post:(i,o,a)=>{const s=Ac();r.onmessage=l=>{l.data.id===s&&o(l.data.message)},r.postMessage({id:s,message:i},a)},terminate:()=>{r.terminate(),URL.revokeObjectURL(n)}}},HC=e=>new Promise((t,n)=>{const r=new Image;r.onload=()=>{t(r)},r.onerror=i=>{n(i)},r.src=e}),im=(e,t)=>{const n=e.slice(0,e.size,e.type);return n.lastModifiedDate=e.lastModifiedDate,n.name=t,n},zC=e=>im(e,e.name),$d=[],qC=e=>{if($d.includes(e))return;$d.push(e);const t=e({addFilter:HO,utils:{Type:j,forin:De,isString:ft,isFile:li,toNaturalFileSize:Ug,replaceInString:kC,getExtensionFromFilename:es,getFilenameWithoutExtension:Dg,guesstimateMimeType:jg,getFileFromBlob:si,getFilenameFromURL:Io,createRoute:dt,createWorker:$C,createView:He,createItemAPI:gt,loadImage:HC,copyFile:zC,renameFile:im,createBlob:Mg,applyFilterChain:Bt,text:Ue,getNumericAspectRatioFromString:bg},views:{fileActionButton:Gg}});zO(t.options)},WC=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",YC=()=>"Promise"in window,jC=()=>"slice"in Blob.prototype,XC=()=>"URL"in window&&"createObjectURL"in window.URL,ZC=()=>"visibilityState"in document,KC=()=>"performance"in window,QC=()=>"supports"in(window.CSS||{}),JC=()=>/MSIE|Trident/.test(window.navigator.userAgent),Nl=(()=>{const e=yg()&&!WC()&&ZC()&&YC()&&jC()&&XC()&&KC()&&(QC()||JC());return()=>e})(),Dn={apps:[]},ex="filepond",Sr=()=>{};let Ra={},ia=Sr,Xs=Sr,Hd=Sr,zd=Sr,Gl=Sr,qd=Sr,Wd=Sr;if(Nl()){TO(()=>{Dn.apps.forEach(n=>n._read())},n=>{Dn.apps.forEach(r=>r._write(n))});const e=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:Nl,create:ia,destroy:Xs,parse:Hd,find:zd,registerPlugin:Gl,setOptions:Wd}})),document.removeEventListener("DOMContentLoaded",e)};document.readyState!=="loading"?setTimeout(()=>e(),0):document.addEventListener("DOMContentLoaded",e);const t=()=>De(va(),(n,r)=>{Ra[n]=r[1]});Ra={},t(),ia=(...n)=>{const r=VC(...n);return r.on("destroy",Xs),Dn.apps.push(r),kd(r)},Xs=n=>{const r=Dn.apps.findIndex(i=>i.isAttachedTo(n));return r>=0?(Dn.apps.splice(r,1)[0].restoreElement(),!0):!1},Hd=n=>Array.from(n.querySelectorAll(`.${ex}`)).filter(o=>!Dn.apps.find(a=>a.isAttachedTo(o))).map(o=>ia(o)),zd=n=>{const r=Dn.apps.find(i=>i.isAttachedTo(n));return r?kd(r):null},Gl=(...n)=>{n.forEach(qC),t()},qd=()=>{const n={};return De(va(),(r,i)=>{n[r]=i[0]}),n},Wd=n=>(je(n)&&(Dn.apps.forEach(r=>{r.setOptions(n)}),qO(n)),qd())}/*!
 * vue-filepond v7.0.3
 * A handy FilePond adapter component for Vue
 * 
 * Copyright (c) 2022 PQINA
 * https://pqina.nl/filepond
 * 
 * Licensed under the MIT license.
 */const tx=["setOptions","on","off","onOnce","appendTo","insertAfter","insertBefore","isAttachedTo","replaceElement","restoreElement","destroy"],nx=Nl(),rx=e=>({string:String,boolean:Boolean,array:Array,function:Function,int:Number,serverapi:Object,object:Object})[e],zo={},Zs=[],Ks=[];let ix={};const ox=(...e)=>{Gl(...e),Zs.length=0;for(const t in Ra){if(/^on/.test(t)){Zs.push(t);continue}let n=[String,rx(Ra[t])];t=="labelFileProcessingError"&&n.push(Function),zo[t]={type:n,default:void 0}}return{name:"FilePond",props:zo,render(){const t=Object.entries({id:this.id,name:this.name,type:"file",class:this.className,required:this.required,multiple:this.allowMultiple,accept:this.acceptedFileTypes,capture:this.captureMethod}).reduce((n,[r,i])=>(i!==void 0&&(n[r]=i),n),{});return ua("div",{class:{"filepond--wrapper":!0}},[ua("input",t)])},created(){this.watchers=Object.keys(zo).map(t=>this.$watch(t,n=>{this._pond[t]=n}))},mounted(){if(!nx)return;this._element=this.$el.querySelector("input");const t=Zs.reduce((r,i)=>(r[i]=(...o)=>{this.$emit("input",this._pond?this._pond.getFiles():[]),this.$emit(i.substr(2),...o)},r),{}),n={};Object.keys(zo).forEach(r=>{this[r]!==void 0&&(n[r]=this[r])}),this._pond=ia(this._element,Object.assign({},ix,t,n)),Object.keys(this._pond).filter(r=>!tx.includes(r)).forEach(r=>{this[r]=this._pond[r]}),Ks.push(this._pond)},beforeUnmount(){const{detached:t}=this.$options;if(!this.$el.offsetParent){t.call(this);return}const n=(i,o)=>{const s=((i[0]||{}).removedNodes||[])[0];!s||!s.contains(this.$el)||(o.disconnect(),t.call(this))};new MutationObserver(n).observe(document.documentElement,{childList:!0,subtree:!0})},detached(){if(this.watchers.forEach(n=>n()),!this._pond)return;this._pond.destroy();const t=Ks.indexOf(this._pond);t>=0&&Ks.splice(t,1),this._pond=null}}};/*!
 * FilePondPluginImagePreview 4.6.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const ax=e=>/^image/.test(e.type),Yd=(e,t)=>Eo(e.x*t,e.y*t),jd=(e,t)=>Eo(e.x+t.x,e.y+t.y),sx=e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return t===0?{x:0,y:0}:Eo(e.x/t,e.y/t)},qo=(e,t,n)=>{const r=Math.cos(t),i=Math.sin(t),o=Eo(e.x-n.x,e.y-n.y);return Eo(n.x+r*o.x-i*o.y,n.y+i*o.x+r*o.y)},Eo=(e=0,t=0)=>({x:e,y:t}),mt=(e,t,n=1,r)=>{if(typeof e=="string")return parseFloat(e)*n;if(typeof e=="number")return e*(r?t[r]:Math.min(t.width,t.height))},lx=(e,t,n)=>{const r=e.borderStyle||e.lineStyle||"solid",i=e.backgroundColor||e.fontColor||"transparent",o=e.borderColor||e.lineColor||"transparent",a=mt(e.borderWidth||e.lineWidth,t,n),s=e.lineCap||"round",l=e.lineJoin||"round",c=typeof r=="string"?"":r.map(f=>mt(f,t,n)).join(","),u=e.opacity||1;return{"stroke-linecap":s,"stroke-linejoin":l,"stroke-width":a||0,"stroke-dasharray":c,stroke:o,fill:i,opacity:u}},Ct=e=>e!=null,cx=(e,t,n=1)=>{let r=mt(e.x,t,n,"width")||mt(e.left,t,n,"width"),i=mt(e.y,t,n,"height")||mt(e.top,t,n,"height"),o=mt(e.width,t,n,"width"),a=mt(e.height,t,n,"height"),s=mt(e.right,t,n,"width"),l=mt(e.bottom,t,n,"height");return Ct(i)||(Ct(a)&&Ct(l)?i=t.height-a-l:i=l),Ct(r)||(Ct(o)&&Ct(s)?r=t.width-o-s:r=s),Ct(o)||(Ct(r)&&Ct(s)?o=t.width-r-s:o=0),Ct(a)||(Ct(i)&&Ct(l)?a=t.height-i-l:a=0),{x:r||0,y:i||0,width:o||0,height:a||0}},ux=e=>e.map((t,n)=>`${n===0?"M":"L"} ${t.x} ${t.y}`).join(" "),sn=(e,t)=>Object.keys(t).forEach(n=>e.setAttribute(n,t[n])),fx="http://www.w3.org/2000/svg",Br=(e,t)=>{const n=document.createElementNS(fx,e);return t&&sn(n,t),n},dx=e=>sn(e,{...e.rect,...e.styles}),hx=e=>{const t=e.rect.x+e.rect.width*.5,n=e.rect.y+e.rect.height*.5,r=e.rect.width*.5,i=e.rect.height*.5;return sn(e,{cx:t,cy:n,rx:r,ry:i,...e.styles})},px={contain:"xMidYMid meet",cover:"xMidYMid slice"},gx=(e,t)=>{sn(e,{...e.rect,...e.styles,preserveAspectRatio:px[t.fit]||"none"})},mx={left:"start",center:"middle",right:"end"},Ex=(e,t,n,r)=>{const i=mt(t.fontSize,n,r),o=t.fontFamily||"sans-serif",a=t.fontWeight||"normal",s=mx[t.textAlign]||"start";sn(e,{...e.rect,...e.styles,"stroke-width":0,"font-weight":a,"font-size":i,"font-family":o,"text-anchor":s}),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},_x=(e,t,n,r)=>{sn(e,{...e.rect,...e.styles,fill:"none"});const i=e.childNodes[0],o=e.childNodes[1],a=e.childNodes[2],s=e.rect,l={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(sn(i,{x1:s.x,y1:s.y,x2:l.x,y2:l.y}),!t.lineDecoration)return;o.style.display="none",a.style.display="none";const c=sx({x:l.x-s.x,y:l.y-s.y}),u=mt(.05,n,r);if(t.lineDecoration.indexOf("arrow-begin")!==-1){const f=Yd(c,u),d=jd(s,f),h=qo(s,2,d),p=qo(s,-2,d);sn(o,{style:"display:block;",d:`M${h.x},${h.y} L${s.x},${s.y} L${p.x},${p.y}`})}if(t.lineDecoration.indexOf("arrow-end")!==-1){const f=Yd(c,-u),d=jd(l,f),h=qo(l,2,d),p=qo(l,-2,d);sn(a,{style:"display:block;",d:`M${h.x},${h.y} L${l.x},${l.y} L${p.x},${p.y}`})}},yx=(e,t,n,r)=>{sn(e,{...e.styles,fill:"none",d:ux(t.points.map(i=>({x:mt(i.x,n,r,"width"),y:mt(i.y,n,r,"height")})))})},Wo=e=>t=>Br(e,{id:t.id}),vx=e=>{const t=Br("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=()=>{t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},Tx=e=>{const t=Br("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),n=Br("line");t.appendChild(n);const r=Br("path");t.appendChild(r);const i=Br("path");return t.appendChild(i),t},Ix={image:vx,rect:Wo("rect"),ellipse:Wo("ellipse"),text:Wo("text"),path:Wo("path"),line:Tx},Rx={rect:dx,ellipse:hx,image:gx,text:Ex,path:yx,line:_x},wx=(e,t)=>Ix[e](t),Ax=(e,t,n,r,i)=>{t!=="path"&&(e.rect=cx(n,r,i)),e.styles=lx(n,r,i),Rx[t](e,n,r,i)},Ox=["x","y","left","top","right","bottom","width","height"],Sx=e=>typeof e=="string"&&/%/.test(e)?parseFloat(e)/100:e,bx=e=>{const[t,n]=e,r=n.points?{}:Ox.reduce((i,o)=>(i[o]=Sx(n[o]),i),{});return[t,{zIndex:0,...n,...r}]},Cx=(e,t)=>e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0,xx=e=>e.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:t,props:n})=>{if(!n.dirty)return;const{crop:r,resize:i,markup:o}=n,a=n.width,s=n.height;let l=r.width,c=r.height;if(i){const{size:h}=i;let p=h&&h.width,g=h&&h.height;const m=i.mode,y=i.upscale;p&&!g&&(g=p),g&&!p&&(p=g);const _=l<p&&c<g;if(!_||_&&y){let E=p/l,v=g/c;if(m==="force")l=p,c=g;else{let T;m==="cover"?T=Math.max(E,v):m==="contain"&&(T=Math.min(E,v)),l=l*T,c=c*T}}}const u={width:a,height:s};t.element.setAttribute("width",u.width),t.element.setAttribute("height",u.height);const f=Math.min(a/l,s/c);t.element.innerHTML="";const d=t.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");o.filter(d).map(bx).sort(Cx).forEach(h=>{const[p,g]=h,m=wx(p,g);Ax(m,p,g,u,f),t.element.appendChild(m)})}}),Qi=(e,t)=>({x:e,y:t}),Mx=(e,t)=>e.x*t.x+e.y*t.y,Xd=(e,t)=>Qi(e.x-t.x,e.y-t.y),Lx=(e,t)=>Mx(Xd(e,t),Xd(e,t)),Zd=(e,t)=>Math.sqrt(Lx(e,t)),Kd=(e,t)=>{const n=e,r=1.5707963267948966,i=t,o=1.5707963267948966-t,a=Math.sin(r),s=Math.sin(i),l=Math.sin(o),c=Math.cos(o),u=n/a,f=u*s,d=u*l;return Qi(c*f,c*d)},Px=(e,t)=>{const n=e.width,r=e.height,i=Kd(n,t),o=Kd(r,t),a=Qi(e.x+Math.abs(i.x),e.y-Math.abs(i.y)),s=Qi(e.x+e.width+Math.abs(o.y),e.y+Math.abs(o.x)),l=Qi(e.x-Math.abs(o.y),e.y+e.height-Math.abs(o.x));return{width:Zd(a,s),height:Zd(a,l)}},Dx=(e,t,n=1)=>{const r=e.height/e.width;let i=1,o=t,a=1,s=r;s>o&&(s=o,a=s/r);const l=Math.max(i/a,o/s),c=e.width/(n*l*a),u=c*t;return{width:c,height:u}},om=(e,t,n,r)=>{const i=r.x>.5?1-r.x:r.x,o=r.y>.5?1-r.y:r.y,a=i*2*e.width,s=o*2*e.height,l=Px(t,n);return Math.max(l.width/a,l.height/s)},am=(e,t)=>{let n=e.width,r=n*t;r>e.height&&(r=e.height,n=r/t);const i=(e.width-n)*.5,o=(e.height-r)*.5;return{x:i,y:o,width:n,height:r}},Nx=(e,t={})=>{let{zoom:n,rotation:r,center:i,aspectRatio:o}=t;o||(o=e.height/e.width);const a=Dx(e,o,n),s={x:a.width*.5,y:a.height*.5},l={x:0,y:0,width:a.width,height:a.height,center:s},c=typeof t.scaleToFit>"u"||t.scaleToFit,u=om(e,am(l,o),r,c?i:{x:.5,y:.5}),f=n*u;return{widthFloat:a.width/f,heightFloat:a.height/f,width:Math.round(a.width/f),height:Math.round(a.height/f)}},Zt={type:"spring",stiffness:.5,damping:.45,mass:10},Gx=e=>e.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:t,props:n})=>{t.appendChild(n.image)}}),Ux=e=>e.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:Zt,originY:Zt,scaleX:Zt,scaleY:Zt,translateX:Zt,translateY:Zt,rotateZ:Zt}},create:({root:t,props:n})=>{n.width=n.image.width,n.height=n.image.height,t.ref.bitmap=t.appendChildView(t.createChildView(Gx(e),{image:n.image}))},write:({root:t,props:n})=>{const{flip:r}=n.crop,{bitmap:i}=t.ref;i.scaleX=r.horizontal?-1:1,i.scaleY=r.vertical?-1:1}}),Bx=e=>e.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:t,props:n}){!n.background||(t.element.style.backgroundColor=n.background)},create:({root:t,props:n})=>{t.ref.image=t.appendChildView(t.createChildView(Ux(e),Object.assign({},n))),t.ref.createMarkup=()=>{t.ref.markup||(t.ref.markup=t.appendChildView(t.createChildView(xx(e),Object.assign({},n))))},t.ref.destroyMarkup=()=>{!t.ref.markup||(t.removeChildView(t.ref.markup),t.ref.markup=null)};const r=t.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");r!==null&&(r==="grid"?t.element.dataset.transparencyIndicator=r:t.element.dataset.transparencyIndicator="color")},write:({root:t,props:n,shouldOptimize:r})=>{const{crop:i,markup:o,resize:a,dirty:s,width:l,height:c}=n;t.ref.image.crop=i;const u={x:0,y:0,width:l,height:c,center:{x:l*.5,y:c*.5}},f={width:t.ref.image.width,height:t.ref.image.height},d={x:i.center.x*f.width,y:i.center.y*f.height},h={x:u.center.x-f.width*i.center.x,y:u.center.y-f.height*i.center.y},p=Math.PI*2+i.rotation%(Math.PI*2),g=i.aspectRatio||f.height/f.width,m=typeof i.scaleToFit>"u"||i.scaleToFit,y=om(f,am(u,g),p,m?i.center:{x:.5,y:.5}),_=i.zoom*y;o&&o.length?(t.ref.createMarkup(),t.ref.markup.width=l,t.ref.markup.height=c,t.ref.markup.resize=a,t.ref.markup.dirty=s,t.ref.markup.markup=o,t.ref.markup.crop=Nx(f,i)):t.ref.markup&&t.ref.destroyMarkup();const E=t.ref.image;if(r){E.originX=null,E.originY=null,E.translateX=null,E.translateY=null,E.rotateZ=null,E.scaleX=null,E.scaleY=null;return}E.originX=d.x,E.originY=d.y,E.translateX=h.x,E.translateY=h.y,E.rotateZ=p,E.scaleX=_,E.scaleY=_}}),Vx=e=>e.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:Zt,scaleY:Zt,translateY:Zt,opacity:{type:"tween",duration:400}}},create:({root:t,props:n})=>{t.ref.clip=t.appendChildView(t.createChildView(Bx(e),{id:n.id,image:n.image,crop:n.crop,markup:n.markup,resize:n.resize,dirty:n.dirty,background:n.background}))},write:({root:t,props:n,shouldOptimize:r})=>{const{clip:i}=t.ref,{image:o,crop:a,markup:s,resize:l,dirty:c}=n;if(i.crop=a,i.markup=s,i.resize=l,i.dirty=c,i.opacity=r?0:1,r||t.rect.element.hidden)return;const u=o.height/o.width;let f=a.aspectRatio||u;const d=t.rect.inner.width,h=t.rect.inner.height;let p=t.query("GET_IMAGE_PREVIEW_HEIGHT");const g=t.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),m=t.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),y=t.query("GET_PANEL_ASPECT_RATIO"),_=t.query("GET_ALLOW_MULTIPLE");y&&!_&&(p=d*y,f=y);let E=p!==null?p:Math.max(g,Math.min(d*f,m)),v=E/f;v>d&&(v=d,E=v*f),E>h&&(E=h,v=h/f),i.width=v,i.height=E}});let Fx=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`,Qd=0;const kx=e=>e.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:t,props:n})=>{let r=Fx;if(document.querySelector("base")){const i=new URL(window.location.href.replace(window.location.hash,"")).href;r=r.replace(/url\(\#/g,"url("+i+"#")}Qd++,t.element.classList.add(`filepond--image-preview-overlay-${n.status}`),t.element.innerHTML=r.replace(/__UID__/g,Qd)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),$x=function(){self.onmessage=e=>{createImageBitmap(e.data.message.file).then(t=>{self.postMessage({id:e.data.id,message:t},[t])})}},Hx=function(){self.onmessage=e=>{const t=e.data.message.imageData,n=e.data.message.colorMatrix,r=t.data,i=r.length,o=n[0],a=n[1],s=n[2],l=n[3],c=n[4],u=n[5],f=n[6],d=n[7],h=n[8],p=n[9],g=n[10],m=n[11],y=n[12],_=n[13],E=n[14],v=n[15],T=n[16],R=n[17],O=n[18],w=n[19];let S=0,M=0,P=0,C=0,z=0;for(;S<i;S+=4)M=r[S]/255,P=r[S+1]/255,C=r[S+2]/255,z=r[S+3]/255,r[S]=Math.max(0,Math.min((M*o+P*a+C*s+z*l+c)*255,255)),r[S+1]=Math.max(0,Math.min((M*u+P*f+C*d+z*h+p)*255,255)),r[S+2]=Math.max(0,Math.min((M*g+P*m+C*y+z*_+E)*255,255)),r[S+3]=Math.max(0,Math.min((M*v+P*T+C*R+z*O+w)*255,255));self.postMessage({id:e.data.id,message:t},[t.data.buffer])}},zx=(e,t)=>{let n=new Image;n.onload=()=>{const r=n.naturalWidth,i=n.naturalHeight;n=null,t(r,i)},n.src=e},qx={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},Wx=(e,t,n,r)=>{r!==-1&&e.transform.apply(e,qx[r](t,n))},Yx=(e,t,n,r)=>{t=Math.round(t),n=Math.round(n);const i=document.createElement("canvas");i.width=t,i.height=n;const o=i.getContext("2d");return r>=5&&r<=8&&([t,n]=[n,t]),Wx(o,t,n,r),o.drawImage(e,0,0,t,n),i},sm=e=>/^image/.test(e.type)&&!/svg/.test(e.type),jx=10,Xx=10,Zx=e=>{const t=Math.min(jx/e.width,Xx/e.height),n=document.createElement("canvas"),r=n.getContext("2d"),i=n.width=Math.ceil(e.width*t),o=n.height=Math.ceil(e.height*t);r.drawImage(e,0,0,i,o);let a=null;try{a=r.getImageData(0,0,i,o).data}catch{return null}const s=a.length;let l=0,c=0,u=0,f=0;for(;f<s;f+=4)l+=a[f]*a[f],c+=a[f+1]*a[f+1],u+=a[f+2]*a[f+2];return l=Qs(l,s),c=Qs(c,s),u=Qs(u,s),{r:l,g:c,b:u}},Qs=(e,t)=>Math.floor(Math.sqrt(e/(t/4))),Kx=(e,t)=>(t=t||document.createElement("canvas"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t),Qx=e=>{let t;try{t=new ImageData(e.width,e.height)}catch{t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(new Uint8ClampedArray(e.data)),t},Jx=e=>new Promise((t,n)=>{const r=new Image;r.crossOrigin="Anonymous",r.onload=()=>{t(r)},r.onerror=i=>{n(i)},r.src=e}),eM=e=>{const t=kx(e),n=Vx(e),{createWorker:r}=e.utils,i=(_,E,v)=>new Promise(T=>{_.ref.imageData||(_.ref.imageData=v.getContext("2d").getImageData(0,0,v.width,v.height));const R=Qx(_.ref.imageData);if(!E||E.length!==20)return v.getContext("2d").putImageData(R,0,0),T();const O=r(Hx);O.post({imageData:R,colorMatrix:E},w=>{v.getContext("2d").putImageData(w,0,0),O.terminate(),T()},[R.data.buffer])}),o=(_,E)=>{_.removeChildView(E),E.image.width=1,E.image.height=1,E._destroy()},a=({root:_})=>{const E=_.ref.images.shift();return E.opacity=0,E.translateY=-15,_.ref.imageViewBin.push(E),E},s=({root:_,props:E,image:v})=>{const T=E.id,R=_.query("GET_ITEM",{id:T});if(!R)return;const O=R.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},w=_.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let S,M,P=!1;_.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(S=R.getMetadata("markup")||[],M=R.getMetadata("resize"),P=!0);const C=_.appendChildView(_.createChildView(n,{id:T,image:v,crop:O,resize:M,markup:S,dirty:P,background:w,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),_.childViews.length);_.ref.images.push(C),C.opacity=1,C.scaleX=1,C.scaleY=1,C.translateY=0,setTimeout(()=>{_.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:T})},250)},l=({root:_,props:E})=>{const v=_.query("GET_ITEM",{id:E.id});if(!v)return;const T=_.ref.images[_.ref.images.length-1];T.crop=v.getMetadata("crop"),T.background=_.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),_.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(T.dirty=!0,T.resize=v.getMetadata("resize"),T.markup=v.getMetadata("markup"))},c=({root:_,props:E,action:v})=>{if(!/crop|filter|markup|resize/.test(v.change.key)||!_.ref.images.length)return;const T=_.query("GET_ITEM",{id:E.id});if(!!T){if(/filter/.test(v.change.key)){const R=_.ref.images[_.ref.images.length-1];i(_,v.change.value,R.image);return}if(/crop|markup|resize/.test(v.change.key)){const R=T.getMetadata("crop"),O=_.ref.images[_.ref.images.length-1];if(R&&R.aspectRatio&&O.crop&&O.crop.aspectRatio&&Math.abs(R.aspectRatio-O.crop.aspectRatio)>1e-5){const w=a({root:_});s({root:_,props:E,image:Kx(w.image)})}else l({root:_,props:E})}}},u=_=>{const v=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);return(v?parseInt(v[1]):null)<=58?!1:"createImageBitmap"in window&&sm(_)},f=({root:_,props:E})=>{const{id:v}=E,T=_.query("GET_ITEM",v);if(!T)return;const R=URL.createObjectURL(T.file);zx(R,(O,w)=>{_.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:v,width:O,height:w})})},d=({root:_,props:E})=>{const{id:v}=E,T=_.query("GET_ITEM",v);if(!T)return;const R=URL.createObjectURL(T.file),O=()=>{Jx(R).then(w)},w=S=>{URL.revokeObjectURL(R);const P=(T.getMetadata("exif")||{}).orientation||-1;let{width:C,height:z}=S;if(!C||!z)return;P>=5&&P<=8&&([C,z]=[z,C]);const L=Math.max(1,window.devicePixelRatio*.75),x=_.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*L,b=z/C,N=_.rect.element.width,H=_.rect.element.height;let Q=N,Y=Q*b;b>1?(Q=Math.min(C,N*x),Y=Q*b):(Y=Math.min(z,H*x),Q=Y/b);const oe=Yx(S,Q,Y,P),ce=()=>{const B=_.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?Zx(data):null;T.setMetadata("color",B,!0),"close"in S&&S.close(),_.ref.overlayShadow.opacity=1,s({root:_,props:E,image:oe})},de=T.getMetadata("filter");de?i(_,de,oe).then(ce):ce()};if(u(T.file)){const S=r($x);S.post({file:T.file},M=>{if(S.terminate(),!M){O();return}w(M)})}else O()},h=({root:_})=>{const E=_.ref.images[_.ref.images.length-1];E.translateY=0,E.scaleX=1,E.scaleY=1,E.opacity=1},p=({root:_})=>{_.ref.overlayShadow.opacity=1,_.ref.overlayError.opacity=0,_.ref.overlaySuccess.opacity=0},g=({root:_})=>{_.ref.overlayShadow.opacity=.25,_.ref.overlayError.opacity=1},m=({root:_})=>{_.ref.overlayShadow.opacity=.25,_.ref.overlaySuccess.opacity=1},y=({root:_})=>{_.ref.images=[],_.ref.imageData=null,_.ref.imageViewBin=[],_.ref.overlayShadow=_.appendChildView(_.createChildView(t,{opacity:0,status:"idle"})),_.ref.overlaySuccess=_.appendChildView(_.createChildView(t,{opacity:0,status:"success"})),_.ref.overlayError=_.appendChildView(_.createChildView(t,{opacity:0,status:"failure"}))};return e.utils.createView({name:"image-preview-wrapper",create:y,styles:["height"],apis:["height"],destroy:({root:_})=>{_.ref.images.forEach(E=>{E.image.width=1,E.image.height=1})},didWriteView:({root:_})=>{_.ref.images.forEach(E=>{E.dirty=!1})},write:e.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:h,DID_IMAGE_PREVIEW_CONTAINER_CREATE:f,DID_FINISH_CALCULATE_PREVIEWSIZE:d,DID_UPDATE_ITEM_METADATA:c,DID_THROW_ITEM_LOAD_ERROR:g,DID_THROW_ITEM_PROCESSING_ERROR:g,DID_THROW_ITEM_INVALID:g,DID_COMPLETE_ITEM_PROCESSING:m,DID_START_ITEM_PROCESSING:p,DID_REVERT_ITEM_PROCESSING:p},({root:_})=>{const E=_.ref.imageViewBin.filter(v=>v.opacity===0);_.ref.imageViewBin=_.ref.imageViewBin.filter(v=>v.opacity>0),E.forEach(v=>o(_,v)),E.length=0})})},lm=e=>{const{addFilter:t,utils:n}=e,{Type:r,createRoute:i,isFile:o}=n,a=eM(e);return t("CREATE_VIEW",s=>{const{is:l,view:c,query:u}=s;if(!l("file")||!u("GET_ALLOW_IMAGE_PREVIEW"))return;const f=({root:m,props:y})=>{const{id:_}=y,E=u("GET_ITEM",_);if(!E||!o(E.file)||E.archived)return;const v=E.file;if(!ax(v)||!u("GET_IMAGE_PREVIEW_FILTER_ITEM")(E))return;const T="createImageBitmap"in(window||{}),R=u("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!T&&R&&v.size>R)return;m.ref.imagePreview=c.appendChildView(c.createChildView(a,{id:_}));const O=m.query("GET_IMAGE_PREVIEW_HEIGHT");O&&m.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:E.id,height:O});const w=!T&&v.size>u("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");m.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:_},w)},d=(m,y)=>{if(!m.ref.imagePreview)return;let{id:_}=y;const E=m.query("GET_ITEM",{id:_});if(!E)return;const v=m.query("GET_PANEL_ASPECT_RATIO"),T=m.query("GET_ITEM_PANEL_ASPECT_RATIO"),R=m.query("GET_IMAGE_PREVIEW_HEIGHT");if(v||T||R)return;let{imageWidth:O,imageHeight:w}=m.ref;if(!O||!w)return;const S=m.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),M=m.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),C=(E.getMetadata("exif")||{}).orientation||-1;if(C>=5&&C<=8&&([O,w]=[w,O]),!sm(E.file)||m.query("GET_IMAGE_PREVIEW_UPSCALE")){const N=2048/O;O*=N,w*=N}const z=w/O,L=(E.getMetadata("crop")||{}).aspectRatio||z;let q=Math.max(S,Math.min(w,M));const x=m.rect.element.width,b=Math.min(x*L,q);m.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:E.id,height:b})},h=({root:m})=>{m.ref.shouldRescale=!0},p=({root:m,action:y})=>{y.change.key==="crop"&&(m.ref.shouldRescale=!0)},g=({root:m,action:y})=>{m.ref.imageWidth=y.width,m.ref.imageHeight=y.height,m.ref.shouldRescale=!0,m.ref.shouldDrawPreview=!0,m.dispatch("KICK")};c.registerWriter(i({DID_RESIZE_ROOT:h,DID_STOP_RESIZE:h,DID_LOAD_ITEM:f,DID_IMAGE_PREVIEW_CALCULATE_SIZE:g,DID_UPDATE_ITEM_METADATA:p},({root:m,props:y})=>{!m.ref.imagePreview||m.rect.element.hidden||(m.ref.shouldRescale&&(d(m,y),m.ref.shouldRescale=!1),m.ref.shouldDrawPreview&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{m.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:y.id})})}),m.ref.shouldDrawPreview=!1))}))}),{options:{allowImagePreview:[!0,r.BOOLEAN],imagePreviewFilterItem:[()=>!0,r.FUNCTION],imagePreviewHeight:[null,r.INT],imagePreviewMinHeight:[44,r.INT],imagePreviewMaxHeight:[256,r.INT],imagePreviewMaxFileSize:[null,r.INT],imagePreviewZoomFactor:[2,r.INT],imagePreviewUpscale:[!1,r.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,r.INT],imagePreviewTransparencyIndicator:[null,r.STRING],imagePreviewCalculateAverageImageColor:[!1,r.BOOLEAN],imagePreviewMarkupShow:[!0,r.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,r.FUNCTION]}}},tM=typeof window<"u"&&typeof window.document<"u";tM&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:lm}));/*!
 * FilePondPluginImageEdit 1.6.3
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Js=e=>/^image/.test(e.type),cm=e=>{const{addFilter:t,utils:n,views:r}=e,{Type:i,createRoute:o,createItemAPI:a=u=>u}=n,{fileActionButton:s}=r;t("SHOULD_REMOVE_ON_REVERT",(u,{item:f,query:d})=>new Promise(h=>{const{file:p}=f,g=d("GET_ALLOW_IMAGE_EDIT")&&d("GET_IMAGE_EDIT_ALLOW_EDIT")&&Js(p);h(!g)})),t("DID_LOAD_ITEM",(u,{query:f,dispatch:d})=>new Promise((h,p)=>{if(u.origin>1){h(u);return}const{file:g}=u;if(!f("GET_ALLOW_IMAGE_EDIT")||!f("GET_IMAGE_EDIT_INSTANT_EDIT")){h(u);return}if(!Js(g)){h(u);return}const m=(_,E,v)=>T=>{l.shift(),T?E(_):v(_),d("KICK"),y()},y=()=>{if(!l.length)return;const{item:_,resolve:E,reject:v}=l[0];d("EDIT_ITEM",{id:_.id,handleEditorResponse:m(_,E,v)})};c({item:u,resolve:h,reject:p}),l.length===1&&y()})),t("DID_CREATE_ITEM",(u,{query:f,dispatch:d})=>{u.extend("edit",()=>{d("EDIT_ITEM",{id:u.id})})});const l=[],c=u=>(l.push(u),u);return t("CREATE_VIEW",u=>{const{is:f,view:d,query:h}=u;if(!h("GET_ALLOW_IMAGE_EDIT"))return;const p=h("GET_ALLOW_IMAGE_PREVIEW");if(!(f("file-info")&&!p||f("file")&&p))return;const m=h("GET_IMAGE_EDIT_EDITOR");if(!m)return;m.filepondCallbackBridge||(m.outputData=!0,m.outputFile=!1,m.filepondCallbackBridge={onconfirm:m.onconfirm||(()=>{}),oncancel:m.oncancel||(()=>{})});const y=({root:v,props:T,action:R})=>{const{id:O}=T,{handleEditorResponse:w}=R;m.cropAspectRatio=v.query("GET_IMAGE_CROP_ASPECT_RATIO")||m.cropAspectRatio,m.outputCanvasBackgroundColor=v.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR")||m.outputCanvasBackgroundColor;const S=v.query("GET_ITEM",O);if(!S)return;const M=S.file,P=S.getMetadata("crop"),C={center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},z=S.getMetadata("resize"),L=S.getMetadata("filter")||null,q=S.getMetadata("filters")||null,x=S.getMetadata("colors")||null,b=S.getMetadata("markup")||null,N={crop:P||C,size:z?{upscale:z.upscale,mode:z.mode,width:z.size.width,height:z.size.height}:null,filter:q?q.id||q.matrix:v.query("GET_ALLOW_IMAGE_FILTER")&&v.query("GET_IMAGE_FILTER_COLOR_MATRIX")&&!x?L:null,color:x,markup:b};m.onconfirm=({data:H})=>{const{crop:Q,size:Y,filter:oe,color:ce,colorMatrix:de,markup:B}=H,D={};if(Q&&(D.crop=Q),Y){const $=(S.getMetadata("resize")||{}).size,X={width:Y.width,height:Y.height};!(X.width&&X.height)&&$&&(X.width=$.width,X.height=$.height),(X.width||X.height)&&(D.resize={upscale:Y.upscale,mode:Y.mode,size:X})}B&&(D.markup=B),D.colors=ce,D.filters=oe,D.filter=de,S.setMetadata(D),m.filepondCallbackBridge.onconfirm(H,a(S)),w&&(m.onclose=()=>{w(!0),m.onclose=null})},m.oncancel=()=>{m.filepondCallbackBridge.oncancel(a(S)),w&&(m.onclose=()=>{w(!1),m.onclose=null})},m.open(M,N)},_=({root:v,props:T})=>{if(!h("GET_IMAGE_EDIT_ALLOW_EDIT"))return;const{id:R}=T,O=h("GET_ITEM",R);if(!O)return;const w=O.file;if(!!Js(w))if(v.ref.handleEdit=S=>{S.stopPropagation(),v.dispatch("EDIT_ITEM",{id:R})},p){const S=d.createChildView(s,{label:"edit",icon:h("GET_IMAGE_EDIT_ICON_EDIT"),opacity:0});S.element.classList.add("filepond--action-edit-item"),S.element.dataset.align=h("GET_STYLE_IMAGE_EDIT_BUTTON_EDIT_ITEM_POSITION"),S.on("click",v.ref.handleEdit),v.ref.buttonEditItem=d.appendChildView(S)}else{const S=d.element.querySelector(".filepond--file-info-main"),M=document.createElement("button");M.className="filepond--action-edit-item-alt",M.innerHTML=h("GET_IMAGE_EDIT_ICON_EDIT")+"<span>edit</span>",M.addEventListener("click",v.ref.handleEdit),S.appendChild(M),v.ref.editButton=M}};d.registerDestroyer(({root:v})=>{v.ref.buttonEditItem&&v.ref.buttonEditItem.off("click",v.ref.handleEdit),v.ref.editButton&&v.ref.editButton.removeEventListener("click",v.ref.handleEdit)});const E={EDIT_ITEM:y,DID_LOAD_ITEM:_};if(p){const v=({root:T})=>{!T.ref.buttonEditItem||(T.ref.buttonEditItem.opacity=1)};E.DID_IMAGE_PREVIEW_SHOW=v}d.registerWriter(o(E))}),{options:{allowImageEdit:[!0,i.BOOLEAN],styleImageEditButtonEditItemPosition:["bottom center",i.STRING],imageEditInstantEdit:[!1,i.BOOLEAN],imageEditAllowEdit:[!0,i.BOOLEAN],imageEditIconEdit:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false"><path d="M8.5 17h1.586l7-7L15.5 8.414l-7 7V17zm-1.707-2.707l8-8a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1 0 1.414l-8 8A1 1 0 0 1 10.5 19h-3a1 1 0 0 1-1-1v-3a1 1 0 0 1 .293-.707z" fill="currentColor" fill-rule="nonzero"/></svg>',i.STRING],imageEditEditor:[null,i.OBJECT]}}},nM=typeof window<"u"&&typeof window.document<"u";nM&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:cm}));/*!
 * FilePondPluginImageTransform 3.8.7
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const rM=e=>/^image/.test(e.type),iM=e=>e.substr(0,e.lastIndexOf("."))||e,oM={jpeg:"jpg","svg+xml":"svg"},aM=(e,t)=>{const n=iM(e),r=t.split("/")[1],i=oM[r]||r;return`${n}.${i}`},sM=e=>/jpeg|png|svg\+xml/.test(e)?e:"image/jpeg",lM=e=>/^image/.test(e.type),cM={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},uM=(e,t,n)=>(n===-1&&(n=1),cM[n](e,t)),Ji=(e,t)=>({x:e,y:t}),fM=(e,t)=>e.x*t.x+e.y*t.y,Jd=(e,t)=>Ji(e.x-t.x,e.y-t.y),dM=(e,t)=>fM(Jd(e,t),Jd(e,t)),eh=(e,t)=>Math.sqrt(dM(e,t)),th=(e,t)=>{const n=e,r=1.5707963267948966,i=t,o=1.5707963267948966-t,a=Math.sin(r),s=Math.sin(i),l=Math.sin(o),c=Math.cos(o),u=n/a,f=u*s,d=u*l;return Ji(c*f,c*d)},hM=(e,t)=>{const n=e.width,r=e.height,i=th(n,t),o=th(r,t),a=Ji(e.x+Math.abs(i.x),e.y-Math.abs(i.y)),s=Ji(e.x+e.width+Math.abs(o.y),e.y+Math.abs(o.x)),l=Ji(e.x-Math.abs(o.y),e.y+e.height-Math.abs(o.x));return{width:eh(a,s),height:eh(a,l)}},um=(e,t,n=0,r={x:.5,y:.5})=>{const i=r.x>.5?1-r.x:r.x,o=r.y>.5?1-r.y:r.y,a=i*2*e.width,s=o*2*e.height,l=hM(t,n);return Math.max(l.width/a,l.height/s)},fm=(e,t)=>{let n=e.width,r=n*t;r>e.height&&(r=e.height,n=r/t);const i=(e.width-n)*.5,o=(e.height-r)*.5;return{x:i,y:o,width:n,height:r}},nh=(e,t,n=1)=>{const r=e.height/e.width;let i=1,o=t,a=1,s=r;s>o&&(s=o,a=s/r);const l=Math.max(i/a,o/s),c=e.width/(n*l*a),u=c*t;return{width:c,height:u}},dm=e=>{e.width=1,e.height=1,e.getContext("2d").clearRect(0,0,1,1)},rh=e=>e&&(e.horizontal||e.vertical),pM=(e,t,n)=>{if(t<=1&&!rh(n))return e.width=e.naturalWidth,e.height=e.naturalHeight,e;const r=document.createElement("canvas"),i=e.naturalWidth,o=e.naturalHeight,a=t>=5&&t<=8;a?(r.width=o,r.height=i):(r.width=i,r.height=o);const s=r.getContext("2d");if(t&&s.transform.apply(s,uM(i,o,t)),rh(n)){const l=[1,0,0,1,0,0];(!a&&n.horizontal||a&n.vertical)&&(l[0]=-1,l[4]=i),(!a&&n.vertical||a&&n.horizontal)&&(l[3]=-1,l[5]=o),s.transform(...l)}return s.drawImage(e,0,0,i,o),r},gM=(e,t,n={},r={})=>{const{canvasMemoryLimit:i,background:o=null}=r,a=n.zoom||1,s=pM(e,t,n.flip),l={width:s.width,height:s.height},c=n.aspectRatio||l.height/l.width;let u=nh(l,c,a);if(i){const E=u.width*u.height;if(E>i){const v=Math.sqrt(i)/Math.sqrt(E);l.width=Math.floor(l.width*v),l.height=Math.floor(l.height*v),u=nh(l,c,a)}}const f=document.createElement("canvas"),d={x:u.width*.5,y:u.height*.5},h={x:0,y:0,width:u.width,height:u.height,center:d},p=typeof n.scaleToFit>"u"||n.scaleToFit,g=a*um(l,fm(h,c),n.rotation,p?n.center:{x:.5,y:.5});f.width=Math.round(u.width/g),f.height=Math.round(u.height/g),d.x/=g,d.y/=g;const m={x:d.x-l.width*(n.center?n.center.x:.5),y:d.y-l.height*(n.center?n.center.y:.5)},y=f.getContext("2d");o&&(y.fillStyle=o,y.fillRect(0,0,f.width,f.height)),y.translate(d.x,d.y),y.rotate(n.rotation||0),y.drawImage(s,m.x-d.x,m.y-d.y,l.width,l.height);const _=y.getImageData(0,0,f.width,f.height);return dm(f),_},mM=(()=>typeof window<"u"&&typeof window.document<"u")();mM&&(HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){var r=this.toDataURL(t,n).split(",")[1];setTimeout(function(){for(var i=atob(r),o=i.length,a=new Uint8Array(o),s=0;s<o;s++)a[s]=i.charCodeAt(s);e(new Blob([a],{type:t||"image/png"}))})}}));const EM=(e,t,n=null)=>new Promise(r=>{const i=n?n(e):e;Promise.resolve(i).then(o=>{o.toBlob(r,t.type,t.quality)})}),wa=(e,t)=>_o(e.x*t,e.y*t),Aa=(e,t)=>_o(e.x+t.x,e.y+t.y),hm=e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return t===0?{x:0,y:0}:_o(e.x/t,e.y/t)},zn=(e,t,n)=>{const r=Math.cos(t),i=Math.sin(t),o=_o(e.x-n.x,e.y-n.y);return _o(n.x+r*o.x-i*o.y,n.y+i*o.x+r*o.y)},_o=(e=0,t=0)=>({x:e,y:t}),Ze=(e,t,n=1,r)=>{if(typeof e=="string")return parseFloat(e)*n;if(typeof e=="number")return e*(r?t[r]:Math.min(t.width,t.height))},br=(e,t,n)=>{const r=e.borderStyle||e.lineStyle||"solid",i=e.backgroundColor||e.fontColor||"transparent",o=e.borderColor||e.lineColor||"transparent",a=Ze(e.borderWidth||e.lineWidth,t,n),s=e.lineCap||"round",l=e.lineJoin||"round",c=typeof r=="string"?"":r.map(f=>Ze(f,t,n)).join(","),u=e.opacity||1;return{"stroke-linecap":s,"stroke-linejoin":l,"stroke-width":a||0,"stroke-dasharray":c,stroke:o,fill:i,opacity:u}},xt=e=>e!=null,yi=(e,t,n=1)=>{let r=Ze(e.x,t,n,"width")||Ze(e.left,t,n,"width"),i=Ze(e.y,t,n,"height")||Ze(e.top,t,n,"height"),o=Ze(e.width,t,n,"width"),a=Ze(e.height,t,n,"height"),s=Ze(e.right,t,n,"width"),l=Ze(e.bottom,t,n,"height");return xt(i)||(xt(a)&&xt(l)?i=t.height-a-l:i=l),xt(r)||(xt(o)&&xt(s)?r=t.width-o-s:r=s),xt(o)||(xt(r)&&xt(s)?o=t.width-r-s:o=0),xt(a)||(xt(i)&&xt(l)?a=t.height-i-l:a=0),{x:r||0,y:i||0,width:o||0,height:a||0}},_M=e=>e.map((t,n)=>`${n===0?"M":"L"} ${t.x} ${t.y}`).join(" "),ln=(e,t)=>Object.keys(t).forEach(n=>e.setAttribute(n,t[n])),yM="http://www.w3.org/2000/svg",Vr=(e,t)=>{const n=document.createElementNS(yM,e);return t&&ln(n,t),n},vM=e=>ln(e,{...e.rect,...e.styles}),TM=e=>{const t=e.rect.x+e.rect.width*.5,n=e.rect.y+e.rect.height*.5,r=e.rect.width*.5,i=e.rect.height*.5;return ln(e,{cx:t,cy:n,rx:r,ry:i,...e.styles})},IM={contain:"xMidYMid meet",cover:"xMidYMid slice"},RM=(e,t)=>{ln(e,{...e.rect,...e.styles,preserveAspectRatio:IM[t.fit]||"none"})},wM={left:"start",center:"middle",right:"end"},AM=(e,t,n,r)=>{const i=Ze(t.fontSize,n,r),o=t.fontFamily||"sans-serif",a=t.fontWeight||"normal",s=wM[t.textAlign]||"start";ln(e,{...e.rect,...e.styles,"stroke-width":0,"font-weight":a,"font-size":i,"font-family":o,"text-anchor":s}),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},OM=(e,t,n,r)=>{ln(e,{...e.rect,...e.styles,fill:"none"});const i=e.childNodes[0],o=e.childNodes[1],a=e.childNodes[2],s=e.rect,l={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(ln(i,{x1:s.x,y1:s.y,x2:l.x,y2:l.y}),!t.lineDecoration)return;o.style.display="none",a.style.display="none";const c=hm({x:l.x-s.x,y:l.y-s.y}),u=Ze(.05,n,r);if(t.lineDecoration.indexOf("arrow-begin")!==-1){const f=wa(c,u),d=Aa(s,f),h=zn(s,2,d),p=zn(s,-2,d);ln(o,{style:"display:block;",d:`M${h.x},${h.y} L${s.x},${s.y} L${p.x},${p.y}`})}if(t.lineDecoration.indexOf("arrow-end")!==-1){const f=wa(c,-u),d=Aa(l,f),h=zn(l,2,d),p=zn(l,-2,d);ln(a,{style:"display:block;",d:`M${h.x},${h.y} L${l.x},${l.y} L${p.x},${p.y}`})}},SM=(e,t,n,r)=>{ln(e,{...e.styles,fill:"none",d:_M(t.points.map(i=>({x:Ze(i.x,n,r,"width"),y:Ze(i.y,n,r,"height")})))})},Yo=e=>t=>Vr(e,{id:t.id}),bM=e=>{const t=Vr("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=()=>{t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},CM=e=>{const t=Vr("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),n=Vr("line");t.appendChild(n);const r=Vr("path");t.appendChild(r);const i=Vr("path");return t.appendChild(i),t},xM={image:bM,rect:Yo("rect"),ellipse:Yo("ellipse"),text:Yo("text"),path:Yo("path"),line:CM},MM={rect:vM,ellipse:TM,image:RM,text:AM,path:SM,line:OM},LM=(e,t)=>xM[e](t),PM=(e,t,n,r,i)=>{t!=="path"&&(e.rect=yi(n,r,i)),e.styles=br(n,r,i),MM[t](e,n,r,i)},pm=(e,t)=>e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0,DM=(e,t={},n,r)=>new Promise(i=>{const{background:o=null}=r,a=new FileReader;a.onloadend=()=>{const s=a.result,l=document.createElement("div");l.style.cssText="position:absolute;pointer-events:none;width:0;height:0;visibility:hidden;",l.innerHTML=s;const c=l.querySelector("svg");document.body.appendChild(l);const u=c.getBBox();l.parentNode.removeChild(l);const f=l.querySelector("title"),d=c.getAttribute("viewBox")||"",h=c.getAttribute("width")||"",p=c.getAttribute("height")||"";let g=parseFloat(h)||null,m=parseFloat(p)||null;const y=(h.match(/[a-z]+/)||[])[0]||"",_=(p.match(/[a-z]+/)||[])[0]||"",E=d.split(" ").map(parseFloat),v=E.length?{x:E[0],y:E[1],width:E[2],height:E[3]}:u;let T=g!=null?g:v.width,R=m!=null?m:v.height;c.style.overflow="visible",c.setAttribute("width",T),c.setAttribute("height",R);let O="";if(n&&n.length){const de={width:T,height:R};O=n.sort(pm).reduce((B,D)=>{const $=LM(D[0],D[1]);return PM($,D[0],D[1],de),$.removeAttribute("id"),$.getAttribute("opacity")===1&&$.removeAttribute("opacity"),B+`
`+$.outerHTML+`
`},""),O=`

<g>${O.replace(/&nbsp;/g," ")}</g>

`}const w=t.aspectRatio||R/T,S=T,M=S*w,P=typeof t.scaleToFit>"u"||t.scaleToFit,C=t.center?t.center.x:.5,z=t.center?t.center.y:.5,L=um({width:T,height:R},fm({width:S,height:M},w),t.rotation,P?{x:C,y:z}:{x:.5,y:.5}),q=t.zoom*L,x=t.rotation*(180/Math.PI),b={x:S*.5,y:M*.5},N={x:b.x-T*C,y:b.y-R*z},H=[`rotate(${x} ${b.x} ${b.y})`,`translate(${b.x} ${b.y})`,`scale(${q})`,`translate(${-b.x} ${-b.y})`,`translate(${N.x} ${N.y})`],Q=t.flip&&t.flip.horizontal,Y=t.flip&&t.flip.vertical,oe=[`scale(${Q?-1:1} ${Y?-1:1})`,`translate(${Q?-T:0} ${Y?-R:0})`],ce=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="${S}${y}" height="${M}${_}" 
viewBox="0 0 ${S} ${M}" ${o?'style="background:'+o+'" ':""}
preserveAspectRatio="xMinYMin"
xmlns:xlink="http://www.w3.org/1999/xlink"
xmlns="http://www.w3.org/2000/svg">
<!-- Generated by PQINA - https://pqina.nl/ -->
<title>${f?f.textContent:""}</title>
<g transform="${H.join(" ")}">
<g transform="${oe.join(" ")}">
${c.outerHTML}${O}
</g>
</g>
</svg>`;i(ce)},a.readAsText(e)}),NM=e=>{let t;try{t=new ImageData(e.width,e.height)}catch{t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(e.data),t},GM=()=>{const e={resize:u,filter:c},t=(f,d)=>(f.forEach(h=>{d=e[h.type](d,h.data)}),d),n=(f,d)=>{let h=f.transforms,p=null;if(h.forEach(g=>{g.type==="filter"&&(p=g)}),p){let g=null;h.forEach(m=>{m.type==="resize"&&(g=m)}),g&&(g.data.matrix=p.data,h=h.filter(m=>m.type!=="filter"))}d(t(h,f.imageData))};self.onmessage=f=>{n(f.data.message,d=>{self.postMessage({id:f.data.id,message:d},[d.data.buffer])})};const r=1,i=1,o=1;function a(f,d,h){const p=d[f]/255,g=d[f+1]/255,m=d[f+2]/255,y=d[f+3]/255,_=p*h[0]+g*h[1]+m*h[2]+y*h[3]+h[4],E=p*h[5]+g*h[6]+m*h[7]+y*h[8]+h[9],v=p*h[10]+g*h[11]+m*h[12]+y*h[13]+h[14],T=p*h[15]+g*h[16]+m*h[17]+y*h[18]+h[19],R=Math.max(0,_*T)+r*(1-T),O=Math.max(0,E*T)+i*(1-T),w=Math.max(0,v*T)+o*(1-T);d[f]=Math.max(0,Math.min(1,R))*255,d[f+1]=Math.max(0,Math.min(1,O))*255,d[f+2]=Math.max(0,Math.min(1,w))*255}const s=self.JSON.stringify([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]);function l(f){return self.JSON.stringify(f||[])===s}function c(f,d){if(!d||l(d))return f;const h=f.data,p=h.length,g=d[0],m=d[1],y=d[2],_=d[3],E=d[4],v=d[5],T=d[6],R=d[7],O=d[8],w=d[9],S=d[10],M=d[11],P=d[12],C=d[13],z=d[14],L=d[15],q=d[16],x=d[17],b=d[18],N=d[19];let H=0,Q=0,Y=0,oe=0,ce=0,de=0,B=0,D=0,$=0,X=0,ne=0,ie=0;for(;H<p;H+=4)Q=h[H]/255,Y=h[H+1]/255,oe=h[H+2]/255,ce=h[H+3]/255,de=Q*g+Y*m+oe*y+ce*_+E,B=Q*v+Y*T+oe*R+ce*O+w,D=Q*S+Y*M+oe*P+ce*C+z,$=Q*L+Y*q+oe*x+ce*b+N,X=Math.max(0,de*$)+r*(1-$),ne=Math.max(0,B*$)+i*(1-$),ie=Math.max(0,D*$)+o*(1-$),h[H]=Math.max(0,Math.min(1,X))*255,h[H+1]=Math.max(0,Math.min(1,ne))*255,h[H+2]=Math.max(0,Math.min(1,ie))*255;return f}function u(f,d){let{mode:h="contain",upscale:p=!1,width:g,height:m,matrix:y}=d;if(y=!y||l(y)?null:y,!g&&!m)return c(f,y);if(g===null?g=m:m===null&&(m=g),h!=="force"){let C=g/f.width,z=m/f.height,L=1;if(h==="cover"?L=Math.max(C,z):h==="contain"&&(L=Math.min(C,z)),L>1&&p===!1)return c(f,y);g=f.width*L,m=f.height*L}const _=f.width,E=f.height,v=Math.round(g),T=Math.round(m),R=f.data,O=new Uint8ClampedArray(v*T*4),w=_/v,S=E/T,M=Math.ceil(w*.5),P=Math.ceil(S*.5);for(let C=0;C<T;C++)for(let z=0;z<v;z++){let L=(z+C*v)*4,q=0,x=0,b=0,N=0,H=0,Q=0,Y=0,oe=(C+.5)*S;for(let ce=Math.floor(C*S);ce<(C+1)*S;ce++){let de=Math.abs(oe-(ce+.5))/P,B=(z+.5)*w,D=de*de;for(let $=Math.floor(z*w);$<(z+1)*w;$++){let X=Math.abs(B-($+.5))/M,ne=Math.sqrt(D+X*X);if(ne>=-1&&ne<=1&&(q=2*ne*ne*ne-3*ne*ne+1,q>0)){X=4*($+ce*_);let ie=R[X+3];Y+=q*ie,b+=q,ie<255&&(q=q*ie/250),N+=q*R[X],H+=q*R[X+1],Q+=q*R[X+2],x+=q}}}O[L]=N/x,O[L+1]=H/x,O[L+2]=Q/x,O[L+3]=Y/b,y&&a(L,O,y)}return{data:O,width:v,height:T}}},UM=(e,t)=>{if(e.getUint32(t+4,!1)!==1165519206)return;t+=4;const n=e.getUint16(t+=6,!1)===18761;t+=e.getUint32(t+4,n);const r=e.getUint16(t,n);t+=2;for(let i=0;i<r;i++)if(e.getUint16(t+i*12,n)===274)return e.setUint16(t+i*12+8,1,n),!0;return!1},BM=e=>{const t=new DataView(e);if(t.getUint16(0)!==65496)return null;let n=2,r,i,o=!1;for(;n<t.byteLength&&(r=t.getUint16(n,!1),i=t.getUint16(n+2,!1)+2,!(!(r>=65504&&r<=65519||r===65534)||(o||(o=UM(t,n)),n+i>t.byteLength)));)n+=i;return e.slice(0,n)},VM=e=>new Promise(t=>{const n=new FileReader;n.onload=()=>t(BM(n.result)||null),n.readAsArrayBuffer(e.slice(0,256*1024))}),FM=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,kM=(e,t)=>{const n=FM();if(n){const r=new n;return r.append(e),r.getBlob(t)}return new Blob([e],{type:t})},$M=()=>Math.random().toString(36).substr(2,9),HM=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(t),r=new Worker(n),i=[];return{transfer:()=>{},post:(o,a,s)=>{const l=$M();i[l]=a,r.onmessage=c=>{const u=i[c.data.id];!u||(u(c.data.message),delete i[c.data.id])},r.postMessage({id:l,message:o},s)},terminate:()=>{r.terminate(),URL.revokeObjectURL(n)}}},zM=e=>new Promise((t,n)=>{const r=new Image;r.onload=()=>{t(r)},r.onerror=i=>{n(i)},r.src=e}),qM=e=>e.reduce((t,n)=>t.then(r=>n().then(Array.prototype.concat.bind(r))),Promise.resolve([])),WM=(e,t)=>new Promise(n=>{const r={width:e.width,height:e.height},i=e.getContext("2d"),o=t.sort(pm).map(a=>()=>new Promise(s=>{JM[a[0]](i,r,a[1],s)&&s()}));qM(o).then(()=>n(e))}),vi=(e,t)=>{e.beginPath(),e.lineCap=t["stroke-linecap"],e.lineJoin=t["stroke-linejoin"],e.lineWidth=t["stroke-width"],t["stroke-dasharray"].length&&e.setLineDash(t["stroke-dasharray"].split(",")),e.fillStyle=t.fill,e.strokeStyle=t.stroke,e.globalAlpha=t.opacity||1},Ti=e=>{e.fill(),e.stroke(),e.globalAlpha=1},YM=(e,t,n)=>{const r=yi(n,t),i=br(n,t);return vi(e,i),e.rect(r.x,r.y,r.width,r.height),Ti(e),!0},jM=(e,t,n)=>{const r=yi(n,t),i=br(n,t);vi(e,i);const o=r.x,a=r.y,s=r.width,l=r.height,c=.5522848,u=s/2*c,f=l/2*c,d=o+s,h=a+l,p=o+s/2,g=a+l/2;return e.moveTo(o,g),e.bezierCurveTo(o,g-f,p-u,a,p,a),e.bezierCurveTo(p+u,a,d,g-f,d,g),e.bezierCurveTo(d,g+f,p+u,h,p,h),e.bezierCurveTo(p-u,h,o,g+f,o,g),Ti(e),!0},XM=(e,t,n,r)=>{const i=yi(n,t),o=br(n,t);vi(e,o);const a=new Image;new URL(n.src,window.location.href).origin!==window.location.origin&&(a.crossOrigin=""),a.onload=()=>{if(n.fit==="cover"){const l=i.width/i.height,c=l>1?a.width:a.height*l,u=l>1?a.width/l:a.height,f=a.width*.5-c*.5,d=a.height*.5-u*.5;e.drawImage(a,f,d,c,u,i.x,i.y,i.width,i.height)}else if(n.fit==="contain"){const l=Math.min(i.width/a.width,i.height/a.height),c=l*a.width,u=l*a.height,f=i.x+i.width*.5-c*.5,d=i.y+i.height*.5-u*.5;e.drawImage(a,0,0,a.width,a.height,f,d,c,u)}else e.drawImage(a,0,0,a.width,a.height,i.x,i.y,i.width,i.height);Ti(e),r()},a.src=n.src},ZM=(e,t,n)=>{const r=yi(n,t),i=br(n,t);vi(e,i);const o=Ze(n.fontSize,t),a=n.fontFamily||"sans-serif",s=n.fontWeight||"normal",l=n.textAlign||"left";return e.font=`${s} ${o}px ${a}`,e.textAlign=l,e.fillText(n.text,r.x,r.y),Ti(e),!0},KM=(e,t,n)=>{const r=br(n,t);vi(e,r),e.beginPath();const i=n.points.map(a=>({x:Ze(a.x,t,1,"width"),y:Ze(a.y,t,1,"height")}));e.moveTo(i[0].x,i[0].y);const o=i.length;for(let a=1;a<o;a++)e.lineTo(i[a].x,i[a].y);return Ti(e),!0},QM=(e,t,n)=>{const r=yi(n,t),i=br(n,t);vi(e,i),e.beginPath();const o={x:r.x,y:r.y},a={x:r.x+r.width,y:r.y+r.height};e.moveTo(o.x,o.y),e.lineTo(a.x,a.y);const s=hm({x:a.x-o.x,y:a.y-o.y}),l=.04*Math.min(t.width,t.height);if(n.lineDecoration.indexOf("arrow-begin")!==-1){const c=wa(s,l),u=Aa(o,c),f=zn(o,2,u),d=zn(o,-2,u);e.moveTo(f.x,f.y),e.lineTo(o.x,o.y),e.lineTo(d.x,d.y)}if(n.lineDecoration.indexOf("arrow-end")!==-1){const c=wa(s,-l),u=Aa(a,c),f=zn(a,2,u),d=zn(a,-2,u);e.moveTo(f.x,f.y),e.lineTo(a.x,a.y),e.lineTo(d.x,d.y)}return Ti(e),!0},JM={rect:YM,ellipse:jM,image:XM,text:ZM,line:QM,path:KM},eL=e=>{const t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e,0,0),t},tL=(e,t,n={})=>new Promise((r,i)=>{if(!e||!lM(e))return i({status:"not an image file",file:e});const{stripImageHead:o,beforeCreateBlob:a,afterCreateBlob:s,canvasMemoryLimit:l}=n,{crop:c,size:u,filter:f,markup:d,output:h}=t,p=t.image&&t.image.orientation?Math.max(1,Math.min(8,t.image.orientation)):null,g=h&&h.quality,m=g===null?null:g/100,y=h&&h.type||null,_=h&&h.background||null,E=[];u&&(typeof u.width=="number"||typeof u.height=="number")&&E.push({type:"resize",data:u}),f&&f.length===20&&E.push({type:"filter",data:f});const v=O=>{const w=s?s(O):O;Promise.resolve(w).then(r)},T=(O,w)=>{const S=eL(O),M=d.length?WM(S,d):S;Promise.resolve(M).then(P=>{EM(P,w,a).then(C=>{if(dm(P),o)return v(C);VM(e).then(z=>{z!==null&&(C=new Blob([z,C.slice(20)],{type:C.type})),v(C)})}).catch(i)})};if(/svg/.test(e.type)&&y===null)return DM(e,c,d,{background:_}).then(O=>{r(kM(O,"image/svg+xml"))});const R=URL.createObjectURL(e);zM(R).then(O=>{URL.revokeObjectURL(R);const w=gM(O,p,c,{canvasMemoryLimit:l,background:_}),S={quality:m,type:y||e.type};if(!E.length)return T(w,S);const M=HM(GM);M.post({transforms:E,imageData:w},P=>{T(NM(P),S),M.terminate()},[w.data.buffer])}).catch(i)}),nL=["x","y","left","top","right","bottom","width","height"],rL=e=>typeof e=="string"&&/%/.test(e)?parseFloat(e)/100:e,iL=e=>{const[t,n]=e,r=n.points?{}:nL.reduce((i,o)=>(i[o]=rL(n[o]),i),{});return[t,{zIndex:0,...n,...r}]},oL=e=>new Promise((t,n)=>{const r=new Image;r.src=URL.createObjectURL(e);const i=()=>{const a=r.naturalWidth,s=r.naturalHeight;!(a&&s)||(URL.revokeObjectURL(r.src),clearInterval(o),t({width:a,height:s}))};r.onerror=a=>{URL.revokeObjectURL(r.src),clearInterval(o),n(a)};const o=setInterval(i,1);i()});typeof window<"u"&&typeof window.document<"u"&&(HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){const r=this;setTimeout(()=>{const i=r.toDataURL(t,n).split(",")[1],o=atob(i);let a=o.length;const s=new Uint8Array(a);for(;a--;)s[a]=o.charCodeAt(a);e(new Blob([s],{type:t||"image/png"}))})}}));const Uc=typeof window<"u"&&typeof window.document<"u",aL=Uc&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,gm=({addFilter:e,utils:t})=>{const{Type:n,forin:r,getFileFromBlob:i,isFile:o}=t,a=["crop","resize","filter","markup","output"],s=u=>(f,d,h)=>f(d,u?u(h):h),l=u=>u.aspectRatio===null&&u.rotation===0&&u.zoom===1&&u.center&&u.center.x===.5&&u.center.y===.5&&u.flip&&u.flip.horizontal===!1&&u.flip.vertical===!1;e("SHOULD_PREPARE_OUTPUT",(u,{query:f})=>new Promise(d=>{d(!f("IS_ASYNC"))}));const c=(u,f,d)=>new Promise(h=>{if(!u("GET_ALLOW_IMAGE_TRANSFORM")||d.archived||!o(f)||!rM(f))return h(!1);oL(f).then(()=>{const p=u("GET_IMAGE_TRANSFORM_IMAGE_FILTER");if(p){const g=p(f);if(g==null)return handleRevert(!0);if(typeof g=="boolean")return h(g);if(typeof g.then=="function")return g.then(h)}h(!0)}).catch(p=>{h(!1)})});return e("DID_CREATE_ITEM",(u,{query:f,dispatch:d})=>{!f("GET_ALLOW_IMAGE_TRANSFORM")||u.extend("requestPrepare",()=>new Promise((h,p)=>{d("REQUEST_PREPARE_OUTPUT",{query:u.id,item:u,success:h,failure:p},!0)}))}),e("PREPARE_OUTPUT",(u,{query:f,item:d})=>new Promise(h=>{c(f,u,d).then(p=>{if(!p)return h(u);const g=[];f("GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_ORIGINAL")&&g.push(()=>new Promise(w=>{w({name:f("GET_IMAGE_TRANSFORM_VARIANTS_ORIGINAL_NAME"),file:u})})),f("GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_DEFAULT")&&g.push((w,S,M)=>new Promise(P=>{w(S,M).then(C=>P({name:f("GET_IMAGE_TRANSFORM_VARIANTS_DEFAULT_NAME"),file:C}))}));const m=f("GET_IMAGE_TRANSFORM_VARIANTS")||{};r(m,(w,S)=>{const M=s(S);g.push((P,C,z)=>new Promise(L=>{M(P,C,z).then(q=>L({name:w,file:q}))}))});const y=f("GET_IMAGE_TRANSFORM_OUTPUT_QUALITY"),_=f("GET_IMAGE_TRANSFORM_OUTPUT_QUALITY_MODE"),E=y===null?null:y/100,v=f("GET_IMAGE_TRANSFORM_OUTPUT_MIME_TYPE"),T=f("GET_IMAGE_TRANSFORM_CLIENT_TRANSFORMS")||a;d.setMetadata("output",{type:v,quality:E,client:T},!0);const R=(w,S)=>new Promise((M,P)=>{const C={...S};Object.keys(C).filter(Y=>Y!=="exif").forEach(Y=>{T.indexOf(Y)===-1&&delete C[Y]});const{resize:z,exif:L,output:q,crop:x,filter:b,markup:N}=C,H={image:{orientation:L?L.orientation:null},output:q&&(q.type||typeof q.quality=="number"||q.background)?{type:q.type,quality:typeof q.quality=="number"?q.quality*100:null,background:q.background||f("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR")||null}:void 0,size:z&&(z.size.width||z.size.height)?{mode:z.mode,upscale:z.upscale,...z.size}:void 0,crop:x&&!l(x)?{...x}:void 0,markup:N&&N.length?N.map(iL):[],filter:b};if(H.output){const Y=q.type?q.type!==w.type:!1,oe=/\/jpe?g$/.test(w.type),ce=q.quality!==null?oe&&_==="always":!1;if(!!!(H.size||H.crop||H.filter||Y||ce))return M(w)}const Q={beforeCreateBlob:f("GET_IMAGE_TRANSFORM_BEFORE_CREATE_BLOB"),afterCreateBlob:f("GET_IMAGE_TRANSFORM_AFTER_CREATE_BLOB"),canvasMemoryLimit:f("GET_IMAGE_TRANSFORM_CANVAS_MEMORY_LIMIT"),stripImageHead:f("GET_IMAGE_TRANSFORM_OUTPUT_STRIP_IMAGE_HEAD")};tL(w,H,Q).then(Y=>{const oe=i(Y,aM(w.name,sM(Y.type)));M(oe)}).catch(P)}),O=g.map(w=>w(R,u,d.getMetadata()));Promise.all(O).then(w=>{h(w.length===1&&w[0].name===null?w[0].file:w)})})})),{options:{allowImageTransform:[!0,n.BOOLEAN],imageTransformImageFilter:[null,n.FUNCTION],imageTransformOutputMimeType:[null,n.STRING],imageTransformOutputQuality:[null,n.INT],imageTransformOutputStripImageHead:[!0,n.BOOLEAN],imageTransformClientTransforms:[null,n.ARRAY],imageTransformOutputQualityMode:["always",n.STRING],imageTransformVariants:[null,n.OBJECT],imageTransformVariantsIncludeDefault:[!0,n.BOOLEAN],imageTransformVariantsDefaultName:[null,n.STRING],imageTransformVariantsIncludeOriginal:[!1,n.BOOLEAN],imageTransformVariantsOriginalName:["original_",n.STRING],imageTransformBeforeCreateBlob:[null,n.FUNCTION],imageTransformAfterCreateBlob:[null,n.FUNCTION],imageTransformCanvasMemoryLimit:[Uc&&aL?4096*4096:null,n.INT],imageTransformCanvasBackgroundColor:[null,n.STRING]}}};Uc&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:gm}));const sL=ox(lm,cm,gm),lL={components:{FilePond:sL,icon:vo},props:{content:{type:Object}},data:function(){return{videoInput:"",myDoka:na({}),gallery_server:{process:(e,t,n,r,i,o,a,s)=>{const l=new FormData;l.append("Image",t),U1(l).then(c=>{r(c);const u=this.$refs.gallery_pond.prepareFiles();this.content.image,u.then(f=>{this.childMethod(f)})}).catch(c=>{console.log(c),c("Error uploading file")})}}}},methods:{childMethod(e){this.content.image=e.map(t=>t.file.serverId)},child(e){this.content.image=e.map(t=>t.serverId)},galleryUpdate(e,t,n){this.child(e)},galleryReorderFiles(e,t,n){this.child(e)}}},cL={colspan:"2"},uL={colspan:"2"};function fL(e,t,n,r,i,o){const a=Pe("file-pond");return Oe(),Ce("table",null,[F("tbody",null,[F("tr",null,[F("td",cL,[F("h2",null,kn(n.content.headlight),1)])]),F("tr",null,[F("td",uL,[pe(a,{class:"file-multi","label-idle":"<span class='filepond--label-action'>\uC5C5\uB85C\uB4DC \uD558\uB824\uBA74 \uD074\uB9AD</span> \uB610\uB294 \uB4DC\uB798\uADF8 \uC564 \uB4DC\uB86D",ref:"gallery_pond",allowMultiple:!0,allowReorder:!0,itemInsertLocation:e.before,server:e.gallery_server,imageEditEditor:e.myDoka,onUpdatefiles:o.galleryUpdate,onReorderfiles:o.galleryReorderFiles},null,8,["itemInsertLocation","server","imageEditEditor","onUpdatefiles","onReorderfiles"])])]),F("tr",null,[F("td",null,[Qr(F("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>n.content.title=s)},null,512),[[ti,n.content.title]])]),F("td",null,[Qr(F("textarea",{"onUpdate:modelValue":t[1]||(t[1]=s=>n.content.detail=s),cols:"30",rows:"1",name:"text",oninput:'this.style.height = ""; this.style.height = this.scrollHeight + "px"'},null,512),[[ti,n.content.detail]])])])])])}const mm=Ke(lL,[["render",fL]]);const dL={components:{ContentView:mm,icon:vo,Save:Pp,Plus:Dp,Close:Np},data(){return{imageCount:10,imagePath:"./assets/image/image-",imageExtension:".jpg",photo:"",subject:"",date:"",contents:[{image:[],headlight:"\uC0AC\uC9C4 1",title:"\uD604\uC7A5\uC124\uBA85",detail:""},{image:[],headlight:"\uC0AC\uC9C4 2",title:"\uD604\uC7A5\uC124\uBA85",detail:""},{image:[],headlight:"\uC0AC\uC9C4 3",title:"\uD604\uC7A5\uC124\uBA85",detail:""},{image:[],headlight:"\uC0AC\uC9C4 4",title:"\uBC30\uD3EC\uC790\uB8CC",detail:""}]}},methods:{addContent(){const t=`\uC0AC\uC9C4 ${this.contents.length+1}`;this.contents.push({image:[],headlight:t,title:"",detail:""})},removeContent(e){this.contents.splice(e,1)},handleSubmit(e){e.preventDefault();const t=new FormData,n=this.subject,r=this.date,i=this.photo,o=JSON.stringify(this.contents);console.log("contentsString",o),t.append("photo",i),t.append("subject",n),t.append("date",r),t.append("contents",o),console.log(t),Fv(t).then(a=>{this.$router.push({path:"/"})})}},mounted(){console.log("\uD604\uC7AC\uB0A0\uC9DC",this.date);const e=new Date,t=e.getFullYear(),n=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0");this.date=`${t}-${n}-${r}`;const i=Math.floor(Math.random()*this.imageCount)+1,o=this.imagePath+i+this.imageExtension;this.photo=o}},Em=e=>(Da("data-v-d6e9480e"),e=e(),Na(),e),hL={class:"v-sheet"},pL={class:"fixed_button__wrap"},gL={class:"create__wrap"},mL={class:"create__header"},EL=Em(()=>F("td",null,[F("p",null,"\uC9C0\uB3C4\uC77C\uC790")],-1)),_L=Em(()=>F("td",null,[F("p",null,"\uD604\uC7A5\uBA85")],-1)),yL={class:"write__wrap"},vL=["onClick"];function TL(e,t,n,r,i,o){const a=Pe("Plus"),s=Pe("icon"),l=Pe("Save"),c=Pe("ContentView"),u=Pe("Close");return Oe(),Ce("div",hL,[F("div",pL,[F("button",{class:"add_button",onClick:t[0]||(t[0]=(...f)=>o.addContent&&o.addContent(...f))},[pe(s,{icon:"Plus"},{default:et(()=>[pe(a)]),_:1}),Wt("\uCD94\uAC00")]),F("button",{class:"save_button",onClick:t[1]||(t[1]=(...f)=>o.handleSubmit&&o.handleSubmit(...f))},[pe(s,{icon:"Save"},{default:et(()=>[pe(l)]),_:1}),Wt("\uC800\uC7A5")])]),F("div",gL,[F("div",mL,[F("table",null,[F("tbody",null,[F("tr",null,[EL,F("td",null,[Qr(F("input",{style:{width:"70%"},type:"date",label:"date","onUpdate:modelValue":t[2]||(t[2]=f=>i.date=f)},null,512),[[ti,i.date]])])])])]),F("table",null,[F("tbody",null,[F("tr",null,[_L,F("td",null,[Qr(F("input",{type:"text",label:"subject","onUpdate:modelValue":t[3]||(t[3]=f=>i.subject=f)},null,512),[[ti,i.subject]])])])])])]),F("div",yL,[(Oe(!0),Ce(Me,null,io(i.contents,(f,d)=>(Oe(),Ce("div",{class:"write__content",key:d},[pe(c,{content:f},null,8,["content"]),F("button",{class:"close_button",onClick:h=>o.removeContent(d)},[pe(s,{icon:"Close"},{default:et(()=>[pe(u)]),_:1}),Wt("\uC0AD\uC81C")],8,vL)]))),128))])])])}const IL=Ke(dL,[["render",TL],["__scopeId","data-v-d6e9480e"]]);const RL={components:{ContentView:mm,icon:vo,Save:Pp,Plus:Dp,Close:Np},data(){return{postData:null}},methods:{addContent(){const t=`\uC0AC\uC9C4 ${this.postData.contents.length+1}`;this.postData.contents.push({image:[],headlight:t,title:"",detail:""})},removeContent(e){this.postData.contents.splice(e,1)},handleSubmit(e){e.preventDefault();const t=new FormData,n=this.postData.subject,r=this.postData.date,i=this.$route.params.id,o=JSON.stringify(this.postData.contents);t.append("subject",n),t.append("date",r),t.append("contents",o),kv(i,t).then(a=>{this.$router.push({path:"/"})})}},created(){const e=this.$route.params.id;Lp(e).then(t=>{this.postData=t})}},_m=e=>(Da("data-v-00e1f170"),e=e(),Na(),e),wL={key:0,class:"v-sheet"},AL={class:"fixed_button__wrap"},OL={class:"create__wrap"},SL={class:"create__header"},bL=_m(()=>F("td",null,[F("p",null,"\uC9C0\uB3C4\uC77C\uC790")],-1)),CL=_m(()=>F("td",null,[F("p",null,"\uD604\uC7A5\uBA85")],-1)),xL={class:"write__wrap"},ML=["onClick"];function LL(e,t,n,r,i,o){const a=Pe("Plus"),s=Pe("icon"),l=Pe("Save"),c=Pe("ContentView"),u=Pe("Close");return i.postData?(Oe(),Ce("div",wL,[F("div",AL,[F("button",{class:"add_button",onClick:t[0]||(t[0]=(...f)=>o.addContent&&o.addContent(...f))},[pe(s,{icon:"Plus"},{default:et(()=>[pe(a)]),_:1}),Wt("\uCD94\uAC00")]),F("button",{class:"save_button",onClick:t[1]||(t[1]=(...f)=>o.handleSubmit&&o.handleSubmit(...f))},[pe(s,{icon:"Save"},{default:et(()=>[pe(l)]),_:1}),Wt("\uC800\uC7A5")])]),F("div",OL,[F("div",SL,[F("table",null,[F("tbody",null,[F("tr",null,[bL,F("td",null,[Qr(F("input",{style:{width:"70%"},type:"text","onUpdate:modelValue":t[2]||(t[2]=f=>i.postData.date=f)},null,512),[[ti,i.postData.date]])])])])]),F("table",null,[F("tbody",null,[F("tr",null,[CL,F("td",null,[Qr(F("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=f=>i.postData.subject=f)},null,512),[[ti,i.postData.subject]])])])])])]),F("div",xL,[(Oe(!0),Ce(Me,null,io(i.postData.contents,(f,d)=>(Oe(),Ce("div",{class:"write__content",key:d},[pe(c,{content:f},null,8,["content"]),F("button",{class:"close_button",onClick:h=>o.removeContent(d)},[pe(s,{icon:"Close"},{default:et(()=>[pe(u)]),_:1}),Wt("\uC0AD\uC81C")],8,ML)]))),128))])])])):Qh("",!0)}const PL=Ke(RL,[["render",LL],["__scopeId","data-v-00e1f170"]]),DL=$0({history:a0(),routes:[{path:"/",name:"MainView",component:Yv},{path:"/post/:id",name:"DetailView",component:R1},{path:"/post/create",name:"CreateView",component:IL},{path:"/post/:id/edit",name:"EditView",component:PL}]});function NL(e){e.use(DL)}const Bc=k_(Ry);Bc.config.globalProperties.$http=Ar;NL(Bc);Bc.mount("#app");
